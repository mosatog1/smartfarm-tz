function ZA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function F1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wp={exports:{}},Wl={},xp={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h_;function eC(){if(h_)return Ve;h_=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),w=Symbol.iterator;function x(B){return B===null||typeof B!="object"?null:(B=w&&B[w]||B["@@iterator"],typeof B=="function"?B:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,j={};function R(B,ee,ye){this.props=B,this.context=ee,this.refs=j,this.updater=ye||C}R.prototype.isReactComponent={},R.prototype.setState=function(B,ee){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,ee,"setState")},R.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function M(){}M.prototype=R.prototype;function U(B,ee,ye){this.props=B,this.context=ee,this.refs=j,this.updater=ye||C}var z=U.prototype=new M;z.constructor=U,D(z,R.prototype),z.isPureReactComponent=!0;var G=Array.isArray,X=Object.prototype.hasOwnProperty,J={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function b(B,ee,ye){var Pe,Ne={},Le=null,ze=null;if(ee!=null)for(Pe in ee.ref!==void 0&&(ze=ee.ref),ee.key!==void 0&&(Le=""+ee.key),ee)X.call(ee,Pe)&&!N.hasOwnProperty(Pe)&&(Ne[Pe]=ee[Pe]);var He=arguments.length-2;if(He===1)Ne.children=ye;else if(1<He){for(var Ge=Array(He),Nt=0;Nt<He;Nt++)Ge[Nt]=arguments[Nt+2];Ne.children=Ge}if(B&&B.defaultProps)for(Pe in He=B.defaultProps,He)Ne[Pe]===void 0&&(Ne[Pe]=He[Pe]);return{$$typeof:t,type:B,key:Le,ref:ze,props:Ne,_owner:J.current}}function A(B,ee){return{$$typeof:t,type:B.type,key:ee,ref:B.ref,props:B.props,_owner:B._owner}}function I(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function V(B){var ee={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ye){return ee[ye]})}var F=/\/+/g;function P(B,ee){return typeof B=="object"&&B!==null&&B.key!=null?V(""+B.key):ee.toString(36)}function Ie(B,ee,ye,Pe,Ne){var Le=typeof B;(Le==="undefined"||Le==="boolean")&&(B=null);var ze=!1;if(B===null)ze=!0;else switch(Le){case"string":case"number":ze=!0;break;case"object":switch(B.$$typeof){case t:case e:ze=!0}}if(ze)return ze=B,Ne=Ne(ze),B=Pe===""?"."+P(ze,0):Pe,G(Ne)?(ye="",B!=null&&(ye=B.replace(F,"$&/")+"/"),Ie(Ne,ee,ye,"",function(Nt){return Nt})):Ne!=null&&(I(Ne)&&(Ne=A(Ne,ye+(!Ne.key||ze&&ze.key===Ne.key?"":(""+Ne.key).replace(F,"$&/")+"/")+B)),ee.push(Ne)),1;if(ze=0,Pe=Pe===""?".":Pe+":",G(B))for(var He=0;He<B.length;He++){Le=B[He];var Ge=Pe+P(Le,He);ze+=Ie(Le,ee,ye,Ge,Ne)}else if(Ge=x(B),typeof Ge=="function")for(B=Ge.call(B),He=0;!(Le=B.next()).done;)Le=Le.value,Ge=Pe+P(Le,He++),ze+=Ie(Le,ee,ye,Ge,Ne);else if(Le==="object")throw ee=String(B),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return ze}function Ue(B,ee,ye){if(B==null)return B;var Pe=[],Ne=0;return Ie(B,Pe,"","",function(Le){return ee.call(ye,Le,Ne++)}),Pe}function yt(B){if(B._status===-1){var ee=B._result;ee=ee(),ee.then(function(ye){(B._status===0||B._status===-1)&&(B._status=1,B._result=ye)},function(ye){(B._status===0||B._status===-1)&&(B._status=2,B._result=ye)}),B._status===-1&&(B._status=0,B._result=ee)}if(B._status===1)return B._result.default;throw B._result}var xe={current:null},H={transition:null},oe={ReactCurrentDispatcher:xe,ReactCurrentBatchConfig:H,ReactCurrentOwner:J};function le(){throw Error("act(...) is not supported in production builds of React.")}return Ve.Children={map:Ue,forEach:function(B,ee,ye){Ue(B,function(){ee.apply(this,arguments)},ye)},count:function(B){var ee=0;return Ue(B,function(){ee++}),ee},toArray:function(B){return Ue(B,function(ee){return ee})||[]},only:function(B){if(!I(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Ve.Component=R,Ve.Fragment=n,Ve.Profiler=i,Ve.PureComponent=U,Ve.StrictMode=r,Ve.Suspense=f,Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oe,Ve.act=le,Ve.cloneElement=function(B,ee,ye){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var Pe=D({},B.props),Ne=B.key,Le=B.ref,ze=B._owner;if(ee!=null){if(ee.ref!==void 0&&(Le=ee.ref,ze=J.current),ee.key!==void 0&&(Ne=""+ee.key),B.type&&B.type.defaultProps)var He=B.type.defaultProps;for(Ge in ee)X.call(ee,Ge)&&!N.hasOwnProperty(Ge)&&(Pe[Ge]=ee[Ge]===void 0&&He!==void 0?He[Ge]:ee[Ge])}var Ge=arguments.length-2;if(Ge===1)Pe.children=ye;else if(1<Ge){He=Array(Ge);for(var Nt=0;Nt<Ge;Nt++)He[Nt]=arguments[Nt+2];Pe.children=He}return{$$typeof:t,type:B.type,key:Ne,ref:Le,props:Pe,_owner:ze}},Ve.createContext=function(B){return B={$$typeof:l,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:a,_context:B},B.Consumer=B},Ve.createElement=b,Ve.createFactory=function(B){var ee=b.bind(null,B);return ee.type=B,ee},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(B){return{$$typeof:h,render:B}},Ve.isValidElement=I,Ve.lazy=function(B){return{$$typeof:g,_payload:{_status:-1,_result:B},_init:yt}},Ve.memo=function(B,ee){return{$$typeof:p,type:B,compare:ee===void 0?null:ee}},Ve.startTransition=function(B){var ee=H.transition;H.transition={};try{B()}finally{H.transition=ee}},Ve.unstable_act=le,Ve.useCallback=function(B,ee){return xe.current.useCallback(B,ee)},Ve.useContext=function(B){return xe.current.useContext(B)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(B){return xe.current.useDeferredValue(B)},Ve.useEffect=function(B,ee){return xe.current.useEffect(B,ee)},Ve.useId=function(){return xe.current.useId()},Ve.useImperativeHandle=function(B,ee,ye){return xe.current.useImperativeHandle(B,ee,ye)},Ve.useInsertionEffect=function(B,ee){return xe.current.useInsertionEffect(B,ee)},Ve.useLayoutEffect=function(B,ee){return xe.current.useLayoutEffect(B,ee)},Ve.useMemo=function(B,ee){return xe.current.useMemo(B,ee)},Ve.useReducer=function(B,ee,ye){return xe.current.useReducer(B,ee,ye)},Ve.useRef=function(B){return xe.current.useRef(B)},Ve.useState=function(B){return xe.current.useState(B)},Ve.useSyncExternalStore=function(B,ee,ye){return xe.current.useSyncExternalStore(B,ee,ye)},Ve.useTransition=function(){return xe.current.useTransition()},Ve.version="18.3.1",Ve}var d_;function ug(){return d_||(d_=1,xp.exports=eC()),xp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f_;function tC(){if(f_)return Wl;f_=1;var t=ug(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(h,f,p){var g,w={},x=null,C=null;p!==void 0&&(x=""+p),f.key!==void 0&&(x=""+f.key),f.ref!==void 0&&(C=f.ref);for(g in f)r.call(f,g)&&!a.hasOwnProperty(g)&&(w[g]=f[g]);if(h&&h.defaultProps)for(g in f=h.defaultProps,f)w[g]===void 0&&(w[g]=f[g]);return{$$typeof:e,type:h,key:x,ref:C,props:w,_owner:i.current}}return Wl.Fragment=n,Wl.jsx=l,Wl.jsxs=l,Wl}var p_;function nC(){return p_||(p_=1,wp.exports=tC()),wp.exports}var y=nC(),O=ug();const U1=F1(O),rC=ZA({__proto__:null,default:U1},[O]);var lh={},Tp={exports:{}},gn={},Ep={exports:{}},Sp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m_;function sC(){return m_||(m_=1,function(t){function e(H,oe){var le=H.length;H.push(oe);e:for(;0<le;){var B=le-1>>>1,ee=H[B];if(0<i(ee,oe))H[B]=oe,H[le]=ee,le=B;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var oe=H[0],le=H.pop();if(le!==oe){H[0]=le;e:for(var B=0,ee=H.length,ye=ee>>>1;B<ye;){var Pe=2*(B+1)-1,Ne=H[Pe],Le=Pe+1,ze=H[Le];if(0>i(Ne,le))Le<ee&&0>i(ze,Ne)?(H[B]=ze,H[Le]=le,B=Le):(H[B]=Ne,H[Pe]=le,B=Pe);else if(Le<ee&&0>i(ze,le))H[B]=ze,H[Le]=le,B=Le;else break e}}return oe}function i(H,oe){var le=H.sortIndex-oe.sortIndex;return le!==0?le:H.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var f=[],p=[],g=1,w=null,x=3,C=!1,D=!1,j=!1,R=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(H){for(var oe=n(p);oe!==null;){if(oe.callback===null)r(p);else if(oe.startTime<=H)r(p),oe.sortIndex=oe.expirationTime,e(f,oe);else break;oe=n(p)}}function G(H){if(j=!1,z(H),!D)if(n(f)!==null)D=!0,yt(X);else{var oe=n(p);oe!==null&&xe(G,oe.startTime-H)}}function X(H,oe){D=!1,j&&(j=!1,M(b),b=-1),C=!0;var le=x;try{for(z(oe),w=n(f);w!==null&&(!(w.expirationTime>oe)||H&&!V());){var B=w.callback;if(typeof B=="function"){w.callback=null,x=w.priorityLevel;var ee=B(w.expirationTime<=oe);oe=t.unstable_now(),typeof ee=="function"?w.callback=ee:w===n(f)&&r(f),z(oe)}else r(f);w=n(f)}if(w!==null)var ye=!0;else{var Pe=n(p);Pe!==null&&xe(G,Pe.startTime-oe),ye=!1}return ye}finally{w=null,x=le,C=!1}}var J=!1,N=null,b=-1,A=5,I=-1;function V(){return!(t.unstable_now()-I<A)}function F(){if(N!==null){var H=t.unstable_now();I=H;var oe=!0;try{oe=N(!0,H)}finally{oe?P():(J=!1,N=null)}}else J=!1}var P;if(typeof U=="function")P=function(){U(F)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,Ue=Ie.port2;Ie.port1.onmessage=F,P=function(){Ue.postMessage(null)}}else P=function(){R(F,0)};function yt(H){N=H,J||(J=!0,P())}function xe(H,oe){b=R(function(){H(t.unstable_now())},oe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_continueExecution=function(){D||C||(D=!0,yt(X))},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(H){switch(x){case 1:case 2:case 3:var oe=3;break;default:oe=x}var le=x;x=oe;try{return H()}finally{x=le}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(H,oe){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var le=x;x=H;try{return oe()}finally{x=le}},t.unstable_scheduleCallback=function(H,oe,le){var B=t.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?B+le:B):le=B,H){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=le+ee,H={id:g++,callback:oe,priorityLevel:H,startTime:le,expirationTime:ee,sortIndex:-1},le>B?(H.sortIndex=le,e(p,H),n(f)===null&&H===n(p)&&(j?(M(b),b=-1):j=!0,xe(G,le-B))):(H.sortIndex=ee,e(f,H),D||C||(D=!0,yt(X))),H},t.unstable_shouldYield=V,t.unstable_wrapCallback=function(H){var oe=x;return function(){var le=x;x=oe;try{return H.apply(this,arguments)}finally{x=le}}}}(Sp)),Sp}var g_;function iC(){return g_||(g_=1,Ep.exports=sC()),Ep.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y_;function oC(){if(y_)return gn;y_=1;var t=ug(),e=iC();function n(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(s,o){l(s,o),l(s+"Capture",o)}function l(s,o){for(i[s]=o,s=0;s<o.length;s++)r.add(o[s])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},w={};function x(s){return f.call(w,s)?!0:f.call(g,s)?!1:p.test(s)?w[s]=!0:(g[s]=!0,!1)}function C(s,o,u,d){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function D(s,o,u,d){if(o===null||typeof o>"u"||C(s,o,u,d))return!0;if(d)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function j(s,o,u,d,m,_,E){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=m,this.mustUseProperty=u,this.propertyName=s,this.type=o,this.sanitizeURL=_,this.removeEmptyString=E}var R={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){R[s]=new j(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];R[o]=new j(o,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){R[s]=new j(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){R[s]=new j(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){R[s]=new j(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){R[s]=new j(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){R[s]=new j(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){R[s]=new j(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){R[s]=new j(s,5,!1,s.toLowerCase(),null,!1,!1)});var M=/[\-:]([a-z])/g;function U(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(M,U);R[o]=new j(o,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(M,U);R[o]=new j(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(M,U);R[o]=new j(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){R[s]=new j(s,1,!1,s.toLowerCase(),null,!1,!1)}),R.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){R[s]=new j(s,1,!1,s.toLowerCase(),null,!0,!0)});function z(s,o,u,d){var m=R.hasOwnProperty(o)?R[o]:null;(m!==null?m.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(D(o,u,m,d)&&(u=null),d||m===null?x(o)&&(u===null?s.removeAttribute(o):s.setAttribute(o,""+u)):m.mustUseProperty?s[m.propertyName]=u===null?m.type===3?!1:"":u:(o=m.attributeName,d=m.attributeNamespace,u===null?s.removeAttribute(o):(m=m.type,u=m===3||m===4&&u===!0?"":""+u,d?s.setAttributeNS(d,o,u):s.setAttribute(o,u))))}var G=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,X=Symbol.for("react.element"),J=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),V=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),Ie=Symbol.for("react.suspense_list"),Ue=Symbol.for("react.memo"),yt=Symbol.for("react.lazy"),xe=Symbol.for("react.offscreen"),H=Symbol.iterator;function oe(s){return s===null||typeof s!="object"?null:(s=H&&s[H]||s["@@iterator"],typeof s=="function"?s:null)}var le=Object.assign,B;function ee(s){if(B===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);B=o&&o[1]||""}return`
`+B+s}var ye=!1;function Pe(s,o){if(!s||ye)return"";ye=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(Q){var d=Q}Reflect.construct(s,[],o)}else{try{o.call()}catch(Q){d=Q}s.call(o.prototype)}else{try{throw Error()}catch(Q){d=Q}s()}}catch(Q){if(Q&&d&&typeof Q.stack=="string"){for(var m=Q.stack.split(`
`),_=d.stack.split(`
`),E=m.length-1,k=_.length-1;1<=E&&0<=k&&m[E]!==_[k];)k--;for(;1<=E&&0<=k;E--,k--)if(m[E]!==_[k]){if(E!==1||k!==1)do if(E--,k--,0>k||m[E]!==_[k]){var L=`
`+m[E].replace(" at new "," at ");return s.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",s.displayName)),L}while(1<=E&&0<=k);break}}}finally{ye=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?ee(s):""}function Ne(s){switch(s.tag){case 5:return ee(s.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return s=Pe(s.type,!1),s;case 11:return s=Pe(s.type.render,!1),s;case 1:return s=Pe(s.type,!0),s;default:return""}}function Le(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case N:return"Fragment";case J:return"Portal";case A:return"Profiler";case b:return"StrictMode";case P:return"Suspense";case Ie:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case V:return(s.displayName||"Context")+".Consumer";case I:return(s._context.displayName||"Context")+".Provider";case F:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case Ue:return o=s.displayName||null,o!==null?o:Le(s.type)||"Memo";case yt:o=s._payload,s=s._init;try{return Le(s(o))}catch{}}return null}function ze(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Le(o);case 8:return o===b?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function He(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ge(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Nt(s){var o=Ge(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),d=""+s[o];if(!s.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,_=u.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return m.call(this)},set:function(E){d=""+E,_.call(this,E)}}),Object.defineProperty(s,o,{enumerable:u.enumerable}),{getValue:function(){return d},setValue:function(E){d=""+E},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function Fr(s){s._valueTracker||(s._valueTracker=Nt(s))}function _o(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var u=o.getValue(),d="";return s&&(d=Ge(s)?s.checked?"true":"false":s.value),s=d,s!==u?(o.setValue(s),!0):!1}function gs(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function gi(s,o){var u=o.checked;return le({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function wo(s,o){var u=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;u=He(o.value!=null?o.value:u),s._wrapperState={initialChecked:d,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Ya(s,o){o=o.checked,o!=null&&z(s,"checked",o,!1)}function Ja(s,o){Ya(s,o);var u=He(o.value),d=o.type;if(u!=null)d==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(d==="submit"||d==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?xo(s,o.type,u):o.hasOwnProperty("defaultValue")&&xo(s,o.type,He(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function Ku(s,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,u||o===s.value||(s.value=o),s.defaultValue=o}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function xo(s,o,u){(o!=="number"||gs(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var Ur=Array.isArray;function $r(s,o,u,d){if(s=s.options,o){o={};for(var m=0;m<u.length;m++)o["$"+u[m]]=!0;for(u=0;u<s.length;u++)m=o.hasOwnProperty("$"+s[u].value),s[u].selected!==m&&(s[u].selected=m),m&&d&&(s[u].defaultSelected=!0)}else{for(u=""+He(u),o=null,m=0;m<s.length;m++){if(s[m].value===u){s[m].selected=!0,d&&(s[m].defaultSelected=!0);return}o!==null||s[m].disabled||(o=s[m])}o!==null&&(o.selected=!0)}}function Za(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error(n(91));return le({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function To(s,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(n(92));if(Ur(u)){if(1<u.length)throw Error(n(93));u=u[0]}o=u}o==null&&(o=""),u=o}s._wrapperState={initialValue:He(u)}}function Eo(s,o){var u=He(o.value),d=He(o.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),o.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),d!=null&&(s.defaultValue=""+d)}function el(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function It(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function At(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?It(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Br,tl=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,d,m){MSApp.execUnsafeLocalFunction(function(){return s(o,u,d,m)})}:s}(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(Br=Br||document.createElement("div"),Br.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Br.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function ys(s,o){if(o){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=o;return}}s.textContent=o}var yi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vi=["Webkit","ms","Moz","O"];Object.keys(yi).forEach(function(s){vi.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),yi[o]=yi[s]})});function nl(s,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||yi.hasOwnProperty(s)&&yi[s]?(""+o).trim():o+"px"}function rl(s,o){s=s.style;for(var u in o)if(o.hasOwnProperty(u)){var d=u.indexOf("--")===0,m=nl(u,o[u],d);u==="float"&&(u="cssFloat"),d?s.setProperty(u,m):s[u]=m}}var sl=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function il(s,o){if(o){if(sl[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(n(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(n(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(n(61))}if(o.style!=null&&typeof o.style!="object")throw Error(n(62))}}function ol(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _i=null;function So(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var bo=null,Pn=null,mr=null;function Io(s){if(s=Pl(s)){if(typeof bo!="function")throw Error(n(280));var o=s.stateNode;o&&(o=Ec(o),bo(s.stateNode,s.type,o))}}function gr(s){Pn?mr?mr.push(s):mr=[s]:Pn=s}function al(){if(Pn){var s=Pn,o=mr;if(mr=Pn=null,Io(s),o)for(s=0;s<o.length;s++)Io(o[s])}}function wi(s,o){return s(o)}function ll(){}var zr=!1;function ul(s,o,u){if(zr)return s(o,u);zr=!0;try{return wi(s,o,u)}finally{zr=!1,(Pn!==null||mr!==null)&&(ll(),al())}}function ft(s,o){var u=s.stateNode;if(u===null)return null;var d=Ec(u);if(d===null)return null;u=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(n(231,o,typeof u));return u}var Ao=!1;if(h)try{var Kn={};Object.defineProperty(Kn,"passive",{get:function(){Ao=!0}}),window.addEventListener("test",Kn,Kn),window.removeEventListener("test",Kn,Kn)}catch{Ao=!1}function xi(s,o,u,d,m,_,E,k,L){var Q=Array.prototype.slice.call(arguments,3);try{o.apply(u,Q)}catch(re){this.onError(re)}}var Ti=!1,Co=null,Gn=!1,cl=null,Kd={onError:function(s){Ti=!0,Co=s}};function Ro(s,o,u,d,m,_,E,k,L){Ti=!1,Co=null,xi.apply(Kd,arguments)}function Gu(s,o,u,d,m,_,E,k,L){if(Ro.apply(this,arguments),Ti){if(Ti){var Q=Co;Ti=!1,Co=null}else throw Error(n(198));Gn||(Gn=!0,cl=Q)}}function Qn(s){var o=s,u=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(u=o.return),s=o.return;while(s)}return o.tag===3?u:null}function Ei(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function Xn(s){if(Qn(s)!==s)throw Error(n(188))}function Qu(s){var o=s.alternate;if(!o){if(o=Qn(s),o===null)throw Error(n(188));return o!==s?null:s}for(var u=s,d=o;;){var m=u.return;if(m===null)break;var _=m.alternate;if(_===null){if(d=m.return,d!==null){u=d;continue}break}if(m.child===_.child){for(_=m.child;_;){if(_===u)return Xn(m),s;if(_===d)return Xn(m),o;_=_.sibling}throw Error(n(188))}if(u.return!==d.return)u=m,d=_;else{for(var E=!1,k=m.child;k;){if(k===u){E=!0,u=m,d=_;break}if(k===d){E=!0,d=m,u=_;break}k=k.sibling}if(!E){for(k=_.child;k;){if(k===u){E=!0,u=_,d=m;break}if(k===d){E=!0,d=_,u=m;break}k=k.sibling}if(!E)throw Error(n(189))}}if(u.alternate!==d)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?s:o}function hl(s){return s=Qu(s),s!==null?Po(s):null}function Po(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=Po(s);if(o!==null)return o;s=s.sibling}return null}var ko=e.unstable_scheduleCallback,dl=e.unstable_cancelCallback,Xu=e.unstable_shouldYield,Gd=e.unstable_requestPaint,Qe=e.unstable_now,Yu=e.unstable_getCurrentPriorityLevel,Si=e.unstable_ImmediatePriority,vs=e.unstable_UserBlockingPriority,kn=e.unstable_NormalPriority,fl=e.unstable_LowPriority,Ju=e.unstable_IdlePriority,bi=null,xn=null;function Zu(s){if(xn&&typeof xn.onCommitFiberRoot=="function")try{xn.onCommitFiberRoot(bi,s,void 0,(s.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:tc,pl=Math.log,ec=Math.LN2;function tc(s){return s>>>=0,s===0?32:31-(pl(s)/ec|0)|0}var No=64,Vo=4194304;function _s(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function Ii(s,o){var u=s.pendingLanes;if(u===0)return 0;var d=0,m=s.suspendedLanes,_=s.pingedLanes,E=u&268435455;if(E!==0){var k=E&~m;k!==0?d=_s(k):(_&=E,_!==0&&(d=_s(_)))}else E=u&~m,E!==0?d=_s(E):_!==0&&(d=_s(_));if(d===0)return 0;if(o!==0&&o!==d&&(o&m)===0&&(m=d&-d,_=o&-o,m>=_||m===16&&(_&4194240)!==0))return o;if((d&4)!==0&&(d|=u&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=d;0<o;)u=31-tn(o),m=1<<u,d|=s[u],o&=~m;return d}function Qd(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hr(s,o){for(var u=s.suspendedLanes,d=s.pingedLanes,m=s.expirationTimes,_=s.pendingLanes;0<_;){var E=31-tn(_),k=1<<E,L=m[E];L===-1?((k&u)===0||(k&d)!==0)&&(m[E]=Qd(k,o)):L<=o&&(s.expiredLanes|=k),_&=~k}}function Tn(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Ai(){var s=No;return No<<=1,(No&4194240)===0&&(No=64),s}function ws(s){for(var o=[],u=0;31>u;u++)o.push(s);return o}function xs(s,o,u){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-tn(o),s[o]=u}function Ke(s,o){var u=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var d=s.eventTimes;for(s=s.expirationTimes;0<u;){var m=31-tn(u),_=1<<m;o[m]=0,d[m]=-1,s[m]=-1,u&=~_}}function Ts(s,o){var u=s.entangledLanes|=o;for(s=s.entanglements;u;){var d=31-tn(u),m=1<<d;m&o|s[d]&o&&(s[d]|=o),u&=~m}}var Oe=0;function Es(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var nc,Do,rc,sc,ic,ml=!1,yr=[],Mt=null,Yn=null,Jn=null,Ss=new Map,Nn=new Map,vr=[],Xd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function oc(s,o){switch(s){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":Yn=null;break;case"mouseover":case"mouseout":Jn=null;break;case"pointerover":case"pointerout":Ss.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nn.delete(o.pointerId)}}function un(s,o,u,d,m,_){return s===null||s.nativeEvent!==_?(s={blockedOn:o,domEventName:u,eventSystemFlags:d,nativeEvent:_,targetContainers:[m]},o!==null&&(o=Pl(o),o!==null&&Do(o)),s):(s.eventSystemFlags|=d,o=s.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),s)}function Yd(s,o,u,d,m){switch(o){case"focusin":return Mt=un(Mt,s,o,u,d,m),!0;case"dragenter":return Yn=un(Yn,s,o,u,d,m),!0;case"mouseover":return Jn=un(Jn,s,o,u,d,m),!0;case"pointerover":var _=m.pointerId;return Ss.set(_,un(Ss.get(_)||null,s,o,u,d,m)),!0;case"gotpointercapture":return _=m.pointerId,Nn.set(_,un(Nn.get(_)||null,s,o,u,d,m)),!0}return!1}function ac(s){var o=Ni(s.target);if(o!==null){var u=Qn(o);if(u!==null){if(o=u.tag,o===13){if(o=Ei(u),o!==null){s.blockedOn=o,ic(s.priority,function(){rc(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Wr(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var u=jo(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var d=new u.constructor(u.type,u);_i=d,u.target.dispatchEvent(d),_i=null}else return o=Pl(u),o!==null&&Do(o),s.blockedOn=u,!1;o.shift()}return!0}function Ci(s,o,u){Wr(s)&&u.delete(o)}function lc(){ml=!1,Mt!==null&&Wr(Mt)&&(Mt=null),Yn!==null&&Wr(Yn)&&(Yn=null),Jn!==null&&Wr(Jn)&&(Jn=null),Ss.forEach(Ci),Nn.forEach(Ci)}function Zn(s,o){s.blockedOn===o&&(s.blockedOn=null,ml||(ml=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,lc)))}function er(s){function o(m){return Zn(m,s)}if(0<yr.length){Zn(yr[0],s);for(var u=1;u<yr.length;u++){var d=yr[u];d.blockedOn===s&&(d.blockedOn=null)}}for(Mt!==null&&Zn(Mt,s),Yn!==null&&Zn(Yn,s),Jn!==null&&Zn(Jn,s),Ss.forEach(o),Nn.forEach(o),u=0;u<vr.length;u++)d=vr[u],d.blockedOn===s&&(d.blockedOn=null);for(;0<vr.length&&(u=vr[0],u.blockedOn===null);)ac(u),u.blockedOn===null&&vr.shift()}var qr=G.ReactCurrentBatchConfig,bs=!0;function tt(s,o,u,d){var m=Oe,_=qr.transition;qr.transition=null;try{Oe=1,gl(s,o,u,d)}finally{Oe=m,qr.transition=_}}function Jd(s,o,u,d){var m=Oe,_=qr.transition;qr.transition=null;try{Oe=4,gl(s,o,u,d)}finally{Oe=m,qr.transition=_}}function gl(s,o,u,d){if(bs){var m=jo(s,o,u,d);if(m===null)cf(s,o,d,Ri,u),oc(s,d);else if(Yd(m,s,o,u,d))d.stopPropagation();else if(oc(s,d),o&4&&-1<Xd.indexOf(s)){for(;m!==null;){var _=Pl(m);if(_!==null&&nc(_),_=jo(s,o,u,d),_===null&&cf(s,o,d,Ri,u),_===m)break;m=_}m!==null&&d.stopPropagation()}else cf(s,o,d,null,u)}}var Ri=null;function jo(s,o,u,d){if(Ri=null,s=So(d),s=Ni(s),s!==null)if(o=Qn(s),o===null)s=null;else if(u=o.tag,u===13){if(s=Ei(o),s!==null)return s;s=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return Ri=s,null}function yl(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yu()){case Si:return 1;case vs:return 4;case kn:case fl:return 16;case Ju:return 536870912;default:return 16}default:return 16}}var En=null,Oo=null,cn=null;function vl(){if(cn)return cn;var s,o=Oo,u=o.length,d,m="value"in En?En.value:En.textContent,_=m.length;for(s=0;s<u&&o[s]===m[s];s++);var E=u-s;for(d=1;d<=E&&o[u-d]===m[_-d];d++);return cn=m.slice(s,1<d?1-d:void 0)}function Lo(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function _r(){return!0}function _l(){return!1}function Ft(s){function o(u,d,m,_,E){this._reactName=u,this._targetInst=m,this.type=d,this.nativeEvent=_,this.target=E,this.currentTarget=null;for(var k in s)s.hasOwnProperty(k)&&(u=s[k],this[k]=u?u(_):_[k]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?_r:_l,this.isPropagationStopped=_l,this}return le(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=_r)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=_r)},persist:function(){},isPersistent:_r}),o}var tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mo=Ft(tr),wr=le({},tr,{view:0,detail:0}),Zd=Ft(wr),Fo,Kr,Is,Pi=le({},wr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Is&&(Is&&s.type==="mousemove"?(Fo=s.screenX-Is.screenX,Kr=s.screenY-Is.screenY):Kr=Fo=0,Is=s),Fo)},movementY:function(s){return"movementY"in s?s.movementY:Kr}}),Uo=Ft(Pi),wl=le({},Pi,{dataTransfer:0}),uc=Ft(wl),$o=le({},wr,{relatedTarget:0}),Bo=Ft($o),cc=le({},tr,{animationName:0,elapsedTime:0,pseudoElement:0}),Gr=Ft(cc),hc=le({},tr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),dc=Ft(hc),fc=le({},tr,{data:0}),xl=Ft(fc),zo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mc(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=pc[s])?!!o[s]:!1}function xr(){return mc}var c=le({},wr,{key:function(s){if(s.key){var o=zo[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=Lo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?nn[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xr,charCode:function(s){return s.type==="keypress"?Lo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Lo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),v=Ft(c),T=le({},Pi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S=Ft(T),W=le({},wr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xr}),Y=Ft(W),ue=le({},tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),qe=Ft(ue),Ct=le({},Pi,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Me=Ft(Ct),Vt=[9,13,27,32],vt=h&&"CompositionEvent"in window,Vn=null;h&&"documentMode"in document&&(Vn=document.documentMode);var Sn=h&&"TextEvent"in window&&!Vn,ki=h&&(!vt||Vn&&8<Vn&&11>=Vn),Ho=" ",i0=!1;function o0(s,o){switch(s){case"keyup":return Vt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function a0(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Wo=!1;function XI(s,o){switch(s){case"compositionend":return a0(o);case"keypress":return o.which!==32?null:(i0=!0,Ho);case"textInput":return s=o.data,s===Ho&&i0?null:s;default:return null}}function YI(s,o){if(Wo)return s==="compositionend"||!vt&&o0(s,o)?(s=vl(),cn=Oo=En=null,Wo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ki&&o.locale!=="ko"?null:o.data;default:return null}}var JI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function l0(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!JI[s.type]:o==="textarea"}function u0(s,o,u,d){gr(d),o=wc(o,"onChange"),0<o.length&&(u=new Mo("onChange","change",null,u,d),s.push({event:u,listeners:o}))}var Tl=null,El=null;function ZI(s){A0(s,0)}function gc(s){var o=Xo(s);if(_o(o))return s}function eA(s,o){if(s==="change")return o}var c0=!1;if(h){var ef;if(h){var tf="oninput"in document;if(!tf){var h0=document.createElement("div");h0.setAttribute("oninput","return;"),tf=typeof h0.oninput=="function"}ef=tf}else ef=!1;c0=ef&&(!document.documentMode||9<document.documentMode)}function d0(){Tl&&(Tl.detachEvent("onpropertychange",f0),El=Tl=null)}function f0(s){if(s.propertyName==="value"&&gc(El)){var o=[];u0(o,El,s,So(s)),ul(ZI,o)}}function tA(s,o,u){s==="focusin"?(d0(),Tl=o,El=u,Tl.attachEvent("onpropertychange",f0)):s==="focusout"&&d0()}function nA(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return gc(El)}function rA(s,o){if(s==="click")return gc(o)}function sA(s,o){if(s==="input"||s==="change")return gc(o)}function iA(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var nr=typeof Object.is=="function"?Object.is:iA;function Sl(s,o){if(nr(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var u=Object.keys(s),d=Object.keys(o);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var m=u[d];if(!f.call(o,m)||!nr(s[m],o[m]))return!1}return!0}function p0(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function m0(s,o){var u=p0(s);s=0;for(var d;u;){if(u.nodeType===3){if(d=s+u.textContent.length,s<=o&&d>=o)return{node:u,offset:o-s};s=d}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=p0(u)}}function g0(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?g0(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function y0(){for(var s=window,o=gs();o instanceof s.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)s=o.contentWindow;else break;o=gs(s.document)}return o}function nf(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function oA(s){var o=y0(),u=s.focusedElem,d=s.selectionRange;if(o!==u&&u&&u.ownerDocument&&g0(u.ownerDocument.documentElement,u)){if(d!==null&&nf(u)){if(o=d.start,s=d.end,s===void 0&&(s=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(s,u.value.length);else if(s=(o=u.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var m=u.textContent.length,_=Math.min(d.start,m);d=d.end===void 0?_:Math.min(d.end,m),!s.extend&&_>d&&(m=d,d=_,_=m),m=m0(u,_);var E=m0(u,d);m&&E&&(s.rangeCount!==1||s.anchorNode!==m.node||s.anchorOffset!==m.offset||s.focusNode!==E.node||s.focusOffset!==E.offset)&&(o=o.createRange(),o.setStart(m.node,m.offset),s.removeAllRanges(),_>d?(s.addRange(o),s.extend(E.node,E.offset)):(o.setEnd(E.node,E.offset),s.addRange(o)))}}for(o=[],s=u;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)s=o[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var aA=h&&"documentMode"in document&&11>=document.documentMode,qo=null,rf=null,bl=null,sf=!1;function v0(s,o,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;sf||qo==null||qo!==gs(d)||(d=qo,"selectionStart"in d&&nf(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),bl&&Sl(bl,d)||(bl=d,d=wc(rf,"onSelect"),0<d.length&&(o=new Mo("onSelect","select",null,o,u),s.push({event:o,listeners:d}),o.target=qo)))}function yc(s,o){var u={};return u[s.toLowerCase()]=o.toLowerCase(),u["Webkit"+s]="webkit"+o,u["Moz"+s]="moz"+o,u}var Ko={animationend:yc("Animation","AnimationEnd"),animationiteration:yc("Animation","AnimationIteration"),animationstart:yc("Animation","AnimationStart"),transitionend:yc("Transition","TransitionEnd")},of={},_0={};h&&(_0=document.createElement("div").style,"AnimationEvent"in window||(delete Ko.animationend.animation,delete Ko.animationiteration.animation,delete Ko.animationstart.animation),"TransitionEvent"in window||delete Ko.transitionend.transition);function vc(s){if(of[s])return of[s];if(!Ko[s])return s;var o=Ko[s],u;for(u in o)if(o.hasOwnProperty(u)&&u in _0)return of[s]=o[u];return s}var w0=vc("animationend"),x0=vc("animationiteration"),T0=vc("animationstart"),E0=vc("transitionend"),S0=new Map,b0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function As(s,o){S0.set(s,o),a(o,[s])}for(var af=0;af<b0.length;af++){var lf=b0[af],lA=lf.toLowerCase(),uA=lf[0].toUpperCase()+lf.slice(1);As(lA,"on"+uA)}As(w0,"onAnimationEnd"),As(x0,"onAnimationIteration"),As(T0,"onAnimationStart"),As("dblclick","onDoubleClick"),As("focusin","onFocus"),As("focusout","onBlur"),As(E0,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Il));function I0(s,o,u){var d=s.type||"unknown-event";s.currentTarget=u,Gu(d,o,void 0,s),s.currentTarget=null}function A0(s,o){o=(o&4)!==0;for(var u=0;u<s.length;u++){var d=s[u],m=d.event;d=d.listeners;e:{var _=void 0;if(o)for(var E=d.length-1;0<=E;E--){var k=d[E],L=k.instance,Q=k.currentTarget;if(k=k.listener,L!==_&&m.isPropagationStopped())break e;I0(m,k,Q),_=L}else for(E=0;E<d.length;E++){if(k=d[E],L=k.instance,Q=k.currentTarget,k=k.listener,L!==_&&m.isPropagationStopped())break e;I0(m,k,Q),_=L}}}if(Gn)throw s=cl,Gn=!1,cl=null,s}function Je(s,o){var u=o[gf];u===void 0&&(u=o[gf]=new Set);var d=s+"__bubble";u.has(d)||(C0(o,s,2,!1),u.add(d))}function uf(s,o,u){var d=0;o&&(d|=4),C0(u,s,d,o)}var _c="_reactListening"+Math.random().toString(36).slice(2);function Al(s){if(!s[_c]){s[_c]=!0,r.forEach(function(u){u!=="selectionchange"&&(cA.has(u)||uf(u,!1,s),uf(u,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[_c]||(o[_c]=!0,uf("selectionchange",!1,o))}}function C0(s,o,u,d){switch(yl(o)){case 1:var m=tt;break;case 4:m=Jd;break;default:m=gl}u=m.bind(null,o,u,s),m=void 0,!Ao||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),d?m!==void 0?s.addEventListener(o,u,{capture:!0,passive:m}):s.addEventListener(o,u,!0):m!==void 0?s.addEventListener(o,u,{passive:m}):s.addEventListener(o,u,!1)}function cf(s,o,u,d,m){var _=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var E=d.tag;if(E===3||E===4){var k=d.stateNode.containerInfo;if(k===m||k.nodeType===8&&k.parentNode===m)break;if(E===4)for(E=d.return;E!==null;){var L=E.tag;if((L===3||L===4)&&(L=E.stateNode.containerInfo,L===m||L.nodeType===8&&L.parentNode===m))return;E=E.return}for(;k!==null;){if(E=Ni(k),E===null)return;if(L=E.tag,L===5||L===6){d=_=E;continue e}k=k.parentNode}}d=d.return}ul(function(){var Q=_,re=So(u),se=[];e:{var ne=S0.get(s);if(ne!==void 0){var he=Mo,pe=s;switch(s){case"keypress":if(Lo(u)===0)break e;case"keydown":case"keyup":he=v;break;case"focusin":pe="focus",he=Bo;break;case"focusout":pe="blur",he=Bo;break;case"beforeblur":case"afterblur":he=Bo;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Uo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=uc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=Y;break;case w0:case x0:case T0:he=Gr;break;case E0:he=qe;break;case"scroll":he=Zd;break;case"wheel":he=Me;break;case"copy":case"cut":case"paste":he=dc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=S}var me=(o&4)!==0,pt=!me&&s==="scroll",q=me?ne!==null?ne+"Capture":null:ne;me=[];for(var $=Q,K;$!==null;){K=$;var ie=K.stateNode;if(K.tag===5&&ie!==null&&(K=ie,q!==null&&(ie=ft($,q),ie!=null&&me.push(Cl($,ie,K)))),pt)break;$=$.return}0<me.length&&(ne=new he(ne,pe,null,u,re),se.push({event:ne,listeners:me}))}}if((o&7)===0){e:{if(ne=s==="mouseover"||s==="pointerover",he=s==="mouseout"||s==="pointerout",ne&&u!==_i&&(pe=u.relatedTarget||u.fromElement)&&(Ni(pe)||pe[Qr]))break e;if((he||ne)&&(ne=re.window===re?re:(ne=re.ownerDocument)?ne.defaultView||ne.parentWindow:window,he?(pe=u.relatedTarget||u.toElement,he=Q,pe=pe?Ni(pe):null,pe!==null&&(pt=Qn(pe),pe!==pt||pe.tag!==5&&pe.tag!==6)&&(pe=null)):(he=null,pe=Q),he!==pe)){if(me=Uo,ie="onMouseLeave",q="onMouseEnter",$="mouse",(s==="pointerout"||s==="pointerover")&&(me=S,ie="onPointerLeave",q="onPointerEnter",$="pointer"),pt=he==null?ne:Xo(he),K=pe==null?ne:Xo(pe),ne=new me(ie,$+"leave",he,u,re),ne.target=pt,ne.relatedTarget=K,ie=null,Ni(re)===Q&&(me=new me(q,$+"enter",pe,u,re),me.target=K,me.relatedTarget=pt,ie=me),pt=ie,he&&pe)t:{for(me=he,q=pe,$=0,K=me;K;K=Go(K))$++;for(K=0,ie=q;ie;ie=Go(ie))K++;for(;0<$-K;)me=Go(me),$--;for(;0<K-$;)q=Go(q),K--;for(;$--;){if(me===q||q!==null&&me===q.alternate)break t;me=Go(me),q=Go(q)}me=null}else me=null;he!==null&&R0(se,ne,he,me,!1),pe!==null&&pt!==null&&R0(se,pt,pe,me,!0)}}e:{if(ne=Q?Xo(Q):window,he=ne.nodeName&&ne.nodeName.toLowerCase(),he==="select"||he==="input"&&ne.type==="file")var ge=eA;else if(l0(ne))if(c0)ge=sA;else{ge=nA;var _e=tA}else(he=ne.nodeName)&&he.toLowerCase()==="input"&&(ne.type==="checkbox"||ne.type==="radio")&&(ge=rA);if(ge&&(ge=ge(s,Q))){u0(se,ge,u,re);break e}_e&&_e(s,ne,Q),s==="focusout"&&(_e=ne._wrapperState)&&_e.controlled&&ne.type==="number"&&xo(ne,"number",ne.value)}switch(_e=Q?Xo(Q):window,s){case"focusin":(l0(_e)||_e.contentEditable==="true")&&(qo=_e,rf=Q,bl=null);break;case"focusout":bl=rf=qo=null;break;case"mousedown":sf=!0;break;case"contextmenu":case"mouseup":case"dragend":sf=!1,v0(se,u,re);break;case"selectionchange":if(aA)break;case"keydown":case"keyup":v0(se,u,re)}var we;if(vt)e:{switch(s){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else Wo?o0(s,u)&&(Se="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Se="onCompositionStart");Se&&(ki&&u.locale!=="ko"&&(Wo||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&Wo&&(we=vl()):(En=re,Oo="value"in En?En.value:En.textContent,Wo=!0)),_e=wc(Q,Se),0<_e.length&&(Se=new xl(Se,s,null,u,re),se.push({event:Se,listeners:_e}),we?Se.data=we:(we=a0(u),we!==null&&(Se.data=we)))),(we=Sn?XI(s,u):YI(s,u))&&(Q=wc(Q,"onBeforeInput"),0<Q.length&&(re=new xl("onBeforeInput","beforeinput",null,u,re),se.push({event:re,listeners:Q}),re.data=we))}A0(se,o)})}function Cl(s,o,u){return{instance:s,listener:o,currentTarget:u}}function wc(s,o){for(var u=o+"Capture",d=[];s!==null;){var m=s,_=m.stateNode;m.tag===5&&_!==null&&(m=_,_=ft(s,u),_!=null&&d.unshift(Cl(s,_,m)),_=ft(s,o),_!=null&&d.push(Cl(s,_,m))),s=s.return}return d}function Go(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function R0(s,o,u,d,m){for(var _=o._reactName,E=[];u!==null&&u!==d;){var k=u,L=k.alternate,Q=k.stateNode;if(L!==null&&L===d)break;k.tag===5&&Q!==null&&(k=Q,m?(L=ft(u,_),L!=null&&E.unshift(Cl(u,L,k))):m||(L=ft(u,_),L!=null&&E.push(Cl(u,L,k)))),u=u.return}E.length!==0&&s.push({event:o,listeners:E})}var hA=/\r\n?/g,dA=/\u0000|\uFFFD/g;function P0(s){return(typeof s=="string"?s:""+s).replace(hA,`
`).replace(dA,"")}function xc(s,o,u){if(o=P0(o),P0(s)!==o&&u)throw Error(n(425))}function Tc(){}var hf=null,df=null;function ff(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var pf=typeof setTimeout=="function"?setTimeout:void 0,fA=typeof clearTimeout=="function"?clearTimeout:void 0,k0=typeof Promise=="function"?Promise:void 0,pA=typeof queueMicrotask=="function"?queueMicrotask:typeof k0<"u"?function(s){return k0.resolve(null).then(s).catch(mA)}:pf;function mA(s){setTimeout(function(){throw s})}function mf(s,o){var u=o,d=0;do{var m=u.nextSibling;if(s.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(d===0){s.removeChild(m),er(o);return}d--}else u!=="$"&&u!=="$?"&&u!=="$!"||d++;u=m}while(u);er(o)}function Cs(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function N0(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return s;o--}else u==="/$"&&o++}s=s.previousSibling}return null}var Qo=Math.random().toString(36).slice(2),Tr="__reactFiber$"+Qo,Rl="__reactProps$"+Qo,Qr="__reactContainer$"+Qo,gf="__reactEvents$"+Qo,gA="__reactListeners$"+Qo,yA="__reactHandles$"+Qo;function Ni(s){var o=s[Tr];if(o)return o;for(var u=s.parentNode;u;){if(o=u[Qr]||u[Tr]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(s=N0(s);s!==null;){if(u=s[Tr])return u;s=N0(s)}return o}s=u,u=s.parentNode}return null}function Pl(s){return s=s[Tr]||s[Qr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Xo(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(n(33))}function Ec(s){return s[Rl]||null}var yf=[],Yo=-1;function Rs(s){return{current:s}}function Ze(s){0>Yo||(s.current=yf[Yo],yf[Yo]=null,Yo--)}function Xe(s,o){Yo++,yf[Yo]=s.current,s.current=o}var Ps={},qt=Rs(Ps),hn=Rs(!1),Vi=Ps;function Jo(s,o){var u=s.type.contextTypes;if(!u)return Ps;var d=s.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var m={},_;for(_ in u)m[_]=o[_];return d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=m),m}function dn(s){return s=s.childContextTypes,s!=null}function Sc(){Ze(hn),Ze(qt)}function V0(s,o,u){if(qt.current!==Ps)throw Error(n(168));Xe(qt,o),Xe(hn,u)}function D0(s,o,u){var d=s.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return u;d=d.getChildContext();for(var m in d)if(!(m in o))throw Error(n(108,ze(s)||"Unknown",m));return le({},u,d)}function bc(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Ps,Vi=qt.current,Xe(qt,s),Xe(hn,hn.current),!0}function j0(s,o,u){var d=s.stateNode;if(!d)throw Error(n(169));u?(s=D0(s,o,Vi),d.__reactInternalMemoizedMergedChildContext=s,Ze(hn),Ze(qt),Xe(qt,s)):Ze(hn),Xe(hn,u)}var Xr=null,Ic=!1,vf=!1;function O0(s){Xr===null?Xr=[s]:Xr.push(s)}function vA(s){Ic=!0,O0(s)}function ks(){if(!vf&&Xr!==null){vf=!0;var s=0,o=Oe;try{var u=Xr;for(Oe=1;s<u.length;s++){var d=u[s];do d=d(!0);while(d!==null)}Xr=null,Ic=!1}catch(m){throw Xr!==null&&(Xr=Xr.slice(s+1)),ko(Si,ks),m}finally{Oe=o,vf=!1}}return null}var Zo=[],ea=0,Ac=null,Cc=0,Dn=[],jn=0,Di=null,Yr=1,Jr="";function ji(s,o){Zo[ea++]=Cc,Zo[ea++]=Ac,Ac=s,Cc=o}function L0(s,o,u){Dn[jn++]=Yr,Dn[jn++]=Jr,Dn[jn++]=Di,Di=s;var d=Yr;s=Jr;var m=32-tn(d)-1;d&=~(1<<m),u+=1;var _=32-tn(o)+m;if(30<_){var E=m-m%5;_=(d&(1<<E)-1).toString(32),d>>=E,m-=E,Yr=1<<32-tn(o)+m|u<<m|d,Jr=_+s}else Yr=1<<_|u<<m|d,Jr=s}function _f(s){s.return!==null&&(ji(s,1),L0(s,1,0))}function wf(s){for(;s===Ac;)Ac=Zo[--ea],Zo[ea]=null,Cc=Zo[--ea],Zo[ea]=null;for(;s===Di;)Di=Dn[--jn],Dn[jn]=null,Jr=Dn[--jn],Dn[jn]=null,Yr=Dn[--jn],Dn[jn]=null}var bn=null,In=null,nt=!1,rr=null;function M0(s,o){var u=Fn(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=s,o=s.deletions,o===null?(s.deletions=[u],s.flags|=16):o.push(u)}function F0(s,o){switch(s.tag){case 5:var u=s.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,bn=s,In=Cs(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,bn=s,In=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=Di!==null?{id:Yr,overflow:Jr}:null,s.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=Fn(18,null,null,0),u.stateNode=o,u.return=s,s.child=u,bn=s,In=null,!0):!1;default:return!1}}function xf(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Tf(s){if(nt){var o=In;if(o){var u=o;if(!F0(s,o)){if(xf(s))throw Error(n(418));o=Cs(u.nextSibling);var d=bn;o&&F0(s,o)?M0(d,u):(s.flags=s.flags&-4097|2,nt=!1,bn=s)}}else{if(xf(s))throw Error(n(418));s.flags=s.flags&-4097|2,nt=!1,bn=s}}}function U0(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;bn=s}function Rc(s){if(s!==bn)return!1;if(!nt)return U0(s),nt=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!ff(s.type,s.memoizedProps)),o&&(o=In)){if(xf(s))throw $0(),Error(n(418));for(;o;)M0(s,o),o=Cs(o.nextSibling)}if(U0(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(o===0){In=Cs(s.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}s=s.nextSibling}In=null}}else In=bn?Cs(s.stateNode.nextSibling):null;return!0}function $0(){for(var s=In;s;)s=Cs(s.nextSibling)}function ta(){In=bn=null,nt=!1}function Ef(s){rr===null?rr=[s]:rr.push(s)}var _A=G.ReactCurrentBatchConfig;function kl(s,o,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(n(309));var d=u.stateNode}if(!d)throw Error(n(147,s));var m=d,_=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===_?o.ref:(o=function(E){var k=m.refs;E===null?delete k[_]:k[_]=E},o._stringRef=_,o)}if(typeof s!="string")throw Error(n(284));if(!u._owner)throw Error(n(290,s))}return s}function Pc(s,o){throw s=Object.prototype.toString.call(o),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function B0(s){var o=s._init;return o(s._payload)}function z0(s){function o(q,$){if(s){var K=q.deletions;K===null?(q.deletions=[$],q.flags|=16):K.push($)}}function u(q,$){if(!s)return null;for(;$!==null;)o(q,$),$=$.sibling;return null}function d(q,$){for(q=new Map;$!==null;)$.key!==null?q.set($.key,$):q.set($.index,$),$=$.sibling;return q}function m(q,$){return q=Fs(q,$),q.index=0,q.sibling=null,q}function _(q,$,K){return q.index=K,s?(K=q.alternate,K!==null?(K=K.index,K<$?(q.flags|=2,$):K):(q.flags|=2,$)):(q.flags|=1048576,$)}function E(q){return s&&q.alternate===null&&(q.flags|=2),q}function k(q,$,K,ie){return $===null||$.tag!==6?($=pp(K,q.mode,ie),$.return=q,$):($=m($,K),$.return=q,$)}function L(q,$,K,ie){var ge=K.type;return ge===N?re(q,$,K.props.children,ie,K.key):$!==null&&($.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===yt&&B0(ge)===$.type)?(ie=m($,K.props),ie.ref=kl(q,$,K),ie.return=q,ie):(ie=eh(K.type,K.key,K.props,null,q.mode,ie),ie.ref=kl(q,$,K),ie.return=q,ie)}function Q(q,$,K,ie){return $===null||$.tag!==4||$.stateNode.containerInfo!==K.containerInfo||$.stateNode.implementation!==K.implementation?($=mp(K,q.mode,ie),$.return=q,$):($=m($,K.children||[]),$.return=q,$)}function re(q,$,K,ie,ge){return $===null||$.tag!==7?($=zi(K,q.mode,ie,ge),$.return=q,$):($=m($,K),$.return=q,$)}function se(q,$,K){if(typeof $=="string"&&$!==""||typeof $=="number")return $=pp(""+$,q.mode,K),$.return=q,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case X:return K=eh($.type,$.key,$.props,null,q.mode,K),K.ref=kl(q,null,$),K.return=q,K;case J:return $=mp($,q.mode,K),$.return=q,$;case yt:var ie=$._init;return se(q,ie($._payload),K)}if(Ur($)||oe($))return $=zi($,q.mode,K,null),$.return=q,$;Pc(q,$)}return null}function ne(q,$,K,ie){var ge=$!==null?$.key:null;if(typeof K=="string"&&K!==""||typeof K=="number")return ge!==null?null:k(q,$,""+K,ie);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case X:return K.key===ge?L(q,$,K,ie):null;case J:return K.key===ge?Q(q,$,K,ie):null;case yt:return ge=K._init,ne(q,$,ge(K._payload),ie)}if(Ur(K)||oe(K))return ge!==null?null:re(q,$,K,ie,null);Pc(q,K)}return null}function he(q,$,K,ie,ge){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return q=q.get(K)||null,k($,q,""+ie,ge);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case X:return q=q.get(ie.key===null?K:ie.key)||null,L($,q,ie,ge);case J:return q=q.get(ie.key===null?K:ie.key)||null,Q($,q,ie,ge);case yt:var _e=ie._init;return he(q,$,K,_e(ie._payload),ge)}if(Ur(ie)||oe(ie))return q=q.get(K)||null,re($,q,ie,ge,null);Pc($,ie)}return null}function pe(q,$,K,ie){for(var ge=null,_e=null,we=$,Se=$=0,Ot=null;we!==null&&Se<K.length;Se++){we.index>Se?(Ot=we,we=null):Ot=we.sibling;var Be=ne(q,we,K[Se],ie);if(Be===null){we===null&&(we=Ot);break}s&&we&&Be.alternate===null&&o(q,we),$=_(Be,$,Se),_e===null?ge=Be:_e.sibling=Be,_e=Be,we=Ot}if(Se===K.length)return u(q,we),nt&&ji(q,Se),ge;if(we===null){for(;Se<K.length;Se++)we=se(q,K[Se],ie),we!==null&&($=_(we,$,Se),_e===null?ge=we:_e.sibling=we,_e=we);return nt&&ji(q,Se),ge}for(we=d(q,we);Se<K.length;Se++)Ot=he(we,q,Se,K[Se],ie),Ot!==null&&(s&&Ot.alternate!==null&&we.delete(Ot.key===null?Se:Ot.key),$=_(Ot,$,Se),_e===null?ge=Ot:_e.sibling=Ot,_e=Ot);return s&&we.forEach(function(Us){return o(q,Us)}),nt&&ji(q,Se),ge}function me(q,$,K,ie){var ge=oe(K);if(typeof ge!="function")throw Error(n(150));if(K=ge.call(K),K==null)throw Error(n(151));for(var _e=ge=null,we=$,Se=$=0,Ot=null,Be=K.next();we!==null&&!Be.done;Se++,Be=K.next()){we.index>Se?(Ot=we,we=null):Ot=we.sibling;var Us=ne(q,we,Be.value,ie);if(Us===null){we===null&&(we=Ot);break}s&&we&&Us.alternate===null&&o(q,we),$=_(Us,$,Se),_e===null?ge=Us:_e.sibling=Us,_e=Us,we=Ot}if(Be.done)return u(q,we),nt&&ji(q,Se),ge;if(we===null){for(;!Be.done;Se++,Be=K.next())Be=se(q,Be.value,ie),Be!==null&&($=_(Be,$,Se),_e===null?ge=Be:_e.sibling=Be,_e=Be);return nt&&ji(q,Se),ge}for(we=d(q,we);!Be.done;Se++,Be=K.next())Be=he(we,q,Se,Be.value,ie),Be!==null&&(s&&Be.alternate!==null&&we.delete(Be.key===null?Se:Be.key),$=_(Be,$,Se),_e===null?ge=Be:_e.sibling=Be,_e=Be);return s&&we.forEach(function(JA){return o(q,JA)}),nt&&ji(q,Se),ge}function pt(q,$,K,ie){if(typeof K=="object"&&K!==null&&K.type===N&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case X:e:{for(var ge=K.key,_e=$;_e!==null;){if(_e.key===ge){if(ge=K.type,ge===N){if(_e.tag===7){u(q,_e.sibling),$=m(_e,K.props.children),$.return=q,q=$;break e}}else if(_e.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===yt&&B0(ge)===_e.type){u(q,_e.sibling),$=m(_e,K.props),$.ref=kl(q,_e,K),$.return=q,q=$;break e}u(q,_e);break}else o(q,_e);_e=_e.sibling}K.type===N?($=zi(K.props.children,q.mode,ie,K.key),$.return=q,q=$):(ie=eh(K.type,K.key,K.props,null,q.mode,ie),ie.ref=kl(q,$,K),ie.return=q,q=ie)}return E(q);case J:e:{for(_e=K.key;$!==null;){if($.key===_e)if($.tag===4&&$.stateNode.containerInfo===K.containerInfo&&$.stateNode.implementation===K.implementation){u(q,$.sibling),$=m($,K.children||[]),$.return=q,q=$;break e}else{u(q,$);break}else o(q,$);$=$.sibling}$=mp(K,q.mode,ie),$.return=q,q=$}return E(q);case yt:return _e=K._init,pt(q,$,_e(K._payload),ie)}if(Ur(K))return pe(q,$,K,ie);if(oe(K))return me(q,$,K,ie);Pc(q,K)}return typeof K=="string"&&K!==""||typeof K=="number"?(K=""+K,$!==null&&$.tag===6?(u(q,$.sibling),$=m($,K),$.return=q,q=$):(u(q,$),$=pp(K,q.mode,ie),$.return=q,q=$),E(q)):u(q,$)}return pt}var na=z0(!0),H0=z0(!1),kc=Rs(null),Nc=null,ra=null,Sf=null;function bf(){Sf=ra=Nc=null}function If(s){var o=kc.current;Ze(kc),s._currentValue=o}function Af(s,o,u){for(;s!==null;){var d=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),s===u)break;s=s.return}}function sa(s,o){Nc=s,Sf=ra=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&o)!==0&&(fn=!0),s.firstContext=null)}function On(s){var o=s._currentValue;if(Sf!==s)if(s={context:s,memoizedValue:o,next:null},ra===null){if(Nc===null)throw Error(n(308));ra=s,Nc.dependencies={lanes:0,firstContext:s}}else ra=ra.next=s;return o}var Oi=null;function Cf(s){Oi===null?Oi=[s]:Oi.push(s)}function W0(s,o,u,d){var m=o.interleaved;return m===null?(u.next=u,Cf(o)):(u.next=m.next,m.next=u),o.interleaved=u,Zr(s,d)}function Zr(s,o){s.lanes|=o;var u=s.alternate;for(u!==null&&(u.lanes|=o),u=s,s=s.return;s!==null;)s.childLanes|=o,u=s.alternate,u!==null&&(u.childLanes|=o),u=s,s=s.return;return u.tag===3?u.stateNode:null}var Ns=!1;function Rf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function q0(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function es(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function Vs(s,o,u){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,($e&2)!==0){var m=d.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),d.pending=o,Zr(s,u)}return m=d.interleaved,m===null?(o.next=o,Cf(d)):(o.next=m.next,m.next=o),d.interleaved=o,Zr(s,u)}function Vc(s,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var d=o.lanes;d&=s.pendingLanes,u|=d,o.lanes=u,Ts(s,u)}}function K0(s,o){var u=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var m=null,_=null;if(u=u.firstBaseUpdate,u!==null){do{var E={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};_===null?m=_=E:_=_.next=E,u=u.next}while(u!==null);_===null?m=_=o:_=_.next=o}else m=_=o;u={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:_,shared:d.shared,effects:d.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=o:s.next=o,u.lastBaseUpdate=o}function Dc(s,o,u,d){var m=s.updateQueue;Ns=!1;var _=m.firstBaseUpdate,E=m.lastBaseUpdate,k=m.shared.pending;if(k!==null){m.shared.pending=null;var L=k,Q=L.next;L.next=null,E===null?_=Q:E.next=Q,E=L;var re=s.alternate;re!==null&&(re=re.updateQueue,k=re.lastBaseUpdate,k!==E&&(k===null?re.firstBaseUpdate=Q:k.next=Q,re.lastBaseUpdate=L))}if(_!==null){var se=m.baseState;E=0,re=Q=L=null,k=_;do{var ne=k.lane,he=k.eventTime;if((d&ne)===ne){re!==null&&(re=re.next={eventTime:he,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var pe=s,me=k;switch(ne=o,he=u,me.tag){case 1:if(pe=me.payload,typeof pe=="function"){se=pe.call(he,se,ne);break e}se=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=me.payload,ne=typeof pe=="function"?pe.call(he,se,ne):pe,ne==null)break e;se=le({},se,ne);break e;case 2:Ns=!0}}k.callback!==null&&k.lane!==0&&(s.flags|=64,ne=m.effects,ne===null?m.effects=[k]:ne.push(k))}else he={eventTime:he,lane:ne,tag:k.tag,payload:k.payload,callback:k.callback,next:null},re===null?(Q=re=he,L=se):re=re.next=he,E|=ne;if(k=k.next,k===null){if(k=m.shared.pending,k===null)break;ne=k,k=ne.next,ne.next=null,m.lastBaseUpdate=ne,m.shared.pending=null}}while(!0);if(re===null&&(L=se),m.baseState=L,m.firstBaseUpdate=Q,m.lastBaseUpdate=re,o=m.shared.interleaved,o!==null){m=o;do E|=m.lane,m=m.next;while(m!==o)}else _===null&&(m.shared.lanes=0);Fi|=E,s.lanes=E,s.memoizedState=se}}function G0(s,o,u){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var d=s[o],m=d.callback;if(m!==null){if(d.callback=null,d=u,typeof m!="function")throw Error(n(191,m));m.call(d)}}}var Nl={},Er=Rs(Nl),Vl=Rs(Nl),Dl=Rs(Nl);function Li(s){if(s===Nl)throw Error(n(174));return s}function Pf(s,o){switch(Xe(Dl,o),Xe(Vl,s),Xe(Er,Nl),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:At(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=At(o,s)}Ze(Er),Xe(Er,o)}function ia(){Ze(Er),Ze(Vl),Ze(Dl)}function Q0(s){Li(Dl.current);var o=Li(Er.current),u=At(o,s.type);o!==u&&(Xe(Vl,s),Xe(Er,u))}function kf(s){Vl.current===s&&(Ze(Er),Ze(Vl))}var rt=Rs(0);function jc(s){for(var o=s;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Nf=[];function Vf(){for(var s=0;s<Nf.length;s++)Nf[s]._workInProgressVersionPrimary=null;Nf.length=0}var Oc=G.ReactCurrentDispatcher,Df=G.ReactCurrentBatchConfig,Mi=0,st=null,Rt=null,Dt=null,Lc=!1,jl=!1,Ol=0,wA=0;function Kt(){throw Error(n(321))}function jf(s,o){if(o===null)return!1;for(var u=0;u<o.length&&u<s.length;u++)if(!nr(s[u],o[u]))return!1;return!0}function Of(s,o,u,d,m,_){if(Mi=_,st=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Oc.current=s===null||s.memoizedState===null?SA:bA,s=u(d,m),jl){_=0;do{if(jl=!1,Ol=0,25<=_)throw Error(n(301));_+=1,Dt=Rt=null,o.updateQueue=null,Oc.current=IA,s=u(d,m)}while(jl)}if(Oc.current=Uc,o=Rt!==null&&Rt.next!==null,Mi=0,Dt=Rt=st=null,Lc=!1,o)throw Error(n(300));return s}function Lf(){var s=Ol!==0;return Ol=0,s}function Sr(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?st.memoizedState=Dt=s:Dt=Dt.next=s,Dt}function Ln(){if(Rt===null){var s=st.alternate;s=s!==null?s.memoizedState:null}else s=Rt.next;var o=Dt===null?st.memoizedState:Dt.next;if(o!==null)Dt=o,Rt=s;else{if(s===null)throw Error(n(310));Rt=s,s={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Dt===null?st.memoizedState=Dt=s:Dt=Dt.next=s}return Dt}function Ll(s,o){return typeof o=="function"?o(s):o}function Mf(s){var o=Ln(),u=o.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=s;var d=Rt,m=d.baseQueue,_=u.pending;if(_!==null){if(m!==null){var E=m.next;m.next=_.next,_.next=E}d.baseQueue=m=_,u.pending=null}if(m!==null){_=m.next,d=d.baseState;var k=E=null,L=null,Q=_;do{var re=Q.lane;if((Mi&re)===re)L!==null&&(L=L.next={lane:0,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null}),d=Q.hasEagerState?Q.eagerState:s(d,Q.action);else{var se={lane:re,action:Q.action,hasEagerState:Q.hasEagerState,eagerState:Q.eagerState,next:null};L===null?(k=L=se,E=d):L=L.next=se,st.lanes|=re,Fi|=re}Q=Q.next}while(Q!==null&&Q!==_);L===null?E=d:L.next=k,nr(d,o.memoizedState)||(fn=!0),o.memoizedState=d,o.baseState=E,o.baseQueue=L,u.lastRenderedState=d}if(s=u.interleaved,s!==null){m=s;do _=m.lane,st.lanes|=_,Fi|=_,m=m.next;while(m!==s)}else m===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function Ff(s){var o=Ln(),u=o.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=s;var d=u.dispatch,m=u.pending,_=o.memoizedState;if(m!==null){u.pending=null;var E=m=m.next;do _=s(_,E.action),E=E.next;while(E!==m);nr(_,o.memoizedState)||(fn=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),u.lastRenderedState=_}return[_,d]}function X0(){}function Y0(s,o){var u=st,d=Ln(),m=o(),_=!nr(d.memoizedState,m);if(_&&(d.memoizedState=m,fn=!0),d=d.queue,Uf(ev.bind(null,u,d,s),[s]),d.getSnapshot!==o||_||Dt!==null&&Dt.memoizedState.tag&1){if(u.flags|=2048,Ml(9,Z0.bind(null,u,d,m,o),void 0,null),jt===null)throw Error(n(349));(Mi&30)!==0||J0(u,o,m)}return m}function J0(s,o,u){s.flags|=16384,s={getSnapshot:o,value:u},o=st.updateQueue,o===null?(o={lastEffect:null,stores:null},st.updateQueue=o,o.stores=[s]):(u=o.stores,u===null?o.stores=[s]:u.push(s))}function Z0(s,o,u,d){o.value=u,o.getSnapshot=d,tv(o)&&nv(s)}function ev(s,o,u){return u(function(){tv(o)&&nv(s)})}function tv(s){var o=s.getSnapshot;s=s.value;try{var u=o();return!nr(s,u)}catch{return!0}}function nv(s){var o=Zr(s,1);o!==null&&ar(o,s,1,-1)}function rv(s){var o=Sr();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ll,lastRenderedState:s},o.queue=s,s=s.dispatch=EA.bind(null,st,s),[o.memoizedState,s]}function Ml(s,o,u,d){return s={tag:s,create:o,destroy:u,deps:d,next:null},o=st.updateQueue,o===null?(o={lastEffect:null,stores:null},st.updateQueue=o,o.lastEffect=s.next=s):(u=o.lastEffect,u===null?o.lastEffect=s.next=s:(d=u.next,u.next=s,s.next=d,o.lastEffect=s)),s}function sv(){return Ln().memoizedState}function Mc(s,o,u,d){var m=Sr();st.flags|=s,m.memoizedState=Ml(1|o,u,void 0,d===void 0?null:d)}function Fc(s,o,u,d){var m=Ln();d=d===void 0?null:d;var _=void 0;if(Rt!==null){var E=Rt.memoizedState;if(_=E.destroy,d!==null&&jf(d,E.deps)){m.memoizedState=Ml(o,u,_,d);return}}st.flags|=s,m.memoizedState=Ml(1|o,u,_,d)}function iv(s,o){return Mc(8390656,8,s,o)}function Uf(s,o){return Fc(2048,8,s,o)}function ov(s,o){return Fc(4,2,s,o)}function av(s,o){return Fc(4,4,s,o)}function lv(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function uv(s,o,u){return u=u!=null?u.concat([s]):null,Fc(4,4,lv.bind(null,o,s),u)}function $f(){}function cv(s,o){var u=Ln();o=o===void 0?null:o;var d=u.memoizedState;return d!==null&&o!==null&&jf(o,d[1])?d[0]:(u.memoizedState=[s,o],s)}function hv(s,o){var u=Ln();o=o===void 0?null:o;var d=u.memoizedState;return d!==null&&o!==null&&jf(o,d[1])?d[0]:(s=s(),u.memoizedState=[s,o],s)}function dv(s,o,u){return(Mi&21)===0?(s.baseState&&(s.baseState=!1,fn=!0),s.memoizedState=u):(nr(u,o)||(u=Ai(),st.lanes|=u,Fi|=u,s.baseState=!0),o)}function xA(s,o){var u=Oe;Oe=u!==0&&4>u?u:4,s(!0);var d=Df.transition;Df.transition={};try{s(!1),o()}finally{Oe=u,Df.transition=d}}function fv(){return Ln().memoizedState}function TA(s,o,u){var d=Ls(s);if(u={lane:d,action:u,hasEagerState:!1,eagerState:null,next:null},pv(s))mv(o,u);else if(u=W0(s,o,u,d),u!==null){var m=sn();ar(u,s,d,m),gv(u,o,d)}}function EA(s,o,u){var d=Ls(s),m={lane:d,action:u,hasEagerState:!1,eagerState:null,next:null};if(pv(s))mv(o,m);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var E=o.lastRenderedState,k=_(E,u);if(m.hasEagerState=!0,m.eagerState=k,nr(k,E)){var L=o.interleaved;L===null?(m.next=m,Cf(o)):(m.next=L.next,L.next=m),o.interleaved=m;return}}catch{}finally{}u=W0(s,o,m,d),u!==null&&(m=sn(),ar(u,s,d,m),gv(u,o,d))}}function pv(s){var o=s.alternate;return s===st||o!==null&&o===st}function mv(s,o){jl=Lc=!0;var u=s.pending;u===null?o.next=o:(o.next=u.next,u.next=o),s.pending=o}function gv(s,o,u){if((u&4194240)!==0){var d=o.lanes;d&=s.pendingLanes,u|=d,o.lanes=u,Ts(s,u)}}var Uc={readContext:On,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},SA={readContext:On,useCallback:function(s,o){return Sr().memoizedState=[s,o===void 0?null:o],s},useContext:On,useEffect:iv,useImperativeHandle:function(s,o,u){return u=u!=null?u.concat([s]):null,Mc(4194308,4,lv.bind(null,o,s),u)},useLayoutEffect:function(s,o){return Mc(4194308,4,s,o)},useInsertionEffect:function(s,o){return Mc(4,2,s,o)},useMemo:function(s,o){var u=Sr();return o=o===void 0?null:o,s=s(),u.memoizedState=[s,o],s},useReducer:function(s,o,u){var d=Sr();return o=u!==void 0?u(o):o,d.memoizedState=d.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},d.queue=s,s=s.dispatch=TA.bind(null,st,s),[d.memoizedState,s]},useRef:function(s){var o=Sr();return s={current:s},o.memoizedState=s},useState:rv,useDebugValue:$f,useDeferredValue:function(s){return Sr().memoizedState=s},useTransition:function(){var s=rv(!1),o=s[0];return s=xA.bind(null,s[1]),Sr().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,u){var d=st,m=Sr();if(nt){if(u===void 0)throw Error(n(407));u=u()}else{if(u=o(),jt===null)throw Error(n(349));(Mi&30)!==0||J0(d,o,u)}m.memoizedState=u;var _={value:u,getSnapshot:o};return m.queue=_,iv(ev.bind(null,d,_,s),[s]),d.flags|=2048,Ml(9,Z0.bind(null,d,_,u,o),void 0,null),u},useId:function(){var s=Sr(),o=jt.identifierPrefix;if(nt){var u=Jr,d=Yr;u=(d&~(1<<32-tn(d)-1)).toString(32)+u,o=":"+o+"R"+u,u=Ol++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=wA++,o=":"+o+"r"+u.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},bA={readContext:On,useCallback:cv,useContext:On,useEffect:Uf,useImperativeHandle:uv,useInsertionEffect:ov,useLayoutEffect:av,useMemo:hv,useReducer:Mf,useRef:sv,useState:function(){return Mf(Ll)},useDebugValue:$f,useDeferredValue:function(s){var o=Ln();return dv(o,Rt.memoizedState,s)},useTransition:function(){var s=Mf(Ll)[0],o=Ln().memoizedState;return[s,o]},useMutableSource:X0,useSyncExternalStore:Y0,useId:fv,unstable_isNewReconciler:!1},IA={readContext:On,useCallback:cv,useContext:On,useEffect:Uf,useImperativeHandle:uv,useInsertionEffect:ov,useLayoutEffect:av,useMemo:hv,useReducer:Ff,useRef:sv,useState:function(){return Ff(Ll)},useDebugValue:$f,useDeferredValue:function(s){var o=Ln();return Rt===null?o.memoizedState=s:dv(o,Rt.memoizedState,s)},useTransition:function(){var s=Ff(Ll)[0],o=Ln().memoizedState;return[s,o]},useMutableSource:X0,useSyncExternalStore:Y0,useId:fv,unstable_isNewReconciler:!1};function sr(s,o){if(s&&s.defaultProps){o=le({},o),s=s.defaultProps;for(var u in s)o[u]===void 0&&(o[u]=s[u]);return o}return o}function Bf(s,o,u,d){o=s.memoizedState,u=u(d,o),u=u==null?o:le({},o,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var $c={isMounted:function(s){return(s=s._reactInternals)?Qn(s)===s:!1},enqueueSetState:function(s,o,u){s=s._reactInternals;var d=sn(),m=Ls(s),_=es(d,m);_.payload=o,u!=null&&(_.callback=u),o=Vs(s,_,m),o!==null&&(ar(o,s,m,d),Vc(o,s,m))},enqueueReplaceState:function(s,o,u){s=s._reactInternals;var d=sn(),m=Ls(s),_=es(d,m);_.tag=1,_.payload=o,u!=null&&(_.callback=u),o=Vs(s,_,m),o!==null&&(ar(o,s,m,d),Vc(o,s,m))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var u=sn(),d=Ls(s),m=es(u,d);m.tag=2,o!=null&&(m.callback=o),o=Vs(s,m,d),o!==null&&(ar(o,s,d,u),Vc(o,s,d))}};function yv(s,o,u,d,m,_,E){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,_,E):o.prototype&&o.prototype.isPureReactComponent?!Sl(u,d)||!Sl(m,_):!0}function vv(s,o,u){var d=!1,m=Ps,_=o.contextType;return typeof _=="object"&&_!==null?_=On(_):(m=dn(o)?Vi:qt.current,d=o.contextTypes,_=(d=d!=null)?Jo(s,m):Ps),o=new o(u,_),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=$c,s.stateNode=o,o._reactInternals=s,d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=m,s.__reactInternalMemoizedMaskedChildContext=_),o}function _v(s,o,u,d){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,d),o.state!==s&&$c.enqueueReplaceState(o,o.state,null)}function zf(s,o,u,d){var m=s.stateNode;m.props=u,m.state=s.memoizedState,m.refs={},Rf(s);var _=o.contextType;typeof _=="object"&&_!==null?m.context=On(_):(_=dn(o)?Vi:qt.current,m.context=Jo(s,_)),m.state=s.memoizedState,_=o.getDerivedStateFromProps,typeof _=="function"&&(Bf(s,o,_,u),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(o=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),o!==m.state&&$c.enqueueReplaceState(m,m.state,null),Dc(s,u,m,d),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308)}function oa(s,o){try{var u="",d=o;do u+=Ne(d),d=d.return;while(d);var m=u}catch(_){m=`
Error generating stack: `+_.message+`
`+_.stack}return{value:s,source:o,stack:m,digest:null}}function Hf(s,o,u){return{value:s,source:null,stack:u??null,digest:o??null}}function Wf(s,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var AA=typeof WeakMap=="function"?WeakMap:Map;function wv(s,o,u){u=es(-1,u),u.tag=3,u.payload={element:null};var d=o.value;return u.callback=function(){Gc||(Gc=!0,op=d),Wf(s,o)},u}function xv(s,o,u){u=es(-1,u),u.tag=3;var d=s.type.getDerivedStateFromError;if(typeof d=="function"){var m=o.value;u.payload=function(){return d(m)},u.callback=function(){Wf(s,o)}}var _=s.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(u.callback=function(){Wf(s,o),typeof d!="function"&&(js===null?js=new Set([this]):js.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})}),u}function Tv(s,o,u){var d=s.pingCache;if(d===null){d=s.pingCache=new AA;var m=new Set;d.set(o,m)}else m=d.get(o),m===void 0&&(m=new Set,d.set(o,m));m.has(u)||(m.add(u),s=$A.bind(null,s,o,u),o.then(s,s))}function Ev(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function Sv(s,o,u,d,m){return(s.mode&1)===0?(s===o?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=es(-1,1),o.tag=2,Vs(u,o,1))),u.lanes|=1),s):(s.flags|=65536,s.lanes=m,s)}var CA=G.ReactCurrentOwner,fn=!1;function rn(s,o,u,d){o.child=s===null?H0(o,null,u,d):na(o,s.child,u,d)}function bv(s,o,u,d,m){u=u.render;var _=o.ref;return sa(o,m),d=Of(s,o,u,d,_,m),u=Lf(),s!==null&&!fn?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~m,ts(s,o,m)):(nt&&u&&_f(o),o.flags|=1,rn(s,o,d,m),o.child)}function Iv(s,o,u,d,m){if(s===null){var _=u.type;return typeof _=="function"&&!fp(_)&&_.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=_,Av(s,o,_,d,m)):(s=eh(u.type,null,d,o,o.mode,m),s.ref=o.ref,s.return=o,o.child=s)}if(_=s.child,(s.lanes&m)===0){var E=_.memoizedProps;if(u=u.compare,u=u!==null?u:Sl,u(E,d)&&s.ref===o.ref)return ts(s,o,m)}return o.flags|=1,s=Fs(_,d),s.ref=o.ref,s.return=o,o.child=s}function Av(s,o,u,d,m){if(s!==null){var _=s.memoizedProps;if(Sl(_,d)&&s.ref===o.ref)if(fn=!1,o.pendingProps=d=_,(s.lanes&m)!==0)(s.flags&131072)!==0&&(fn=!0);else return o.lanes=s.lanes,ts(s,o,m)}return qf(s,o,u,d,m)}function Cv(s,o,u){var d=o.pendingProps,m=d.children,_=s!==null?s.memoizedState:null;if(d.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(la,An),An|=u;else{if((u&1073741824)===0)return s=_!==null?_.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,Xe(la,An),An|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=_!==null?_.baseLanes:u,Xe(la,An),An|=d}else _!==null?(d=_.baseLanes|u,o.memoizedState=null):d=u,Xe(la,An),An|=d;return rn(s,o,m,u),o.child}function Rv(s,o){var u=o.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function qf(s,o,u,d,m){var _=dn(u)?Vi:qt.current;return _=Jo(o,_),sa(o,m),u=Of(s,o,u,d,_,m),d=Lf(),s!==null&&!fn?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~m,ts(s,o,m)):(nt&&d&&_f(o),o.flags|=1,rn(s,o,u,m),o.child)}function Pv(s,o,u,d,m){if(dn(u)){var _=!0;bc(o)}else _=!1;if(sa(o,m),o.stateNode===null)zc(s,o),vv(o,u,d),zf(o,u,d,m),d=!0;else if(s===null){var E=o.stateNode,k=o.memoizedProps;E.props=k;var L=E.context,Q=u.contextType;typeof Q=="object"&&Q!==null?Q=On(Q):(Q=dn(u)?Vi:qt.current,Q=Jo(o,Q));var re=u.getDerivedStateFromProps,se=typeof re=="function"||typeof E.getSnapshotBeforeUpdate=="function";se||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(k!==d||L!==Q)&&_v(o,E,d,Q),Ns=!1;var ne=o.memoizedState;E.state=ne,Dc(o,d,E,m),L=o.memoizedState,k!==d||ne!==L||hn.current||Ns?(typeof re=="function"&&(Bf(o,u,re,d),L=o.memoizedState),(k=Ns||yv(o,u,k,d,ne,L,Q))?(se||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(o.flags|=4194308)):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=L),E.props=d,E.state=L,E.context=Q,d=k):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{E=o.stateNode,q0(s,o),k=o.memoizedProps,Q=o.type===o.elementType?k:sr(o.type,k),E.props=Q,se=o.pendingProps,ne=E.context,L=u.contextType,typeof L=="object"&&L!==null?L=On(L):(L=dn(u)?Vi:qt.current,L=Jo(o,L));var he=u.getDerivedStateFromProps;(re=typeof he=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(k!==se||ne!==L)&&_v(o,E,d,L),Ns=!1,ne=o.memoizedState,E.state=ne,Dc(o,d,E,m);var pe=o.memoizedState;k!==se||ne!==pe||hn.current||Ns?(typeof he=="function"&&(Bf(o,u,he,d),pe=o.memoizedState),(Q=Ns||yv(o,u,Q,d,ne,pe,L)||!1)?(re||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(d,pe,L),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(d,pe,L)),typeof E.componentDidUpdate=="function"&&(o.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof E.componentDidUpdate!="function"||k===s.memoizedProps&&ne===s.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||k===s.memoizedProps&&ne===s.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=pe),E.props=d,E.state=pe,E.context=L,d=Q):(typeof E.componentDidUpdate!="function"||k===s.memoizedProps&&ne===s.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||k===s.memoizedProps&&ne===s.memoizedState||(o.flags|=1024),d=!1)}return Kf(s,o,u,d,_,m)}function Kf(s,o,u,d,m,_){Rv(s,o);var E=(o.flags&128)!==0;if(!d&&!E)return m&&j0(o,u,!1),ts(s,o,_);d=o.stateNode,CA.current=o;var k=E&&typeof u.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,s!==null&&E?(o.child=na(o,s.child,null,_),o.child=na(o,null,k,_)):rn(s,o,k,_),o.memoizedState=d.state,m&&j0(o,u,!0),o.child}function kv(s){var o=s.stateNode;o.pendingContext?V0(s,o.pendingContext,o.pendingContext!==o.context):o.context&&V0(s,o.context,!1),Pf(s,o.containerInfo)}function Nv(s,o,u,d,m){return ta(),Ef(m),o.flags|=256,rn(s,o,u,d),o.child}var Gf={dehydrated:null,treeContext:null,retryLane:0};function Qf(s){return{baseLanes:s,cachePool:null,transitions:null}}function Vv(s,o,u){var d=o.pendingProps,m=rt.current,_=!1,E=(o.flags&128)!==0,k;if((k=E)||(k=s!==null&&s.memoizedState===null?!1:(m&2)!==0),k?(_=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(m|=1),Xe(rt,m&1),s===null)return Tf(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((o.mode&1)===0?o.lanes=1:s.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(E=d.children,s=d.fallback,_?(d=o.mode,_=o.child,E={mode:"hidden",children:E},(d&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=E):_=th(E,d,0,null),s=zi(s,d,u,null),_.return=o,s.return=o,_.sibling=s,o.child=_,o.child.memoizedState=Qf(u),o.memoizedState=Gf,s):Xf(o,E));if(m=s.memoizedState,m!==null&&(k=m.dehydrated,k!==null))return RA(s,o,E,d,k,m,u);if(_){_=d.fallback,E=o.mode,m=s.child,k=m.sibling;var L={mode:"hidden",children:d.children};return(E&1)===0&&o.child!==m?(d=o.child,d.childLanes=0,d.pendingProps=L,o.deletions=null):(d=Fs(m,L),d.subtreeFlags=m.subtreeFlags&14680064),k!==null?_=Fs(k,_):(_=zi(_,E,u,null),_.flags|=2),_.return=o,d.return=o,d.sibling=_,o.child=d,d=_,_=o.child,E=s.child.memoizedState,E=E===null?Qf(u):{baseLanes:E.baseLanes|u,cachePool:null,transitions:E.transitions},_.memoizedState=E,_.childLanes=s.childLanes&~u,o.memoizedState=Gf,d}return _=s.child,s=_.sibling,d=Fs(_,{mode:"visible",children:d.children}),(o.mode&1)===0&&(d.lanes=u),d.return=o,d.sibling=null,s!==null&&(u=o.deletions,u===null?(o.deletions=[s],o.flags|=16):u.push(s)),o.child=d,o.memoizedState=null,d}function Xf(s,o){return o=th({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function Bc(s,o,u,d){return d!==null&&Ef(d),na(o,s.child,null,u),s=Xf(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function RA(s,o,u,d,m,_,E){if(u)return o.flags&256?(o.flags&=-257,d=Hf(Error(n(422))),Bc(s,o,E,d)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(_=d.fallback,m=o.mode,d=th({mode:"visible",children:d.children},m,0,null),_=zi(_,m,E,null),_.flags|=2,d.return=o,_.return=o,d.sibling=_,o.child=d,(o.mode&1)!==0&&na(o,s.child,null,E),o.child.memoizedState=Qf(E),o.memoizedState=Gf,_);if((o.mode&1)===0)return Bc(s,o,E,null);if(m.data==="$!"){if(d=m.nextSibling&&m.nextSibling.dataset,d)var k=d.dgst;return d=k,_=Error(n(419)),d=Hf(_,d,void 0),Bc(s,o,E,d)}if(k=(E&s.childLanes)!==0,fn||k){if(d=jt,d!==null){switch(E&-E){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(d.suspendedLanes|E))!==0?0:m,m!==0&&m!==_.retryLane&&(_.retryLane=m,Zr(s,m),ar(d,s,m,-1))}return dp(),d=Hf(Error(n(421))),Bc(s,o,E,d)}return m.data==="$?"?(o.flags|=128,o.child=s.child,o=BA.bind(null,s),m._reactRetry=o,null):(s=_.treeContext,In=Cs(m.nextSibling),bn=o,nt=!0,rr=null,s!==null&&(Dn[jn++]=Yr,Dn[jn++]=Jr,Dn[jn++]=Di,Yr=s.id,Jr=s.overflow,Di=o),o=Xf(o,d.children),o.flags|=4096,o)}function Dv(s,o,u){s.lanes|=o;var d=s.alternate;d!==null&&(d.lanes|=o),Af(s.return,o,u)}function Yf(s,o,u,d,m){var _=s.memoizedState;_===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:m}:(_.isBackwards=o,_.rendering=null,_.renderingStartTime=0,_.last=d,_.tail=u,_.tailMode=m)}function jv(s,o,u){var d=o.pendingProps,m=d.revealOrder,_=d.tail;if(rn(s,o,d.children,u),d=rt.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Dv(s,u,o);else if(s.tag===19)Dv(s,u,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}d&=1}if(Xe(rt,d),(o.mode&1)===0)o.memoizedState=null;else switch(m){case"forwards":for(u=o.child,m=null;u!==null;)s=u.alternate,s!==null&&jc(s)===null&&(m=u),u=u.sibling;u=m,u===null?(m=o.child,o.child=null):(m=u.sibling,u.sibling=null),Yf(o,!1,m,u,_);break;case"backwards":for(u=null,m=o.child,o.child=null;m!==null;){if(s=m.alternate,s!==null&&jc(s)===null){o.child=m;break}s=m.sibling,m.sibling=u,u=m,m=s}Yf(o,!0,u,null,_);break;case"together":Yf(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function zc(s,o){(o.mode&1)===0&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function ts(s,o,u){if(s!==null&&(o.dependencies=s.dependencies),Fi|=o.lanes,(u&o.childLanes)===0)return null;if(s!==null&&o.child!==s.child)throw Error(n(153));if(o.child!==null){for(s=o.child,u=Fs(s,s.pendingProps),o.child=u,u.return=o;s.sibling!==null;)s=s.sibling,u=u.sibling=Fs(s,s.pendingProps),u.return=o;u.sibling=null}return o.child}function PA(s,o,u){switch(o.tag){case 3:kv(o),ta();break;case 5:Q0(o);break;case 1:dn(o.type)&&bc(o);break;case 4:Pf(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,m=o.memoizedProps.value;Xe(kc,d._currentValue),d._currentValue=m;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(Xe(rt,rt.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?Vv(s,o,u):(Xe(rt,rt.current&1),s=ts(s,o,u),s!==null?s.sibling:null);Xe(rt,rt.current&1);break;case 19:if(d=(u&o.childLanes)!==0,(s.flags&128)!==0){if(d)return jv(s,o,u);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Xe(rt,rt.current),d)break;return null;case 22:case 23:return o.lanes=0,Cv(s,o,u)}return ts(s,o,u)}var Ov,Jf,Lv,Mv;Ov=function(s,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Jf=function(){},Lv=function(s,o,u,d){var m=s.memoizedProps;if(m!==d){s=o.stateNode,Li(Er.current);var _=null;switch(u){case"input":m=gi(s,m),d=gi(s,d),_=[];break;case"select":m=le({},m,{value:void 0}),d=le({},d,{value:void 0}),_=[];break;case"textarea":m=Za(s,m),d=Za(s,d),_=[];break;default:typeof m.onClick!="function"&&typeof d.onClick=="function"&&(s.onclick=Tc)}il(u,d);var E;u=null;for(Q in m)if(!d.hasOwnProperty(Q)&&m.hasOwnProperty(Q)&&m[Q]!=null)if(Q==="style"){var k=m[Q];for(E in k)k.hasOwnProperty(E)&&(u||(u={}),u[E]="")}else Q!=="dangerouslySetInnerHTML"&&Q!=="children"&&Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&Q!=="autoFocus"&&(i.hasOwnProperty(Q)?_||(_=[]):(_=_||[]).push(Q,null));for(Q in d){var L=d[Q];if(k=m?.[Q],d.hasOwnProperty(Q)&&L!==k&&(L!=null||k!=null))if(Q==="style")if(k){for(E in k)!k.hasOwnProperty(E)||L&&L.hasOwnProperty(E)||(u||(u={}),u[E]="");for(E in L)L.hasOwnProperty(E)&&k[E]!==L[E]&&(u||(u={}),u[E]=L[E])}else u||(_||(_=[]),_.push(Q,u)),u=L;else Q==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,k=k?k.__html:void 0,L!=null&&k!==L&&(_=_||[]).push(Q,L)):Q==="children"?typeof L!="string"&&typeof L!="number"||(_=_||[]).push(Q,""+L):Q!=="suppressContentEditableWarning"&&Q!=="suppressHydrationWarning"&&(i.hasOwnProperty(Q)?(L!=null&&Q==="onScroll"&&Je("scroll",s),_||k===L||(_=[])):(_=_||[]).push(Q,L))}u&&(_=_||[]).push("style",u);var Q=_;(o.updateQueue=Q)&&(o.flags|=4)}},Mv=function(s,o,u,d){u!==d&&(o.flags|=4)};function Fl(s,o){if(!nt)switch(s.tailMode){case"hidden":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function Gt(s){var o=s.alternate!==null&&s.alternate.child===s.child,u=0,d=0;if(o)for(var m=s.child;m!==null;)u|=m.lanes|m.childLanes,d|=m.subtreeFlags&14680064,d|=m.flags&14680064,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)u|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=d,s.childLanes=u,o}function kA(s,o,u){var d=o.pendingProps;switch(wf(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(o),null;case 1:return dn(o.type)&&Sc(),Gt(o),null;case 3:return d=o.stateNode,ia(),Ze(hn),Ze(qt),Vf(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(Rc(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,rr!==null&&(up(rr),rr=null))),Jf(s,o),Gt(o),null;case 5:kf(o);var m=Li(Dl.current);if(u=o.type,s!==null&&o.stateNode!=null)Lv(s,o,u,d,m),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(n(166));return Gt(o),null}if(s=Li(Er.current),Rc(o)){d=o.stateNode,u=o.type;var _=o.memoizedProps;switch(d[Tr]=o,d[Rl]=_,s=(o.mode&1)!==0,u){case"dialog":Je("cancel",d),Je("close",d);break;case"iframe":case"object":case"embed":Je("load",d);break;case"video":case"audio":for(m=0;m<Il.length;m++)Je(Il[m],d);break;case"source":Je("error",d);break;case"img":case"image":case"link":Je("error",d),Je("load",d);break;case"details":Je("toggle",d);break;case"input":wo(d,_),Je("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!_.multiple},Je("invalid",d);break;case"textarea":To(d,_),Je("invalid",d)}il(u,_),m=null;for(var E in _)if(_.hasOwnProperty(E)){var k=_[E];E==="children"?typeof k=="string"?d.textContent!==k&&(_.suppressHydrationWarning!==!0&&xc(d.textContent,k,s),m=["children",k]):typeof k=="number"&&d.textContent!==""+k&&(_.suppressHydrationWarning!==!0&&xc(d.textContent,k,s),m=["children",""+k]):i.hasOwnProperty(E)&&k!=null&&E==="onScroll"&&Je("scroll",d)}switch(u){case"input":Fr(d),Ku(d,_,!0);break;case"textarea":Fr(d),el(d);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(d.onclick=Tc)}d=m,o.updateQueue=d,d!==null&&(o.flags|=4)}else{E=m.nodeType===9?m:m.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=It(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=E.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof d.is=="string"?s=E.createElement(u,{is:d.is}):(s=E.createElement(u),u==="select"&&(E=s,d.multiple?E.multiple=!0:d.size&&(E.size=d.size))):s=E.createElementNS(s,u),s[Tr]=o,s[Rl]=d,Ov(s,o,!1,!1),o.stateNode=s;e:{switch(E=ol(u,d),u){case"dialog":Je("cancel",s),Je("close",s),m=d;break;case"iframe":case"object":case"embed":Je("load",s),m=d;break;case"video":case"audio":for(m=0;m<Il.length;m++)Je(Il[m],s);m=d;break;case"source":Je("error",s),m=d;break;case"img":case"image":case"link":Je("error",s),Je("load",s),m=d;break;case"details":Je("toggle",s),m=d;break;case"input":wo(s,d),m=gi(s,d),Je("invalid",s);break;case"option":m=d;break;case"select":s._wrapperState={wasMultiple:!!d.multiple},m=le({},d,{value:void 0}),Je("invalid",s);break;case"textarea":To(s,d),m=Za(s,d),Je("invalid",s);break;default:m=d}il(u,m),k=m;for(_ in k)if(k.hasOwnProperty(_)){var L=k[_];_==="style"?rl(s,L):_==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&tl(s,L)):_==="children"?typeof L=="string"?(u!=="textarea"||L!=="")&&ys(s,L):typeof L=="number"&&ys(s,""+L):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(i.hasOwnProperty(_)?L!=null&&_==="onScroll"&&Je("scroll",s):L!=null&&z(s,_,L,E))}switch(u){case"input":Fr(s),Ku(s,d,!1);break;case"textarea":Fr(s),el(s);break;case"option":d.value!=null&&s.setAttribute("value",""+He(d.value));break;case"select":s.multiple=!!d.multiple,_=d.value,_!=null?$r(s,!!d.multiple,_,!1):d.defaultValue!=null&&$r(s,!!d.multiple,d.defaultValue,!0);break;default:typeof m.onClick=="function"&&(s.onclick=Tc)}switch(u){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Gt(o),null;case 6:if(s&&o.stateNode!=null)Mv(s,o,s.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(n(166));if(u=Li(Dl.current),Li(Er.current),Rc(o)){if(d=o.stateNode,u=o.memoizedProps,d[Tr]=o,(_=d.nodeValue!==u)&&(s=bn,s!==null))switch(s.tag){case 3:xc(d.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&xc(d.nodeValue,u,(s.mode&1)!==0)}_&&(o.flags|=4)}else d=(u.nodeType===9?u:u.ownerDocument).createTextNode(d),d[Tr]=o,o.stateNode=d}return Gt(o),null;case 13:if(Ze(rt),d=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(nt&&In!==null&&(o.mode&1)!==0&&(o.flags&128)===0)$0(),ta(),o.flags|=98560,_=!1;else if(_=Rc(o),d!==null&&d.dehydrated!==null){if(s===null){if(!_)throw Error(n(318));if(_=o.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(n(317));_[Tr]=o}else ta(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Gt(o),_=!1}else rr!==null&&(up(rr),rr=null),_=!0;if(!_)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(d=d!==null,d!==(s!==null&&s.memoizedState!==null)&&d&&(o.child.flags|=8192,(o.mode&1)!==0&&(s===null||(rt.current&1)!==0?Pt===0&&(Pt=3):dp())),o.updateQueue!==null&&(o.flags|=4),Gt(o),null);case 4:return ia(),Jf(s,o),s===null&&Al(o.stateNode.containerInfo),Gt(o),null;case 10:return If(o.type._context),Gt(o),null;case 17:return dn(o.type)&&Sc(),Gt(o),null;case 19:if(Ze(rt),_=o.memoizedState,_===null)return Gt(o),null;if(d=(o.flags&128)!==0,E=_.rendering,E===null)if(d)Fl(_,!1);else{if(Pt!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(E=jc(s),E!==null){for(o.flags|=128,Fl(_,!1),d=E.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=u,u=o.child;u!==null;)_=u,s=d,_.flags&=14680066,E=_.alternate,E===null?(_.childLanes=0,_.lanes=s,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=E.childLanes,_.lanes=E.lanes,_.child=E.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=E.memoizedProps,_.memoizedState=E.memoizedState,_.updateQueue=E.updateQueue,_.type=E.type,s=E.dependencies,_.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return Xe(rt,rt.current&1|2),o.child}s=s.sibling}_.tail!==null&&Qe()>ua&&(o.flags|=128,d=!0,Fl(_,!1),o.lanes=4194304)}else{if(!d)if(s=jc(E),s!==null){if(o.flags|=128,d=!0,u=s.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),Fl(_,!0),_.tail===null&&_.tailMode==="hidden"&&!E.alternate&&!nt)return Gt(o),null}else 2*Qe()-_.renderingStartTime>ua&&u!==1073741824&&(o.flags|=128,d=!0,Fl(_,!1),o.lanes=4194304);_.isBackwards?(E.sibling=o.child,o.child=E):(u=_.last,u!==null?u.sibling=E:o.child=E,_.last=E)}return _.tail!==null?(o=_.tail,_.rendering=o,_.tail=o.sibling,_.renderingStartTime=Qe(),o.sibling=null,u=rt.current,Xe(rt,d?u&1|2:u&1),o):(Gt(o),null);case 22:case 23:return hp(),d=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==d&&(o.flags|=8192),d&&(o.mode&1)!==0?(An&1073741824)!==0&&(Gt(o),o.subtreeFlags&6&&(o.flags|=8192)):Gt(o),null;case 24:return null;case 25:return null}throw Error(n(156,o.tag))}function NA(s,o){switch(wf(o),o.tag){case 1:return dn(o.type)&&Sc(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return ia(),Ze(hn),Ze(qt),Vf(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 5:return kf(o),null;case 13:if(Ze(rt),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(n(340));ta()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return Ze(rt),null;case 4:return ia(),null;case 10:return If(o.type._context),null;case 22:case 23:return hp(),null;case 24:return null;default:return null}}var Hc=!1,Qt=!1,VA=typeof WeakSet=="function"?WeakSet:Set,fe=null;function aa(s,o){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(d){lt(s,o,d)}else u.current=null}function Zf(s,o,u){try{u()}catch(d){lt(s,o,d)}}var Fv=!1;function DA(s,o){if(hf=bs,s=y0(),nf(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var m=d.anchorOffset,_=d.focusNode;d=d.focusOffset;try{u.nodeType,_.nodeType}catch{u=null;break e}var E=0,k=-1,L=-1,Q=0,re=0,se=s,ne=null;t:for(;;){for(var he;se!==u||m!==0&&se.nodeType!==3||(k=E+m),se!==_||d!==0&&se.nodeType!==3||(L=E+d),se.nodeType===3&&(E+=se.nodeValue.length),(he=se.firstChild)!==null;)ne=se,se=he;for(;;){if(se===s)break t;if(ne===u&&++Q===m&&(k=E),ne===_&&++re===d&&(L=E),(he=se.nextSibling)!==null)break;se=ne,ne=se.parentNode}se=he}u=k===-1||L===-1?null:{start:k,end:L}}else u=null}u=u||{start:0,end:0}}else u=null;for(df={focusedElem:s,selectionRange:u},bs=!1,fe=o;fe!==null;)if(o=fe,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,fe=s;else for(;fe!==null;){o=fe;try{var pe=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(pe!==null){var me=pe.memoizedProps,pt=pe.memoizedState,q=o.stateNode,$=q.getSnapshotBeforeUpdate(o.elementType===o.type?me:sr(o.type,me),pt);q.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var K=o.stateNode.containerInfo;K.nodeType===1?K.textContent="":K.nodeType===9&&K.documentElement&&K.removeChild(K.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ie){lt(o,o.return,ie)}if(s=o.sibling,s!==null){s.return=o.return,fe=s;break}fe=o.return}return pe=Fv,Fv=!1,pe}function Ul(s,o,u){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&s)===s){var _=m.destroy;m.destroy=void 0,_!==void 0&&Zf(o,u,_)}m=m.next}while(m!==d)}}function Wc(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&s)===s){var d=u.create;u.destroy=d()}u=u.next}while(u!==o)}}function ep(s){var o=s.ref;if(o!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof o=="function"?o(s):o.current=s}}function Uv(s){var o=s.alternate;o!==null&&(s.alternate=null,Uv(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[Tr],delete o[Rl],delete o[gf],delete o[gA],delete o[yA])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function $v(s){return s.tag===5||s.tag===3||s.tag===4}function Bv(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||$v(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function tp(s,o,u){var d=s.tag;if(d===5||d===6)s=s.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(s,o):u.insertBefore(s,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(s,u)):(o=u,o.appendChild(s)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Tc));else if(d!==4&&(s=s.child,s!==null))for(tp(s,o,u),s=s.sibling;s!==null;)tp(s,o,u),s=s.sibling}function np(s,o,u){var d=s.tag;if(d===5||d===6)s=s.stateNode,o?u.insertBefore(s,o):u.appendChild(s);else if(d!==4&&(s=s.child,s!==null))for(np(s,o,u),s=s.sibling;s!==null;)np(s,o,u),s=s.sibling}var Ut=null,ir=!1;function Ds(s,o,u){for(u=u.child;u!==null;)zv(s,o,u),u=u.sibling}function zv(s,o,u){if(xn&&typeof xn.onCommitFiberUnmount=="function")try{xn.onCommitFiberUnmount(bi,u)}catch{}switch(u.tag){case 5:Qt||aa(u,o);case 6:var d=Ut,m=ir;Ut=null,Ds(s,o,u),Ut=d,ir=m,Ut!==null&&(ir?(s=Ut,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):Ut.removeChild(u.stateNode));break;case 18:Ut!==null&&(ir?(s=Ut,u=u.stateNode,s.nodeType===8?mf(s.parentNode,u):s.nodeType===1&&mf(s,u),er(s)):mf(Ut,u.stateNode));break;case 4:d=Ut,m=ir,Ut=u.stateNode.containerInfo,ir=!0,Ds(s,o,u),Ut=d,ir=m;break;case 0:case 11:case 14:case 15:if(!Qt&&(d=u.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){m=d=d.next;do{var _=m,E=_.destroy;_=_.tag,E!==void 0&&((_&2)!==0||(_&4)!==0)&&Zf(u,o,E),m=m.next}while(m!==d)}Ds(s,o,u);break;case 1:if(!Qt&&(aa(u,o),d=u.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=u.memoizedProps,d.state=u.memoizedState,d.componentWillUnmount()}catch(k){lt(u,o,k)}Ds(s,o,u);break;case 21:Ds(s,o,u);break;case 22:u.mode&1?(Qt=(d=Qt)||u.memoizedState!==null,Ds(s,o,u),Qt=d):Ds(s,o,u);break;default:Ds(s,o,u)}}function Hv(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new VA),o.forEach(function(d){var m=zA.bind(null,s,d);u.has(d)||(u.add(d),d.then(m,m))})}}function or(s,o){var u=o.deletions;if(u!==null)for(var d=0;d<u.length;d++){var m=u[d];try{var _=s,E=o,k=E;e:for(;k!==null;){switch(k.tag){case 5:Ut=k.stateNode,ir=!1;break e;case 3:Ut=k.stateNode.containerInfo,ir=!0;break e;case 4:Ut=k.stateNode.containerInfo,ir=!0;break e}k=k.return}if(Ut===null)throw Error(n(160));zv(_,E,m),Ut=null,ir=!1;var L=m.alternate;L!==null&&(L.return=null),m.return=null}catch(Q){lt(m,o,Q)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Wv(o,s),o=o.sibling}function Wv(s,o){var u=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(or(o,s),br(s),d&4){try{Ul(3,s,s.return),Wc(3,s)}catch(me){lt(s,s.return,me)}try{Ul(5,s,s.return)}catch(me){lt(s,s.return,me)}}break;case 1:or(o,s),br(s),d&512&&u!==null&&aa(u,u.return);break;case 5:if(or(o,s),br(s),d&512&&u!==null&&aa(u,u.return),s.flags&32){var m=s.stateNode;try{ys(m,"")}catch(me){lt(s,s.return,me)}}if(d&4&&(m=s.stateNode,m!=null)){var _=s.memoizedProps,E=u!==null?u.memoizedProps:_,k=s.type,L=s.updateQueue;if(s.updateQueue=null,L!==null)try{k==="input"&&_.type==="radio"&&_.name!=null&&Ya(m,_),ol(k,E);var Q=ol(k,_);for(E=0;E<L.length;E+=2){var re=L[E],se=L[E+1];re==="style"?rl(m,se):re==="dangerouslySetInnerHTML"?tl(m,se):re==="children"?ys(m,se):z(m,re,se,Q)}switch(k){case"input":Ja(m,_);break;case"textarea":Eo(m,_);break;case"select":var ne=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!_.multiple;var he=_.value;he!=null?$r(m,!!_.multiple,he,!1):ne!==!!_.multiple&&(_.defaultValue!=null?$r(m,!!_.multiple,_.defaultValue,!0):$r(m,!!_.multiple,_.multiple?[]:"",!1))}m[Rl]=_}catch(me){lt(s,s.return,me)}}break;case 6:if(or(o,s),br(s),d&4){if(s.stateNode===null)throw Error(n(162));m=s.stateNode,_=s.memoizedProps;try{m.nodeValue=_}catch(me){lt(s,s.return,me)}}break;case 3:if(or(o,s),br(s),d&4&&u!==null&&u.memoizedState.isDehydrated)try{er(o.containerInfo)}catch(me){lt(s,s.return,me)}break;case 4:or(o,s),br(s);break;case 13:or(o,s),br(s),m=s.child,m.flags&8192&&(_=m.memoizedState!==null,m.stateNode.isHidden=_,!_||m.alternate!==null&&m.alternate.memoizedState!==null||(ip=Qe())),d&4&&Hv(s);break;case 22:if(re=u!==null&&u.memoizedState!==null,s.mode&1?(Qt=(Q=Qt)||re,or(o,s),Qt=Q):or(o,s),br(s),d&8192){if(Q=s.memoizedState!==null,(s.stateNode.isHidden=Q)&&!re&&(s.mode&1)!==0)for(fe=s,re=s.child;re!==null;){for(se=fe=re;fe!==null;){switch(ne=fe,he=ne.child,ne.tag){case 0:case 11:case 14:case 15:Ul(4,ne,ne.return);break;case 1:aa(ne,ne.return);var pe=ne.stateNode;if(typeof pe.componentWillUnmount=="function"){d=ne,u=ne.return;try{o=d,pe.props=o.memoizedProps,pe.state=o.memoizedState,pe.componentWillUnmount()}catch(me){lt(d,u,me)}}break;case 5:aa(ne,ne.return);break;case 22:if(ne.memoizedState!==null){Gv(se);continue}}he!==null?(he.return=ne,fe=he):Gv(se)}re=re.sibling}e:for(re=null,se=s;;){if(se.tag===5){if(re===null){re=se;try{m=se.stateNode,Q?(_=m.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(k=se.stateNode,L=se.memoizedProps.style,E=L!=null&&L.hasOwnProperty("display")?L.display:null,k.style.display=nl("display",E))}catch(me){lt(s,s.return,me)}}}else if(se.tag===6){if(re===null)try{se.stateNode.nodeValue=Q?"":se.memoizedProps}catch(me){lt(s,s.return,me)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===s)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===s)break e;for(;se.sibling===null;){if(se.return===null||se.return===s)break e;re===se&&(re=null),se=se.return}re===se&&(re=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:or(o,s),br(s),d&4&&Hv(s);break;case 21:break;default:or(o,s),br(s)}}function br(s){var o=s.flags;if(o&2){try{e:{for(var u=s.return;u!==null;){if($v(u)){var d=u;break e}u=u.return}throw Error(n(160))}switch(d.tag){case 5:var m=d.stateNode;d.flags&32&&(ys(m,""),d.flags&=-33);var _=Bv(s);np(s,_,m);break;case 3:case 4:var E=d.stateNode.containerInfo,k=Bv(s);tp(s,k,E);break;default:throw Error(n(161))}}catch(L){lt(s,s.return,L)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function jA(s,o,u){fe=s,qv(s)}function qv(s,o,u){for(var d=(s.mode&1)!==0;fe!==null;){var m=fe,_=m.child;if(m.tag===22&&d){var E=m.memoizedState!==null||Hc;if(!E){var k=m.alternate,L=k!==null&&k.memoizedState!==null||Qt;k=Hc;var Q=Qt;if(Hc=E,(Qt=L)&&!Q)for(fe=m;fe!==null;)E=fe,L=E.child,E.tag===22&&E.memoizedState!==null?Qv(m):L!==null?(L.return=E,fe=L):Qv(m);for(;_!==null;)fe=_,qv(_),_=_.sibling;fe=m,Hc=k,Qt=Q}Kv(s)}else(m.subtreeFlags&8772)!==0&&_!==null?(_.return=m,fe=_):Kv(s)}}function Kv(s){for(;fe!==null;){var o=fe;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Qt||Wc(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!Qt)if(u===null)d.componentDidMount();else{var m=o.elementType===o.type?u.memoizedProps:sr(o.type,u.memoizedProps);d.componentDidUpdate(m,u.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var _=o.updateQueue;_!==null&&G0(o,_,d);break;case 3:var E=o.updateQueue;if(E!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}G0(o,E,u)}break;case 5:var k=o.stateNode;if(u===null&&o.flags&4){u=k;var L=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&u.focus();break;case"img":L.src&&(u.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var Q=o.alternate;if(Q!==null){var re=Q.memoizedState;if(re!==null){var se=re.dehydrated;se!==null&&er(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Qt||o.flags&512&&ep(o)}catch(ne){lt(o,o.return,ne)}}if(o===s){fe=null;break}if(u=o.sibling,u!==null){u.return=o.return,fe=u;break}fe=o.return}}function Gv(s){for(;fe!==null;){var o=fe;if(o===s){fe=null;break}var u=o.sibling;if(u!==null){u.return=o.return,fe=u;break}fe=o.return}}function Qv(s){for(;fe!==null;){var o=fe;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{Wc(4,o)}catch(L){lt(o,u,L)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var m=o.return;try{d.componentDidMount()}catch(L){lt(o,m,L)}}var _=o.return;try{ep(o)}catch(L){lt(o,_,L)}break;case 5:var E=o.return;try{ep(o)}catch(L){lt(o,E,L)}}}catch(L){lt(o,o.return,L)}if(o===s){fe=null;break}var k=o.sibling;if(k!==null){k.return=o.return,fe=k;break}fe=o.return}}var OA=Math.ceil,qc=G.ReactCurrentDispatcher,rp=G.ReactCurrentOwner,Mn=G.ReactCurrentBatchConfig,$e=0,jt=null,_t=null,$t=0,An=0,la=Rs(0),Pt=0,$l=null,Fi=0,Kc=0,sp=0,Bl=null,pn=null,ip=0,ua=1/0,ns=null,Gc=!1,op=null,js=null,Qc=!1,Os=null,Xc=0,zl=0,ap=null,Yc=-1,Jc=0;function sn(){return($e&6)!==0?Qe():Yc!==-1?Yc:Yc=Qe()}function Ls(s){return(s.mode&1)===0?1:($e&2)!==0&&$t!==0?$t&-$t:_A.transition!==null?(Jc===0&&(Jc=Ai()),Jc):(s=Oe,s!==0||(s=window.event,s=s===void 0?16:yl(s.type)),s)}function ar(s,o,u,d){if(50<zl)throw zl=0,ap=null,Error(n(185));xs(s,u,d),(($e&2)===0||s!==jt)&&(s===jt&&(($e&2)===0&&(Kc|=u),Pt===4&&Ms(s,$t)),mn(s,d),u===1&&$e===0&&(o.mode&1)===0&&(ua=Qe()+500,Ic&&ks()))}function mn(s,o){var u=s.callbackNode;Hr(s,o);var d=Ii(s,s===jt?$t:0);if(d===0)u!==null&&dl(u),s.callbackNode=null,s.callbackPriority=0;else if(o=d&-d,s.callbackPriority!==o){if(u!=null&&dl(u),o===1)s.tag===0?vA(Yv.bind(null,s)):O0(Yv.bind(null,s)),pA(function(){($e&6)===0&&ks()}),u=null;else{switch(Es(d)){case 1:u=Si;break;case 4:u=vs;break;case 16:u=kn;break;case 536870912:u=Ju;break;default:u=kn}u=i_(u,Xv.bind(null,s))}s.callbackPriority=o,s.callbackNode=u}}function Xv(s,o){if(Yc=-1,Jc=0,($e&6)!==0)throw Error(n(327));var u=s.callbackNode;if(ca()&&s.callbackNode!==u)return null;var d=Ii(s,s===jt?$t:0);if(d===0)return null;if((d&30)!==0||(d&s.expiredLanes)!==0||o)o=Zc(s,d);else{o=d;var m=$e;$e|=2;var _=Zv();(jt!==s||$t!==o)&&(ns=null,ua=Qe()+500,$i(s,o));do try{FA();break}catch(k){Jv(s,k)}while(!0);bf(),qc.current=_,$e=m,_t!==null?o=0:(jt=null,$t=0,o=Pt)}if(o!==0){if(o===2&&(m=Tn(s),m!==0&&(d=m,o=lp(s,m))),o===1)throw u=$l,$i(s,0),Ms(s,d),mn(s,Qe()),u;if(o===6)Ms(s,d);else{if(m=s.current.alternate,(d&30)===0&&!LA(m)&&(o=Zc(s,d),o===2&&(_=Tn(s),_!==0&&(d=_,o=lp(s,_))),o===1))throw u=$l,$i(s,0),Ms(s,d),mn(s,Qe()),u;switch(s.finishedWork=m,s.finishedLanes=d,o){case 0:case 1:throw Error(n(345));case 2:Bi(s,pn,ns);break;case 3:if(Ms(s,d),(d&130023424)===d&&(o=ip+500-Qe(),10<o)){if(Ii(s,0)!==0)break;if(m=s.suspendedLanes,(m&d)!==d){sn(),s.pingedLanes|=s.suspendedLanes&m;break}s.timeoutHandle=pf(Bi.bind(null,s,pn,ns),o);break}Bi(s,pn,ns);break;case 4:if(Ms(s,d),(d&4194240)===d)break;for(o=s.eventTimes,m=-1;0<d;){var E=31-tn(d);_=1<<E,E=o[E],E>m&&(m=E),d&=~_}if(d=m,d=Qe()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*OA(d/1960))-d,10<d){s.timeoutHandle=pf(Bi.bind(null,s,pn,ns),d);break}Bi(s,pn,ns);break;case 5:Bi(s,pn,ns);break;default:throw Error(n(329))}}}return mn(s,Qe()),s.callbackNode===u?Xv.bind(null,s):null}function lp(s,o){var u=Bl;return s.current.memoizedState.isDehydrated&&($i(s,o).flags|=256),s=Zc(s,o),s!==2&&(o=pn,pn=u,o!==null&&up(o)),s}function up(s){pn===null?pn=s:pn.push.apply(pn,s)}function LA(s){for(var o=s;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var d=0;d<u.length;d++){var m=u[d],_=m.getSnapshot;m=m.value;try{if(!nr(_(),m))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ms(s,o){for(o&=~sp,o&=~Kc,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var u=31-tn(o),d=1<<u;s[u]=-1,o&=~d}}function Yv(s){if(($e&6)!==0)throw Error(n(327));ca();var o=Ii(s,0);if((o&1)===0)return mn(s,Qe()),null;var u=Zc(s,o);if(s.tag!==0&&u===2){var d=Tn(s);d!==0&&(o=d,u=lp(s,d))}if(u===1)throw u=$l,$i(s,0),Ms(s,o),mn(s,Qe()),u;if(u===6)throw Error(n(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,Bi(s,pn,ns),mn(s,Qe()),null}function cp(s,o){var u=$e;$e|=1;try{return s(o)}finally{$e=u,$e===0&&(ua=Qe()+500,Ic&&ks())}}function Ui(s){Os!==null&&Os.tag===0&&($e&6)===0&&ca();var o=$e;$e|=1;var u=Mn.transition,d=Oe;try{if(Mn.transition=null,Oe=1,s)return s()}finally{Oe=d,Mn.transition=u,$e=o,($e&6)===0&&ks()}}function hp(){An=la.current,Ze(la)}function $i(s,o){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,fA(u)),_t!==null)for(u=_t.return;u!==null;){var d=u;switch(wf(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Sc();break;case 3:ia(),Ze(hn),Ze(qt),Vf();break;case 5:kf(d);break;case 4:ia();break;case 13:Ze(rt);break;case 19:Ze(rt);break;case 10:If(d.type._context);break;case 22:case 23:hp()}u=u.return}if(jt=s,_t=s=Fs(s.current,null),$t=An=o,Pt=0,$l=null,sp=Kc=Fi=0,pn=Bl=null,Oi!==null){for(o=0;o<Oi.length;o++)if(u=Oi[o],d=u.interleaved,d!==null){u.interleaved=null;var m=d.next,_=u.pending;if(_!==null){var E=_.next;_.next=m,d.next=E}u.pending=d}Oi=null}return s}function Jv(s,o){do{var u=_t;try{if(bf(),Oc.current=Uc,Lc){for(var d=st.memoizedState;d!==null;){var m=d.queue;m!==null&&(m.pending=null),d=d.next}Lc=!1}if(Mi=0,Dt=Rt=st=null,jl=!1,Ol=0,rp.current=null,u===null||u.return===null){Pt=1,$l=o,_t=null;break}e:{var _=s,E=u.return,k=u,L=o;if(o=$t,k.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var Q=L,re=k,se=re.tag;if((re.mode&1)===0&&(se===0||se===11||se===15)){var ne=re.alternate;ne?(re.updateQueue=ne.updateQueue,re.memoizedState=ne.memoizedState,re.lanes=ne.lanes):(re.updateQueue=null,re.memoizedState=null)}var he=Ev(E);if(he!==null){he.flags&=-257,Sv(he,E,k,_,o),he.mode&1&&Tv(_,Q,o),o=he,L=Q;var pe=o.updateQueue;if(pe===null){var me=new Set;me.add(L),o.updateQueue=me}else pe.add(L);break e}else{if((o&1)===0){Tv(_,Q,o),dp();break e}L=Error(n(426))}}else if(nt&&k.mode&1){var pt=Ev(E);if(pt!==null){(pt.flags&65536)===0&&(pt.flags|=256),Sv(pt,E,k,_,o),Ef(oa(L,k));break e}}_=L=oa(L,k),Pt!==4&&(Pt=2),Bl===null?Bl=[_]:Bl.push(_),_=E;do{switch(_.tag){case 3:_.flags|=65536,o&=-o,_.lanes|=o;var q=wv(_,L,o);K0(_,q);break e;case 1:k=L;var $=_.type,K=_.stateNode;if((_.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||K!==null&&typeof K.componentDidCatch=="function"&&(js===null||!js.has(K)))){_.flags|=65536,o&=-o,_.lanes|=o;var ie=xv(_,k,o);K0(_,ie);break e}}_=_.return}while(_!==null)}t_(u)}catch(ge){o=ge,_t===u&&u!==null&&(_t=u=u.return);continue}break}while(!0)}function Zv(){var s=qc.current;return qc.current=Uc,s===null?Uc:s}function dp(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),jt===null||(Fi&268435455)===0&&(Kc&268435455)===0||Ms(jt,$t)}function Zc(s,o){var u=$e;$e|=2;var d=Zv();(jt!==s||$t!==o)&&(ns=null,$i(s,o));do try{MA();break}catch(m){Jv(s,m)}while(!0);if(bf(),$e=u,qc.current=d,_t!==null)throw Error(n(261));return jt=null,$t=0,Pt}function MA(){for(;_t!==null;)e_(_t)}function FA(){for(;_t!==null&&!Xu();)e_(_t)}function e_(s){var o=s_(s.alternate,s,An);s.memoizedProps=s.pendingProps,o===null?t_(s):_t=o,rp.current=null}function t_(s){var o=s;do{var u=o.alternate;if(s=o.return,(o.flags&32768)===0){if(u=kA(u,o,An),u!==null){_t=u;return}}else{if(u=NA(u,o),u!==null){u.flags&=32767,_t=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Pt=6,_t=null;return}}if(o=o.sibling,o!==null){_t=o;return}_t=o=s}while(o!==null);Pt===0&&(Pt=5)}function Bi(s,o,u){var d=Oe,m=Mn.transition;try{Mn.transition=null,Oe=1,UA(s,o,u,d)}finally{Mn.transition=m,Oe=d}return null}function UA(s,o,u,d){do ca();while(Os!==null);if(($e&6)!==0)throw Error(n(327));u=s.finishedWork;var m=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(n(177));s.callbackNode=null,s.callbackPriority=0;var _=u.lanes|u.childLanes;if(Ke(s,_),s===jt&&(_t=jt=null,$t=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Qc||(Qc=!0,i_(kn,function(){return ca(),null})),_=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||_){_=Mn.transition,Mn.transition=null;var E=Oe;Oe=1;var k=$e;$e|=4,rp.current=null,DA(s,u),Wv(u,s),oA(df),bs=!!hf,df=hf=null,s.current=u,jA(u),Gd(),$e=k,Oe=E,Mn.transition=_}else s.current=u;if(Qc&&(Qc=!1,Os=s,Xc=m),_=s.pendingLanes,_===0&&(js=null),Zu(u.stateNode),mn(s,Qe()),o!==null)for(d=s.onRecoverableError,u=0;u<o.length;u++)m=o[u],d(m.value,{componentStack:m.stack,digest:m.digest});if(Gc)throw Gc=!1,s=op,op=null,s;return(Xc&1)!==0&&s.tag!==0&&ca(),_=s.pendingLanes,(_&1)!==0?s===ap?zl++:(zl=0,ap=s):zl=0,ks(),null}function ca(){if(Os!==null){var s=Es(Xc),o=Mn.transition,u=Oe;try{if(Mn.transition=null,Oe=16>s?16:s,Os===null)var d=!1;else{if(s=Os,Os=null,Xc=0,($e&6)!==0)throw Error(n(331));var m=$e;for($e|=4,fe=s.current;fe!==null;){var _=fe,E=_.child;if((fe.flags&16)!==0){var k=_.deletions;if(k!==null){for(var L=0;L<k.length;L++){var Q=k[L];for(fe=Q;fe!==null;){var re=fe;switch(re.tag){case 0:case 11:case 15:Ul(8,re,_)}var se=re.child;if(se!==null)se.return=re,fe=se;else for(;fe!==null;){re=fe;var ne=re.sibling,he=re.return;if(Uv(re),re===Q){fe=null;break}if(ne!==null){ne.return=he,fe=ne;break}fe=he}}}var pe=_.alternate;if(pe!==null){var me=pe.child;if(me!==null){pe.child=null;do{var pt=me.sibling;me.sibling=null,me=pt}while(me!==null)}}fe=_}}if((_.subtreeFlags&2064)!==0&&E!==null)E.return=_,fe=E;else e:for(;fe!==null;){if(_=fe,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:Ul(9,_,_.return)}var q=_.sibling;if(q!==null){q.return=_.return,fe=q;break e}fe=_.return}}var $=s.current;for(fe=$;fe!==null;){E=fe;var K=E.child;if((E.subtreeFlags&2064)!==0&&K!==null)K.return=E,fe=K;else e:for(E=$;fe!==null;){if(k=fe,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:Wc(9,k)}}catch(ge){lt(k,k.return,ge)}if(k===E){fe=null;break e}var ie=k.sibling;if(ie!==null){ie.return=k.return,fe=ie;break e}fe=k.return}}if($e=m,ks(),xn&&typeof xn.onPostCommitFiberRoot=="function")try{xn.onPostCommitFiberRoot(bi,s)}catch{}d=!0}return d}finally{Oe=u,Mn.transition=o}}return!1}function n_(s,o,u){o=oa(u,o),o=wv(s,o,1),s=Vs(s,o,1),o=sn(),s!==null&&(xs(s,1,o),mn(s,o))}function lt(s,o,u){if(s.tag===3)n_(s,s,u);else for(;o!==null;){if(o.tag===3){n_(o,s,u);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(js===null||!js.has(d))){s=oa(u,s),s=xv(o,s,1),o=Vs(o,s,1),s=sn(),o!==null&&(xs(o,1,s),mn(o,s));break}}o=o.return}}function $A(s,o,u){var d=s.pingCache;d!==null&&d.delete(o),o=sn(),s.pingedLanes|=s.suspendedLanes&u,jt===s&&($t&u)===u&&(Pt===4||Pt===3&&($t&130023424)===$t&&500>Qe()-ip?$i(s,0):sp|=u),mn(s,o)}function r_(s,o){o===0&&((s.mode&1)===0?o=1:(o=Vo,Vo<<=1,(Vo&130023424)===0&&(Vo=4194304)));var u=sn();s=Zr(s,o),s!==null&&(xs(s,o,u),mn(s,u))}function BA(s){var o=s.memoizedState,u=0;o!==null&&(u=o.retryLane),r_(s,u)}function zA(s,o){var u=0;switch(s.tag){case 13:var d=s.stateNode,m=s.memoizedState;m!==null&&(u=m.retryLane);break;case 19:d=s.stateNode;break;default:throw Error(n(314))}d!==null&&d.delete(o),r_(s,u)}var s_;s_=function(s,o,u){if(s!==null)if(s.memoizedProps!==o.pendingProps||hn.current)fn=!0;else{if((s.lanes&u)===0&&(o.flags&128)===0)return fn=!1,PA(s,o,u);fn=(s.flags&131072)!==0}else fn=!1,nt&&(o.flags&1048576)!==0&&L0(o,Cc,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;zc(s,o),s=o.pendingProps;var m=Jo(o,qt.current);sa(o,u),m=Of(null,o,d,s,m,u);var _=Lf();return o.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,dn(d)?(_=!0,bc(o)):_=!1,o.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,Rf(o),m.updater=$c,o.stateNode=m,m._reactInternals=o,zf(o,d,s,u),o=Kf(null,o,d,!0,_,u)):(o.tag=0,nt&&_&&_f(o),rn(null,o,m,u),o=o.child),o;case 16:d=o.elementType;e:{switch(zc(s,o),s=o.pendingProps,m=d._init,d=m(d._payload),o.type=d,m=o.tag=WA(d),s=sr(d,s),m){case 0:o=qf(null,o,d,s,u);break e;case 1:o=Pv(null,o,d,s,u);break e;case 11:o=bv(null,o,d,s,u);break e;case 14:o=Iv(null,o,d,sr(d.type,s),u);break e}throw Error(n(306,d,""))}return o;case 0:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:sr(d,m),qf(s,o,d,m,u);case 1:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:sr(d,m),Pv(s,o,d,m,u);case 3:e:{if(kv(o),s===null)throw Error(n(387));d=o.pendingProps,_=o.memoizedState,m=_.element,q0(s,o),Dc(o,d,null,u);var E=o.memoizedState;if(d=E.element,_.isDehydrated)if(_={element:d,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){m=oa(Error(n(423)),o),o=Nv(s,o,d,u,m);break e}else if(d!==m){m=oa(Error(n(424)),o),o=Nv(s,o,d,u,m);break e}else for(In=Cs(o.stateNode.containerInfo.firstChild),bn=o,nt=!0,rr=null,u=H0(o,null,d,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(ta(),d===m){o=ts(s,o,u);break e}rn(s,o,d,u)}o=o.child}return o;case 5:return Q0(o),s===null&&Tf(o),d=o.type,m=o.pendingProps,_=s!==null?s.memoizedProps:null,E=m.children,ff(d,m)?E=null:_!==null&&ff(d,_)&&(o.flags|=32),Rv(s,o),rn(s,o,E,u),o.child;case 6:return s===null&&Tf(o),null;case 13:return Vv(s,o,u);case 4:return Pf(o,o.stateNode.containerInfo),d=o.pendingProps,s===null?o.child=na(o,null,d,u):rn(s,o,d,u),o.child;case 11:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:sr(d,m),bv(s,o,d,m,u);case 7:return rn(s,o,o.pendingProps,u),o.child;case 8:return rn(s,o,o.pendingProps.children,u),o.child;case 12:return rn(s,o,o.pendingProps.children,u),o.child;case 10:e:{if(d=o.type._context,m=o.pendingProps,_=o.memoizedProps,E=m.value,Xe(kc,d._currentValue),d._currentValue=E,_!==null)if(nr(_.value,E)){if(_.children===m.children&&!hn.current){o=ts(s,o,u);break e}}else for(_=o.child,_!==null&&(_.return=o);_!==null;){var k=_.dependencies;if(k!==null){E=_.child;for(var L=k.firstContext;L!==null;){if(L.context===d){if(_.tag===1){L=es(-1,u&-u),L.tag=2;var Q=_.updateQueue;if(Q!==null){Q=Q.shared;var re=Q.pending;re===null?L.next=L:(L.next=re.next,re.next=L),Q.pending=L}}_.lanes|=u,L=_.alternate,L!==null&&(L.lanes|=u),Af(_.return,u,o),k.lanes|=u;break}L=L.next}}else if(_.tag===10)E=_.type===o.type?null:_.child;else if(_.tag===18){if(E=_.return,E===null)throw Error(n(341));E.lanes|=u,k=E.alternate,k!==null&&(k.lanes|=u),Af(E,u,o),E=_.sibling}else E=_.child;if(E!==null)E.return=_;else for(E=_;E!==null;){if(E===o){E=null;break}if(_=E.sibling,_!==null){_.return=E.return,E=_;break}E=E.return}_=E}rn(s,o,m.children,u),o=o.child}return o;case 9:return m=o.type,d=o.pendingProps.children,sa(o,u),m=On(m),d=d(m),o.flags|=1,rn(s,o,d,u),o.child;case 14:return d=o.type,m=sr(d,o.pendingProps),m=sr(d.type,m),Iv(s,o,d,m,u);case 15:return Av(s,o,o.type,o.pendingProps,u);case 17:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:sr(d,m),zc(s,o),o.tag=1,dn(d)?(s=!0,bc(o)):s=!1,sa(o,u),vv(o,d,m),zf(o,d,m,u),Kf(null,o,d,!0,s,u);case 19:return jv(s,o,u);case 22:return Cv(s,o,u)}throw Error(n(156,o.tag))};function i_(s,o){return ko(s,o)}function HA(s,o,u,d){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(s,o,u,d){return new HA(s,o,u,d)}function fp(s){return s=s.prototype,!(!s||!s.isReactComponent)}function WA(s){if(typeof s=="function")return fp(s)?1:0;if(s!=null){if(s=s.$$typeof,s===F)return 11;if(s===Ue)return 14}return 2}function Fs(s,o){var u=s.alternate;return u===null?(u=Fn(s.tag,o,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=o,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,o=s.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function eh(s,o,u,d,m,_){var E=2;if(d=s,typeof s=="function")fp(s)&&(E=1);else if(typeof s=="string")E=5;else e:switch(s){case N:return zi(u.children,m,_,o);case b:E=8,m|=8;break;case A:return s=Fn(12,u,o,m|2),s.elementType=A,s.lanes=_,s;case P:return s=Fn(13,u,o,m),s.elementType=P,s.lanes=_,s;case Ie:return s=Fn(19,u,o,m),s.elementType=Ie,s.lanes=_,s;case xe:return th(u,m,_,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case I:E=10;break e;case V:E=9;break e;case F:E=11;break e;case Ue:E=14;break e;case yt:E=16,d=null;break e}throw Error(n(130,s==null?s:typeof s,""))}return o=Fn(E,u,o,m),o.elementType=s,o.type=d,o.lanes=_,o}function zi(s,o,u,d){return s=Fn(7,s,d,o),s.lanes=u,s}function th(s,o,u,d){return s=Fn(22,s,d,o),s.elementType=xe,s.lanes=u,s.stateNode={isHidden:!1},s}function pp(s,o,u){return s=Fn(6,s,null,o),s.lanes=u,s}function mp(s,o,u){return o=Fn(4,s.children!==null?s.children:[],s.key,o),o.lanes=u,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function qA(s,o,u,d,m){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ws(0),this.expirationTimes=ws(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ws(0),this.identifierPrefix=d,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function gp(s,o,u,d,m,_,E,k,L){return s=new qA(s,o,u,k,L),o===1?(o=1,_===!0&&(o|=8)):o=0,_=Fn(3,null,null,o),s.current=_,_.stateNode=s,_.memoizedState={element:d,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rf(_),s}function KA(s,o,u){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:J,key:d==null?null:""+d,children:s,containerInfo:o,implementation:u}}function o_(s){if(!s)return Ps;s=s._reactInternals;e:{if(Qn(s)!==s||s.tag!==1)throw Error(n(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(dn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(n(171))}if(s.tag===1){var u=s.type;if(dn(u))return D0(s,u,o)}return o}function a_(s,o,u,d,m,_,E,k,L){return s=gp(u,d,!0,s,m,_,E,k,L),s.context=o_(null),u=s.current,d=sn(),m=Ls(u),_=es(d,m),_.callback=o??null,Vs(u,_,m),s.current.lanes=m,xs(s,m,d),mn(s,d),s}function nh(s,o,u,d){var m=o.current,_=sn(),E=Ls(m);return u=o_(u),o.context===null?o.context=u:o.pendingContext=u,o=es(_,E),o.payload={element:s},d=d===void 0?null:d,d!==null&&(o.callback=d),s=Vs(m,o,E),s!==null&&(ar(s,m,E,_),Vc(s,m,E)),E}function rh(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function l_(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<o?u:o}}function yp(s,o){l_(s,o),(s=s.alternate)&&l_(s,o)}function GA(){return null}var u_=typeof reportError=="function"?reportError:function(s){console.error(s)};function vp(s){this._internalRoot=s}sh.prototype.render=vp.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(n(409));nh(s,o,null,null)},sh.prototype.unmount=vp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;Ui(function(){nh(null,s,null,null)}),o[Qr]=null}};function sh(s){this._internalRoot=s}sh.prototype.unstable_scheduleHydration=function(s){if(s){var o=sc();s={blockedOn:null,target:s,priority:o};for(var u=0;u<vr.length&&o!==0&&o<vr[u].priority;u++);vr.splice(u,0,s),u===0&&ac(s)}};function _p(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function ih(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function c_(){}function QA(s,o,u,d,m){if(m){if(typeof d=="function"){var _=d;d=function(){var Q=rh(E);_.call(Q)}}var E=a_(o,d,s,0,null,!1,!1,"",c_);return s._reactRootContainer=E,s[Qr]=E.current,Al(s.nodeType===8?s.parentNode:s),Ui(),E}for(;m=s.lastChild;)s.removeChild(m);if(typeof d=="function"){var k=d;d=function(){var Q=rh(L);k.call(Q)}}var L=gp(s,0,!1,null,null,!1,!1,"",c_);return s._reactRootContainer=L,s[Qr]=L.current,Al(s.nodeType===8?s.parentNode:s),Ui(function(){nh(o,L,u,d)}),L}function oh(s,o,u,d,m){var _=u._reactRootContainer;if(_){var E=_;if(typeof m=="function"){var k=m;m=function(){var L=rh(E);k.call(L)}}nh(o,E,s,m)}else E=QA(u,o,s,m,d);return rh(E)}nc=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var u=_s(o.pendingLanes);u!==0&&(Ts(o,u|1),mn(o,Qe()),($e&6)===0&&(ua=Qe()+500,ks()))}break;case 13:Ui(function(){var d=Zr(s,1);if(d!==null){var m=sn();ar(d,s,1,m)}}),yp(s,1)}},Do=function(s){if(s.tag===13){var o=Zr(s,134217728);if(o!==null){var u=sn();ar(o,s,134217728,u)}yp(s,134217728)}},rc=function(s){if(s.tag===13){var o=Ls(s),u=Zr(s,o);if(u!==null){var d=sn();ar(u,s,o,d)}yp(s,o)}},sc=function(){return Oe},ic=function(s,o){var u=Oe;try{return Oe=s,o()}finally{Oe=u}},bo=function(s,o,u){switch(o){case"input":if(Ja(s,u),o=u.name,u.type==="radio"&&o!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var d=u[o];if(d!==s&&d.form===s.form){var m=Ec(d);if(!m)throw Error(n(90));_o(d),Ja(d,m)}}}break;case"textarea":Eo(s,u);break;case"select":o=u.value,o!=null&&$r(s,!!u.multiple,o,!1)}},wi=cp,ll=Ui;var XA={usingClientEntryPoint:!1,Events:[Pl,Xo,Ec,gr,al,cp]},Hl={findFiberByHostInstance:Ni,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},YA={bundleType:Hl.bundleType,version:Hl.version,rendererPackageName:Hl.rendererPackageName,rendererConfig:Hl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:G.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=hl(s),s===null?null:s.stateNode},findFiberByHostInstance:Hl.findFiberByHostInstance||GA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ah=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ah.isDisabled&&ah.supportsFiber)try{bi=ah.inject(YA),xn=ah}catch{}}return gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XA,gn.createPortal=function(s,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_p(o))throw Error(n(200));return KA(s,o,null,u)},gn.createRoot=function(s,o){if(!_p(s))throw Error(n(299));var u=!1,d="",m=u_;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(m=o.onRecoverableError)),o=gp(s,1,!1,null,null,u,!1,d,m),s[Qr]=o.current,Al(s.nodeType===8?s.parentNode:s),new vp(o)},gn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=hl(o),s=s===null?null:s.stateNode,s},gn.flushSync=function(s){return Ui(s)},gn.hydrate=function(s,o,u){if(!ih(o))throw Error(n(200));return oh(null,s,o,!0,u)},gn.hydrateRoot=function(s,o,u){if(!_p(s))throw Error(n(405));var d=u!=null&&u.hydratedSources||null,m=!1,_="",E=u_;if(u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onRecoverableError!==void 0&&(E=u.onRecoverableError)),o=a_(o,null,s,1,u??null,m,!1,_,E),s[Qr]=o.current,Al(s),d)for(s=0;s<d.length;s++)u=d[s],m=u._getVersion,m=m(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,m]:o.mutableSourceEagerHydrationData.push(u,m);return new sh(o)},gn.render=function(s,o,u){if(!ih(o))throw Error(n(200));return oh(null,s,o,!1,u)},gn.unmountComponentAtNode=function(s){if(!ih(s))throw Error(n(40));return s._reactRootContainer?(Ui(function(){oh(null,null,s,!1,function(){s._reactRootContainer=null,s[Qr]=null})}),!0):!1},gn.unstable_batchedUpdates=cp,gn.unstable_renderSubtreeIntoContainer=function(s,o,u,d){if(!ih(u))throw Error(n(200));if(s==null||s._reactInternals===void 0)throw Error(n(38));return oh(s,o,u,!1,d)},gn.version="18.3.1-next-f1338f8080-20240426",gn}var v_;function $1(){if(v_)return Tp.exports;v_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Tp.exports=oC(),Tp.exports}var __;function aC(){if(__)return lh;__=1;var t=$1();return lh.createRoot=t.createRoot,lh.hydrateRoot=t.hydrateRoot,lh}var lC=aC();const uC=F1(lC);$1();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fu(){return fu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fu.apply(this,arguments)}var Gs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Gs||(Gs={}));const w_="popstate";function cC(t){t===void 0&&(t={});function e(i,a){let{pathname:l="/",search:h="",hash:f=""}=uo(i.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),cm("",{pathname:l,search:h,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let l=i.document.querySelector("base"),h="";if(l&&l.getAttribute("href")){let f=i.location.href,p=f.indexOf("#");h=p===-1?f:f.slice(0,p)}return h+"#"+(typeof a=="string"?a:Fh(a))}function r(i,a){cg(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return dC(e,n,r,t)}function bt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function cg(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hC(){return Math.random().toString(36).substr(2,8)}function x_(t,e){return{usr:t.state,key:t.key,idx:e}}function cm(t,e,n,r){return n===void 0&&(n=null),fu({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?uo(e):e,{state:n,key:e&&e.key||r||hC()})}function Fh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function uo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function dC(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,l=i.history,h=Gs.Pop,f=null,p=g();p==null&&(p=0,l.replaceState(fu({},l.state,{idx:p}),""));function g(){return(l.state||{idx:null}).idx}function w(){h=Gs.Pop;let R=g(),M=R==null?null:R-p;p=R,f&&f({action:h,location:j.location,delta:M})}function x(R,M){h=Gs.Push;let U=cm(j.location,R,M);n&&n(U,R),p=g()+1;let z=x_(U,p),G=j.createHref(U);try{l.pushState(z,"",G)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;i.location.assign(G)}a&&f&&f({action:h,location:j.location,delta:1})}function C(R,M){h=Gs.Replace;let U=cm(j.location,R,M);n&&n(U,R),p=g();let z=x_(U,p),G=j.createHref(U);l.replaceState(z,"",G),a&&f&&f({action:h,location:j.location,delta:0})}function D(R){let M=i.location.origin!=="null"?i.location.origin:i.location.href,U=typeof R=="string"?R:Fh(R);return U=U.replace(/ $/,"%20"),bt(M,"No window.location.(origin|href) available to create URL for href: "+U),new URL(U,M)}let j={get action(){return h},get location(){return t(i,l)},listen(R){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(w_,w),f=R,()=>{i.removeEventListener(w_,w),f=null}},createHref(R){return e(i,R)},createURL:D,encodeLocation(R){let M=D(R);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:x,replace:C,go(R){return l.go(R)}};return j}var T_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(T_||(T_={}));function fC(t,e,n){return n===void 0&&(n="/"),pC(t,e,n)}function pC(t,e,n,r){let i=typeof e=="string"?uo(e):e,a=hg(i.pathname||"/",n);if(a==null)return null;let l=B1(t);mC(l);let h=null;for(let f=0;h==null&&f<l.length;++f){let p=AC(a);h=SC(l[f],p)}return h}function B1(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,l,h)=>{let f={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};f.relativePath.startsWith("/")&&(bt(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let p=Xs([r,f.relativePath]),g=n.concat(f);a.children&&a.children.length>0&&(bt(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),B1(a.children,e,g,p)),!(a.path==null&&!a.index)&&e.push({path:p,score:TC(p,a.index),routesMeta:g})};return t.forEach((a,l)=>{var h;if(a.path===""||!((h=a.path)!=null&&h.includes("?")))i(a,l);else for(let f of z1(a.path))i(a,l,f)}),e}function z1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let l=z1(r.join("/")),h=[];return h.push(...l.map(f=>f===""?a:[a,f].join("/"))),i&&h.push(...l),h.map(f=>t.startsWith("/")&&f===""?"/":f)}function mC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:EC(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const gC=/^:[\w-]+$/,yC=3,vC=2,_C=1,wC=10,xC=-2,E_=t=>t==="*";function TC(t,e){let n=t.split("/"),r=n.length;return n.some(E_)&&(r+=xC),e&&(r+=vC),n.filter(i=>!E_(i)).reduce((i,a)=>i+(gC.test(a)?yC:a===""?_C:wC),r)}function EC(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function SC(t,e,n){let{routesMeta:r}=t,i={},a="/",l=[];for(let h=0;h<r.length;++h){let f=r[h],p=h===r.length-1,g=a==="/"?e:e.slice(a.length)||"/",w=bC({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},g),x=f.route;if(!w)return null;Object.assign(i,w.params),l.push({params:i,pathname:Xs([a,w.pathname]),pathnameBase:kC(Xs([a,w.pathnameBase])),route:x}),w.pathnameBase!=="/"&&(a=Xs([a,w.pathnameBase]))}return l}function bC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=IC(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),h=i.slice(1);return{params:r.reduce((p,g,w)=>{let{paramName:x,isOptional:C}=g;if(x==="*"){let j=h[w]||"";l=a.slice(0,a.length-j.length).replace(/(.)\/+$/,"$1")}const D=h[w];return C&&!D?p[x]=void 0:p[x]=(D||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:l,pattern:t}}function IC(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),cg(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,f)=>(r.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function AC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return cg(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function hg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function CC(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?uo(t):t;return{pathname:n?n.startsWith("/")?n:RC(n,e):e,search:NC(r),hash:VC(i)}}function RC(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function bp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function PC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function H1(t,e){let n=PC(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function W1(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=uo(t):(i=fu({},t),bt(!i.pathname||!i.pathname.includes("?"),bp("?","pathname","search",i)),bt(!i.pathname||!i.pathname.includes("#"),bp("#","pathname","hash",i)),bt(!i.search||!i.search.includes("#"),bp("#","search","hash",i)));let a=t===""||i.pathname==="",l=a?"/":i.pathname,h;if(l==null)h=n;else{let w=e.length-1;if(!r&&l.startsWith("..")){let x=l.split("/");for(;x[0]==="..";)x.shift(),w-=1;i.pathname=x.join("/")}h=w>=0?e[w]:"/"}let f=CC(i,h),p=l&&l!=="/"&&l.endsWith("/"),g=(a||l===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(p||g)&&(f.pathname+="/"),f}const Xs=t=>t.join("/").replace(/\/\/+/g,"/"),kC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),NC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,VC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function DC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const q1=["post","put","patch","delete"];new Set(q1);const jC=["get",...q1];new Set(jC);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pu(){return pu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pu.apply(this,arguments)}const dg=O.createContext(null),OC=O.createContext(null),co=O.createContext(null),fd=O.createContext(null),ho=O.createContext({outlet:null,matches:[],isDataRoute:!1}),K1=O.createContext(null);function LC(t,e){let{relative:n}=e===void 0?{}:e;Vu()||bt(!1);let{basename:r,navigator:i}=O.useContext(co),{hash:a,pathname:l,search:h}=Q1(t,{relative:n}),f=l;return r!=="/"&&(f=l==="/"?r:Xs([r,l])),i.createHref({pathname:f,search:h,hash:a})}function Vu(){return O.useContext(fd)!=null}function pd(){return Vu()||bt(!1),O.useContext(fd).location}function G1(t){O.useContext(co).static||O.useLayoutEffect(t)}function MC(){let{isDataRoute:t}=O.useContext(ho);return t?YC():FC()}function FC(){Vu()||bt(!1);let t=O.useContext(dg),{basename:e,future:n,navigator:r}=O.useContext(co),{matches:i}=O.useContext(ho),{pathname:a}=pd(),l=JSON.stringify(H1(i,n.v7_relativeSplatPath)),h=O.useRef(!1);return G1(()=>{h.current=!0}),O.useCallback(function(p,g){if(g===void 0&&(g={}),!h.current)return;if(typeof p=="number"){r.go(p);return}let w=W1(p,JSON.parse(l),a,g.relative==="path");t==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:Xs([e,w.pathname])),(g.replace?r.replace:r.push)(w,g.state,g)},[e,r,l,a,t])}function Q1(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=O.useContext(co),{matches:i}=O.useContext(ho),{pathname:a}=pd(),l=JSON.stringify(H1(i,r.v7_relativeSplatPath));return O.useMemo(()=>W1(t,JSON.parse(l),a,n==="path"),[t,l,a,n])}function UC(t,e){return $C(t,e)}function $C(t,e,n,r){Vu()||bt(!1);let{navigator:i}=O.useContext(co),{matches:a}=O.useContext(ho),l=a[a.length-1],h=l?l.params:{};l&&l.pathname;let f=l?l.pathnameBase:"/";l&&l.route;let p=pd(),g;if(e){var w;let R=typeof e=="string"?uo(e):e;f==="/"||(w=R.pathname)!=null&&w.startsWith(f)||bt(!1),g=R}else g=p;let x=g.pathname||"/",C=x;if(f!=="/"){let R=f.replace(/^\//,"").split("/");C="/"+x.replace(/^\//,"").split("/").slice(R.length).join("/")}let D=fC(t,{pathname:C}),j=qC(D&&D.map(R=>Object.assign({},R,{params:Object.assign({},h,R.params),pathname:Xs([f,i.encodeLocation?i.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?f:Xs([f,i.encodeLocation?i.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),a,n,r);return e&&j?O.createElement(fd.Provider,{value:{location:pu({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:Gs.Pop}},j):j}function BC(){let t=XC(),e=DC(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:i},n):null,null)}const zC=O.createElement(BC,null);class HC extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(ho.Provider,{value:this.props.routeContext},O.createElement(K1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function WC(t){let{routeContext:e,match:n,children:r}=t,i=O.useContext(dg);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(ho.Provider,{value:e},r)}function qC(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,h=(i=n)==null?void 0:i.errors;if(h!=null){let g=l.findIndex(w=>w.route.id&&h?.[w.route.id]!==void 0);g>=0||bt(!1),l=l.slice(0,Math.min(l.length,g+1))}let f=!1,p=-1;if(n&&r&&r.v7_partialHydration)for(let g=0;g<l.length;g++){let w=l[g];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(p=g),w.route.id){let{loaderData:x,errors:C}=n,D=w.route.loader&&x[w.route.id]===void 0&&(!C||C[w.route.id]===void 0);if(w.route.lazy||D){f=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((g,w,x)=>{let C,D=!1,j=null,R=null;n&&(C=h&&w.route.id?h[w.route.id]:void 0,j=w.route.errorElement||zC,f&&(p<0&&x===0?(JC("route-fallback"),D=!0,R=null):p===x&&(D=!0,R=w.route.hydrateFallbackElement||null)));let M=e.concat(l.slice(0,x+1)),U=()=>{let z;return C?z=j:D?z=R:w.route.Component?z=O.createElement(w.route.Component,null):w.route.element?z=w.route.element:z=g,O.createElement(WC,{match:w,routeContext:{outlet:g,matches:M,isDataRoute:n!=null},children:z})};return n&&(w.route.ErrorBoundary||w.route.errorElement||x===0)?O.createElement(HC,{location:n.location,revalidation:n.revalidation,component:j,error:C,children:U(),routeContext:{outlet:null,matches:M,isDataRoute:!0}}):U()},null)}var X1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(X1||{}),Y1=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Y1||{});function KC(t){let e=O.useContext(dg);return e||bt(!1),e}function GC(t){let e=O.useContext(OC);return e||bt(!1),e}function QC(t){let e=O.useContext(ho);return e||bt(!1),e}function J1(t){let e=QC(),n=e.matches[e.matches.length-1];return n.route.id||bt(!1),n.route.id}function XC(){var t;let e=O.useContext(K1),n=GC(),r=J1();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function YC(){let{router:t}=KC(X1.UseNavigateStable),e=J1(Y1.UseNavigateStable),n=O.useRef(!1);return G1(()=>{n.current=!0}),O.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,pu({fromRouteId:e},a)))},[t,e])}const S_={};function JC(t,e,n){S_[t]||(S_[t]=!0)}function ZC(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function Eh(t){bt(!1)}function eR(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Gs.Pop,navigator:a,static:l=!1,future:h}=t;Vu()&&bt(!1);let f=e.replace(/^\/*/,"/"),p=O.useMemo(()=>({basename:f,navigator:a,static:l,future:pu({v7_relativeSplatPath:!1},h)}),[f,h,a,l]);typeof r=="string"&&(r=uo(r));let{pathname:g="/",search:w="",hash:x="",state:C=null,key:D="default"}=r,j=O.useMemo(()=>{let R=hg(g,f);return R==null?null:{location:{pathname:R,search:w,hash:x,state:C,key:D},navigationType:i}},[f,g,w,x,C,D,i]);return j==null?null:O.createElement(co.Provider,{value:p},O.createElement(fd.Provider,{children:n,value:j}))}function tR(t){let{children:e,location:n}=t;return UC(hm(e),n)}new Promise(()=>{});function hm(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(r,i)=>{if(!O.isValidElement(r))return;let a=[...e,i];if(r.type===O.Fragment){n.push.apply(n,hm(r.props.children,a));return}r.type!==Eh&&bt(!1),!r.props.index||!r.props.children||bt(!1);let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=hm(r.props.children,a)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dm(){return dm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dm.apply(this,arguments)}function nR(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function rR(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function sR(t,e){return t.button===0&&(!e||e==="_self")&&!rR(t)}const iR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],oR="6";try{window.__reactRouterVersion=oR}catch{}const aR="startTransition",b_=rC[aR];function lR(t){let{basename:e,children:n,future:r,window:i}=t,a=O.useRef();a.current==null&&(a.current=cC({window:i,v5Compat:!0}));let l=a.current,[h,f]=O.useState({action:l.action,location:l.location}),{v7_startTransition:p}=r||{},g=O.useCallback(w=>{p&&b_?b_(()=>f(w)):f(w)},[f,p]);return O.useLayoutEffect(()=>l.listen(g),[l,g]),O.useEffect(()=>ZC(r),[r]),O.createElement(eR,{basename:e,children:n,location:h.location,navigationType:h.action,navigator:l,future:r})}const uR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",cR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ha=O.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:a,replace:l,state:h,target:f,to:p,preventScrollReset:g,viewTransition:w}=e,x=nR(e,iR),{basename:C}=O.useContext(co),D,j=!1;if(typeof p=="string"&&cR.test(p)&&(D=p,uR))try{let z=new URL(window.location.href),G=p.startsWith("//")?new URL(z.protocol+p):new URL(p),X=hg(G.pathname,C);G.origin===z.origin&&X!=null?p=X+G.search+G.hash:j=!0}catch{}let R=LC(p,{relative:i}),M=hR(p,{replace:l,state:h,target:f,preventScrollReset:g,relative:i,viewTransition:w});function U(z){r&&r(z),z.defaultPrevented||M(z)}return O.createElement("a",dm({},x,{href:D||R,onClick:j||a?r:U,ref:n,target:f}))});var I_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(I_||(I_={}));var A_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(A_||(A_={}));function hR(t,e){let{target:n,replace:r,state:i,preventScrollReset:a,relative:l,viewTransition:h}=e===void 0?{}:e,f=MC(),p=pd(),g=Q1(t,{relative:l});return O.useCallback(w=>{if(sR(w,n)){w.preventDefault();let x=r!==void 0?r:Fh(p)===Fh(g);f(t,{replace:x,state:i,preventScrollReset:a,relative:l,viewTransition:h})}},[p,f,g,r,i,n,t,a,l,h])}const uh="/smartfarm-tz/assets/logo-CvbaB9oV.jpg",dR="/smartfarm-tz/assets/landing1-BPLwVn9j.jpg",fR="/smartfarm-tz/assets/landing2-BQa-2pHU.jpg",pR="/smartfarm-tz/assets/landing3-lnZwy5I9.jpg",mR="/smartfarm-tz/assets/landing4-CSTi0NXk.jpg",gR="/smartfarm-tz/assets/landing5-CsmTDJC7.jpg";function yR(){const[t,e]=O.useState(!1),[n,r]=O.useState(0),[i,a]=O.useState(""),[l,h]=O.useState(0),[f,p]=O.useState(!1),[g,w]=O.useState(!1),x=[dR,fR,pR,mR,gR],C="Empowering Tanzanian Farmers with Smart Agriculture",D=()=>{e(!t)},j=()=>{w(!g)};return O.useEffect(()=>{const R=setInterval(()=>{r(M=>(M+1)%x.length)},1e4);return()=>clearInterval(R)},[x.length]),O.useEffect(()=>{if(l<C.length){const R=setTimeout(()=>{a(C.substring(0,l+1)),h(l+1)},30);return()=>clearTimeout(R)}else p(!0)},[l,C]),O.useEffect(()=>{h(0),a(""),p(!1)},[C]),y.jsxs("div",{className:"min-h-screen text-gray-800 relative overflow-hidden",children:[t&&y.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-lg transition-all duration-300",onClick:D,children:y.jsxs("div",{className:"relative max-w-2xl p-4",onClick:R=>R.stopPropagation(),children:[y.jsx("img",{src:uh,alt:"SmartFarm Logo",className:"max-h-[90vh] max-w-full rounded-xl shadow-2xl transform transition-transform duration-300 hover:scale-105"}),y.jsx("button",{className:"absolute -top-4 -right-4 bg-white rounded-full p-2 shadow-xl hover:bg-gray-100 transition-colors duration-200",onClick:D,children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),y.jsxs("div",{className:"fixed inset-0 -z-50 overflow-hidden",children:[x.map((R,M)=>y.jsx("div",{className:`absolute inset-0 bg-cover bg-center bg-no-repeat transition-all duration-1000 ease-in-out ${M===n?"opacity-100 scale-100":"opacity-0 scale-105"}`,style:{backgroundImage:`url(${R})`,filter:"blur(4px) brightness(0.9)"}},M)),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/10 to-black/30"})]}),y.jsxs("div",{className:"relative z-10 h-full flex flex-col",children:[y.jsxs("header",{className:"flex items-center justify-between p-6 bg-white/10 backdrop-blur-lg shadow-lg sticky top-0 transition-all duration-300 hover:bg-white/20",children:[y.jsxs("div",{className:"flex items-center",children:[y.jsx("button",{onClick:D,className:"focus:outline-none transform transition-transform duration-300 hover:scale-110",children:y.jsx("img",{src:uh,alt:"SmartFarm Logo",className:"h-12 w-12 rounded-full object-cover mr-3 border-2 border-white/80 shadow-lg"})}),y.jsx("h1",{className:"text-2xl font-bold text-white drop-shadow-lg",children:"SmartFarm TZ"})]}),y.jsxs("nav",{className:"hidden md:flex space-x-6 text-sm font-medium",children:[y.jsxs(ha,{to:"/",className:"text-white/90 hover:text-white transition-colors duration-200 relative group",children:["Home",y.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"})]}),y.jsxs(ha,{to:"/weather",className:"text-white/90 hover:text-white transition-colors duration-200 relative group",children:["Weather",y.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"})]}),y.jsxs("a",{href:"#",className:"text-white/90 hover:text-white transition-colors duration-200 relative group",children:["Marketplace",y.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"})]}),y.jsxs("a",{href:"#",className:"text-white/90 hover:text-white transition-colors duration-200 relative group",children:["Academy",y.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"})]}),y.jsxs("a",{href:"#",className:"text-white/90 hover:text-white transition-colors duration-200 relative group",children:["Crop Health",y.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"})]}),y.jsxs(ha,{to:"/chat",className:"text-white/90 hover:text-white transition-colors duration-200 relative group",children:["Chat",y.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"})]}),y.jsx("a",{href:"#",className:"px-3 py-1 bg-green-600/90 rounded-lg text-white hover:bg-green-700 transition-colors duration-200",children:"Login"})]}),y.jsx("button",{className:"md:hidden text-white focus:outline-none",onClick:j,children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),g&&y.jsxs("div",{className:"md:hidden fixed inset-0 z-40",children:[y.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:j}),y.jsx("div",{className:"absolute right-0 top-0 h-full w-2/5 bg-green-800/95 backdrop-blur-md shadow-2xl",children:y.jsxs("div",{className:"flex flex-col p-4 space-y-4",children:[y.jsx(ha,{to:"/",className:"text-white py-2 px-3 rounded-lg hover:bg-white/10",onClick:j,children:"Home"}),y.jsx(ha,{to:"/weather",className:"text-white py-2 px-3 rounded-lg hover:bg-white/10",onClick:j,children:"Weather"}),y.jsx("a",{href:"#",className:"text-white py-2 px-3 rounded-lg hover:bg-white/10",onClick:j,children:"Marketplace"}),y.jsx("a",{href:"#",className:"text-white py-2 px-3 rounded-lg hover:bg-white/10",onClick:j,children:"Academy"}),y.jsx("a",{href:"#",className:"text-white py-2 px-3 rounded-lg hover:bg-white/10",onClick:j,children:"Crop Health"}),y.jsx(ha,{to:"/chat",className:"text-white py-2 px-3 rounded-lg hover:bg-white/10",onClick:j,children:"Chat"}),y.jsx("a",{href:"#",className:"mt-4 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",onClick:j,children:"Login"})]})})]}),y.jsxs("section",{className:"flex-grow flex items-center justify-center text-center py-16 px-4 relative",children:[y.jsx("div",{className:"absolute inset-0 bg-black/10 backdrop-blur-sm -z-10"}),y.jsxs("div",{className:"relative z-10 max-w-4xl",children:[y.jsx("button",{onClick:D,className:"focus:outline-none mb-8 transform transition-transform duration-500 hover:scale-110",children:y.jsx("img",{src:uh,alt:"SmartFarm Logo",className:"h-40 w-40 rounded-full object-cover mx-auto border-4 border-white/80 shadow-2xl"})}),y.jsx("div",{className:"mb-8 min-h-[120px] flex items-center justify-center",children:y.jsxs("h2",{className:"text-4xl md:text-6xl font-bold text-white drop-shadow-xl",children:[i,y.jsx("span",{className:`inline-block w-1 h-12 ml-1 bg-white ${f?"animate-pulse":"opacity-0"}`})]})}),y.jsx("p",{className:"mb-10 text-xl text-white/90 max-w-2xl mx-auto animate-fade-in delay-1000",children:"Join us to revolutionize farming with technology."}),y.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[y.jsx("button",{className:"px-8 py-4 bg-green-600/90 text-white font-semibold rounded-xl shadow-lg hover:bg-green-700 transition-all duration-300 transform hover:-translate-y-1",children:"Get Started"}),y.jsx("button",{className:"px-8 py-4 bg-white/20 text-white font-semibold rounded-xl shadow-lg hover:bg-white/30 transition-all duration-300 transform hover:-translate-y-1",children:"Learn More"})]})]})]}),y.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 px-8 py-16 relative",children:[y.jsx("div",{className:"absolute inset-0 bg-black/10 backdrop-blur-sm -z-10"}),[{title:"Smart Weather Alerts",icon:"sun",delay:100},{title:"Agri Academy",icon:"book",delay:200},{title:"Farm Marketplace",icon:"shopping-cart",delay:300},{title:"Crop Diagnostics",icon:"alert-triangle",delay:400},{title:"Live Support",icon:"message-circle",delay:500},{title:"AI Planning",icon:"cpu",delay:600},{title:"Success Stories",icon:"user",delay:700},{title:"Rewards Program",icon:"star",delay:800}].map(({title:R,icon:M,delay:U})=>y.jsxs("div",{className:"p-8 bg-white/15 backdrop-blur-md rounded-3xl shadow-lg hover:shadow-xl transition-all duration-500 border border-white/20 hover:border-white/40 transform hover:-translate-y-2 animate-fade-in-up",style:{animationDelay:`${U}ms`},children:[y.jsx("div",{className:"text-4xl mb-6 text-white flex justify-center",children:y.jsx("i",{className:`lucide-${M}`})}),y.jsx("h3",{className:"text-xl font-semibold text-white text-center",children:R})]},R))]}),y.jsxs("section",{className:"px-6 py-24 relative",children:[y.jsx("div",{className:"absolute inset-0 bg-black/10 backdrop-blur-sm -z-10"}),y.jsxs("div",{className:"relative z-10 max-w-6xl mx-auto",children:[y.jsx("h3",{className:"text-3xl font-bold text-center mb-16 text-white",children:"What Farmers Say"}),y.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:[{quote:"SmartFarm TZ has transformed how I plan and grow my crops. The weather alerts saved my harvest last season!",author:"Juma, Farmer in Dodoma",role:"Maize Farmer"},{quote:"The marketplace connected me directly with buyers. I got 30% better prices than through middlemen!",author:"Neema, Farmer in Arusha",role:"Vegetable Grower"}].map((R,M)=>y.jsxs("div",{className:"bg-white/15 backdrop-blur-md p-8 rounded-3xl shadow-lg border border-white/20 transform transition-all duration-500 hover:scale-[1.02]",children:[y.jsxs("p",{className:"italic text-white/90 text-lg mb-6",children:['"',R.quote,'"']}),y.jsxs("div",{className:"flex items-center",children:[y.jsx("div",{className:"h-12 w-12 rounded-full bg-white/20 flex items-center justify-center mr-4",children:y.jsx("span",{className:"text-white text-xl",children:M+1})}),y.jsxs("div",{children:[y.jsx("p",{className:"font-semibold text-white",children:R.author}),y.jsx("p",{className:"text-white/70 text-sm",children:R.role})]})]})]},M))})]})]}),y.jsx("footer",{className:"bg-green-800/70 backdrop-blur-lg text-white border-t border-white/20",children:y.jsxs("div",{className:"container mx-auto px-6 py-12",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-12",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center mb-4",children:[y.jsx("img",{src:uh,alt:"SmartFarm Logo",className:"h-12 w-12 rounded-full object-cover mr-3 border-2 border-white/80"}),y.jsx("h4",{className:"text-xl font-bold",children:"SmartFarm TZ"})]}),y.jsx("p",{className:"text-white/80",children:"Cultivating a brighter future for Tanzanian agriculture through technology and innovation."})]}),y.jsxs("div",{children:[y.jsx("h5",{className:"text-lg font-semibold mb-4",children:"Quick Links"}),y.jsx("ul",{className:"space-y-2",children:["About Us","Services","Marketplace","Academy"].map(R=>y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-white/80 hover:text-white transition-colors duration-200",children:R})},R))})]}),y.jsxs("div",{children:[y.jsx("h5",{className:"text-lg font-semibold mb-4",children:"Resources"}),y.jsx("ul",{className:"space-y-2",children:["Blog","FAQs","Weather Data","Crop Calendar"].map(R=>y.jsx("li",{children:y.jsx("a",{href:"#",className:"text-white/80 hover:text-white transition-colors duration-200",children:R})},R))})]}),y.jsxs("div",{children:[y.jsx("h5",{className:"text-lg font-semibold mb-4",children:"Contact Us"}),y.jsxs("ul",{className:"space-y-2",children:[y.jsxs("li",{className:"flex items-center",children:[y.jsx("i",{className:"lucide-phone mr-2"}),y.jsx("span",{className:"text-white/80",children:"+255 123 456 789"})]}),y.jsxs("li",{className:"flex items-center",children:[y.jsx("i",{className:"lucide-mail mr-2"}),y.jsx("span",{className:"text-white/80",children:"info@smartfarmtz.com"})]})]}),y.jsx("div",{className:"flex space-x-4 mt-4",children:["facebook","twitter","instagram","youtube"].map(R=>y.jsx("a",{href:"#",className:"text-white/80 hover:text-white transition-colors duration-200",children:y.jsx("i",{className:`lucide-${R}`})},R))})]})]}),y.jsxs("div",{className:"border-t border-white/20 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center",children:[y.jsx("p",{children:" 2025 SmartFarm TZ. All rights reserved."}),y.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[y.jsx("a",{href:"#",className:"text-white/80 hover:text-white transition-colors duration-200",children:"Privacy Policy"}),y.jsx("a",{href:"#",className:"text-white/80 hover:text-white transition-colors duration-200",children:"Terms of Service"})]})]})]})})]})]})}const fg=O.createContext({});function pg(t){const e=O.useRef(null);return e.current===null&&(e.current=t()),e.current}const mg=typeof window<"u",Z1=mg?O.useLayoutEffect:O.useEffect,md=O.createContext(null);function gg(t,e){t.indexOf(e)===-1&&t.push(e)}function yg(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const as=(t,e,n)=>n>e?e:n<t?t:n;let vg=()=>{};const ls={},eT=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function tT(t){return typeof t=="object"&&t!==null}const nT=t=>/^0[^.\s]+$/u.test(t);function _g(t){let e;return()=>(e===void 0&&(e=t()),e)}const Wn=t=>t,vR=(t,e)=>n=>e(t(n)),Du=(...t)=>t.reduce(vR),mu=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class wg{constructor(){this.subscriptions=[]}add(e){return gg(this.subscriptions,e),()=>yg(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const l=this.subscriptions[a];l&&l(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Cr=t=>t*1e3,Rr=t=>t/1e3;function rT(t,e){return e?t*(1e3/e):0}const sT=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,_R=1e-7,wR=12;function xR(t,e,n,r,i){let a,l,h=0;do l=e+(n-e)/2,a=sT(l,r,i)-t,a>0?n=l:e=l;while(Math.abs(a)>_R&&++h<wR);return l}function ju(t,e,n,r){if(t===e&&n===r)return Wn;const i=a=>xR(a,0,1,t,n);return a=>a===0||a===1?a:sT(i(a),e,r)}const iT=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,oT=t=>e=>1-t(1-e),aT=ju(.33,1.53,.69,.99),xg=oT(aT),lT=iT(xg),uT=t=>(t*=2)<1?.5*xg(t):.5*(2-Math.pow(2,-10*(t-1))),Tg=t=>1-Math.sin(Math.acos(t)),cT=oT(Tg),hT=iT(Tg),TR=ju(.42,0,1,1),ER=ju(0,0,.58,1),dT=ju(.42,0,.58,1),SR=t=>Array.isArray(t)&&typeof t[0]!="number",fT=t=>Array.isArray(t)&&typeof t[0]=="number",bR={linear:Wn,easeIn:TR,easeInOut:dT,easeOut:ER,circIn:Tg,circInOut:hT,circOut:cT,backIn:xg,backInOut:lT,backOut:aT,anticipate:uT},IR=t=>typeof t=="string",C_=t=>{if(fT(t)){vg(t.length===4);const[e,n,r,i]=t;return ju(e,n,r,i)}else if(IR(t))return bR[t];return t},ch=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],R_={value:null};function AR(t,e){let n=new Set,r=new Set,i=!1,a=!1;const l=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1},f=0;function p(w){l.has(w)&&(g.schedule(w),t()),f++,w(h)}const g={schedule:(w,x=!1,C=!1)=>{const j=C&&i?n:r;return x&&l.add(w),j.has(w)||j.add(w),w},cancel:w=>{r.delete(w),l.delete(w)},process:w=>{if(h=w,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(p),e&&R_.value&&R_.value.frameloop[e].push(f),f=0,n.clear(),i=!1,a&&(a=!1,g.process(w))}};return g}const CR=40;function pT(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,l=ch.reduce((z,G)=>(z[G]=AR(a,e?G:void 0),z),{}),{setup:h,read:f,resolveKeyframes:p,preUpdate:g,update:w,preRender:x,render:C,postRender:D}=l,j=()=>{const z=ls.useManualTiming?i.timestamp:performance.now();n=!1,ls.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(z-i.timestamp,CR),1)),i.timestamp=z,i.isProcessing=!0,h.process(i),f.process(i),p.process(i),g.process(i),w.process(i),x.process(i),C.process(i),D.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(j))},R=()=>{n=!0,r=!0,i.isProcessing||t(j)};return{schedule:ch.reduce((z,G)=>{const X=l[G];return z[G]=(J,N=!1,b=!1)=>(n||R(),X.schedule(J,N,b)),z},{}),cancel:z=>{for(let G=0;G<ch.length;G++)l[ch[G]].cancel(z)},state:i,steps:l}}const{schedule:ot,cancel:ni,state:Bt,steps:Ip}=pT(typeof requestAnimationFrame<"u"?requestAnimationFrame:Wn,!0);let Sh;function RR(){Sh=void 0}const _n={now:()=>(Sh===void 0&&_n.set(Bt.isProcessing||ls.useManualTiming?Bt.timestamp:performance.now()),Sh),set:t=>{Sh=t,queueMicrotask(RR)}},mT=t=>e=>typeof e=="string"&&e.startsWith(t),Eg=mT("--"),PR=mT("var(--"),Sg=t=>PR(t)?kR.test(t.split("/*")[0].trim()):!1,kR=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,$a={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},gu={...$a,transform:t=>as(0,1,t)},hh={...$a,default:1},tu=t=>Math.round(t*1e5)/1e5,bg=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function NR(t){return t==null}const VR=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ig=(t,e)=>n=>!!(typeof n=="string"&&VR.test(n)&&n.startsWith(t)||e&&!NR(n)&&Object.prototype.hasOwnProperty.call(n,e)),gT=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,l,h]=r.match(bg);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(l),alpha:h!==void 0?parseFloat(h):1}},DR=t=>as(0,255,t),Ap={...$a,transform:t=>Math.round(DR(t))},Ki={test:Ig("rgb","red"),parse:gT("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Ap.transform(t)+", "+Ap.transform(e)+", "+Ap.transform(n)+", "+tu(gu.transform(r))+")"};function jR(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const fm={test:Ig("#"),parse:jR,transform:Ki.transform},Ou=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Bs=Ou("deg"),Pr=Ou("%"),Ee=Ou("px"),OR=Ou("vh"),LR=Ou("vw"),P_={...Pr,parse:t=>Pr.parse(t)/100,transform:t=>Pr.transform(t*100)},wa={test:Ig("hsl","hue"),parse:gT("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Pr.transform(tu(e))+", "+Pr.transform(tu(n))+", "+tu(gu.transform(r))+")"},xt={test:t=>Ki.test(t)||fm.test(t)||wa.test(t),parse:t=>Ki.test(t)?Ki.parse(t):wa.test(t)?wa.parse(t):fm.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ki.transform(t):wa.transform(t),getAnimatableNone:t=>{const e=xt.parse(t);return e.alpha=0,xt.transform(e)}},MR=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function FR(t){return isNaN(t)&&typeof t=="string"&&(t.match(bg)?.length||0)+(t.match(MR)?.length||0)>0}const yT="number",vT="color",UR="var",$R="var(",k_="${}",BR=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function yu(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const h=e.replace(BR,f=>(xt.test(f)?(r.color.push(a),i.push(vT),n.push(xt.parse(f))):f.startsWith($R)?(r.var.push(a),i.push(UR),n.push(f)):(r.number.push(a),i.push(yT),n.push(parseFloat(f))),++a,k_)).split(k_);return{values:n,split:h,indexes:r,types:i}}function _T(t){return yu(t).values}function wT(t){const{split:e,types:n}=yu(t),r=e.length;return i=>{let a="";for(let l=0;l<r;l++)if(a+=e[l],i[l]!==void 0){const h=n[l];h===yT?a+=tu(i[l]):h===vT?a+=xt.transform(i[l]):a+=i[l]}return a}}const zR=t=>typeof t=="number"?0:xt.test(t)?xt.getAnimatableNone(t):t;function HR(t){const e=_T(t);return wT(t)(e.map(zR))}const ri={test:FR,parse:_T,createTransformer:wT,getAnimatableNone:HR};function Cp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function WR({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,l=0;if(!e)i=a=l=n;else{const h=n<.5?n*(1+e):n+e-n*e,f=2*n-h;i=Cp(f,h,t+1/3),a=Cp(f,h,t),l=Cp(f,h,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:r}}function Uh(t,e){return n=>n>0?e:t}const it=(t,e,n)=>t+(e-t)*n,Rp=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},qR=[fm,Ki,wa],KR=t=>qR.find(e=>e.test(t));function N_(t){const e=KR(t);if(!e)return!1;let n=e.parse(t);return e===wa&&(n=WR(n)),n}const V_=(t,e)=>{const n=N_(t),r=N_(e);if(!n||!r)return Uh(t,e);const i={...n};return a=>(i.red=Rp(n.red,r.red,a),i.green=Rp(n.green,r.green,a),i.blue=Rp(n.blue,r.blue,a),i.alpha=it(n.alpha,r.alpha,a),Ki.transform(i))},pm=new Set(["none","hidden"]);function GR(t,e){return pm.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function QR(t,e){return n=>it(t,e,n)}function Ag(t){return typeof t=="number"?QR:typeof t=="string"?Sg(t)?Uh:xt.test(t)?V_:JR:Array.isArray(t)?xT:typeof t=="object"?xt.test(t)?V_:XR:Uh}function xT(t,e){const n=[...t],r=n.length,i=t.map((a,l)=>Ag(a)(a,e[l]));return a=>{for(let l=0;l<r;l++)n[l]=i[l](a);return n}}function XR(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Ag(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function YR(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],l=t.indexes[a][r[a]],h=t.values[l]??0;n[i]=h,r[a]++}return n}const JR=(t,e)=>{const n=ri.createTransformer(e),r=yu(t),i=yu(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?pm.has(t)&&!i.values.length||pm.has(e)&&!r.values.length?GR(t,e):Du(xT(YR(r,i),i.values),n):Uh(t,e)};function TT(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?it(t,e,n):Ag(t)(t,e)}const ZR=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>ot.update(e,n),stop:()=>ni(e),now:()=>Bt.isProcessing?Bt.timestamp:_n.now()}},ET=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},$h=2e4;function Cg(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<$h;)e+=n,r=t.next(e);return e>=$h?1/0:e}function eP(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(Cg(r),$h);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:Rr(i)}}const tP=5;function ST(t,e,n){const r=Math.max(e-tP,0);return rT(n-t(r),e-r)}const ut={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Pp=.001;function nP({duration:t=ut.duration,bounce:e=ut.bounce,velocity:n=ut.velocity,mass:r=ut.mass}){let i,a,l=1-e;l=as(ut.minDamping,ut.maxDamping,l),t=as(ut.minDuration,ut.maxDuration,Rr(t)),l<1?(i=p=>{const g=p*l,w=g*t,x=g-n,C=mm(p,l),D=Math.exp(-w);return Pp-x/C*D},a=p=>{const w=p*l*t,x=w*n+n,C=Math.pow(l,2)*Math.pow(p,2)*t,D=Math.exp(-w),j=mm(Math.pow(p,2),l);return(-i(p)+Pp>0?-1:1)*((x-C)*D)/j}):(i=p=>{const g=Math.exp(-p*t),w=(p-n)*t+1;return-Pp+g*w},a=p=>{const g=Math.exp(-p*t),w=(n-p)*(t*t);return g*w});const h=5/t,f=sP(i,a,h);if(t=Cr(t),isNaN(f))return{stiffness:ut.stiffness,damping:ut.damping,duration:t};{const p=Math.pow(f,2)*r;return{stiffness:p,damping:l*2*Math.sqrt(r*p),duration:t}}}const rP=12;function sP(t,e,n){let r=n;for(let i=1;i<rP;i++)r=r-t(r)/e(r);return r}function mm(t,e){return t*Math.sqrt(1-e*e)}const iP=["duration","bounce"],oP=["stiffness","damping","mass"];function D_(t,e){return e.some(n=>t[n]!==void 0)}function aP(t){let e={velocity:ut.velocity,stiffness:ut.stiffness,damping:ut.damping,mass:ut.mass,isResolvedFromDuration:!1,...t};if(!D_(t,oP)&&D_(t,iP))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*as(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:ut.mass,stiffness:i,damping:a}}else{const n=nP(t);e={...e,...n,mass:ut.mass},e.isResolvedFromDuration=!0}return e}function Bh(t=ut.visualDuration,e=ut.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],h={done:!1,value:a},{stiffness:f,damping:p,mass:g,duration:w,velocity:x,isResolvedFromDuration:C}=aP({...n,velocity:-Rr(n.velocity||0)}),D=x||0,j=p/(2*Math.sqrt(f*g)),R=l-a,M=Rr(Math.sqrt(f/g)),U=Math.abs(R)<5;r||(r=U?ut.restSpeed.granular:ut.restSpeed.default),i||(i=U?ut.restDelta.granular:ut.restDelta.default);let z;if(j<1){const X=mm(M,j);z=J=>{const N=Math.exp(-j*M*J);return l-N*((D+j*M*R)/X*Math.sin(X*J)+R*Math.cos(X*J))}}else if(j===1)z=X=>l-Math.exp(-M*X)*(R+(D+M*R)*X);else{const X=M*Math.sqrt(j*j-1);z=J=>{const N=Math.exp(-j*M*J),b=Math.min(X*J,300);return l-N*((D+j*M*R)*Math.sinh(b)+X*R*Math.cosh(b))/X}}const G={calculatedDuration:C&&w||null,next:X=>{const J=z(X);if(C)h.done=X>=w;else{let N=X===0?D:0;j<1&&(N=X===0?Cr(D):ST(z,X,J));const b=Math.abs(N)<=r,A=Math.abs(l-J)<=i;h.done=b&&A}return h.value=h.done?l:J,h},toString:()=>{const X=Math.min(Cg(G),$h),J=ET(N=>G.next(X*N).value,X,30);return X+"ms "+J},toTransition:()=>{}};return G}Bh.applyToOptions=t=>{const e=eP(t,100,Bh);return t.ease=e.ease,t.duration=Cr(e.duration),t.type="keyframes",t};function gm({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:l,min:h,max:f,restDelta:p=.5,restSpeed:g}){const w=t[0],x={done:!1,value:w},C=b=>h!==void 0&&b<h||f!==void 0&&b>f,D=b=>h===void 0?f:f===void 0||Math.abs(h-b)<Math.abs(f-b)?h:f;let j=n*e;const R=w+j,M=l===void 0?R:l(R);M!==R&&(j=M-w);const U=b=>-j*Math.exp(-b/r),z=b=>M+U(b),G=b=>{const A=U(b),I=z(b);x.done=Math.abs(A)<=p,x.value=x.done?M:I};let X,J;const N=b=>{C(x.value)&&(X=b,J=Bh({keyframes:[x.value,D(x.value)],velocity:ST(z,b,x.value),damping:i,stiffness:a,restDelta:p,restSpeed:g}))};return N(0),{calculatedDuration:null,next:b=>{let A=!1;return!J&&X===void 0&&(A=!0,G(b),N(b)),X!==void 0&&b>=X?J.next(b-X):(!A&&G(b),x)}}}function lP(t,e,n){const r=[],i=n||ls.mix||TT,a=t.length-1;for(let l=0;l<a;l++){let h=i(t[l],t[l+1]);if(e){const f=Array.isArray(e)?e[l]||Wn:e;h=Du(f,h)}r.push(h)}return r}function uP(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(vg(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const h=lP(e,r,i),f=h.length,p=g=>{if(l&&g<t[0])return e[0];let w=0;if(f>1)for(;w<t.length-2&&!(g<t[w+1]);w++);const x=mu(t[w],t[w+1],g);return h[w](x)};return n?g=>p(as(t[0],t[a-1],g)):p}function cP(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=mu(0,e,r);t.push(it(n,1,i))}}function hP(t){const e=[0];return cP(e,t.length-1),e}function dP(t,e){return t.map(n=>n*e)}function fP(t,e){return t.map(()=>e||dT).splice(0,t.length-1)}function nu({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=SR(r)?r.map(C_):C_(r),a={done:!1,value:e[0]},l=dP(n&&n.length===e.length?n:hP(e),t),h=uP(l,e,{ease:Array.isArray(i)?i:fP(e,i)});return{calculatedDuration:t,next:f=>(a.value=h(f),a.done=f>=t,a)}}const pP=t=>t!==null;function Rg(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(pP),h=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!h||r===void 0?a[h]:r}const mP={decay:gm,inertia:gm,tween:nu,keyframes:nu,spring:Bh};function bT(t){typeof t.type=="string"&&(t.type=mP[t.type])}class Pg{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const gP=t=>t/100;class kg extends Pg{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==_n.now()&&this.tick(_n.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;bT(e);const{type:n=nu,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:l=0}=e;let{keyframes:h}=e;const f=n||nu;f!==nu&&typeof h[0]!="number"&&(this.mixKeyframes=Du(gP,TT(h[0],h[1])),h=[0,100]);const p=f({...e,keyframes:h});a==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...h].reverse(),velocity:-l})),p.calculatedDuration===null&&(p.calculatedDuration=Cg(p));const{calculatedDuration:g}=p;this.calculatedDuration=g,this.resolvedDuration=g+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=p}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:h,calculatedDuration:f}=this;if(this.startTime===null)return r.next(0);const{delay:p=0,keyframes:g,repeat:w,repeatType:x,repeatDelay:C,type:D,onUpdate:j,finalKeyframe:R}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const M=this.currentTime-p*(this.playbackSpeed>=0?1:-1),U=this.playbackSpeed>=0?M<0:M>i;this.currentTime=Math.max(M,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let z=this.currentTime,G=r;if(w){const b=Math.min(this.currentTime,i)/h;let A=Math.floor(b),I=b%1;!I&&b>=1&&(I=1),I===1&&A--,A=Math.min(A,w+1),!!(A%2)&&(x==="reverse"?(I=1-I,C&&(I-=C/h)):x==="mirror"&&(G=l)),z=as(0,1,I)*h}const X=U?{done:!1,value:g[0]}:G.next(z);a&&(X.value=a(X.value));let{done:J}=X;!U&&f!==null&&(J=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const N=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&J);return N&&D!==gm&&(X.value=Rg(g,this.options,R,this.speed)),j&&j(X.value),N&&this.finish(),X}then(e,n){return this.finished.then(e,n)}get duration(){return Rr(this.calculatedDuration)}get time(){return Rr(this.currentTime)}set time(e){e=Cr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(_n.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Rr(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=ZR,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(_n.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function yP(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Gi=t=>t*180/Math.PI,ym=t=>{const e=Gi(Math.atan2(t[1],t[0]));return vm(e)},vP={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:ym,rotateZ:ym,skewX:t=>Gi(Math.atan(t[1])),skewY:t=>Gi(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},vm=t=>(t=t%360,t<0&&(t+=360),t),j_=ym,O_=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),L_=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),_P={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:O_,scaleY:L_,scale:t=>(O_(t)+L_(t))/2,rotateX:t=>vm(Gi(Math.atan2(t[6],t[5]))),rotateY:t=>vm(Gi(Math.atan2(-t[2],t[0]))),rotateZ:j_,rotate:j_,skewX:t=>Gi(Math.atan(t[4])),skewY:t=>Gi(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function _m(t){return t.includes("scale")?1:0}function wm(t,e){if(!t||t==="none")return _m(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=_P,i=n;else{const h=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=vP,i=h}if(!i)return _m(e);const a=r[e],l=i[1].split(",").map(xP);return typeof a=="function"?a(l):l[a]}const wP=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return wm(n,e)};function xP(t){return parseFloat(t.trim())}const Ba=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],za=new Set(Ba),M_=t=>t===$a||t===Ee,TP=new Set(["x","y","z"]),EP=Ba.filter(t=>!TP.has(t));function SP(t){const e=[];return EP.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Yi={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>wm(e,"x"),y:(t,{transform:e})=>wm(e,"y")};Yi.translateX=Yi.x;Yi.translateY=Yi.y;const Ji=new Set;let xm=!1,Tm=!1,Em=!1;function IT(){if(Tm){const t=Array.from(Ji).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=SP(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,l])=>{r.getValue(a)?.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Tm=!1,xm=!1,Ji.forEach(t=>t.complete(Em)),Ji.clear()}function AT(){Ji.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Tm=!0)})}function bP(){Em=!0,AT(),IT(),Em=!1}class Ng{constructor(e,n,r,i,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Ji.add(this),xm||(xm=!0,ot.read(AT),ot.resolveKeyframes(IT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i?.get(),l=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const h=r.readValue(n,l);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=l),i&&a===void 0&&i.set(e[0])}yP(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ji.delete(this)}cancel(){this.state==="scheduled"&&(Ji.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const IP=t=>t.startsWith("--");function AP(t,e,n){IP(e)?t.style.setProperty(e,n):t.style[e]=n}const CP=_g(()=>window.ScrollTimeline!==void 0),RP={};function PP(t,e){const n=_g(t);return()=>RP[e]??n()}const CT=PP(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ql=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,F_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ql([0,.65,.55,1]),circOut:Ql([.55,0,1,.45]),backIn:Ql([.31,.01,.66,-.59]),backOut:Ql([.33,1.53,.69,.99])};function RT(t,e){if(t)return typeof t=="function"?CT()?ET(t,e):"ease-out":fT(t)?Ql(t):Array.isArray(t)?t.map(n=>RT(n,e)||F_.easeOut):F_[t]}function kP(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:l="loop",ease:h="easeOut",times:f}={},p=void 0){const g={[e]:n};f&&(g.offset=f);const w=RT(h,i);Array.isArray(w)&&(g.easing=w);const x={delay:r,duration:i,easing:Array.isArray(w)?"linear":w,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return p&&(x.pseudoElement=p),t.animate(g,x)}function PT(t){return typeof t=="function"&&"applyToOptions"in t}function NP({type:t,...e}){return PT(t)&&CT()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class VP extends Pg{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:h,onComplete:f}=e;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=e,vg(typeof e.type!="string");const p=NP(e);this.animation=kP(n,r,i,p,a),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const g=Rg(i,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(g):AP(n,r,g),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Rr(Number(e))}get time(){return Rr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Cr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&CP()?(this.animation.timeline=e,Wn):n(this)}}const kT={anticipate:uT,backInOut:lT,circInOut:hT};function DP(t){return t in kT}function jP(t){typeof t.ease=="string"&&DP(t.ease)&&(t.ease=kT[t.ease])}const U_=10;class OP extends VP{constructor(e){jP(e),bT(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...l}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const h=new kg({...l,autoplay:!1}),f=Cr(this.finishedTime??this.time);n.setWithVelocity(h.sample(f-U_).value,h.sample(f).value,U_),h.stop()}}const $_=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ri.test(t)||t==="0")&&!t.startsWith("url("));function LP(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function MP(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],l=$_(i,e),h=$_(a,e);return!l||!h?!1:LP(t)||(n==="spring"||PT(n))&&r}function Vg(t){return tT(t)&&"offsetHeight"in t}const FP=new Set(["opacity","clipPath","filter","transform"]),UP=_g(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function $P(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:l}=t;if(!Vg(e?.owner?.current))return!1;const{onUpdate:h,transformTemplate:f}=e.owner.getProps();return UP()&&n&&FP.has(n)&&(n!=="transform"||!f)&&!h&&!r&&i!=="mirror"&&a!==0&&l!=="inertia"}const BP=40;class zP extends Pg{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",keyframes:h,name:f,motionValue:p,element:g,...w}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=_n.now();const x={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:l,name:f,motionValue:p,element:g,...w},C=g?.KeyframeResolver||Ng;this.keyframeResolver=new C(h,(D,j,R)=>this.onKeyframesResolved(D,j,x,!R),f,p,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:a,type:l,velocity:h,delay:f,isHandoff:p,onUpdate:g}=r;this.resolvedAt=_n.now(),MP(e,a,l,h)||((ls.instantAnimations||!f)&&g?.(Rg(e,r,n)),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const x={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>BP?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},C=!p&&$P(x)?new OP({...x,element:x.motionValue.owner.current}):new kg(x);C.finished.then(()=>this.notifyFinished()).catch(Wn),this.pendingTimeline&&(this.stopTimeline=C.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=C}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),bP()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const HP=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function WP(t){const e=HP.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function NT(t,e,n=1){const[r,i]=WP(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const l=a.trim();return eT(l)?parseFloat(l):l}return Sg(i)?NT(i,e,n+1):i}function Dg(t,e){return t?.[e]??t?.default??t}const VT=new Set(["width","height","top","left","right","bottom",...Ba]),qP={test:t=>t==="auto",parse:t=>t},DT=t=>e=>e.test(t),jT=[$a,Ee,Pr,Bs,LR,OR,qP],B_=t=>jT.find(DT(t));function KP(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||nT(t):!0}const GP=new Set(["brightness","contrast","saturate","opacity"]);function QP(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(bg)||[];if(!r)return t;const i=n.replace(r,"");let a=GP.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const XP=/\b([a-z-]*)\(.*?\)/gu,Sm={...ri,getAnimatableNone:t=>{const e=t.match(XP);return e?e.map(QP).join(" "):t}},z_={...$a,transform:Math.round},YP={rotate:Bs,rotateX:Bs,rotateY:Bs,rotateZ:Bs,scale:hh,scaleX:hh,scaleY:hh,scaleZ:hh,skew:Bs,skewX:Bs,skewY:Bs,distance:Ee,translateX:Ee,translateY:Ee,translateZ:Ee,x:Ee,y:Ee,z:Ee,perspective:Ee,transformPerspective:Ee,opacity:gu,originX:P_,originY:P_,originZ:Ee},jg={borderWidth:Ee,borderTopWidth:Ee,borderRightWidth:Ee,borderBottomWidth:Ee,borderLeftWidth:Ee,borderRadius:Ee,radius:Ee,borderTopLeftRadius:Ee,borderTopRightRadius:Ee,borderBottomRightRadius:Ee,borderBottomLeftRadius:Ee,width:Ee,maxWidth:Ee,height:Ee,maxHeight:Ee,top:Ee,right:Ee,bottom:Ee,left:Ee,padding:Ee,paddingTop:Ee,paddingRight:Ee,paddingBottom:Ee,paddingLeft:Ee,margin:Ee,marginTop:Ee,marginRight:Ee,marginBottom:Ee,marginLeft:Ee,backgroundPositionX:Ee,backgroundPositionY:Ee,...YP,zIndex:z_,fillOpacity:gu,strokeOpacity:gu,numOctaves:z_},JP={...jg,color:xt,backgroundColor:xt,outlineColor:xt,fill:xt,stroke:xt,borderColor:xt,borderTopColor:xt,borderRightColor:xt,borderBottomColor:xt,borderLeftColor:xt,filter:Sm,WebkitFilter:Sm},OT=t=>JP[t];function LT(t,e){let n=OT(t);return n!==Sm&&(n=ri),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const ZP=new Set(["auto","none","0"]);function ek(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!ZP.has(a)&&yu(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=LT(n,i)}class tk extends Ng{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let p=e[f];if(typeof p=="string"&&(p=p.trim(),Sg(p))){const g=NT(p,n.current);g!==void 0&&(e[f]=g),f===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!VT.has(r)||e.length!==2)return;const[i,a]=e,l=B_(i),h=B_(a);if(l!==h)if(M_(l)&&M_(h))for(let f=0;f<e.length;f++){const p=e[f];typeof p=="string"&&(e[f]=parseFloat(p))}else Yi[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||KP(e[i]))&&r.push(i);r.length&&ek(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Yi[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,l=r[a];r[a]=Yi[n](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([h,f])=>{e.getValue(h).set(f)}),this.resolveNoneKeyframes()}}function nk(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const MT=(t,e)=>e&&typeof t=="number"?e.transform(t):t,H_=30,rk=t=>!isNaN(parseFloat(t));class sk{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const a=_n.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();i&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=_n.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=rk(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new wg);const r=this.events[e].add(n);return e==="change"?()=>{r(),ot.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=_n.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>H_)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,H_);return rT(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ka(t,e){return new sk(t,e)}const{schedule:Og}=pT(queueMicrotask,!1),ur={x:!1,y:!1};function FT(){return ur.x||ur.y}function ik(t){return t==="x"||t==="y"?ur[t]?null:(ur[t]=!0,()=>{ur[t]=!1}):ur.x||ur.y?null:(ur.x=ur.y=!0,()=>{ur.x=ur.y=!1})}function UT(t,e){const n=nk(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function W_(t){return!(t.pointerType==="touch"||FT())}function ok(t,e,n={}){const[r,i,a]=UT(t,n),l=h=>{if(!W_(h))return;const{target:f}=h,p=e(f,h);if(typeof p!="function"||!f)return;const g=w=>{W_(w)&&(p(w),f.removeEventListener("pointerleave",g))};f.addEventListener("pointerleave",g,i)};return r.forEach(h=>{h.addEventListener("pointerenter",l,i)}),a}const $T=(t,e)=>e?t===e?!0:$T(t,e.parentElement):!1,Lg=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,ak=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function lk(t){return ak.has(t.tagName)||t.tabIndex!==-1}const bh=new WeakSet;function q_(t){return e=>{e.key==="Enter"&&t(e)}}function kp(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const uk=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=q_(()=>{if(bh.has(n))return;kp(n,"down");const i=q_(()=>{kp(n,"up")}),a=()=>kp(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function K_(t){return Lg(t)&&!FT()}function ck(t,e,n={}){const[r,i,a]=UT(t,n),l=h=>{const f=h.currentTarget;if(!K_(h))return;bh.add(f);const p=e(f,h),g=(C,D)=>{window.removeEventListener("pointerup",w),window.removeEventListener("pointercancel",x),bh.has(f)&&bh.delete(f),K_(C)&&typeof p=="function"&&p(C,{success:D})},w=C=>{g(C,f===window||f===document||n.useGlobalTarget||$T(f,C.target))},x=C=>{g(C,!1)};window.addEventListener("pointerup",w,i),window.addEventListener("pointercancel",x,i)};return r.forEach(h=>{(n.useGlobalTarget?window:h).addEventListener("pointerdown",l,i),Vg(h)&&(h.addEventListener("focus",p=>uk(p,i)),!lk(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),a}function BT(t){return tT(t)&&"ownerSVGElement"in t}function hk(t){return BT(t)&&t.tagName==="svg"}const Zt=t=>!!(t&&t.getVelocity),dk=[...jT,xt,ri],fk=t=>dk.find(DT(t)),Mg=O.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class pk extends O.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=Vg(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function mk({children:t,isPresent:e,anchorX:n}){const r=O.useId(),i=O.useRef(null),a=O.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=O.useContext(Mg);return O.useInsertionEffect(()=>{const{width:h,height:f,top:p,left:g,right:w}=a.current;if(e||!i.current||!h||!f)return;const x=n==="left"?`left: ${g}`:`right: ${w}`;i.current.dataset.motionPopId=r;const C=document.createElement("style");return l&&(C.nonce=l),document.head.appendChild(C),C.sheet&&C.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${f}px !important;
            ${x}px !important;
            top: ${p}px !important;
          }
        `),()=>{document.head.contains(C)&&document.head.removeChild(C)}},[e]),y.jsx(pk,{isPresent:e,childRef:i,sizeRef:a,children:O.cloneElement(t,{ref:i})})}const gk=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:l,anchorX:h})=>{const f=pg(yk),p=O.useId();let g=!0,w=O.useMemo(()=>(g=!1,{id:p,initial:e,isPresent:n,custom:i,onExitComplete:x=>{f.set(x,!0);for(const C of f.values())if(!C)return;r&&r()},register:x=>(f.set(x,!1),()=>f.delete(x))}),[n,f,r]);return a&&g&&(w={...w}),O.useMemo(()=>{f.forEach((x,C)=>f.set(C,!1))},[n]),O.useEffect(()=>{!n&&!f.size&&r&&r()},[n]),l==="popLayout"&&(t=y.jsx(mk,{isPresent:n,anchorX:h,children:t})),y.jsx(md.Provider,{value:w,children:t})};function yk(){return new Map}function zT(t=!0){const e=O.useContext(md);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=O.useId();O.useEffect(()=>{if(t)return i(a)},[t]);const l=O.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,l]:[!0]}const dh=t=>t.key||"";function G_(t){const e=[];return O.Children.forEach(t,n=>{O.isValidElement(n)&&e.push(n)}),e}const Hn=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:l=!1,anchorX:h="left"})=>{const[f,p]=zT(l),g=O.useMemo(()=>G_(t),[t]),w=l&&!f?[]:g.map(dh),x=O.useRef(!0),C=O.useRef(g),D=pg(()=>new Map),[j,R]=O.useState(g),[M,U]=O.useState(g);Z1(()=>{x.current=!1,C.current=g;for(let X=0;X<M.length;X++){const J=dh(M[X]);w.includes(J)?D.delete(J):D.get(J)!==!0&&D.set(J,!1)}},[M,w.length,w.join("-")]);const z=[];if(g!==j){let X=[...g];for(let J=0;J<M.length;J++){const N=M[J],b=dh(N);w.includes(b)||(X.splice(J,0,N),z.push(N))}return a==="wait"&&z.length&&(X=z),U(G_(X)),R(g),null}const{forceRender:G}=O.useContext(fg);return y.jsx(y.Fragment,{children:M.map(X=>{const J=dh(X),N=l&&!f?!1:g===M||w.includes(J),b=()=>{if(D.has(J))D.set(J,!0);else return;let A=!0;D.forEach(I=>{I||(A=!1)}),A&&(G?.(),U(C.current),l&&p?.(),r&&r())};return y.jsx(gk,{isPresent:N,initial:!x.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,onExitComplete:N?void 0:b,anchorX:h,children:X},J)})})},HT=O.createContext({strict:!1}),Q_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Na={};for(const t in Q_)Na[t]={isEnabled:e=>Q_[t].some(n=>!!e[n])};function vk(t){for(const e in t)Na[e]={...Na[e],...t[e]}}const _k=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function zh(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||_k.has(t)}let WT=t=>!zh(t);function wk(t){typeof t=="function"&&(WT=e=>e.startsWith("on")?!zh(e):t(e))}try{wk(require("@emotion/is-prop-valid").default)}catch{}function xk(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(WT(i)||n===!0&&zh(i)||!e&&!zh(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function Tk(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const gd=O.createContext({});function yd(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function vu(t){return typeof t=="string"||Array.isArray(t)}const Fg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ug=["initial",...Fg];function vd(t){return yd(t.animate)||Ug.some(e=>vu(t[e]))}function qT(t){return!!(vd(t)||t.variants)}function Ek(t,e){if(vd(t)){const{initial:n,animate:r}=t;return{initial:n===!1||vu(n)?n:void 0,animate:vu(r)?r:void 0}}return t.inherit!==!1?e:{}}function Sk(t){const{initial:e,animate:n}=Ek(t,O.useContext(gd));return O.useMemo(()=>({initial:e,animate:n}),[X_(e),X_(n)])}function X_(t){return Array.isArray(t)?t.join(" "):t}const bk=Symbol.for("motionComponentSymbol");function xa(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Ik(t,e,n){return O.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):xa(n)&&(n.current=r))},[e])}const $g=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Ak="framerAppearId",KT="data-"+$g(Ak),GT=O.createContext({});function Ck(t,e,n,r,i){const{visualElement:a}=O.useContext(gd),l=O.useContext(HT),h=O.useContext(md),f=O.useContext(Mg).reducedMotion,p=O.useRef(null);r=r||l.renderer,!p.current&&r&&(p.current=r(t,{visualState:e,parent:a,props:n,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:f}));const g=p.current,w=O.useContext(GT);g&&!g.projection&&i&&(g.type==="html"||g.type==="svg")&&Rk(p.current,n,i,w);const x=O.useRef(!1);O.useInsertionEffect(()=>{g&&x.current&&g.update(n,h)});const C=n[KT],D=O.useRef(!!C&&!window.MotionHandoffIsComplete?.(C)&&window.MotionHasOptimisedAnimation?.(C));return Z1(()=>{g&&(x.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),Og.render(g.render),D.current&&g.animationState&&g.animationState.animateChanges())}),O.useEffect(()=>{g&&(!D.current&&g.animationState&&g.animationState.animateChanges(),D.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(C)}),D.current=!1))}),g}function Rk(t,e,n,r){const{layoutId:i,layout:a,drag:l,dragConstraints:h,layoutScroll:f,layoutRoot:p,layoutCrossfade:g}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:QT(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!l||h&&xa(h),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:g,layoutScroll:f,layoutRoot:p})}function QT(t){if(t)return t.options.allowProjection!==!1?t.projection:QT(t.parent)}function Pk({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&vk(t);function a(h,f){let p;const g={...O.useContext(Mg),...h,layoutId:kk(h)},{isStatic:w}=g,x=Sk(h),C=r(h,w);if(!w&&mg){Nk();const D=Vk(g);p=D.MeasureLayout,x.visualElement=Ck(i,C,g,e,D.ProjectionNode)}return y.jsxs(gd.Provider,{value:x,children:[p&&x.visualElement?y.jsx(p,{visualElement:x.visualElement,...g}):null,n(i,h,Ik(C,x.visualElement,f),C,w,x.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const l=O.forwardRef(a);return l[bk]=i,l}function kk({layoutId:t}){const e=O.useContext(fg).id;return e&&t!==void 0?e+"-"+t:t}function Nk(t,e){O.useContext(HT).strict}function Vk(t){const{drag:e,layout:n}=Na;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const _u={};function Dk(t){for(const e in t)_u[e]=t[e],Eg(e)&&(_u[e].isCSSVariable=!0)}function XT(t,{layout:e,layoutId:n}){return za.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!_u[t]||t==="opacity")}const jk={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Ok=Ba.length;function Lk(t,e,n){let r="",i=!0;for(let a=0;a<Ok;a++){const l=Ba[a],h=t[l];if(h===void 0)continue;let f=!0;if(typeof h=="number"?f=h===(l.startsWith("scale")?1:0):f=parseFloat(h)===0,!f||n){const p=MT(h,jg[l]);if(!f){i=!1;const g=jk[l]||l;r+=`${g}(${p}) `}n&&(e[l]=p)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Bg(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let l=!1,h=!1;for(const f in e){const p=e[f];if(za.has(f)){l=!0;continue}else if(Eg(f)){i[f]=p;continue}else{const g=MT(p,jg[f]);f.startsWith("origin")?(h=!0,a[f]=g):r[f]=g}}if(e.transform||(l||n?r.transform=Lk(e,t.transform,n):r.transform&&(r.transform="none")),h){const{originX:f="50%",originY:p="50%",originZ:g=0}=a;r.transformOrigin=`${f} ${p} ${g}`}}const zg=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function YT(t,e,n){for(const r in e)!Zt(e[r])&&!XT(r,n)&&(t[r]=e[r])}function Mk({transformTemplate:t},e){return O.useMemo(()=>{const n=zg();return Bg(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Fk(t,e){const n=t.style||{},r={};return YT(r,n,t),Object.assign(r,Mk(t,e)),r}function Uk(t,e){const n={},r=Fk(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const $k={offset:"stroke-dashoffset",array:"stroke-dasharray"},Bk={offset:"strokeDashoffset",array:"strokeDasharray"};function zk(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?$k:Bk;t[a.offset]=Ee.transform(-r);const l=Ee.transform(e),h=Ee.transform(n);t[a.array]=`${l} ${h}`}function JT(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:l=0,...h},f,p,g){if(Bg(t,h,p),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:w,style:x}=t;w.transform&&(x.transform=w.transform,delete w.transform),(x.transform||w.transformOrigin)&&(x.transformOrigin=w.transformOrigin??"50% 50%",delete w.transformOrigin),x.transform&&(x.transformBox=g?.transformBox??"fill-box",delete w.transformBox),e!==void 0&&(w.x=e),n!==void 0&&(w.y=n),r!==void 0&&(w.scale=r),i!==void 0&&zk(w,i,a,l,!1)}const ZT=()=>({...zg(),attrs:{}}),eE=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Hk(t,e,n,r){const i=O.useMemo(()=>{const a=ZT();return JT(a,e,eE(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};YT(a,t.style,t),i.style={...a,...i.style}}return i}const Wk=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Hg(t){return typeof t!="string"||t.includes("-")?!1:!!(Wk.indexOf(t)>-1||/[A-Z]/u.test(t))}function qk(t=!1){return(n,r,i,{latestValues:a},l)=>{const f=(Hg(n)?Hk:Uk)(r,a,l,n),p=xk(r,typeof n=="string",t),g=n!==O.Fragment?{...p,...f,ref:i}:{},{children:w}=r,x=O.useMemo(()=>Zt(w)?w.get():w,[w]);return O.createElement(n,{...g,children:x})}}function Y_(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Wg(t,e,n,r){if(typeof e=="function"){const[i,a]=Y_(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=Y_(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function Ih(t){return Zt(t)?t.get():t}function Kk({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:Gk(n,r,i,t),renderState:e()}}const tE=t=>(e,n)=>{const r=O.useContext(gd),i=O.useContext(md),a=()=>Kk(t,e,r,i);return n?a():pg(a)};function Gk(t,e,n,r){const i={},a=r(t,{});for(const x in a)i[x]=Ih(a[x]);let{initial:l,animate:h}=t;const f=vd(t),p=qT(t);e&&p&&!f&&t.inherit!==!1&&(l===void 0&&(l=e.initial),h===void 0&&(h=e.animate));let g=n?n.initial===!1:!1;g=g||l===!1;const w=g?h:l;if(w&&typeof w!="boolean"&&!yd(w)){const x=Array.isArray(w)?w:[w];for(let C=0;C<x.length;C++){const D=Wg(t,x[C]);if(D){const{transitionEnd:j,transition:R,...M}=D;for(const U in M){let z=M[U];if(Array.isArray(z)){const G=g?z.length-1:0;z=z[G]}z!==null&&(i[U]=z)}for(const U in j)i[U]=j[U]}}}return i}function qg(t,e,n){const{style:r}=t,i={};for(const a in r)(Zt(r[a])||e.style&&Zt(e.style[a])||XT(a,t)||n?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}const Qk={useVisualState:tE({scrapeMotionValuesFromProps:qg,createRenderState:zg})};function nE(t,e,n){const r=qg(t,e,n);for(const i in t)if(Zt(t[i])||Zt(e[i])){const a=Ba.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}const Xk={useVisualState:tE({scrapeMotionValuesFromProps:nE,createRenderState:ZT})};function Yk(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const l={...Hg(r)?Xk:Qk,preloadedFeatures:t,useRender:qk(i),createVisualElement:e,Component:r};return Pk(l)}}function wu(t,e,n){const r=t.getProps();return Wg(r,e,n!==void 0?n:r.custom,t)}const bm=t=>Array.isArray(t);function Jk(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ka(n))}function Zk(t){return bm(t)?t[t.length-1]||0:t}function e2(t,e){const n=wu(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const l in a){const h=Zk(a[l]);Jk(t,l,h)}}function t2(t){return!!(Zt(t)&&t.add)}function Im(t,e){const n=t.getValue("willChange");if(t2(n))return n.add(e);if(!n&&ls.WillChange){const r=new ls.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function rE(t){return t.props[KT]}const n2=t=>t!==null;function r2(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(n2),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}const s2={type:"spring",stiffness:500,damping:25,restSpeed:10},i2=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),o2={type:"keyframes",duration:.8},a2={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},l2=(t,{keyframes:e})=>e.length>2?o2:za.has(t)?t.startsWith("scale")?i2(e[1]):s2:a2;function u2({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:l,repeatDelay:h,from:f,elapsed:p,...g}){return!!Object.keys(g).length}const Kg=(t,e,n,r={},i,a)=>l=>{const h=Dg(r,t)||{},f=h.delay||r.delay||0;let{elapsed:p=0}=r;p=p-Cr(f);const g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-p,onUpdate:x=>{e.set(x),h.onUpdate&&h.onUpdate(x)},onComplete:()=>{l(),h.onComplete&&h.onComplete()},name:t,motionValue:e,element:a?void 0:i};u2(h)||Object.assign(g,l2(t,g)),g.duration&&(g.duration=Cr(g.duration)),g.repeatDelay&&(g.repeatDelay=Cr(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let w=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(w=!0)),(ls.instantAnimations||ls.skipAnimations)&&(w=!0,g.duration=0,g.delay=0),g.allowFlatten=!h.type&&!h.ease,w&&!a&&e.get()!==void 0){const x=r2(g.keyframes,h);if(x!==void 0){ot.update(()=>{g.onUpdate(x),g.onComplete()});return}}return h.isSync?new kg(g):new zP(g)};function c2({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function sE(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:l,...h}=e;r&&(a=r);const f=[],p=i&&t.animationState&&t.animationState.getState()[i];for(const g in h){const w=t.getValue(g,t.latestValues[g]??null),x=h[g];if(x===void 0||p&&c2(p,g))continue;const C={delay:n,...Dg(a||{},g)},D=w.get();if(D!==void 0&&!w.isAnimating&&!Array.isArray(x)&&x===D&&!C.velocity)continue;let j=!1;if(window.MotionHandoffAnimation){const M=rE(t);if(M){const U=window.MotionHandoffAnimation(M,g,ot);U!==null&&(C.startTime=U,j=!0)}}Im(t,g),w.start(Kg(g,w,x,t.shouldReduceMotion&&VT.has(g)?{type:!1}:C,t,j));const R=w.animation;R&&f.push(R)}return l&&Promise.all(f).then(()=>{ot.update(()=>{l&&e2(t,l)})}),f}function Am(t,e,n={}){const r=wu(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(sE(t,r,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:p=0,staggerChildren:g,staggerDirection:w}=i;return h2(t,e,p+f,g,w,n)}:()=>Promise.resolve(),{when:h}=i;if(h){const[f,p]=h==="beforeChildren"?[a,l]:[l,a];return f().then(()=>p())}else return Promise.all([a(),l(n.delay)])}function h2(t,e,n=0,r=0,i=1,a){const l=[],h=(t.variantChildren.size-1)*r,f=i===1?(p=0)=>p*r:(p=0)=>h-p*r;return Array.from(t.variantChildren).sort(d2).forEach((p,g)=>{p.notify("AnimationStart",e),l.push(Am(p,e,{...a,delay:n+f(g)}).then(()=>p.notify("AnimationComplete",e)))}),Promise.all(l)}function d2(t,e){return t.sortNodePosition(e)}function f2(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>Am(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=Am(t,e,n);else{const i=typeof e=="function"?wu(t,e,n.custom):e;r=Promise.all(sE(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function iE(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const p2=Ug.length;function oE(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?oE(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<p2;n++){const r=Ug[n],i=t.props[r];(vu(i)||i===!1)&&(e[r]=i)}return e}const m2=[...Fg].reverse(),g2=Fg.length;function y2(t){return e=>Promise.all(e.map(({animation:n,options:r})=>f2(t,n,r)))}function v2(t){let e=y2(t),n=J_(),r=!0;const i=f=>(p,g)=>{const w=wu(t,g,f==="exit"?t.presenceContext?.custom:void 0);if(w){const{transition:x,transitionEnd:C,...D}=w;p={...p,...D,...C}}return p};function a(f){e=f(t)}function l(f){const{props:p}=t,g=oE(t.parent)||{},w=[],x=new Set;let C={},D=1/0;for(let R=0;R<g2;R++){const M=m2[R],U=n[M],z=p[M]!==void 0?p[M]:g[M],G=vu(z),X=M===f?U.isActive:null;X===!1&&(D=R);let J=z===g[M]&&z!==p[M]&&G;if(J&&r&&t.manuallyAnimateOnMount&&(J=!1),U.protectedKeys={...C},!U.isActive&&X===null||!z&&!U.prevProp||yd(z)||typeof z=="boolean")continue;const N=_2(U.prevProp,z);let b=N||M===f&&U.isActive&&!J&&G||R>D&&G,A=!1;const I=Array.isArray(z)?z:[z];let V=I.reduce(i(M),{});X===!1&&(V={});const{prevResolvedValues:F={}}=U,P={...F,...V},Ie=xe=>{b=!0,x.has(xe)&&(A=!0,x.delete(xe)),U.needsAnimating[xe]=!0;const H=t.getValue(xe);H&&(H.liveStyle=!1)};for(const xe in P){const H=V[xe],oe=F[xe];if(C.hasOwnProperty(xe))continue;let le=!1;bm(H)&&bm(oe)?le=!iE(H,oe):le=H!==oe,le?H!=null?Ie(xe):x.add(xe):H!==void 0&&x.has(xe)?Ie(xe):U.protectedKeys[xe]=!0}U.prevProp=z,U.prevResolvedValues=V,U.isActive&&(C={...C,...V}),r&&t.blockInitialAnimation&&(b=!1),b&&(!(J&&N)||A)&&w.push(...I.map(xe=>({animation:xe,options:{type:M}})))}if(x.size){const R={};if(typeof p.initial!="boolean"){const M=wu(t,Array.isArray(p.initial)?p.initial[0]:p.initial);M&&M.transition&&(R.transition=M.transition)}x.forEach(M=>{const U=t.getBaseTarget(M),z=t.getValue(M);z&&(z.liveStyle=!0),R[M]=U??null}),w.push({animation:R})}let j=!!w.length;return r&&(p.initial===!1||p.initial===p.animate)&&!t.manuallyAnimateOnMount&&(j=!1),r=!1,j?e(w):Promise.resolve()}function h(f,p){if(n[f].isActive===p)return Promise.resolve();t.variantChildren?.forEach(w=>w.animationState?.setActive(f,p)),n[f].isActive=p;const g=l(f);for(const w in n)n[w].protectedKeys={};return g}return{animateChanges:l,setActive:h,setAnimateFunction:a,getState:()=>n,reset:()=>{n=J_(),r=!0}}}function _2(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!iE(e,t):!1}function Hi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function J_(){return{animate:Hi(!0),whileInView:Hi(),whileHover:Hi(),whileTap:Hi(),whileDrag:Hi(),whileFocus:Hi(),exit:Hi()}}class di{constructor(e){this.isMounted=!1,this.node=e}update(){}}class w2 extends di{constructor(e){super(e),e.animationState||(e.animationState=v2(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();yd(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let x2=0;class T2 extends di{constructor(){super(...arguments),this.id=x2++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const E2={animation:{Feature:w2},exit:{Feature:T2}};function xu(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Lu(t){return{point:{x:t.pageX,y:t.pageY}}}const S2=t=>e=>Lg(e)&&t(e,Lu(e));function ru(t,e,n,r){return xu(t,e,S2(n),r)}function aE({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function b2({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function I2(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const lE=1e-4,A2=1-lE,C2=1+lE,uE=.01,R2=0-uE,P2=0+uE;function an(t){return t.max-t.min}function k2(t,e,n){return Math.abs(t-e)<=n}function Z_(t,e,n,r=.5){t.origin=r,t.originPoint=it(e.min,e.max,t.origin),t.scale=an(n)/an(e),t.translate=it(n.min,n.max,t.origin)-t.originPoint,(t.scale>=A2&&t.scale<=C2||isNaN(t.scale))&&(t.scale=1),(t.translate>=R2&&t.translate<=P2||isNaN(t.translate))&&(t.translate=0)}function su(t,e,n,r){Z_(t.x,e.x,n.x,r?r.originX:void 0),Z_(t.y,e.y,n.y,r?r.originY:void 0)}function ew(t,e,n){t.min=n.min+e.min,t.max=t.min+an(e)}function N2(t,e,n){ew(t.x,e.x,n.x),ew(t.y,e.y,n.y)}function tw(t,e,n){t.min=e.min-n.min,t.max=t.min+an(e)}function iu(t,e,n){tw(t.x,e.x,n.x),tw(t.y,e.y,n.y)}const nw=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ta=()=>({x:nw(),y:nw()}),rw=()=>({min:0,max:0}),mt=()=>({x:rw(),y:rw()});function $n(t){return[t("x"),t("y")]}function Np(t){return t===void 0||t===1}function Cm({scale:t,scaleX:e,scaleY:n}){return!Np(t)||!Np(e)||!Np(n)}function Wi(t){return Cm(t)||cE(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function cE(t){return sw(t.x)||sw(t.y)}function sw(t){return t&&t!=="0%"}function Hh(t,e,n){const r=t-n,i=e*r;return n+i}function iw(t,e,n,r,i){return i!==void 0&&(t=Hh(t,i,r)),Hh(t,n,r)+e}function Rm(t,e=0,n=1,r,i){t.min=iw(t.min,e,n,r,i),t.max=iw(t.max,e,n,r,i)}function hE(t,{x:e,y:n}){Rm(t.x,e.translate,e.scale,e.originPoint),Rm(t.y,n.translate,n.scale,n.originPoint)}const ow=.999999999999,aw=1.0000000000001;function V2(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,l;for(let h=0;h<i;h++){a=n[h],l=a.projectionDelta;const{visualElement:f}=a.options;f&&f.props.style&&f.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Sa(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,hE(t,l)),r&&Wi(a.latestValues)&&Sa(t,a.latestValues))}e.x<aw&&e.x>ow&&(e.x=1),e.y<aw&&e.y>ow&&(e.y=1)}function Ea(t,e){t.min=t.min+e,t.max=t.max+e}function lw(t,e,n,r,i=.5){const a=it(t.min,t.max,i);Rm(t,e,n,a,r)}function Sa(t,e){lw(t.x,e.x,e.scaleX,e.scale,e.originX),lw(t.y,e.y,e.scaleY,e.scale,e.originY)}function dE(t,e){return aE(I2(t.getBoundingClientRect(),e))}function D2(t,e,n){const r=dE(t,n),{scroll:i}=e;return i&&(Ea(r.x,i.offset.x),Ea(r.y,i.offset.y)),r}const fE=({current:t})=>t?t.ownerDocument.defaultView:null,uw=(t,e)=>Math.abs(t-e);function j2(t,e){const n=uw(t.x,e.x),r=uw(t.y,e.y);return Math.sqrt(n**2+r**2)}class pE{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Dp(this.lastMoveEventInfo,this.history),x=this.startEvent!==null,C=j2(w.offset,{x:0,y:0})>=3;if(!x&&!C)return;const{point:D}=w,{timestamp:j}=Bt;this.history.push({...D,timestamp:j});const{onStart:R,onMove:M}=this.handlers;x||(R&&R(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),M&&M(this.lastMoveEvent,w)},this.handlePointerMove=(w,x)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=Vp(x,this.transformPagePoint),ot.update(this.updatePoint,!0)},this.handlePointerUp=(w,x)=>{this.end();const{onEnd:C,onSessionEnd:D,resumeAnimation:j}=this.handlers;if(this.dragSnapToOrigin&&j&&j(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const R=Dp(w.type==="pointercancel"?this.lastMoveEventInfo:Vp(x,this.transformPagePoint),this.history);this.startEvent&&C&&C(w,R),D&&D(w,R)},!Lg(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const l=Lu(e),h=Vp(l,this.transformPagePoint),{point:f}=h,{timestamp:p}=Bt;this.history=[{...f,timestamp:p}];const{onSessionStart:g}=n;g&&g(e,Dp(h,this.history)),this.removeListeners=Du(ru(this.contextWindow,"pointermove",this.handlePointerMove),ru(this.contextWindow,"pointerup",this.handlePointerUp),ru(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ni(this.updatePoint)}}function Vp(t,e){return e?{point:e(t.point)}:t}function cw(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Dp({point:t},e){return{point:t,delta:cw(t,mE(e)),offset:cw(t,O2(e)),velocity:L2(e,.1)}}function O2(t){return t[0]}function mE(t){return t[t.length-1]}function L2(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=mE(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Cr(e)));)n--;if(!r)return{x:0,y:0};const a=Rr(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const l={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function M2(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?it(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?it(n,t,r.max):Math.min(t,n)),t}function hw(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function F2(t,{top:e,left:n,bottom:r,right:i}){return{x:hw(t.x,n,i),y:hw(t.y,e,r)}}function dw(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function U2(t,e){return{x:dw(t.x,e.x),y:dw(t.y,e.y)}}function $2(t,e){let n=.5;const r=an(t),i=an(e);return i>r?n=mu(e.min,e.max-r,t.min):r>i&&(n=mu(t.min,t.max-i,e.min)),as(0,1,n)}function B2(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Pm=.35;function z2(t=Pm){return t===!1?t=0:t===!0&&(t=Pm),{x:fw(t,"left","right"),y:fw(t,"top","bottom")}}function fw(t,e,n){return{min:pw(t,e),max:pw(t,n)}}function pw(t,e){return typeof t=="number"?t:t[e]||0}const H2=new WeakMap;class W2{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=mt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=g=>{const{dragSnapToOrigin:w}=this.getProps();w?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Lu(g).point)},a=(g,w)=>{const{drag:x,dragPropagation:C,onDragStart:D}=this.getProps();if(x&&!C&&(this.openDragLock&&this.openDragLock(),this.openDragLock=ik(x),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),$n(R=>{let M=this.getAxisMotionValue(R).get()||0;if(Pr.test(M)){const{projection:U}=this.visualElement;if(U&&U.layout){const z=U.layout.layoutBox[R];z&&(M=an(z)*(parseFloat(M)/100))}}this.originPoint[R]=M}),D&&ot.postRender(()=>D(g,w)),Im(this.visualElement,"transform");const{animationState:j}=this.visualElement;j&&j.setActive("whileDrag",!0)},l=(g,w)=>{const{dragPropagation:x,dragDirectionLock:C,onDirectionLock:D,onDrag:j}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:R}=w;if(C&&this.currentDirection===null){this.currentDirection=q2(R),this.currentDirection!==null&&D&&D(this.currentDirection);return}this.updateAxis("x",w.point,R),this.updateAxis("y",w.point,R),this.visualElement.render(),j&&j(g,w)},h=(g,w)=>this.stop(g,w),f=()=>$n(g=>this.getAnimationState(g)==="paused"&&this.getAxisMotionValue(g).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new pE(e,{onSessionStart:i,onStart:a,onMove:l,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,contextWindow:fE(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&ot.postRender(()=>a(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!fh(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=M2(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&xa(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=F2(r.layoutBox,e):this.constraints=!1,this.elastic=z2(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&$n(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=B2(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!xa(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=D2(r,i.root,this.visualElement.getTransformPagePoint());let l=U2(i.layout.layoutBox,a);if(n){const h=n(b2(l));this.hasMutatedConstraints=!!h,h&&(l=aE(h))}return l}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:h}=this.getProps(),f=this.constraints||{},p=$n(g=>{if(!fh(g,n,this.currentDirection))return;let w=f&&f[g]||{};l&&(w={min:0,max:0});const x=i?200:1e6,C=i?40:1e7,D={type:"inertia",velocity:r?e[g]:0,bounceStiffness:x,bounceDamping:C,timeConstant:750,restDelta:1,restSpeed:10,...a,...w};return this.startAxisValueAnimation(g,D)});return Promise.all(p).then(h)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Im(this.visualElement,e),r.start(Kg(e,r,0,n,this.visualElement,!1))}stopAnimation(){$n(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){$n(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){$n(n=>{const{drag:r}=this.getProps();if(!fh(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:l,max:h}=i.layout.layoutBox[n];a.set(e[n]-it(l,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!xa(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};$n(l=>{const h=this.getAxisMotionValue(l);if(h&&this.constraints!==!1){const f=h.get();i[l]=$2({min:f,max:f},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),$n(l=>{if(!fh(l,e,null))return;const h=this.getAxisMotionValue(l),{min:f,max:p}=this.constraints[l];h.set(it(f,p,i[l]))})}addListeners(){if(!this.visualElement.current)return;H2.set(this.visualElement,this);const e=this.visualElement.current,n=ru(e,"pointerdown",f=>{const{drag:p,dragListener:g=!0}=this.getProps();p&&g&&this.start(f)}),r=()=>{const{dragConstraints:f}=this.getProps();xa(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ot.read(r);const l=xu(window,"resize",()=>this.scalePositionWithinConstraints()),h=i.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p})=>{this.isDragging&&p&&($n(g=>{const w=this.getAxisMotionValue(g);w&&(this.originPoint[g]+=f[g].translate,w.set(w.get()+f[g].translate))}),this.visualElement.render())});return()=>{l(),n(),a(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:l=Pm,dragMomentum:h=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:l,dragMomentum:h}}}function fh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function q2(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class K2 extends di{constructor(e){super(e),this.removeGroupControls=Wn,this.removeListeners=Wn,this.controls=new W2(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Wn}unmount(){this.removeGroupControls(),this.removeListeners()}}const mw=t=>(e,n)=>{t&&ot.postRender(()=>t(e,n))};class G2 extends di{constructor(){super(...arguments),this.removePointerDownListener=Wn}onPointerDown(e){this.session=new pE(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:fE(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:mw(e),onStart:mw(n),onMove:r,onEnd:(a,l)=>{delete this.session,i&&ot.postRender(()=>i(a,l))}}}mount(){this.removePointerDownListener=ru(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ah={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function gw(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ql={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ee.test(t))t=parseFloat(t);else return t;const n=gw(t,e.target.x),r=gw(t,e.target.y);return`${n}% ${r}%`}},Q2={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=ri.parse(t);if(i.length>5)return r;const a=ri.createTransformer(t),l=typeof i[0]!="number"?1:0,h=n.x.scale*e.x,f=n.y.scale*e.y;i[0+l]/=h,i[1+l]/=f;const p=it(h,f,.5);return typeof i[2+l]=="number"&&(i[2+l]/=p),typeof i[3+l]=="number"&&(i[3+l]/=p),a(i)}};class X2 extends O.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;Dk(Y2),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Ah.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:l}=r;return l&&(l.isPresent=a,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||ot.postRender(()=>{const h=l.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Og.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function gE(t){const[e,n]=zT(),r=O.useContext(fg);return y.jsx(X2,{...t,layoutGroup:r,switchLayoutGroup:O.useContext(GT),isPresent:e,safeToRemove:n})}const Y2={borderRadius:{...ql,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ql,borderTopRightRadius:ql,borderBottomLeftRadius:ql,borderBottomRightRadius:ql,boxShadow:Q2};function J2(t,e,n){const r=Zt(t)?t:ka(t);return r.start(Kg("",r,e,n)),r.animation}const Z2=(t,e)=>t.depth-e.depth;class eN{constructor(){this.children=[],this.isDirty=!1}add(e){gg(this.children,e),this.isDirty=!0}remove(e){yg(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Z2),this.isDirty=!1,this.children.forEach(e)}}function tN(t,e){const n=_n.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(ni(r),t(a-e))};return ot.setup(r,!0),()=>ni(r)}const yE=["TopLeft","TopRight","BottomLeft","BottomRight"],nN=yE.length,yw=t=>typeof t=="string"?parseFloat(t):t,vw=t=>typeof t=="number"||Ee.test(t);function rN(t,e,n,r,i,a){i?(t.opacity=it(0,n.opacity??1,sN(r)),t.opacityExit=it(e.opacity??1,0,iN(r))):a&&(t.opacity=it(e.opacity??1,n.opacity??1,r));for(let l=0;l<nN;l++){const h=`border${yE[l]}Radius`;let f=_w(e,h),p=_w(n,h);if(f===void 0&&p===void 0)continue;f||(f=0),p||(p=0),f===0||p===0||vw(f)===vw(p)?(t[h]=Math.max(it(yw(f),yw(p),r),0),(Pr.test(p)||Pr.test(f))&&(t[h]+="%")):t[h]=p}(e.rotate||n.rotate)&&(t.rotate=it(e.rotate||0,n.rotate||0,r))}function _w(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const sN=vE(0,.5,cT),iN=vE(.5,.95,Wn);function vE(t,e,n){return r=>r<t?0:r>e?1:n(mu(t,e,r))}function ww(t,e){t.min=e.min,t.max=e.max}function Un(t,e){ww(t.x,e.x),ww(t.y,e.y)}function xw(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Tw(t,e,n,r,i){return t-=e,t=Hh(t,1/n,r),i!==void 0&&(t=Hh(t,1/i,r)),t}function oN(t,e=0,n=1,r=.5,i,a=t,l=t){if(Pr.test(e)&&(e=parseFloat(e),e=it(l.min,l.max,e/100)-l.min),typeof e!="number")return;let h=it(a.min,a.max,r);t===a&&(h-=e),t.min=Tw(t.min,e,n,h,i),t.max=Tw(t.max,e,n,h,i)}function Ew(t,e,[n,r,i],a,l){oN(t,e[n],e[r],e[i],e.scale,a,l)}const aN=["x","scaleX","originX"],lN=["y","scaleY","originY"];function Sw(t,e,n,r){Ew(t.x,e,aN,n?n.x:void 0,r?r.x:void 0),Ew(t.y,e,lN,n?n.y:void 0,r?r.y:void 0)}function bw(t){return t.translate===0&&t.scale===1}function _E(t){return bw(t.x)&&bw(t.y)}function Iw(t,e){return t.min===e.min&&t.max===e.max}function uN(t,e){return Iw(t.x,e.x)&&Iw(t.y,e.y)}function Aw(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function wE(t,e){return Aw(t.x,e.x)&&Aw(t.y,e.y)}function Cw(t){return an(t.x)/an(t.y)}function Rw(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class cN{constructor(){this.members=[]}add(e){gg(this.members,e),e.scheduleRender()}remove(e){if(yg(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function hN(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,l=n?.z||0;if((i||a||l)&&(r=`translate3d(${i}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:p,rotate:g,rotateX:w,rotateY:x,skewX:C,skewY:D}=n;p&&(r=`perspective(${p}px) ${r}`),g&&(r+=`rotate(${g}deg) `),w&&(r+=`rotateX(${w}deg) `),x&&(r+=`rotateY(${x}deg) `),C&&(r+=`skewX(${C}deg) `),D&&(r+=`skewY(${D}deg) `)}const h=t.x.scale*e.x,f=t.y.scale*e.y;return(h!==1||f!==1)&&(r+=`scale(${h}, ${f})`),r||"none"}const jp=["","X","Y","Z"],dN={visibility:"hidden"},fN=1e3;let pN=0;function Op(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function xE(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=rE(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ot,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&xE(r)}function TE({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(l={},h=e?.()){this.id=pN++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(yN),this.nodes.forEach(TN),this.nodes.forEach(EN),this.nodes.forEach(vN)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new eN)}addEventListener(l,h){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new wg),this.eventHandlers.get(l).add(h)}notifyListeners(l,...h){const f=this.eventHandlers.get(l);f&&f.notify(...h)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=BT(l)&&!hk(l),this.instance=l;const{layoutId:h,layout:f,visualElement:p}=this.options;if(p&&!p.current&&p.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||h)&&(this.isLayoutDirty=!0),t){let g;const w=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=tN(w,250),Ah.hasAnimatedSinceResize&&(Ah.hasAnimatedSinceResize=!1,this.nodes.forEach(kw))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&p&&(h||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:w,hasRelativeLayoutChanged:x,layout:C})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const D=this.options.transition||p.getDefaultTransition()||CN,{onLayoutAnimationStart:j,onLayoutAnimationComplete:R}=p.getProps(),M=!this.targetLayout||!wE(this.targetLayout,C),U=!w&&x;if(this.options.layoutRoot||this.resumeFrom||U||w&&(M||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const z={...Dg(D,"layout"),onPlay:j,onComplete:R};(p.shouldReduceMotion||this.options.layoutRoot)&&(z.delay=0,z.type=!1),this.startAnimation(z),this.setAnimationOrigin(g,U)}else w||kw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=C})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ni(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(SN),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&xE(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const w=this.path[g];w.shouldResetTransform=!0,w.updateScroll("snapshot"),w.options.layoutRoot&&w.willUpdate(!1)}const{layoutId:h,layout:f}=this.options;if(h===void 0&&!f)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Pw);return}this.isUpdating||this.nodes.forEach(wN),this.isUpdating=!1,this.nodes.forEach(xN),this.nodes.forEach(mN),this.nodes.forEach(gN),this.clearAllSnapshots();const h=_n.now();Bt.delta=as(0,1e3/60,h-Bt.timestamp),Bt.timestamp=h,Bt.isProcessing=!0,Ip.update.process(Bt),Ip.preRender.process(Bt),Ip.render.process(Bt),Bt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Og.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(_N),this.sharedNodes.forEach(bN)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ot.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ot.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!an(this.snapshot.measuredBox.x)&&!an(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=mt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(h=!1),h&&this.instance){const f=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!_E(this.projectionDelta),f=this.getTransformTemplate(),p=f?f(this.latestValues,""):void 0,g=p!==this.prevTransformTemplateValue;l&&this.instance&&(h||Wi(this.latestValues)||g)&&(i(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const h=this.measurePageBox();let f=this.removeElementScroll(h);return l&&(f=this.removeTransform(f)),RN(f),{animationId:this.root.animationId,measuredBox:h,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return mt();const h=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(PN))){const{scroll:p}=this.root;p&&(Ea(h.x,p.offset.x),Ea(h.y,p.offset.y))}return h}removeElementScroll(l){const h=mt();if(Un(h,l),this.scroll?.wasRoot)return h;for(let f=0;f<this.path.length;f++){const p=this.path[f],{scroll:g,options:w}=p;p!==this.root&&g&&w.layoutScroll&&(g.wasRoot&&Un(h,l),Ea(h.x,g.offset.x),Ea(h.y,g.offset.y))}return h}applyTransform(l,h=!1){const f=mt();Un(f,l);for(let p=0;p<this.path.length;p++){const g=this.path[p];!h&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Sa(f,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Wi(g.latestValues)&&Sa(f,g.latestValues)}return Wi(this.latestValues)&&Sa(f,this.latestValues),f}removeTransform(l){const h=mt();Un(h,l);for(let f=0;f<this.path.length;f++){const p=this.path[f];if(!p.instance||!Wi(p.latestValues))continue;Cm(p.latestValues)&&p.updateSnapshot();const g=mt(),w=p.measurePageBox();Un(g,w),Sw(h,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,g)}return Wi(this.latestValues)&&Sw(h,this.latestValues),h}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Bt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(l||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:w}=this.options;if(!(!this.layout||!(g||w))){if(this.resolvedRelativeTargetAt=Bt.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mt(),this.relativeTargetOrigin=mt(),iu(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),Un(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=mt(),this.targetWithTransforms=mt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),N2(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Un(this.target,this.layout.layoutBox),hE(this.target,this.targetDelta)):Un(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mt(),this.relativeTargetOrigin=mt(),iu(this.relativeTargetOrigin,this.target,x.target),Un(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Cm(this.parent.latestValues)||cE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),h=!!this.resumingFrom||this!==l;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Bt.timestamp&&(f=!1),f)return;const{layout:p,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||g))return;Un(this.layoutCorrected,this.layout.layoutBox);const w=this.treeScale.x,x=this.treeScale.y;V2(this.layoutCorrected,this.treeScale,this.path,h),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=mt());const{target:C}=l;if(!C){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(xw(this.prevProjectionDelta.x,this.projectionDelta.x),xw(this.prevProjectionDelta.y,this.projectionDelta.y)),su(this.projectionDelta,this.layoutCorrected,C,this.latestValues),(this.treeScale.x!==w||this.treeScale.y!==x||!Rw(this.projectionDelta.x,this.prevProjectionDelta.x)||!Rw(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",C))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ta(),this.projectionDelta=Ta(),this.projectionDeltaWithTransform=Ta()}setAnimationOrigin(l,h=!1){const f=this.snapshot,p=f?f.latestValues:{},g={...this.latestValues},w=Ta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const x=mt(),C=f?f.source:void 0,D=this.layout?this.layout.source:void 0,j=C!==D,R=this.getStack(),M=!R||R.members.length<=1,U=!!(j&&!M&&this.options.crossfade===!0&&!this.path.some(AN));this.animationProgress=0;let z;this.mixTargetDelta=G=>{const X=G/1e3;Nw(w.x,l.x,X),Nw(w.y,l.y,X),this.setTargetDelta(w),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(iu(x,this.layout.layoutBox,this.relativeParent.layout.layoutBox),IN(this.relativeTarget,this.relativeTargetOrigin,x,X),z&&uN(this.relativeTarget,z)&&(this.isProjectionDirty=!1),z||(z=mt()),Un(z,this.relativeTarget)),j&&(this.animationValues=g,rN(g,p,this.latestValues,X,U,M)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=X},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(ni(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ot.update(()=>{Ah.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ka(0)),this.currentAnimation=J2(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),l.onUpdate&&l.onUpdate(h)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(fN),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:h,target:f,layout:p,latestValues:g}=l;if(!(!h||!f||!p)){if(this!==l&&this.layout&&p&&EE(this.options.animationType,this.layout.layoutBox,p.layoutBox)){f=this.target||mt();const w=an(this.layout.layoutBox.x);f.x.min=l.target.x.min,f.x.max=f.x.min+w;const x=an(this.layout.layoutBox.y);f.y.min=l.target.y.min,f.y.max=f.y.min+x}Un(h,f),Sa(h,g),su(this.projectionDeltaWithTransform,this.layoutCorrected,h,g)}}registerSharedNode(l,h){this.sharedNodes.has(l)||this.sharedNodes.set(l,new cN),this.sharedNodes.get(l).add(h);const p=h.options.initialPromotionConfig;h.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(h):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:h,preserveFollowOpacity:f}={}){const p=this.getStack();p&&p.promote(this,f),l&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let h=!1;const{latestValues:f}=l;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(h=!0),!h)return;const p={};f.z&&Op("z",l,p,this.animationValues);for(let g=0;g<jp.length;g++)Op(`rotate${jp[g]}`,l,p,this.animationValues),Op(`skew${jp[g]}`,l,p,this.animationValues);l.render();for(const g in p)l.setStaticValue(g,p[g]),this.animationValues&&(this.animationValues[g]=p[g]);l.scheduleRender()}getProjectionStyles(l){if(!this.instance||this.isSVG)return;if(!this.isVisible)return dN;const h={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=Ih(l?.pointerEvents)||"",h.transform=f?f(this.latestValues,""):"none",h;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const C={};return this.options.layoutId&&(C.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,C.pointerEvents=Ih(l?.pointerEvents)||""),this.hasProjected&&!Wi(this.latestValues)&&(C.transform=f?f({},""):"none",this.hasProjected=!1),C}const g=p.animationValues||p.latestValues;this.applyTransformsToTarget(),h.transform=hN(this.projectionDeltaWithTransform,this.treeScale,g),f&&(h.transform=f(g,h.transform));const{x:w,y:x}=this.projectionDelta;h.transformOrigin=`${w.origin*100}% ${x.origin*100}% 0`,p.animationValues?h.opacity=p===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:h.opacity=p===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const C in _u){if(g[C]===void 0)continue;const{correct:D,applyTo:j,isCSSVariable:R}=_u[C],M=h.transform==="none"?g[C]:D(g[C],p);if(j){const U=j.length;for(let z=0;z<U;z++)h[j[z]]=M}else R?this.options.visualElement.renderState.vars[C]=M:h[C]=M}return this.options.layoutId&&(h.pointerEvents=p===this?Ih(l?.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(Pw),this.root.sharedNodes.clear()}}}function mN(t){t.updateLayout()}function gN(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;i==="size"?$n(g=>{const w=a?e.measuredBox[g]:e.layoutBox[g],x=an(w);w.min=n[g].min,w.max=w.min+x}):EE(i,e.layoutBox,n)&&$n(g=>{const w=a?e.measuredBox[g]:e.layoutBox[g],x=an(n[g]);w.max=w.min+x,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+x)});const l=Ta();su(l,n,e.layoutBox);const h=Ta();a?su(h,t.applyTransform(r,!0),e.measuredBox):su(h,n,e.layoutBox);const f=!_E(l);let p=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:w,layout:x}=g;if(w&&x){const C=mt();iu(C,e.layoutBox,w.layoutBox);const D=mt();iu(D,n,x.layoutBox),wE(C,D)||(p=!0),g.options.layoutRoot&&(t.relativeTarget=D,t.relativeTargetOrigin=C,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:h,layoutDelta:l,hasLayoutChanged:f,hasRelativeLayoutChanged:p})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function yN(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function vN(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function _N(t){t.clearSnapshot()}function Pw(t){t.clearMeasurements()}function wN(t){t.isLayoutDirty=!1}function xN(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function kw(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function TN(t){t.resolveTargetDelta()}function EN(t){t.calcProjection()}function SN(t){t.resetSkewAndRotation()}function bN(t){t.removeLeadSnapshot()}function Nw(t,e,n){t.translate=it(e.translate,0,n),t.scale=it(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Vw(t,e,n,r){t.min=it(e.min,n.min,r),t.max=it(e.max,n.max,r)}function IN(t,e,n,r){Vw(t.x,e.x,n.x,r),Vw(t.y,e.y,n.y,r)}function AN(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const CN={duration:.45,ease:[.4,0,.1,1]},Dw=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),jw=Dw("applewebkit/")&&!Dw("chrome/")?Math.round:Wn;function Ow(t){t.min=jw(t.min),t.max=jw(t.max)}function RN(t){Ow(t.x),Ow(t.y)}function EE(t,e,n){return t==="position"||t==="preserve-aspect"&&!k2(Cw(e),Cw(n),.2)}function PN(t){return t!==t.root&&t.scroll?.wasRoot}const kN=TE({attachResizeListener:(t,e)=>xu(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Lp={current:void 0},SE=TE({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Lp.current){const t=new kN({});t.mount(window),t.setOptions({layoutScroll:!0}),Lp.current=t}return Lp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),NN={pan:{Feature:G2},drag:{Feature:K2,ProjectionNode:SE,MeasureLayout:gE}};function Lw(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&ot.postRender(()=>a(e,Lu(e)))}class VN extends di{mount(){const{current:e}=this.node;e&&(this.unmount=ok(e,(n,r)=>(Lw(this.node,r,"Start"),i=>Lw(this.node,i,"End"))))}unmount(){}}class DN extends di{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Du(xu(this.node.current,"focus",()=>this.onFocus()),xu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Mw(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&ot.postRender(()=>a(e,Lu(e)))}class jN extends di{mount(){const{current:e}=this.node;e&&(this.unmount=ck(e,(n,r)=>(Mw(this.node,r,"Start"),(i,{success:a})=>Mw(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const km=new WeakMap,Mp=new WeakMap,ON=t=>{const e=km.get(t.target);e&&e(t)},LN=t=>{t.forEach(ON)};function MN({root:t,...e}){const n=t||document;Mp.has(n)||Mp.set(n,{});const r=Mp.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(LN,{root:t,...e})),r[i]}function FN(t,e,n){const r=MN(e);return km.set(t,n),r.observe(t),()=>{km.delete(t),r.unobserve(t)}}const UN={some:0,all:1};class $N extends di{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,l={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:UN[i]},h=f=>{const{isIntersecting:p}=f;if(this.isInView===p||(this.isInView=p,a&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:g,onViewportLeave:w}=this.node.getProps(),x=p?g:w;x&&x(f)};return FN(this.node.current,l,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(BN(e,n))&&this.startObserver()}unmount(){}}function BN({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const zN={inView:{Feature:$N},tap:{Feature:jN},focus:{Feature:DN},hover:{Feature:VN}},HN={layout:{ProjectionNode:SE,MeasureLayout:gE}},Nm={current:null},bE={current:!1};function WN(){if(bE.current=!0,!!mg)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Nm.current=t.matches;t.addListener(e),e()}else Nm.current=!1}const qN=new WeakMap;function KN(t,e,n){for(const r in e){const i=e[r],a=n[r];if(Zt(i))t.addValue(r,i);else if(Zt(a))t.addValue(r,ka(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(i):l.hasAnimated||l.set(i)}else{const l=t.getStaticValue(r);t.addValue(r,ka(l!==void 0?l:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const Fw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class GN{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:l},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Ng,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const x=_n.now();this.renderScheduledAt<x&&(this.renderScheduledAt=x,ot.render(this.render,!1,!0))};const{latestValues:f,renderState:p}=l;this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=p,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=h,this.blockInitialAnimation=!!a,this.isControllingVariants=vd(n),this.isVariantNode=qT(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...w}=this.scrapeMotionValuesFromProps(n,{},this);for(const x in w){const C=w[x];f[x]!==void 0&&Zt(C)&&C.set(f[x],!1)}}mount(e){this.current=e,qN.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),bE.current||WN(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Nm.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ni(this.notifyUpdate),ni(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=za.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",h=>{this.latestValues[e]=h,this.props.onUpdate&&ot.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Na){const n=Na[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):mt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Fw.length;r++){const i=Fw[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,l=e[a];l&&(this.propEventSubscriptions[i]=this.on(i,l))}this.prevMotionValues=KN(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=ka(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(eT(r)||nT(r))?r=parseFloat(r):!fk(r)&&ri.test(n)&&(r=LT(e,n)),this.setBaseTarget(e,Zt(r)?r.get():r)),Zt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=Wg(this.props,n,this.presenceContext?.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Zt(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new wg),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class IE extends GN{constructor(){super(...arguments),this.KeyframeResolver=tk}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Zt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function AE(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const a in n)t.style.setProperty(a,n[a])}function QN(t){return window.getComputedStyle(t)}class XN extends IE{constructor(){super(...arguments),this.type="html",this.renderInstance=AE}readValueFromInstance(e,n){if(za.has(n))return this.projection?.isProjecting?_m(n):wP(e,n);{const r=QN(e),i=(Eg(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return dE(e,n)}build(e,n,r){Bg(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return qg(e,n,r)}}const CE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function YN(t,e,n,r){AE(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(CE.has(i)?i:$g(i),e.attrs[i])}class JN extends IE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=mt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(za.has(n)){const r=OT(n);return r&&r.default||0}return n=CE.has(n)?n:$g(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return nE(e,n,r)}build(e,n,r){JT(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){YN(e,n,r,i)}mount(e){this.isSVGTag=eE(e.tagName),super.mount(e)}}const ZN=(t,e)=>Hg(t)?new JN(e):new XN(e,{allowProjection:t!==O.Fragment}),eV=Yk({...E2,...zN,...NN,...HN},ZN),ae=Tk(eV),da={width:64,height:64,marginBottom:8},Fp=({code:t})=>{switch(t){case 0:return y.jsxs("svg",{style:da,viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[y.jsx("circle",{cx:"32",cy:"32",r:"12",fill:"#FFD93B"}),y.jsx("g",{stroke:"#FFD93B",strokeWidth:"3",strokeLinecap:"round",style:{transformOrigin:"32px 32px",animation:"rotateRays 6s linear infinite"},children:[...Array(8)].map((e,n)=>{const r=n*45*(Math.PI/180),i=32+18*Math.cos(r),a=32+18*Math.sin(r),l=32+26*Math.cos(r),h=32+26*Math.sin(r);return y.jsx("line",{x1:i,y1:a,x2:l,y2:h},n)})}),y.jsx("style",{children:`
            @keyframes rotateRays {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
            }
          `})]});case 1:return y.jsxs("svg",{style:da,viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:[y.jsx("circle",{cx:"22",cy:"22",r:"10",fill:"#FFD93B"}),y.jsx("ellipse",{cx:"40",cy:"36",rx:"14",ry:"10",fill:"#cbd5e1"}),y.jsx("ellipse",{cx:"34",cy:"38",rx:"14",ry:"10",fill:"#f1f5f9",style:{animation:"floatCloud 6s ease-in-out infinite"}}),y.jsx("style",{children:`
            @keyframes floatCloud {
              0%, 100% { transform: translateY(0); }
              50% { transform: translateY(-5px); }
            }
          `})]});case 3:return y.jsxs("svg",{style:da,viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",fill:"#cbd5e1",children:[y.jsx("ellipse",{cx:"22",cy:"32",rx:"14",ry:"10"}),y.jsx("ellipse",{cx:"40",cy:"36",rx:"18",ry:"12"}),y.jsx("ellipse",{cx:"30",cy:"40",rx:"14",ry:"10",fill:"#94a3b8",style:{animation:"floatCloud 8s ease-in-out infinite"}}),y.jsx("style",{children:`
            @keyframes floatCloud {
              0%, 100% { transform: translateY(0); }
              50% { transform: translateY(-3px); }
            }
          `})]});case 61:return y.jsxs("svg",{style:da,viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:[y.jsx("ellipse",{cx:"32",cy:"28",rx:"20",ry:"14",fill:"#94a3b8"}),y.jsx("g",{fill:"#3b82f6",children:[16,24,32,40,48].map((e,n)=>y.jsx("ellipse",{cx:e,cy:"50",rx:"3",ry:"7",style:{animation:`raindropFall ${.6+n*.2}s ease-in-out infinite`,transformOrigin:"center bottom"}},n))}),y.jsx("style",{children:`
            @keyframes raindropFall {
              0%, 100% { transform: translateY(0); opacity: 1; }
              50% { transform: translateY(10px); opacity: 0.6; }
            }
          `})]});case 95:return y.jsxs("svg",{style:da,viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:[y.jsx("ellipse",{cx:"32",cy:"28",rx:"20",ry:"14",fill:"#64748b"}),y.jsx("polygon",{points:"28,38 38,38 32,52 40,52 24,68 28,50 20,50",fill:"#facc15",style:{animation:"flash 1.2s ease-in-out infinite"}}),y.jsx("style",{children:`
            @keyframes flash {
              0%, 100% { opacity: 1; }
              50% { opacity: 0.3; }
            }
          `})]});default:return y.jsx("svg",{style:da,viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",fill:"#fff",children:y.jsx("text",{x:"10",y:"35",fontSize:"24",fill:"white",children:""})})}},Kl=[{name:"Arusha",lat:-3.3667,lon:36.6833},{name:"Dar es Salaam",lat:-6.7924,lon:39.2083},{name:"Dodoma",lat:-6.163,lon:35.7516},{name:"Geita",lat:-2.8725,lon:32.2295},{name:"Iringa",lat:-7.7667,lon:35.7},{name:"Kagera",lat:-1.5,lon:31},{name:"Katavi",lat:-6.4833,lon:31.1333},{name:"Kigoma",lat:-4.8833,lon:29.6333},{name:"Kilimanjaro",lat:-3.0674,lon:37.3556},{name:"Lindi",lat:-10,lon:39.7167},{name:"Manyara",lat:-4.3167,lon:36.6833},{name:"Mara",lat:-1.5,lon:34.45},{name:"Mbeya",lat:-8.9,lon:33.45},{name:"Morogoro",lat:-6.824,lon:37.663},{name:"Mtwara",lat:-10.2667,lon:40.1833},{name:"Mwanza",lat:-2.5167,lon:32.9},{name:"Njombe",lat:-9.3333,lon:34.7667},{name:"Pemba North",lat:-5.0362,lon:39.7452},{name:"Pemba South",lat:-5.2467,lon:39.7756},{name:"Pwani",lat:-7,lon:38.9167},{name:"Rukwa",lat:-8,lon:31.5},{name:"Ruvuma",lat:-10.687,lon:36.263},{name:"Shinyanga",lat:-3.661,lon:33.421},{name:"Simiyu",lat:-2.8386,lon:34.1419},{name:"Singida",lat:-4.8167,lon:34.75},{name:"Songwe",lat:-8.9167,lon:32.5833},{name:"Tabora",lat:-5.0167,lon:32.8},{name:"Tanga",lat:-5.0667,lon:39.1},{name:"Unguja North",lat:-5.9394,lon:39.279},{name:"Unguja South",lat:-6.2645,lon:39.4135}],tV=t=>["N","NE","E","SE","S","SW","W","NW","N"][Math.round(t/45)%8],nV=(t,e,n)=>[61,63,65,66,67,71,73,75,77,80,81,82].includes(n)?"Rain is coming - good time for planting but delay fertilizer application.":e>=70&&t>=20&&t<=30?"Ideal conditions for planting most crops. The soil moisture is perfect for seed germination.":t>35?"High temperatures detected. Water crops early morning or late evening to reduce evaporation.":e<50?"Low humidity detected. Consider irrigation to maintain soil moisture for your crops.":"Weather conditions are stable. Good time for regular farming activities.",rV=(t,e=new Date().getMonth())=>{const n=e>=3&&e<=5,r=e>=10&&e<=12;return{Arusha:n?"Wheat and barley":"Vegetables and coffee","Dar es Salaam":"Cassava and coconuts year-round",Dodoma:r?"Sunflowers and sorghum":"Drought-resistant crops",Kilimanjaro:"Coffee and bananas year-round",Mbeya:n?"Maize and beans":"Irish potatoes",Morogoro:n?"Rice and sugarcane":"Vegetables",Mwanza:n?"Cotton and maize":"Cassava",Singida:r?"Sunflowers and groundnuts":"Sorghum",Tabora:n?"Tobacco and maize":"Cassava",Tanga:n?"Sisal and cashews":"Spices"}[t]||"Consult local agriculture extension officer for crop advice"},sV=(t,e=new Date().getMonth())=>({Arusha:e===7?"Coffee harvest starting soon":"",Dodoma:e===6?"Sunflower harvest beginning":"",Mbeya:e===8?"Maize harvest season":"",Mwanza:e===9?"Cotton buyers needed":"",Singida:e===7?"Sunflower harvest starting":""})[t]||"Check local markets for current produce prices",iV=()=>{const[t,e]=O.useState(null),[n,r]=O.useState(null),[i,a]=O.useState(null),[l,h]=O.useState(null),[f,p]=O.useState(null),[g,w]=O.useState(null),[x,C]=O.useState(!0),[D,j]=O.useState("Detecting..."),[R,M]=O.useState({width:window.innerWidth,height:window.innerHeight}),[U,z]=O.useState(window.innerWidth<=768);O.useEffect(()=>{const H=()=>{M({width:window.innerWidth,height:window.innerHeight}),z(window.innerWidth<=768)};return window.addEventListener("resize",H),()=>window.removeEventListener("resize",H)},[]),O.useEffect(()=>{C(!0),navigator.geolocation.getCurrentPosition(H=>{const oe={lat:H.coords.latitude,lon:H.coords.longitude};e(oe);const le=Kl.reduce((B,ee)=>{const ye=Math.hypot(B.lat-oe.lat,B.lon-oe.lon);return Math.hypot(ee.lat-oe.lat,ee.lon-oe.lon)<ye?ee:B},Kl[0]);w(le),j(`Near ${le.name}`),C(!1)},H=>{p("Location access denied. Using default location."),w(Kl.find(oe=>oe.name==="Dodoma")),j("Dodoma (default)"),C(!1)},{timeout:5e3})},[]),O.useEffect(()=>{if(!g)return;const H=async()=>{try{const B=await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${g.lat}&longitude=${g.lon}&hourly=temperature_2m,relative_humidity_2m,weathercode&daily=weathercode,temperature_2m_max,temperature_2m_min&current_weather=true&timezone=auto`)).json();if(!B.current_weather)throw new Error("Incomplete weather data");r(B.current_weather),a(B.hourly),h(B.daily),p(null)}catch(le){p("Failed to load weather data. Please try again later."),console.error(le)}};H();const oe=setInterval(H,15*60*1e3);return()=>clearInterval(oe)},[g]);const G={minHeight:"100vh",boxSizing:"border-box",overflowX:"hidden",padding:U?"20vh 16px 16px 16px":"32px",background:"#f0f4f8"},X={maxWidth:U?"100%":"1290px",margin:"0 auto",width:"100%"},J=U?"flex flex-col gap-4":"grid grid-cols-2 gap-6";if(x)return y.jsx("div",{style:G,className:"flex items-center justify-center",children:y.jsxs("div",{className:"text-center p-6 bg-[#e6f0f7] rounded-xl shadow-md max-w-sm w-full border border-[#c8d9e8]",children:[y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600 mx-auto mb-4"}),y.jsx("p",{className:"text-lg font-medium text-gray-800",children:"Detecting your location..."}),y.jsx("p",{className:"text-sm text-gray-600",children:"Please enable location services"})]})});if(f)return y.jsx("div",{style:G,className:"flex items-center justify-center",children:y.jsxs("div",{className:"text-center p-6 bg-[#e6f0f7] rounded-xl shadow-md max-w-md w-full border border-[#c8d9e8]",children:[y.jsx("div",{className:"text-red-500 text-4xl mb-3",children:""}),y.jsx("h3",{className:"text-lg font-bold mb-2 text-gray-800",children:"Location Error"}),y.jsx("p",{className:"mb-4 text-gray-700",children:f}),y.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Try Again"})]})});if(!n||!i||!l)return y.jsx("div",{style:G,className:"flex items-center justify-center",children:y.jsxs("div",{className:"text-center p-6 bg-[#e6f0f7] rounded-xl shadow-md max-w-md w-full border border-[#c8d9e8]",children:[y.jsx("div",{className:"animate-pulse flex justify-center",children:y.jsx("div",{className:"h-12 w-12 bg-[#d4e3f0] rounded-full"})}),y.jsx("p",{className:"mt-4 text-lg font-medium text-gray-800",children:"Loading weather data..."})]})});const{temperature:N,windspeed:b,winddirection:A,weathercode:I}=n,V=new Date().getHours(),F=i.relative_humidity_2m[V]||0,P=Array.from({length:6},(H,oe)=>{const le=(V+oe)%24;return{time:new Date().setHours(le,0,0,0),temp:i.temperature_2m[le],code:i.weathercode[le],humidity:i.relative_humidity_2m[le]}}),Ie=Array.from({length:3},(H,oe)=>({date:new Date(l.time[oe]),maxTemp:l.temperature_2m_max[oe],minTemp:l.temperature_2m_min[oe],code:l.weathercode[oe]})),Ue=nV(N,F,I),yt=rV(g.name),xe=sV(g.name);return y.jsx("div",{style:G,children:y.jsxs("div",{style:X,children:[y.jsxs("div",{className:"text-center mb-6",style:U?{paddingTop:"10vh",marginBottom:"2rem"}:{marginTop:"14rem"},children:[y.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"SmartFarm TZ"}),y.jsx("p",{className:"text-gray-600 mb-3",children:"Weather & Farming Assistant"}),y.jsx("div",{className:"mb-4",children:y.jsx("select",{className:"w-full p-2 border border-gray-300 rounded-md shadow-sm text-sm max-w-md mx-auto bg-black",value:g?.name||"",onChange:H=>{const oe=Kl.find(le=>le.name===H.target.value);w(oe)},children:Kl.map(H=>y.jsx("option",{value:H.name,children:H.name},H.name))})})]}),y.jsxs("div",{className:J,children:[y.jsxs("div",{className:"bg-[#e6f0f7] rounded-xl shadow-md p-6 border border-[#c8d9e8]",children:[y.jsx("h2",{className:"text-xl font-bold text-center mb-3 text-gray-800",children:g?.name}),y.jsxs("div",{className:"flex justify-center items-center mb-4",children:[y.jsx(Fp,{code:I,className:"w-20 h-20 text-blue-600"}),y.jsxs("span",{className:"text-5xl font-bold ml-4 text-gray-800",children:[N,"C"]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[y.jsxs("div",{className:"bg-[#d4e3f0] p-3 rounded-lg text-center border border-[#b8d0e5]",children:[y.jsx("p",{className:"text-sm text-gray-600",children:"Humidity"}),y.jsxs("p",{className:"font-semibold text-lg text-gray-800",children:[F,"%"]})]}),y.jsxs("div",{className:"bg-[#d4e3f0] p-3 rounded-lg text-center border border-[#b8d0e5]",children:[y.jsx("p",{className:"text-sm text-gray-600",children:"Wind"}),y.jsxs("p",{className:"font-semibold text-lg text-gray-800",children:[b," m/s ",tV(A)]})]})]})]}),y.jsxs("div",{className:"bg-[#e6f0f7] rounded-xl shadow-md p-6 border border-[#c8d9e8]",children:[y.jsx("h3",{className:"font-bold text-lg mb-3 text-gray-800",children:"Next 6 hours"}),y.jsx("div",{className:"flex overflow-x-auto pb-2 gap-3 -mx-1 px-1",children:P.map((H,oe)=>y.jsxs("div",{className:"flex-shrink-0 bg-[#d4e3f0] rounded-lg p-3 text-center min-w-[80px] border border-[#b8d0e5]",children:[y.jsxs("p",{className:"font-medium text-sm text-gray-700",children:[new Date(H.time).getHours(),":00"]}),y.jsx(Fp,{code:H.code,className:"w-8 h-8 mx-auto my-2 text-blue-600"}),y.jsxs("p",{className:"text-sm font-medium text-gray-800",children:[H.temp,"C"]})]},oe))})]}),y.jsxs("div",{className:"bg-[#e6f0f7] rounded-xl shadow-md p-6 border border-[#c8d9e8]",children:[y.jsx("h3",{className:"font-bold text-lg mb-3 text-gray-800",children:"Next 3 days"}),y.jsx("div",{className:"space-y-3",children:Ie.map((H,oe)=>y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{children:[y.jsx("p",{className:"font-medium text-base text-gray-800",children:H.date.toLocaleDateString("en-US",{weekday:"short"})}),y.jsx("p",{className:"text-sm text-gray-600",children:H.date.toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),y.jsx(Fp,{code:H.code,className:"w-8 h-8 text-blue-600"}),y.jsxs("div",{className:"text-right",children:[y.jsxs("p",{className:"font-medium text-base text-gray-800",children:[H.maxTemp,"C"]}),y.jsxs("p",{className:"text-sm text-gray-600",children:[H.minTemp,"C"]})]})]},oe))})]}),y.jsxs("div",{className:"bg-[#e6f0f7] rounded-xl shadow-md p-6 border border-[#c8d9e8]",children:[y.jsx("h3",{className:"font-bold text-lg mb-3 text-gray-800",children:"Farming Advice"}),y.jsx("p",{className:"text-base text-gray-700 mb-3",children:Ue}),y.jsxs("p",{className:"text-base text-gray-700 mb-3",children:["Recommended: ",yt]}),y.jsx("div",{className:"mt-3 p-3 bg-[#f5e6b3] rounded-lg border border-[#e8d89b]",children:y.jsx("p",{className:"text-sm font-medium text-gray-800",children:xe})})]})]})]})})};function oV(){return y.jsx("div",{className:"flex justify-center items-center h-screen bg-gradient-to-b from-sky-200 to-blue-500",children:y.jsx(iV,{})})}const aV=()=>{};var Uw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},lV=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],l=t[n++],h=t[n++],f=((i&7)<<18|(a&63)<<12|(l&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=t[n++],l=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|l&63)}}return e.join("")},PE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],l=i+1<t.length,h=l?t[i+1]:0,f=i+2<t.length,p=f?t[i+2]:0,g=a>>2,w=(a&3)<<4|h>>4;let x=(h&15)<<2|p>>6,C=p&63;f||(C=64,l||(x=64)),r.push(n[g],n[w],n[x],n[C])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(RE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):lV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],h=i<t.length?n[t.charAt(i)]:0;++i;const p=i<t.length?n[t.charAt(i)]:64;++i;const w=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||h==null||p==null||w==null)throw new uV;const x=a<<2|h>>4;if(r.push(x),p!==64){const C=h<<4&240|p>>2;if(r.push(C),w!==64){const D=p<<6&192|w;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class uV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cV=function(t){const e=RE(t);return PE.encodeByteArray(e,!0)},Wh=function(t){return cV(t).replace(/\./g,"")},kE=function(t){try{return PE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV=()=>hV().__FIREBASE_DEFAULTS__,fV=()=>{if(typeof process>"u"||typeof Uw>"u")return;const t=Uw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},pV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&kE(t[1]);return e&&JSON.parse(e)},_d=()=>{try{return aV()||dV()||fV()||pV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},NE=t=>{var e,n;return(n=(e=_d())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},VE=t=>{const e=NE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},DE=()=>{var t;return(t=_d())===null||t===void 0?void 0:t.config},jE=t=>{var e;return(e=_d())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Gg(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Wh(JSON.stringify(n)),Wh(JSON.stringify(l)),""].join(".")}const ou={};function gV(){const t={prod:[],emulator:[]};for(const e of Object.keys(ou))ou[e]?t.emulator.push(e):t.prod.push(e);return t}function yV(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let $w=!1;function Qg(t,e){if(typeof window>"u"||typeof document>"u"||!fi(window.location.host)||ou[t]===e||ou[t]||$w)return;ou[t]=e;function n(x){return`__firebase__banner__${x}`}const r="__firebase__banner",a=gV().prod.length>0;function l(){const x=document.getElementById(r);x&&x.remove()}function h(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function f(x,C){x.setAttribute("width","24"),x.setAttribute("id",C),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function p(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{$w=!0,l()},x}function g(x,C){x.setAttribute("id",C),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function w(){const x=yV(r),C=n("text"),D=document.getElementById(C)||document.createElement("span"),j=n("learnmore"),R=document.getElementById(j)||document.createElement("a"),M=n("preprendIcon"),U=document.getElementById(M)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const z=x.element;h(z),g(R,j);const G=p();f(U,M),z.append(U,D,R,G),document.body.appendChild(z)}a?(D.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(en())}function _V(){var t;const e=(t=_d())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function xV(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function TV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function EV(){const t=en();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function SV(){return!_V()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function LE(){try{return typeof indexedDB=="object"}catch{return!1}}function ME(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}function bV(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IV="FirebaseError";class pr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=IV,Object.setPrototypeOf(this,pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fo.prototype.create)}}class fo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],l=a?AV(a,r):"Error",h=`${this.serviceName}: ${l} (${i}).`;return new pr(i,h,r)}}function AV(t,e){return t.replace(CV,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const CV=/\{\$([^}]+)}/g;function RV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function us(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],l=e[i];if(Bw(a)&&Bw(l)){if(!us(a,l))return!1}else if(a!==l)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Bw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function PV(t,e){const n=new kV(t,e);return n.subscribe.bind(n)}class kV{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");NV(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Up),i.error===void 0&&(i.error=Up),i.complete===void 0&&(i.complete=Up);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function NV(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Up(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(t){return t&&t._delegate?t._delegate:t}class qn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new mV;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jV(e))try{this.getOrInitializeService({instanceIdentifier:qi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=qi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qi){return this.instances.has(e)}getOptions(e=qi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);r===h&&l.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:DV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qi){return this.component?this.component.multipleInstances?e:qi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function DV(t){return t===qi?void 0:t}function jV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new VV(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(De||(De={}));const LV={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},MV=De.INFO,FV={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},UV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=FV[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xg{constructor(e){this.name=e,this._logLevel=MV,this._logHandler=UV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?LV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const $V=(t,e)=>e.some(n=>t instanceof n);let zw,Hw;function BV(){return zw||(zw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function zV(){return Hw||(Hw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const FE=new WeakMap,Vm=new WeakMap,UE=new WeakMap,$p=new WeakMap,Yg=new WeakMap;function HV(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{n(os(t.result)),i()},l=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&FE.set(n,t)}).catch(()=>{}),Yg.set(e,t),e}function WV(t){if(Vm.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{n(),i()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});Vm.set(t,e)}let Dm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Vm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||UE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return os(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function qV(t){Dm=t(Dm)}function KV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Bp(this),e,...n);return UE.set(r,e.sort?e.sort():[e]),os(r)}:zV().includes(t)?function(...e){return t.apply(Bp(this),e),os(FE.get(this))}:function(...e){return os(t.apply(Bp(this),e))}}function GV(t){return typeof t=="function"?KV(t):(t instanceof IDBTransaction&&WV(t),$V(t,BV())?new Proxy(t,Dm):t)}function os(t){if(t instanceof IDBRequest)return HV(t);if($p.has(t))return $p.get(t);const e=GV(t);return e!==t&&($p.set(t,e),Yg.set(e,t)),e}const Bp=t=>Yg.get(t);function wd(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(t,e),h=os(l);return r&&l.addEventListener("upgradeneeded",f=>{r(os(l.result),f.oldVersion,f.newVersion,os(l.transaction),f)}),n&&l.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),h.then(f=>{a&&f.addEventListener("close",()=>a()),i&&f.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}function zp(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),os(n).then(()=>{})}const QV=["get","getKey","getAll","getAllKeys","count"],XV=["put","add","delete","clear"],Hp=new Map;function Ww(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hp.get(e))return Hp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=XV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||QV.includes(n)))return;const a=async function(l,...h){const f=this.transaction(l,i?"readwrite":"readonly");let p=f.store;return r&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),i&&f.done]))[0]};return Hp.set(e,a),a}qV(t=>({...t,get:(e,n,r)=>Ww(e,n)||t.get(e,n,r),has:(e,n)=>!!Ww(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(JV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function JV(t){const e=t.getComponent();return e?.type==="VERSION"}const jm="@firebase/app",qw="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs=new Xg("@firebase/app"),ZV="@firebase/app-compat",eD="@firebase/analytics-compat",tD="@firebase/analytics",nD="@firebase/app-check-compat",rD="@firebase/app-check",sD="@firebase/auth",iD="@firebase/auth-compat",oD="@firebase/database",aD="@firebase/data-connect",lD="@firebase/database-compat",uD="@firebase/functions",cD="@firebase/functions-compat",hD="@firebase/installations",dD="@firebase/installations-compat",fD="@firebase/messaging",pD="@firebase/messaging-compat",mD="@firebase/performance",gD="@firebase/performance-compat",yD="@firebase/remote-config",vD="@firebase/remote-config-compat",_D="@firebase/storage",wD="@firebase/storage-compat",xD="@firebase/firestore",TD="@firebase/ai",ED="@firebase/firestore-compat",SD="firebase",bD="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Om="[DEFAULT]",ID={[jm]:"fire-core",[ZV]:"fire-core-compat",[tD]:"fire-analytics",[eD]:"fire-analytics-compat",[rD]:"fire-app-check",[nD]:"fire-app-check-compat",[sD]:"fire-auth",[iD]:"fire-auth-compat",[oD]:"fire-rtdb",[aD]:"fire-data-connect",[lD]:"fire-rtdb-compat",[uD]:"fire-fn",[cD]:"fire-fn-compat",[hD]:"fire-iid",[dD]:"fire-iid-compat",[fD]:"fire-fcm",[pD]:"fire-fcm-compat",[mD]:"fire-perf",[gD]:"fire-perf-compat",[yD]:"fire-rc",[vD]:"fire-rc-compat",[_D]:"fire-gcs",[wD]:"fire-gcs-compat",[xD]:"fire-fst",[ED]:"fire-fst-compat",[TD]:"fire-vertex","fire-js":"fire-js",[SD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh=new Map,AD=new Map,Lm=new Map;function Kw(t,e){try{t.container.addComponent(e)}catch(n){cs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function dr(t){const e=t.name;if(Lm.has(e))return cs.debug(`There were multiple attempts to register component ${e}.`),!1;Lm.set(e,t);for(const n of qh.values())Kw(n,t);for(const n of AD.values())Kw(n,t);return!0}function po(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Bn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ys=new fo("app","Firebase",CD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=bD;function $E(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Om,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Ys.create("bad-app-name",{appName:String(i)});if(n||(n=DE()),!n)throw Ys.create("no-options");const a=qh.get(i);if(a){if(us(n,a.options)&&us(r,a.config))return a;throw Ys.create("duplicate-app",{appName:i})}const l=new OV(i);for(const f of Lm.values())l.addComponent(f);const h=new RD(n,r,l);return qh.set(i,h),h}function xd(t=Om){const e=qh.get(t);if(!e&&t===Om&&DE())return $E();if(!e)throw Ys.create("no-app",{appName:t});return e}function wn(t,e,n){var r;let i=(r=ID[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const h=[`Unable to register library "${i}" with version "${e}":`];a&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),cs.warn(h.join(" "));return}dr(new qn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD="firebase-heartbeat-database",kD=1,Tu="firebase-heartbeat-store";let Wp=null;function BE(){return Wp||(Wp=wd(PD,kD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Tu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ys.create("idb-open",{originalErrorMessage:t.message})})),Wp}async function ND(t){try{const n=(await BE()).transaction(Tu),r=await n.objectStore(Tu).get(zE(t));return await n.done,r}catch(e){if(e instanceof pr)cs.warn(e.message);else{const n=Ys.create("idb-get",{originalErrorMessage:e?.message});cs.warn(n.message)}}}async function Gw(t,e){try{const r=(await BE()).transaction(Tu,"readwrite");await r.objectStore(Tu).put(e,zE(t)),await r.done}catch(n){if(n instanceof pr)cs.warn(n.message);else{const r=Ys.create("idb-set",{originalErrorMessage:n?.message});cs.warn(r.message)}}}function zE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD=1024,DD=30;class jD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new LD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Qw();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>DD){const l=MD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){cs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Qw(),{heartbeatsToSend:r,unsentEntries:i}=OD(this._heartbeatsCache.heartbeats),a=Wh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return cs.warn(n),""}}}function Qw(){return new Date().toISOString().substring(0,10)}function OD(t,e=VD){const n=[];let r=t.slice();for(const i of t){const a=n.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),Xw(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Xw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class LD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return LE()?ME().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await ND(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Gw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Gw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Xw(t){return Wh(JSON.stringify({version:2,heartbeats:t})).length}function MD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(t){dr(new qn("platform-logger",e=>new YV(e),"PRIVATE")),dr(new qn("heartbeat",e=>new jD(e),"PRIVATE")),wn(jm,qw,t),wn(jm,qw,"esm2017"),wn("fire-js","")}FD("");function Jg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function HE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const UD=HE,WE=new fo("auth","Firebase",HE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh=new Xg("@firebase/auth");function $D(t,...e){Kh.logLevel<=De.WARN&&Kh.warn(`Auth (${mo}): ${t}`,...e)}function Ch(t,...e){Kh.logLevel<=De.ERROR&&Kh.error(`Auth (${mo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(t,...e){throw Zg(t,...e)}function kr(t,...e){return Zg(t,...e)}function qE(t,e,n){const r=Object.assign(Object.assign({},UD()),{[e]:n});return new fo("auth","Firebase",r).create(e,{appName:t.name})}function Js(t){return qE(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Zg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return WE.create(t,...e)}function be(t,e,...n){if(!t)throw Zg(e,...n)}function ss(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ch(e),new Error(e)}function ds(t,e){t||ss(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function BD(){return Yw()==="http:"||Yw()==="https:"}function Yw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BD()||xV()||"connection"in navigator)?navigator.onLine:!0}function HD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ds(n>e,"Short delay should be less than long delay!"),this.isMobile=vV()||TV()}get(){return zD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(t,e){ds(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ss("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ss("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ss("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],KD=new Fu(3e4,6e4);function Td(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ha(t,e,n,r,i={}){return GE(t,i,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const h=Mu(Object.assign({key:t.config.apiKey},l)).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const p=Object.assign({method:e,headers:f},a);return wV()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&fi(t.emulatorConfig.host)&&(p.credentials="include"),KE.fetch()(await XE(t,t.config.apiHost,n,h),p)})}async function GE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},WD),e);try{const i=new GD(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw ph(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const h=a.ok?l.errorMessage:l.error.message,[f,p]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw ph(t,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw ph(t,"email-already-in-use",l);if(f==="USER_DISABLED")throw ph(t,"user-disabled",l);const g=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw qE(t,g,p);hs(t,g)}}catch(i){if(i instanceof pr)throw i;hs(t,"network-request-failed",{message:String(i)})}}async function QE(t,e,n,r,i={}){const a=await Ha(t,e,n,r,i);return"mfaPendingCredential"in a&&hs(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function XE(t,e,n,r){const i=`${e}${n}?${r}`,a=t,l=a.config.emulator?ey(t.config,i):`${t.config.apiScheme}://${i}`;return qD.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}class GD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(kr(this.auth,"network-request-failed")),KD.get())})}}function ph(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=kr(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QD(t,e){return Ha(t,"POST","/v1/accounts:delete",e)}async function Gh(t,e){return Ha(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function XD(t,e=!1){const n=ct(t),r=await n.getIdToken(e),i=ty(r);be(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,l=a?.sign_in_provider;return{claims:i,token:r,authTime:au(qp(i.auth_time)),issuedAtTime:au(qp(i.iat)),expirationTime:au(qp(i.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}}function qp(t){return Number(t)*1e3}function ty(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ch("JWT malformed, contained fewer than 3 sections"),null;try{const i=kE(n);return i?JSON.parse(i):(Ch("Failed to decode base64 JWT payload"),null)}catch(i){return Ch("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Jw(t){const e=ty(t);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof pr&&YD(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function YD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=au(this.lastLoginAt),this.creationTime=au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Eu(t,Gh(n,{idToken:r}));be(i?.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?YE(a.providerUserInfo):[],h=e4(t.providerData,l),f=t.isAnonymous,p=!(t.email&&a.passwordHash)&&!h?.length,g=f?p:!1,w={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new Fm(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(t,w)}async function ZD(t){const e=ct(t);await Qh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function e4(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function YE(t){return t.map(e=>{var{providerId:n}=e,r=Jg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t4(t,e){const n=await GE(t,{},async()=>{const r=Mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,l=await XE(t,i,"/v1/token",`key=${a}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:h,body:r};return t.emulatorConfig&&fi(t.emulatorConfig.host)&&(f.credentials="include"),KE.fetch()(l,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function n4(t,e){return Ha(t,"POST","/v2/accounts:revokeToken",Td(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Jw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){be(e.length!==0,"internal-error");const n=Jw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await t4(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,l=new Aa;return r&&(be(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(be(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),a&&(be(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Aa,this.toJSON())}_performRefresh(){return ss("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $s(t,e){be(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class cr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,a=Jg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new JD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Fm(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Eu(this,this.stsTokenManager.getToken(this.auth,e));return be(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return XD(this,e)}reload(){return ZD(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new cr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Qh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Bn(this.auth.app))return Promise.reject(Js(this.auth));const e=await this.getIdToken();return await Eu(this,QD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,a,l,h,f,p,g;const w=(r=n.displayName)!==null&&r!==void 0?r:void 0,x=(i=n.email)!==null&&i!==void 0?i:void 0,C=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,D=(l=n.photoURL)!==null&&l!==void 0?l:void 0,j=(h=n.tenantId)!==null&&h!==void 0?h:void 0,R=(f=n._redirectEventId)!==null&&f!==void 0?f:void 0,M=(p=n.createdAt)!==null&&p!==void 0?p:void 0,U=(g=n.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:z,emailVerified:G,isAnonymous:X,providerData:J,stsTokenManager:N}=n;be(z&&N,e,"internal-error");const b=Aa.fromJSON(this.name,N);be(typeof z=="string",e,"internal-error"),$s(w,e.name),$s(x,e.name),be(typeof G=="boolean",e,"internal-error"),be(typeof X=="boolean",e,"internal-error"),$s(C,e.name),$s(D,e.name),$s(j,e.name),$s(R,e.name),$s(M,e.name),$s(U,e.name);const A=new cr({uid:z,auth:e,email:x,emailVerified:G,displayName:w,isAnonymous:X,photoURL:D,phoneNumber:C,tenantId:j,stsTokenManager:b,createdAt:M,lastLoginAt:U});return J&&Array.isArray(J)&&(A.providerData=J.map(I=>Object.assign({},I))),R&&(A._redirectEventId=R),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new Aa;i.updateFromServerResponse(n);const a=new cr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Qh(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];be(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?YE(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!a?.length,h=new Aa;h.updateFromIdToken(r);const f=new cr({uid:i.localId,auth:e,stsTokenManager:h,isAnonymous:l}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Fm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(f,p),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw=new Map;function is(t){ds(t instanceof Function,"Expected a class definition");let e=Zw.get(t);return e?(ds(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Zw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}JE.type="NONE";const ex=JE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(t,e,n){return`firebase:${t}:${e}:${n}`}class Ca{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Rh(this.userKey,i.apiKey,a),this.fullPersistenceKey=Rh("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Gh(this.auth,{idToken:e}).catch(()=>{});return n?cr._fromGetAccountInfoResponse(this.auth,n,e):null}return cr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ca(is(ex),e,r);const i=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=i[0]||is(ex);const l=Rh(r,e.config.apiKey,e.name);let h=null;for(const p of n)try{const g=await p._get(l);if(g){let w;if(typeof g=="string"){const x=await Gh(e,{idToken:g}).catch(()=>{});if(!x)break;w=await cr._fromGetAccountInfoResponse(e,x,g)}else w=cr._fromJSON(e,g);p!==a&&(h=w),a=p;break}}catch{}const f=i.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Ca(a,e,r):(a=f[0],h&&await a._set(l,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==a)try{await p._remove(l)}catch{}})),new Ca(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ZE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sS(e))return"Blackberry";if(iS(e))return"Webos";if(eS(e))return"Safari";if((e.includes("chrome/")||tS(e))&&!e.includes("edge/"))return"Chrome";if(rS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function ZE(t=en()){return/firefox\//i.test(t)}function eS(t=en()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tS(t=en()){return/crios\//i.test(t)}function nS(t=en()){return/iemobile/i.test(t)}function rS(t=en()){return/android/i.test(t)}function sS(t=en()){return/blackberry/i.test(t)}function iS(t=en()){return/webos/i.test(t)}function ny(t=en()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function r4(t=en()){var e;return ny(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function s4(){return EV()&&document.documentMode===10}function oS(t=en()){return ny(t)||rS(t)||iS(t)||sS(t)||/windows phone/i.test(t)||nS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aS(t,e=[]){let n;switch(t){case"Browser":n=tx(en());break;case"Worker":n=`${tx(en())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${mo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((l,h)=>{try{const f=e(a);l(f)}catch(f){h(f)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o4(t,e={}){return Ha(t,"GET","/v2/passwordPolicy",Td(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4=6;class l4{constructor(e){var n,r,i,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:a4,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,a,l,h;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(n=f.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(i=f.containsLowercaseLetter)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(l=f.containsNumericCharacter)!==null&&l!==void 0?l:!0),f.isValid&&(f.isValid=(h=f.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),f}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new nx(this),this.idTokenSubscription=new nx(this),this.beforeStateQueue=new i4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=WE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=is(n)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await Ca.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Gh(this,{idToken:e}),r=await cr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Bn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=i?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===h)&&f?.user&&(i=f.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Qh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Bn(this.app))return Promise.reject(Js(this));const n=e?ct(e):null;return n&&be(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Bn(this.app)?Promise.reject(Js(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Bn(this.app)?Promise.reject(Js(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(is(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await o4(this),n=new l4(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await n4(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&is(e)||this._popupRedirectResolver;be(n,this,"argument-error"),this.redirectPersistenceManager=await Ca.create(this,[is(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(h,this,"internal-error"),h.then(()=>{l||a(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,r,i);return()=>{l=!0,f()}}else{const f=e.addObserver(n);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(Bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&$D(`Error while retrieving App Check token: ${n.error}`),n?.token}}function Ed(t){return ct(t)}class nx{constructor(e){this.auth=e,this.observer=null,this.addObserver=PV(n=>this.observer=n)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ry={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function c4(t){ry=t}function h4(t){return ry.loadJS(t)}function d4(){return ry.gapiScript}function f4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p4(t,e){const n=po(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(us(a,e??{}))return i;hs(i,"already-initialized")}return n.initialize({options:e})}function m4(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(is);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function g4(t,e,n){const r=Ed(t);be(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=lS(e),{host:l,port:h}=y4(e),f=h===null?"":`:${h}`,p={url:`${a}//${l}${f}/`},g=Object.freeze({host:l,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){be(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),be(us(p,r.config.emulator)&&us(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,fi(l)?(Gg(`${a}//${l}${f}`),Qg("Auth",!0)):v4()}function lS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function y4(t){const e=lS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:rx(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:rx(l)}}}function rx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function v4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uS{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ss("not implemented")}_getIdTokenResponse(e){return ss("not implemented")}_linkToIdToken(e,n){return ss("not implemented")}_getReauthenticationResolver(e){return ss("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ra(t,e){return QE(t,"POST","/v1/accounts:signInWithIdp",Td(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4="http://localhost";class no extends uS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new no(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):hs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,a=Jg(n,["providerId","signInMethod"]);if(!r||!i)return null;const l=new no(r,i);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Ra(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ra(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ra(e,n)}buildRequest(){const e={requestUri:_4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Mu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu extends cS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends Uu{constructor(){super("facebook.com")}static credential(e){return no._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zs.credential(e.oauthAccessToken)}catch{return null}}}zs.FACEBOOK_SIGN_IN_METHOD="facebook.com";zs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends Uu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return no._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Hs.credential(n,r)}catch{return null}}}Hs.GOOGLE_SIGN_IN_METHOD="google.com";Hs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends Uu{constructor(){super("github.com")}static credential(e){return no._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ws.credentialFromTaggedObject(e)}static credentialFromError(e){return Ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ws.credential(e.oauthAccessToken)}catch{return null}}}Ws.GITHUB_SIGN_IN_METHOD="github.com";Ws.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends Uu{constructor(){super("twitter.com")}static credential(e,n){return no._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return qs.credential(n,r)}catch{return null}}}qs.TWITTER_SIGN_IN_METHOD="twitter.com";qs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w4(t,e){return QE(t,"POST","/v1/accounts:signUp",Td(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await cr._fromIdTokenResponse(e,r,i),l=sx(r);return new si({user:a,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=sx(r);return new si({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function sx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x4(t){var e;if(Bn(t.app))return Promise.reject(Js(t));const n=Ed(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new si({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await w4(n,{returnSecureToken:!0}),i=await si._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh extends pr{constructor(e,n,r,i){var a;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Xh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Xh(e,n,r,i)}}function hS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Xh._fromErrorAndOperation(t,a,e,r):a})}async function T4(t,e,n=!1){const r=await Eu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return si._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E4(t,e,n=!1){const{auth:r}=t;if(Bn(r.app))return Promise.reject(Js(r));const i="reauthenticate";try{const a=await Eu(t,hS(r,i,e,t),n);be(a.idToken,r,"internal-error");const l=ty(a.idToken);be(l,r,"internal-error");const{sub:h}=l;return be(t.uid===h,r,"user-mismatch"),si._forOperation(t,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&hs(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S4(t,e,n=!1){if(Bn(t.app))return Promise.reject(Js(t));const r="signIn",i=await hS(t,r,e),a=await si._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}function b4(t,e,n,r){return ct(t).onIdTokenChanged(e,n,r)}function I4(t,e,n){return ct(t).beforeAuthStateChanged(e,n)}function A4(t,e,n,r){return ct(t).onAuthStateChanged(e,n,r)}const Yh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Yh,"1"),this.storage.removeItem(Yh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4=1e3,R4=10;class fS extends dS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=oS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,f)=>{this.notifyListeners(l,f)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);s4()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,R4):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},C4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}fS.type="LOCAL";const P4=fS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS extends dS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}pS.type="SESSION";const mS=pS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Sd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,l=this.handlersMap[i];if(!l?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const h=Array.from(l).map(async p=>p(n.origin,a)),f=await k4(h);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,l;return new Promise((h,f)=>{const p=sy("",20);i.port1.start();const g=setTimeout(()=>{f(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(w){const x=w;if(x.data.eventId===p)switch(x.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(x.data.response);break;default:clearTimeout(g),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(){return window}function V4(t){Nr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gS(){return typeof Nr().WorkerGlobalScope<"u"&&typeof Nr().importScripts=="function"}async function D4(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function j4(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function O4(){return gS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS="firebaseLocalStorageDb",L4=1,Jh="firebaseLocalStorage",vS="fbase_key";class $u{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function bd(t,e){return t.transaction([Jh],e?"readwrite":"readonly").objectStore(Jh)}function M4(){const t=indexedDB.deleteDatabase(yS);return new $u(t).toPromise()}function Um(){const t=indexedDB.open(yS,L4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Jh,{keyPath:vS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Jh)?e(r):(r.close(),await M4(),e(await Um()))})})}async function ix(t,e,n){const r=bd(t,!0).put({[vS]:e,value:n});return new $u(r).toPromise()}async function F4(t,e){const n=bd(t,!1).get(e),r=await new $u(n).toPromise();return r===void 0?null:r.value}function ox(t,e){const n=bd(t,!0).delete(e);return new $u(n).toPromise()}const U4=800,$4=3;class _S{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Um(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>$4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sd._getInstance(O4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await D4(),!this.activeServiceWorker)return;this.sender=new N4(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||j4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Um();return await ix(e,Yh,"1"),await ox(e,Yh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ix(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>F4(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ox(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=bd(i,!1).getAll();return new $u(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),U4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_S.type="LOCAL";const B4=_S;new Fu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z4(t,e){return e?is(e):(be(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy extends uS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ra(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ra(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ra(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function H4(t){return S4(t.auth,new iy(t),t.bypassAuthState)}function W4(t){const{auth:e,user:n}=t;return be(n,e,"internal-error"),E4(n,new iy(t),t.bypassAuthState)}async function q4(t){const{auth:e,user:n}=t;return be(n,e,"internal-error"),T4(n,new iy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:l,type:h}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return H4;case"linkViaPopup":case"linkViaRedirect":return q4;case"reauthViaPopup":case"reauthViaRedirect":return W4;default:hs(this.auth,"internal-error")}}resolve(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4=new Fu(2e3,1e4);class ba extends wS{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,ba.currentPopupAction&&ba.currentPopupAction.cancel(),ba.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){ds(this.filter.length===1,"Popup operations only handle one event");const e=sy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(kr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(kr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ba.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(kr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,K4.get())};e()}}ba.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4="pendingRedirect",Ph=new Map;class Q4 extends wS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ph.get(this.auth._key());if(!e){try{const r=await X4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ph.set(this.auth._key(),e)}return this.bypassAuthState||Ph.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function X4(t,e){const n=Z4(e),r=J4(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Y4(t,e){Ph.set(t._key(),e)}function J4(t){return is(t._redirectPersistence)}function Z4(t){return Rh(G4,t.config.apiKey,t.name)}async function ej(t,e,n=!1){if(Bn(t.app))return Promise.reject(Js(t));const r=Ed(t),i=z4(r,e),l=await new Q4(r,i,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj=10*60*1e3;class nj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rj(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!xS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(kr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tj&&this.cachedEventUids.clear(),this.cachedEventUids.has(ax(e))}saveEventToCache(e){this.cachedEventUids.add(ax(e)),this.lastProcessedEventTime=Date.now()}}function ax(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function xS({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function rj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sj(t,e={}){return Ha(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oj=/^https?/;async function aj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await sj(t);for(const n of e)try{if(lj(n))return}catch{}hs(t,"unauthorized-domain")}function lj(t){const e=Mm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!oj.test(n))return!1;if(ij.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=new Fu(3e4,6e4);function lx(){const t=Nr().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function cj(t){return new Promise((e,n)=>{var r,i,a;function l(){lx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{lx(),n(kr(t,"network-request-failed"))},timeout:uj.get()})}if(!((i=(r=Nr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=Nr().gapi)===null||a===void 0)&&a.load)l();else{const h=f4("iframefcb");return Nr()[h]=()=>{gapi.load?l():n(kr(t,"network-request-failed"))},h4(`${d4()}?onload=${h}`).catch(f=>n(f))}}).catch(e=>{throw kh=null,e})}let kh=null;function hj(t){return kh=kh||cj(t),kh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dj=new Fu(5e3,15e3),fj="__/auth/iframe",pj="emulator/auth/iframe",mj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yj(t){const e=t.config;be(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ey(e,pj):`https://${t.config.authDomain}/${fj}`,r={apiKey:e.apiKey,appName:t.name,v:mo},i=gj.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${Mu(r).slice(1)}`}async function vj(t){const e=await hj(t),n=Nr().gapi;return be(n,t,"internal-error"),e.open({where:document.body,url:yj(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mj,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const l=kr(t,"network-request-failed"),h=Nr().setTimeout(()=>{a(l)},dj.get());function f(){Nr().clearTimeout(h),i(r)}r.ping(f).then(f,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wj=500,xj=600,Tj="_blank",Ej="http://localhost";class ux{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Sj(t,e,n,r=wj,i=xj){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f=Object.assign(Object.assign({},_j),{width:r.toString(),height:i.toString(),top:a,left:l}),p=en().toLowerCase();n&&(h=tS(p)?Tj:n),ZE(p)&&(e=e||Ej,f.scrollbars="yes");const g=Object.entries(f).reduce((x,[C,D])=>`${x}${C}=${D},`,"");if(r4(p)&&h!=="_self")return bj(e||"",h),new ux(null);const w=window.open(e||"",h,g);be(w,t,"popup-blocked");try{w.focus()}catch{}return new ux(w)}function bj(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij="__/auth/handler",Aj="emulator/auth/handler",Cj=encodeURIComponent("fac");async function cx(t,e,n,r,i,a){be(t.config.authDomain,t,"auth-domain-config-required"),be(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:mo,eventId:i};if(e instanceof cS){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",RV(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,w]of Object.entries({}))l[g]=w}if(e instanceof Uu){const g=e.getScopes().filter(w=>w!=="");g.length>0&&(l.scopes=g.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const g of Object.keys(h))h[g]===void 0&&delete h[g];const f=await t._getAppCheckToken(),p=f?`#${Cj}=${encodeURIComponent(f)}`:"";return`${Rj(t)}?${Mu(h).slice(1)}${p}`}function Rj({config:t}){return t.emulator?ey(t,Aj):`https://${t.authDomain}/${Ij}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="webStorageSupport";class Pj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=mS,this._completeRedirectFn=ej,this._overrideRedirectResult=Y4}async _openPopup(e,n,r,i){var a;ds((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await cx(e,n,r,Mm(),i);return Sj(e,l,sy())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await cx(e,n,r,Mm(),i);return V4(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(ds(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await vj(e),r=new nj(e);return n.register("authEvent",i=>(be(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Kp,{type:Kp},i=>{var a;const l=(a=i?.[0])===null||a===void 0?void 0:a[Kp];l!==void 0&&n(!!l),hs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=aj(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return oS()||eS()||ny()}}const kj=Pj;var hx="@firebase/auth",dx="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Dj(t){dr(new qn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=r.options;be(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aS(t)},p=new u4(r,i,a,f);return m4(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),dr(new qn("auth-internal",e=>{const n=Ed(e.getProvider("auth").getImmediate());return(r=>new Nj(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),wn(hx,dx,Vj(t)),wn(hx,dx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj=5*60,Oj=jE("authIdTokenMaxAge")||jj;let fx=null;const Lj=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Oj)return;const i=n?.token;fx!==i&&(fx=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Mj(t=xd()){const e=po(t,"auth");if(e.isInitialized())return e.getImmediate();const n=p4(t,{popupRedirectResolver:kj,persistence:[B4,P4,mS]}),r=jE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=Lj(a.toString());I4(n,l,()=>l(n.currentUser)),b4(n,h=>l(h))}}const i=NE("auth");return i&&g4(n,`http://${i}`),n}function Fj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}c4({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=kr("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",Fj().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Dj("Browser");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Uj(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function h(g){try{p(r.next(g))}catch(w){l(w)}}function f(g){try{p(r.throw(g))}catch(w){l(w)}}function p(g){g.done?a(g.value):i(g.value).then(h,f)}p((r=r.apply(t,[])).next())})}function $j(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,l;return l={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function h(p){return function(g){return f([p,g])}}function f(p){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=p[0]&2?i.return:p[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,p[1])).done)return a;switch(i=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(g){p=[6,g],i=0}finally{r=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ia=function(){return Ia=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ia.apply(this,arguments)},TS=function(t){return{loading:t==null,value:t}},Bj=function(){return function(t,e){switch(e.type){case"error":return Ia(Ia({},t),{error:e.error,loading:!1,value:void 0});case"reset":return TS(e.defaultValue);case"value":return Ia(Ia({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},zj=function(t){var e=t?t():void 0,n=O.useReducer(Bj(),TS(e)),r=n[0],i=n[1],a=O.useCallback(function(){var f=t?t():void 0;i({type:"reset",defaultValue:f})},[t]),l=O.useCallback(function(f){i({type:"error",error:f})},[]),h=O.useCallback(function(f){i({type:"value",value:f})},[]);return O.useMemo(function(){return{error:r.error,loading:r.loading,reset:a,setError:l,setValue:h,value:r.value}},[r.error,r.loading,a,l,h,r.value])},ES=function(t,e){var n=zj(function(){return t.currentUser}),r=n.error,i=n.loading,a=n.setError,l=n.setValue,h=n.value;return O.useEffect(function(){var f=A4(t,function(p){return Uj(void 0,void 0,void 0,function(){var g;return $j(this,function(w){switch(w.label){case 0:return[3,4];case 1:return w.trys.push([1,3,,4]),[4,e.onUserChanged(p)];case 2:return w.sent(),[3,4];case 3:return g=w.sent(),a(g),[3,4];case 4:return l(p),[2]}})})},a);return function(){f()}},[t]),[h,i,r]},Hj="firebase",Wj="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn(Hj,Wj,"app");var px=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zs,SS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,b){function A(){}A.prototype=b.prototype,N.D=b.prototype,N.prototype=new A,N.prototype.constructor=N,N.C=function(I,V,F){for(var P=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)P[Ie-2]=arguments[Ie];return b.prototype[V].apply(I,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(N,b,A){A||(A=0);var I=Array(16);if(typeof b=="string")for(var V=0;16>V;++V)I[V]=b.charCodeAt(A++)|b.charCodeAt(A++)<<8|b.charCodeAt(A++)<<16|b.charCodeAt(A++)<<24;else for(V=0;16>V;++V)I[V]=b[A++]|b[A++]<<8|b[A++]<<16|b[A++]<<24;b=N.g[0],A=N.g[1],V=N.g[2];var F=N.g[3],P=b+(F^A&(V^F))+I[0]+3614090360&4294967295;b=A+(P<<7&4294967295|P>>>25),P=F+(V^b&(A^V))+I[1]+3905402710&4294967295,F=b+(P<<12&4294967295|P>>>20),P=V+(A^F&(b^A))+I[2]+606105819&4294967295,V=F+(P<<17&4294967295|P>>>15),P=A+(b^V&(F^b))+I[3]+3250441966&4294967295,A=V+(P<<22&4294967295|P>>>10),P=b+(F^A&(V^F))+I[4]+4118548399&4294967295,b=A+(P<<7&4294967295|P>>>25),P=F+(V^b&(A^V))+I[5]+1200080426&4294967295,F=b+(P<<12&4294967295|P>>>20),P=V+(A^F&(b^A))+I[6]+2821735955&4294967295,V=F+(P<<17&4294967295|P>>>15),P=A+(b^V&(F^b))+I[7]+4249261313&4294967295,A=V+(P<<22&4294967295|P>>>10),P=b+(F^A&(V^F))+I[8]+1770035416&4294967295,b=A+(P<<7&4294967295|P>>>25),P=F+(V^b&(A^V))+I[9]+2336552879&4294967295,F=b+(P<<12&4294967295|P>>>20),P=V+(A^F&(b^A))+I[10]+4294925233&4294967295,V=F+(P<<17&4294967295|P>>>15),P=A+(b^V&(F^b))+I[11]+2304563134&4294967295,A=V+(P<<22&4294967295|P>>>10),P=b+(F^A&(V^F))+I[12]+1804603682&4294967295,b=A+(P<<7&4294967295|P>>>25),P=F+(V^b&(A^V))+I[13]+4254626195&4294967295,F=b+(P<<12&4294967295|P>>>20),P=V+(A^F&(b^A))+I[14]+2792965006&4294967295,V=F+(P<<17&4294967295|P>>>15),P=A+(b^V&(F^b))+I[15]+1236535329&4294967295,A=V+(P<<22&4294967295|P>>>10),P=b+(V^F&(A^V))+I[1]+4129170786&4294967295,b=A+(P<<5&4294967295|P>>>27),P=F+(A^V&(b^A))+I[6]+3225465664&4294967295,F=b+(P<<9&4294967295|P>>>23),P=V+(b^A&(F^b))+I[11]+643717713&4294967295,V=F+(P<<14&4294967295|P>>>18),P=A+(F^b&(V^F))+I[0]+3921069994&4294967295,A=V+(P<<20&4294967295|P>>>12),P=b+(V^F&(A^V))+I[5]+3593408605&4294967295,b=A+(P<<5&4294967295|P>>>27),P=F+(A^V&(b^A))+I[10]+38016083&4294967295,F=b+(P<<9&4294967295|P>>>23),P=V+(b^A&(F^b))+I[15]+3634488961&4294967295,V=F+(P<<14&4294967295|P>>>18),P=A+(F^b&(V^F))+I[4]+3889429448&4294967295,A=V+(P<<20&4294967295|P>>>12),P=b+(V^F&(A^V))+I[9]+568446438&4294967295,b=A+(P<<5&4294967295|P>>>27),P=F+(A^V&(b^A))+I[14]+3275163606&4294967295,F=b+(P<<9&4294967295|P>>>23),P=V+(b^A&(F^b))+I[3]+4107603335&4294967295,V=F+(P<<14&4294967295|P>>>18),P=A+(F^b&(V^F))+I[8]+1163531501&4294967295,A=V+(P<<20&4294967295|P>>>12),P=b+(V^F&(A^V))+I[13]+2850285829&4294967295,b=A+(P<<5&4294967295|P>>>27),P=F+(A^V&(b^A))+I[2]+4243563512&4294967295,F=b+(P<<9&4294967295|P>>>23),P=V+(b^A&(F^b))+I[7]+1735328473&4294967295,V=F+(P<<14&4294967295|P>>>18),P=A+(F^b&(V^F))+I[12]+2368359562&4294967295,A=V+(P<<20&4294967295|P>>>12),P=b+(A^V^F)+I[5]+4294588738&4294967295,b=A+(P<<4&4294967295|P>>>28),P=F+(b^A^V)+I[8]+2272392833&4294967295,F=b+(P<<11&4294967295|P>>>21),P=V+(F^b^A)+I[11]+1839030562&4294967295,V=F+(P<<16&4294967295|P>>>16),P=A+(V^F^b)+I[14]+4259657740&4294967295,A=V+(P<<23&4294967295|P>>>9),P=b+(A^V^F)+I[1]+2763975236&4294967295,b=A+(P<<4&4294967295|P>>>28),P=F+(b^A^V)+I[4]+1272893353&4294967295,F=b+(P<<11&4294967295|P>>>21),P=V+(F^b^A)+I[7]+4139469664&4294967295,V=F+(P<<16&4294967295|P>>>16),P=A+(V^F^b)+I[10]+3200236656&4294967295,A=V+(P<<23&4294967295|P>>>9),P=b+(A^V^F)+I[13]+681279174&4294967295,b=A+(P<<4&4294967295|P>>>28),P=F+(b^A^V)+I[0]+3936430074&4294967295,F=b+(P<<11&4294967295|P>>>21),P=V+(F^b^A)+I[3]+3572445317&4294967295,V=F+(P<<16&4294967295|P>>>16),P=A+(V^F^b)+I[6]+76029189&4294967295,A=V+(P<<23&4294967295|P>>>9),P=b+(A^V^F)+I[9]+3654602809&4294967295,b=A+(P<<4&4294967295|P>>>28),P=F+(b^A^V)+I[12]+3873151461&4294967295,F=b+(P<<11&4294967295|P>>>21),P=V+(F^b^A)+I[15]+530742520&4294967295,V=F+(P<<16&4294967295|P>>>16),P=A+(V^F^b)+I[2]+3299628645&4294967295,A=V+(P<<23&4294967295|P>>>9),P=b+(V^(A|~F))+I[0]+4096336452&4294967295,b=A+(P<<6&4294967295|P>>>26),P=F+(A^(b|~V))+I[7]+1126891415&4294967295,F=b+(P<<10&4294967295|P>>>22),P=V+(b^(F|~A))+I[14]+2878612391&4294967295,V=F+(P<<15&4294967295|P>>>17),P=A+(F^(V|~b))+I[5]+4237533241&4294967295,A=V+(P<<21&4294967295|P>>>11),P=b+(V^(A|~F))+I[12]+1700485571&4294967295,b=A+(P<<6&4294967295|P>>>26),P=F+(A^(b|~V))+I[3]+2399980690&4294967295,F=b+(P<<10&4294967295|P>>>22),P=V+(b^(F|~A))+I[10]+4293915773&4294967295,V=F+(P<<15&4294967295|P>>>17),P=A+(F^(V|~b))+I[1]+2240044497&4294967295,A=V+(P<<21&4294967295|P>>>11),P=b+(V^(A|~F))+I[8]+1873313359&4294967295,b=A+(P<<6&4294967295|P>>>26),P=F+(A^(b|~V))+I[15]+4264355552&4294967295,F=b+(P<<10&4294967295|P>>>22),P=V+(b^(F|~A))+I[6]+2734768916&4294967295,V=F+(P<<15&4294967295|P>>>17),P=A+(F^(V|~b))+I[13]+1309151649&4294967295,A=V+(P<<21&4294967295|P>>>11),P=b+(V^(A|~F))+I[4]+4149444226&4294967295,b=A+(P<<6&4294967295|P>>>26),P=F+(A^(b|~V))+I[11]+3174756917&4294967295,F=b+(P<<10&4294967295|P>>>22),P=V+(b^(F|~A))+I[2]+718787259&4294967295,V=F+(P<<15&4294967295|P>>>17),P=A+(F^(V|~b))+I[9]+3951481745&4294967295,N.g[0]=N.g[0]+b&4294967295,N.g[1]=N.g[1]+(V+(P<<21&4294967295|P>>>11))&4294967295,N.g[2]=N.g[2]+V&4294967295,N.g[3]=N.g[3]+F&4294967295}r.prototype.u=function(N,b){b===void 0&&(b=N.length);for(var A=b-this.blockSize,I=this.B,V=this.h,F=0;F<b;){if(V==0)for(;F<=A;)i(this,N,F),F+=this.blockSize;if(typeof N=="string"){for(;F<b;)if(I[V++]=N.charCodeAt(F++),V==this.blockSize){i(this,I),V=0;break}}else for(;F<b;)if(I[V++]=N[F++],V==this.blockSize){i(this,I),V=0;break}}this.h=V,this.o+=b},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var b=1;b<N.length-8;++b)N[b]=0;var A=8*this.o;for(b=N.length-8;b<N.length;++b)N[b]=A&255,A/=256;for(this.u(N),N=Array(16),b=A=0;4>b;++b)for(var I=0;32>I;I+=8)N[A++]=this.g[b]>>>I&255;return N};function a(N,b){var A=h;return Object.prototype.hasOwnProperty.call(A,N)?A[N]:A[N]=b(N)}function l(N,b){this.h=b;for(var A=[],I=!0,V=N.length-1;0<=V;V--){var F=N[V]|0;I&&F==b||(A[V]=F,I=!1)}this.g=A}var h={};function f(N){return-128<=N&&128>N?a(N,function(b){return new l([b|0],0>b?-1:0)}):new l([N|0],0>N?-1:0)}function p(N){if(isNaN(N)||!isFinite(N))return w;if(0>N)return R(p(-N));for(var b=[],A=1,I=0;N>=A;I++)b[I]=N/A|0,A*=4294967296;return new l(b,0)}function g(N,b){if(N.length==0)throw Error("number format error: empty string");if(b=b||10,2>b||36<b)throw Error("radix out of range: "+b);if(N.charAt(0)=="-")return R(g(N.substring(1),b));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=p(Math.pow(b,8)),I=w,V=0;V<N.length;V+=8){var F=Math.min(8,N.length-V),P=parseInt(N.substring(V,V+F),b);8>F?(F=p(Math.pow(b,F)),I=I.j(F).add(p(P))):(I=I.j(A),I=I.add(p(P)))}return I}var w=f(0),x=f(1),C=f(16777216);t=l.prototype,t.m=function(){if(j(this))return-R(this).m();for(var N=0,b=1,A=0;A<this.g.length;A++){var I=this.i(A);N+=(0<=I?I:4294967296+I)*b,b*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(D(this))return"0";if(j(this))return"-"+R(this).toString(N);for(var b=p(Math.pow(N,6)),A=this,I="";;){var V=G(A,b).g;A=M(A,V.j(b));var F=((0<A.g.length?A.g[0]:A.h)>>>0).toString(N);if(A=V,D(A))return F+I;for(;6>F.length;)F="0"+F;I=F+I}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function D(N){if(N.h!=0)return!1;for(var b=0;b<N.g.length;b++)if(N.g[b]!=0)return!1;return!0}function j(N){return N.h==-1}t.l=function(N){return N=M(this,N),j(N)?-1:D(N)?0:1};function R(N){for(var b=N.g.length,A=[],I=0;I<b;I++)A[I]=~N.g[I];return new l(A,~N.h).add(x)}t.abs=function(){return j(this)?R(this):this},t.add=function(N){for(var b=Math.max(this.g.length,N.g.length),A=[],I=0,V=0;V<=b;V++){var F=I+(this.i(V)&65535)+(N.i(V)&65535),P=(F>>>16)+(this.i(V)>>>16)+(N.i(V)>>>16);I=P>>>16,F&=65535,P&=65535,A[V]=P<<16|F}return new l(A,A[A.length-1]&-2147483648?-1:0)};function M(N,b){return N.add(R(b))}t.j=function(N){if(D(this)||D(N))return w;if(j(this))return j(N)?R(this).j(R(N)):R(R(this).j(N));if(j(N))return R(this.j(R(N)));if(0>this.l(C)&&0>N.l(C))return p(this.m()*N.m());for(var b=this.g.length+N.g.length,A=[],I=0;I<2*b;I++)A[I]=0;for(I=0;I<this.g.length;I++)for(var V=0;V<N.g.length;V++){var F=this.i(I)>>>16,P=this.i(I)&65535,Ie=N.i(V)>>>16,Ue=N.i(V)&65535;A[2*I+2*V]+=P*Ue,U(A,2*I+2*V),A[2*I+2*V+1]+=F*Ue,U(A,2*I+2*V+1),A[2*I+2*V+1]+=P*Ie,U(A,2*I+2*V+1),A[2*I+2*V+2]+=F*Ie,U(A,2*I+2*V+2)}for(I=0;I<b;I++)A[I]=A[2*I+1]<<16|A[2*I];for(I=b;I<2*b;I++)A[I]=0;return new l(A,0)};function U(N,b){for(;(N[b]&65535)!=N[b];)N[b+1]+=N[b]>>>16,N[b]&=65535,b++}function z(N,b){this.g=N,this.h=b}function G(N,b){if(D(b))throw Error("division by zero");if(D(N))return new z(w,w);if(j(N))return b=G(R(N),b),new z(R(b.g),R(b.h));if(j(b))return b=G(N,R(b)),new z(R(b.g),b.h);if(30<N.g.length){if(j(N)||j(b))throw Error("slowDivide_ only works with positive integers.");for(var A=x,I=b;0>=I.l(N);)A=X(A),I=X(I);var V=J(A,1),F=J(I,1);for(I=J(I,2),A=J(A,2);!D(I);){var P=F.add(I);0>=P.l(N)&&(V=V.add(A),F=P),I=J(I,1),A=J(A,1)}return b=M(N,V.j(b)),new z(V,b)}for(V=w;0<=N.l(b);){for(A=Math.max(1,Math.floor(N.m()/b.m())),I=Math.ceil(Math.log(A)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),F=p(A),P=F.j(b);j(P)||0<P.l(N);)A-=I,F=p(A),P=F.j(b);D(F)&&(F=x),V=V.add(F),N=M(N,P)}return new z(V,N)}t.A=function(N){return G(this,N).h},t.and=function(N){for(var b=Math.max(this.g.length,N.g.length),A=[],I=0;I<b;I++)A[I]=this.i(I)&N.i(I);return new l(A,this.h&N.h)},t.or=function(N){for(var b=Math.max(this.g.length,N.g.length),A=[],I=0;I<b;I++)A[I]=this.i(I)|N.i(I);return new l(A,this.h|N.h)},t.xor=function(N){for(var b=Math.max(this.g.length,N.g.length),A=[],I=0;I<b;I++)A[I]=this.i(I)^N.i(I);return new l(A,this.h^N.h)};function X(N){for(var b=N.g.length+1,A=[],I=0;I<b;I++)A[I]=N.i(I)<<1|N.i(I-1)>>>31;return new l(A,N.h)}function J(N,b){var A=b>>5;b%=32;for(var I=N.g.length-A,V=[],F=0;F<I;F++)V[F]=0<b?N.i(F+A)>>>b|N.i(F+A+1)<<32-b:N.i(F+A);return new l(V,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,SS=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=g,Zs=l}).apply(typeof px<"u"?px:typeof self<"u"?self:typeof window<"u"?window:{});var mh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bS,Xl,IS,Nh,$m,AS,CS,RS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,v,T){return c==Array.prototype||c==Object.prototype||(c[v]=T.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof mh=="object"&&mh];for(var v=0;v<c.length;++v){var T=c[v];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=n(this);function i(c,v){if(v)e:{var T=r;c=c.split(".");for(var S=0;S<c.length-1;S++){var W=c[S];if(!(W in T))break e;T=T[W]}c=c[c.length-1],S=T[c],v=v(S),v!=S&&v!=null&&e(T,c,{configurable:!0,writable:!0,value:v})}}function a(c,v){c instanceof String&&(c+="");var T=0,S=!1,W={next:function(){if(!S&&T<c.length){var Y=T++;return{value:v(Y,c[Y]),done:!1}}return S=!0,{done:!0,value:void 0}}};return W[Symbol.iterator]=function(){return W},W}i("Array.prototype.values",function(c){return c||function(){return a(this,function(v,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function f(c){var v=typeof c;return v=v!="object"?v:c?Array.isArray(c)?"array":v:"null",v=="array"||v=="object"&&typeof c.length=="number"}function p(c){var v=typeof c;return v=="object"&&c!=null||v=="function"}function g(c,v,T){return c.call.apply(c.bind,arguments)}function w(c,v,T){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var W=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(W,S),c.apply(v,W)}}return function(){return c.apply(v,arguments)}}function x(c,v,T){return x=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:w,x.apply(null,arguments)}function C(c,v){var T=Array.prototype.slice.call(arguments,1);return function(){var S=T.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function D(c,v){function T(){}T.prototype=v.prototype,c.aa=v.prototype,c.prototype=new T,c.prototype.constructor=c,c.Qb=function(S,W,Y){for(var ue=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)ue[qe-2]=arguments[qe];return v.prototype[W].apply(S,ue)}}function j(c){const v=c.length;if(0<v){const T=Array(v);for(let S=0;S<v;S++)T[S]=c[S];return T}return[]}function R(c,v){for(let T=1;T<arguments.length;T++){const S=arguments[T];if(f(S)){const W=c.length||0,Y=S.length||0;c.length=W+Y;for(let ue=0;ue<Y;ue++)c[W+ue]=S[ue]}else c.push(S)}}class M{constructor(v,T){this.i=v,this.j=T,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function U(c){return/^[\s\xa0]*$/.test(c)}function z(){var c=h.navigator;return c&&(c=c.userAgent)?c:""}function G(c){return G[" "](c),c}G[" "]=function(){};var X=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function J(c,v,T){for(const S in c)v.call(T,c[S],S,c)}function N(c,v){for(const T in c)v.call(void 0,c[T],T,c)}function b(c){const v={};for(const T in c)v[T]=c[T];return v}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,v){let T,S;for(let W=1;W<arguments.length;W++){S=arguments[W];for(T in S)c[T]=S[T];for(let Y=0;Y<A.length;Y++)T=A[Y],Object.prototype.hasOwnProperty.call(S,T)&&(c[T]=S[T])}}function V(c){var v=1;c=c.split(":");const T=[];for(;0<v&&c.length;)T.push(c.shift()),v--;return c.length&&T.push(c.join(":")),T}function F(c){h.setTimeout(()=>{throw c},0)}function P(){var c=oe;let v=null;return c.g&&(v=c.g,c.g=c.g.next,c.g||(c.h=null),v.next=null),v}class Ie{constructor(){this.h=this.g=null}add(v,T){const S=Ue.get();S.set(v,T),this.h?this.h.next=S:this.g=S,this.h=S}}var Ue=new M(()=>new yt,c=>c.reset());class yt{constructor(){this.next=this.g=this.h=null}set(v,T){this.h=v,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let xe,H=!1,oe=new Ie,le=()=>{const c=h.Promise.resolve(void 0);xe=()=>{c.then(B)}};var B=()=>{for(var c;c=P();){try{c.h.call(c.g)}catch(T){F(T)}var v=Ue;v.j(c),100>v.h&&(v.h++,c.next=v.g,v.g=c)}H=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(c,v){this.type=c,this.g=this.target=v,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var Pe=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,v=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const T=()=>{};h.addEventListener("test",T,v),h.removeEventListener("test",T,v)}catch{}return c}();function Ne(c,v){if(ye.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var T=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=v,v=c.relatedTarget){if(X){e:{try{G(v.nodeName);var W=!0;break e}catch{}W=!1}W||(v=null)}}else T=="mouseover"?v=c.fromElement:T=="mouseout"&&(v=c.toElement);this.relatedTarget=v,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Le[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ne.aa.h.call(this)}}D(Ne,ye);var Le={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ze="closure_listenable_"+(1e6*Math.random()|0),He=0;function Ge(c,v,T,S,W){this.listener=c,this.proxy=null,this.src=v,this.type=T,this.capture=!!S,this.ha=W,this.key=++He,this.da=this.fa=!1}function Nt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Fr(c){this.src=c,this.g={},this.h=0}Fr.prototype.add=function(c,v,T,S,W){var Y=c.toString();c=this.g[Y],c||(c=this.g[Y]=[],this.h++);var ue=gs(c,v,S,W);return-1<ue?(v=c[ue],T||(v.fa=!1)):(v=new Ge(v,this.src,Y,!!S,W),v.fa=T,c.push(v)),v};function _o(c,v){var T=v.type;if(T in c.g){var S=c.g[T],W=Array.prototype.indexOf.call(S,v,void 0),Y;(Y=0<=W)&&Array.prototype.splice.call(S,W,1),Y&&(Nt(v),c.g[T].length==0&&(delete c.g[T],c.h--))}}function gs(c,v,T,S){for(var W=0;W<c.length;++W){var Y=c[W];if(!Y.da&&Y.listener==v&&Y.capture==!!T&&Y.ha==S)return W}return-1}var gi="closure_lm_"+(1e6*Math.random()|0),wo={};function Ya(c,v,T,S,W){if(Array.isArray(v)){for(var Y=0;Y<v.length;Y++)Ya(c,v[Y],T,S,W);return null}return T=el(T),c&&c[ze]?c.K(v,T,p(S)?!!S.capture:!1,W):Ja(c,v,T,!1,S,W)}function Ja(c,v,T,S,W,Y){if(!v)throw Error("Invalid event type");var ue=p(W)?!!W.capture:!!W,qe=To(c);if(qe||(c[gi]=qe=new Fr(c)),T=qe.add(v,T,S,ue,Y),T.proxy)return T;if(S=Ku(),T.proxy=S,S.src=c,S.listener=T,c.addEventListener)Pe||(W=ue),W===void 0&&(W=!1),c.addEventListener(v.toString(),S,W);else if(c.attachEvent)c.attachEvent($r(v.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Ku(){function c(T){return v.call(c.src,c.listener,T)}const v=Za;return c}function xo(c,v,T,S,W){if(Array.isArray(v))for(var Y=0;Y<v.length;Y++)xo(c,v[Y],T,S,W);else S=p(S)?!!S.capture:!!S,T=el(T),c&&c[ze]?(c=c.i,v=String(v).toString(),v in c.g&&(Y=c.g[v],T=gs(Y,T,S,W),-1<T&&(Nt(Y[T]),Array.prototype.splice.call(Y,T,1),Y.length==0&&(delete c.g[v],c.h--)))):c&&(c=To(c))&&(v=c.g[v.toString()],c=-1,v&&(c=gs(v,T,S,W)),(T=-1<c?v[c]:null)&&Ur(T))}function Ur(c){if(typeof c!="number"&&c&&!c.da){var v=c.src;if(v&&v[ze])_o(v.i,c);else{var T=c.type,S=c.proxy;v.removeEventListener?v.removeEventListener(T,S,c.capture):v.detachEvent?v.detachEvent($r(T),S):v.addListener&&v.removeListener&&v.removeListener(S),(T=To(v))?(_o(T,c),T.h==0&&(T.src=null,v[gi]=null)):Nt(c)}}}function $r(c){return c in wo?wo[c]:wo[c]="on"+c}function Za(c,v){if(c.da)c=!0;else{v=new Ne(v,this);var T=c.listener,S=c.ha||c.src;c.fa&&Ur(c),c=T.call(S,v)}return c}function To(c){return c=c[gi],c instanceof Fr?c:null}var Eo="__closure_events_fn_"+(1e9*Math.random()>>>0);function el(c){return typeof c=="function"?c:(c[Eo]||(c[Eo]=function(v){return c.handleEvent(v)}),c[Eo])}function It(){ee.call(this),this.i=new Fr(this),this.M=this,this.F=null}D(It,ee),It.prototype[ze]=!0,It.prototype.removeEventListener=function(c,v,T,S){xo(this,c,v,T,S)};function At(c,v){var T,S=c.F;if(S)for(T=[];S;S=S.F)T.push(S);if(c=c.M,S=v.type||v,typeof v=="string")v=new ye(v,c);else if(v instanceof ye)v.target=v.target||c;else{var W=v;v=new ye(S,c),I(v,W)}if(W=!0,T)for(var Y=T.length-1;0<=Y;Y--){var ue=v.g=T[Y];W=Br(ue,S,!0,v)&&W}if(ue=v.g=c,W=Br(ue,S,!0,v)&&W,W=Br(ue,S,!1,v)&&W,T)for(Y=0;Y<T.length;Y++)ue=v.g=T[Y],W=Br(ue,S,!1,v)&&W}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var c=this.i,v;for(v in c.g){for(var T=c.g[v],S=0;S<T.length;S++)Nt(T[S]);delete c.g[v],c.h--}}this.F=null},It.prototype.K=function(c,v,T,S){return this.i.add(String(c),v,!1,T,S)},It.prototype.L=function(c,v,T,S){return this.i.add(String(c),v,!0,T,S)};function Br(c,v,T,S){if(v=c.i.g[String(v)],!v)return!0;v=v.concat();for(var W=!0,Y=0;Y<v.length;++Y){var ue=v[Y];if(ue&&!ue.da&&ue.capture==T){var qe=ue.listener,Ct=ue.ha||ue.src;ue.fa&&_o(c.i,ue),W=qe.call(Ct,S)!==!1&&W}}return W&&!S.defaultPrevented}function tl(c,v,T){if(typeof c=="function")T&&(c=x(c,T));else if(c&&typeof c.handleEvent=="function")c=x(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:h.setTimeout(c,v||0)}function ys(c){c.g=tl(()=>{c.g=null,c.i&&(c.i=!1,ys(c))},c.l);const v=c.h;c.h=null,c.m.apply(null,v)}class yi extends ee{constructor(v,T){super(),this.m=v,this.l=T,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:ys(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vi(c){ee.call(this),this.h=c,this.g={}}D(vi,ee);var nl=[];function rl(c){J(c.g,function(v,T){this.g.hasOwnProperty(T)&&Ur(v)},c),c.g={}}vi.prototype.N=function(){vi.aa.N.call(this),rl(this)},vi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sl=h.JSON.stringify,il=h.JSON.parse,ol=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function _i(){}_i.prototype.h=null;function So(c){return c.h||(c.h=c.i())}function bo(){}var Pn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function mr(){ye.call(this,"d")}D(mr,ye);function Io(){ye.call(this,"c")}D(Io,ye);var gr={},al=null;function wi(){return al=al||new It}gr.La="serverreachability";function ll(c){ye.call(this,gr.La,c)}D(ll,ye);function zr(c){const v=wi();At(v,new ll(v))}gr.STAT_EVENT="statevent";function ul(c,v){ye.call(this,gr.STAT_EVENT,c),this.stat=v}D(ul,ye);function ft(c){const v=wi();At(v,new ul(v,c))}gr.Ma="timingevent";function Ao(c,v){ye.call(this,gr.Ma,c),this.size=v}D(Ao,ye);function Kn(c,v){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},v)}function xi(){this.g=!0}xi.prototype.xa=function(){this.g=!1};function Ti(c,v,T,S,W,Y){c.info(function(){if(c.g)if(Y)for(var ue="",qe=Y.split("&"),Ct=0;Ct<qe.length;Ct++){var Me=qe[Ct].split("=");if(1<Me.length){var Vt=Me[0];Me=Me[1];var vt=Vt.split("_");ue=2<=vt.length&&vt[1]=="type"?ue+(Vt+"="+Me+"&"):ue+(Vt+"=redacted&")}}else ue=null;else ue=Y;return"XMLHTTP REQ ("+S+") [attempt "+W+"]: "+v+`
`+T+`
`+ue})}function Co(c,v,T,S,W,Y,ue){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+W+"]: "+v+`
`+T+`
`+Y+" "+ue})}function Gn(c,v,T,S){c.info(function(){return"XMLHTTP TEXT ("+v+"): "+Kd(c,T)+(S?" "+S:"")})}function cl(c,v){c.info(function(){return"TIMEOUT: "+v})}xi.prototype.info=function(){};function Kd(c,v){if(!c.g)return v;if(!v)return null;try{var T=JSON.parse(v);if(T){for(c=0;c<T.length;c++)if(Array.isArray(T[c])){var S=T[c];if(!(2>S.length)){var W=S[1];if(Array.isArray(W)&&!(1>W.length)){var Y=W[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var ue=1;ue<W.length;ue++)W[ue]=""}}}}return sl(T)}catch{return v}}var Ro={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Qn;function Ei(){}D(Ei,_i),Ei.prototype.g=function(){return new XMLHttpRequest},Ei.prototype.i=function(){return{}},Qn=new Ei;function Xn(c,v,T,S){this.j=c,this.i=v,this.l=T,this.R=S||1,this.U=new vi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qu}function Qu(){this.i=null,this.g="",this.h=!1}var hl={},Po={};function ko(c,v,T){c.L=1,c.v=Ts(Tn(v)),c.m=T,c.P=!0,dl(c,null)}function dl(c,v){c.F=Date.now(),Qe(c),c.A=Tn(c.v);var T=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),Ss(T.i,"t",S),c.C=0,T=c.j.J,c.h=new Qu,c.g=fc(c.j,T?v:null,!c.m),0<c.O&&(c.M=new yi(x(c.Y,c,c.g),c.O)),v=c.U,T=c.g,S=c.ca;var W="readystatechange";Array.isArray(W)||(W&&(nl[0]=W.toString()),W=nl);for(var Y=0;Y<W.length;Y++){var ue=Ya(T,W[Y],S||v.handleEvent,!1,v.h||v);if(!ue)break;v.g[ue.key]=ue}v=c.H?b(c.H):{},c.m?(c.u||(c.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,v)):(c.u="GET",c.g.ea(c.A,c.u,null,v)),zr(),Ti(c.i,c.u,c.A,c.l,c.R,c.m)}Xn.prototype.ca=function(c){c=c.target;const v=this.M;v&&cn(c)==3?v.j():this.Y(c)},Xn.prototype.Y=function(c){try{if(c==this.g)e:{const vt=cn(this.g);var v=this.g.Ba();const Vn=this.g.Z();if(!(3>vt)&&(vt!=3||this.g&&(this.h.h||this.g.oa()||vl(this.g)))){this.J||vt!=4||v==7||(v==8||0>=Vn?zr(3):zr(2)),Si(this);var T=this.g.Z();this.X=T;t:if(Xu(this)){var S=vl(this.g);c="";var W=S.length,Y=cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){kn(this),vs(this);var ue="";break t}this.h.i=new h.TextDecoder}for(v=0;v<W;v++)this.h.h=!0,c+=this.h.i.decode(S[v],{stream:!(Y&&v==W-1)});S.length=0,this.h.g+=c,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=T==200,Co(this.i,this.u,this.A,this.l,this.R,vt,T),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,Ct=this.g;if((qe=Ct.g?Ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(qe)){var Me=qe;break t}}Me=null}if(T=Me)Gn(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,fl(this,T);else{this.o=!1,this.s=3,ft(12),kn(this),vs(this);break e}}if(this.P){T=!0;let Sn;for(;!this.J&&this.C<ue.length;)if(Sn=Gd(this,ue),Sn==Po){vt==4&&(this.s=4,ft(14),T=!1),Gn(this.i,this.l,null,"[Incomplete Response]");break}else if(Sn==hl){this.s=4,ft(15),Gn(this.i,this.l,ue,"[Invalid Chunk]"),T=!1;break}else Gn(this.i,this.l,Sn,null),fl(this,Sn);if(Xu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||ue.length!=0||this.h.h||(this.s=1,ft(16),T=!1),this.o=this.o&&T,!T)Gn(this.i,this.l,ue,"[Invalid Chunked Response]"),kn(this),vs(this);else if(0<ue.length&&!this.W){this.W=!0;var Vt=this.j;Vt.g==this&&Vt.ba&&!Vt.M&&(Vt.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),wl(Vt),Vt.M=!0,ft(11))}}else Gn(this.i,this.l,ue,null),fl(this,ue);vt==4&&kn(this),this.o&&!this.J&&(vt==4?Bo(this.j,this):(this.o=!1,Qe(this)))}else Lo(this.g),T==400&&0<ue.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),kn(this),vs(this)}}}catch{}finally{}};function Xu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Gd(c,v){var T=c.C,S=v.indexOf(`
`,T);return S==-1?Po:(T=Number(v.substring(T,S)),isNaN(T)?hl:(S+=1,S+T>v.length?Po:(v=v.slice(S,S+T),c.C=S+T,v)))}Xn.prototype.cancel=function(){this.J=!0,kn(this)};function Qe(c){c.S=Date.now()+c.I,Yu(c,c.I)}function Yu(c,v){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Kn(x(c.ba,c),v)}function Si(c){c.B&&(h.clearTimeout(c.B),c.B=null)}Xn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(cl(this.i,this.A),this.L!=2&&(zr(),ft(17)),kn(this),this.s=2,vs(this)):Yu(this,this.S-c)};function vs(c){c.j.G==0||c.J||Bo(c.j,c)}function kn(c){Si(c);var v=c.M;v&&typeof v.ma=="function"&&v.ma(),c.M=null,rl(c.U),c.g&&(v=c.g,c.g=null,v.abort(),v.ma())}function fl(c,v){try{var T=c.j;if(T.G!=0&&(T.g==c||tn(T.h,c))){if(!c.K&&tn(T.h,c)&&T.G==3){try{var S=T.Da.g.parse(v)}catch{S=null}if(Array.isArray(S)&&S.length==3){var W=S;if(W[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<c.F)$o(T),tr(T);else break e;Uo(T),ft(18)}}else T.za=W[1],0<T.za-T.T&&37500>W[2]&&T.F&&T.v==0&&!T.C&&(T.C=Kn(x(T.Za,T),6e3));if(1>=Zu(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Gr(T,11)}else if((c.K||T.g==c)&&$o(T),!U(v))for(W=T.Da.g.parse(v),v=0;v<W.length;v++){let Me=W[v];if(T.T=Me[0],Me=Me[1],T.G==2)if(Me[0]=="c"){T.K=Me[1],T.ia=Me[2];const Vt=Me[3];Vt!=null&&(T.la=Vt,T.j.info("VER="+T.la));const vt=Me[4];vt!=null&&(T.Aa=vt,T.j.info("SVER="+T.Aa));const Vn=Me[5];Vn!=null&&typeof Vn=="number"&&0<Vn&&(S=1.5*Vn,T.L=S,T.j.info("backChannelRequestTimeoutMs_="+S)),S=T;const Sn=c.g;if(Sn){const ki=Sn.g?Sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ki){var Y=S.h;Y.g||ki.indexOf("spdy")==-1&&ki.indexOf("quic")==-1&&ki.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(pl(Y,Y.h),Y.h=null))}if(S.D){const Ho=Sn.g?Sn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ho&&(S.ya=Ho,Ke(S.I,S.D,Ho))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-c.F,T.j.info("Handshake RTT: "+T.R+"ms")),S=T;var ue=c;if(S.qa=dc(S,S.J?S.ia:null,S.W),ue.K){ec(S.h,ue);var qe=ue,Ct=S.L;Ct&&(qe.I=Ct),qe.B&&(Si(qe),Qe(qe)),S.g=ue}else Pi(S);0<T.i.length&&wr(T)}else Me[0]!="stop"&&Me[0]!="close"||Gr(T,7);else T.G==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?Gr(T,7):Ft(T):Me[0]!="noop"&&T.l&&T.l.ta(Me),T.v=0)}}zr(4)}catch{}}var Ju=class{constructor(c,v){this.g=c,this.map=v}};function bi(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Zu(c){return c.h?1:c.g?c.g.size:0}function tn(c,v){return c.h?c.h==v:c.g?c.g.has(v):!1}function pl(c,v){c.g?c.g.add(v):c.h=v}function ec(c,v){c.h&&c.h==v?c.h=null:c.g&&c.g.has(v)&&c.g.delete(v)}bi.prototype.cancel=function(){if(this.i=tc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function tc(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let v=c.i;for(const T of c.g.values())v=v.concat(T.D);return v}return j(c.i)}function No(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var v=[],T=c.length,S=0;S<T;S++)v.push(c[S]);return v}v=[],T=0;for(S in c)v[T++]=c[S];return v}function Vo(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var v=[];c=c.length;for(var T=0;T<c;T++)v.push(T);return v}v=[],T=0;for(const S in c)v[T++]=S;return v}}}function _s(c,v){if(c.forEach&&typeof c.forEach=="function")c.forEach(v,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,v,void 0);else for(var T=Vo(c),S=No(c),W=S.length,Y=0;Y<W;Y++)v.call(void 0,S[Y],T&&T[Y],c)}var Ii=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Qd(c,v){if(c){c=c.split("&");for(var T=0;T<c.length;T++){var S=c[T].indexOf("="),W=null;if(0<=S){var Y=c[T].substring(0,S);W=c[T].substring(S+1)}else Y=c[T];v(Y,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Hr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Hr){this.h=c.h,Ai(this,c.j),this.o=c.o,this.g=c.g,ws(this,c.s),this.l=c.l;var v=c.i,T=new yr;T.i=v.i,v.g&&(T.g=new Map(v.g),T.h=v.h),xs(this,T),this.m=c.m}else c&&(v=String(c).match(Ii))?(this.h=!1,Ai(this,v[1]||"",!0),this.o=Oe(v[2]||""),this.g=Oe(v[3]||"",!0),ws(this,v[4]),this.l=Oe(v[5]||"",!0),xs(this,v[6]||"",!0),this.m=Oe(v[7]||"")):(this.h=!1,this.i=new yr(null,this.h))}Hr.prototype.toString=function(){var c=[],v=this.j;v&&c.push(Es(v,Do,!0),":");var T=this.g;return(T||v=="file")&&(c.push("//"),(v=this.o)&&c.push(Es(v,Do,!0),"@"),c.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&c.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&c.push("/"),c.push(Es(T,T.charAt(0)=="/"?sc:rc,!0))),(T=this.i.toString())&&c.push("?",T),(T=this.m)&&c.push("#",Es(T,ml)),c.join("")};function Tn(c){return new Hr(c)}function Ai(c,v,T){c.j=T?Oe(v,!0):v,c.j&&(c.j=c.j.replace(/:$/,""))}function ws(c,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);c.s=v}else c.s=null}function xs(c,v,T){v instanceof yr?(c.i=v,vr(c.i,c.h)):(T||(v=Es(v,ic)),c.i=new yr(v,c.h))}function Ke(c,v,T){c.i.set(v,T)}function Ts(c){return Ke(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Oe(c,v){return c?v?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Es(c,v,T){return typeof c=="string"?(c=encodeURI(c).replace(v,nc),T&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function nc(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Do=/[#\/\?@]/g,rc=/[#\?:]/g,sc=/[#\?]/g,ic=/[#\?@]/g,ml=/#/g;function yr(c,v){this.h=this.g=null,this.i=c||null,this.j=!!v}function Mt(c){c.g||(c.g=new Map,c.h=0,c.i&&Qd(c.i,function(v,T){c.add(decodeURIComponent(v.replace(/\+/g," ")),T)}))}t=yr.prototype,t.add=function(c,v){Mt(this),this.i=null,c=Nn(this,c);var T=this.g.get(c);return T||this.g.set(c,T=[]),T.push(v),this.h+=1,this};function Yn(c,v){Mt(c),v=Nn(c,v),c.g.has(v)&&(c.i=null,c.h-=c.g.get(v).length,c.g.delete(v))}function Jn(c,v){return Mt(c),v=Nn(c,v),c.g.has(v)}t.forEach=function(c,v){Mt(this),this.g.forEach(function(T,S){T.forEach(function(W){c.call(v,W,S,this)},this)},this)},t.na=function(){Mt(this);const c=Array.from(this.g.values()),v=Array.from(this.g.keys()),T=[];for(let S=0;S<v.length;S++){const W=c[S];for(let Y=0;Y<W.length;Y++)T.push(v[S])}return T},t.V=function(c){Mt(this);let v=[];if(typeof c=="string")Jn(this,c)&&(v=v.concat(this.g.get(Nn(this,c))));else{c=Array.from(this.g.values());for(let T=0;T<c.length;T++)v=v.concat(c[T])}return v},t.set=function(c,v){return Mt(this),this.i=null,c=Nn(this,c),Jn(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[v]),this.h+=1,this},t.get=function(c,v){return c?(c=this.V(c),0<c.length?String(c[0]):v):v};function Ss(c,v,T){Yn(c,v),0<T.length&&(c.i=null,c.g.set(Nn(c,v),j(T)),c.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],v=Array.from(this.g.keys());for(var T=0;T<v.length;T++){var S=v[T];const Y=encodeURIComponent(String(S)),ue=this.V(S);for(S=0;S<ue.length;S++){var W=Y;ue[S]!==""&&(W+="="+encodeURIComponent(String(ue[S]))),c.push(W)}}return this.i=c.join("&")};function Nn(c,v){return v=String(v),c.j&&(v=v.toLowerCase()),v}function vr(c,v){v&&!c.j&&(Mt(c),c.i=null,c.g.forEach(function(T,S){var W=S.toLowerCase();S!=W&&(Yn(this,S),Ss(this,W,T))},c)),c.j=v}function Xd(c,v){const T=new xi;if(h.Image){const S=new Image;S.onload=C(un,T,"TestLoadImage: loaded",!0,v,S),S.onerror=C(un,T,"TestLoadImage: error",!1,v,S),S.onabort=C(un,T,"TestLoadImage: abort",!1,v,S),S.ontimeout=C(un,T,"TestLoadImage: timeout",!1,v,S),h.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else v(!1)}function oc(c,v){const T=new xi,S=new AbortController,W=setTimeout(()=>{S.abort(),un(T,"TestPingServer: timeout",!1,v)},1e4);fetch(c,{signal:S.signal}).then(Y=>{clearTimeout(W),Y.ok?un(T,"TestPingServer: ok",!0,v):un(T,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(W),un(T,"TestPingServer: error",!1,v)})}function un(c,v,T,S,W){try{W&&(W.onload=null,W.onerror=null,W.onabort=null,W.ontimeout=null),S(T)}catch{}}function Yd(){this.g=new ol}function ac(c,v,T){const S=T||"";try{_s(c,function(W,Y){let ue=W;p(W)&&(ue=sl(W)),v.push(S+Y+"="+encodeURIComponent(ue))})}catch(W){throw v.push(S+"type="+encodeURIComponent("_badmap")),W}}function Wr(c){this.l=c.Ub||null,this.j=c.eb||!1}D(Wr,_i),Wr.prototype.g=function(){return new Ci(this.l,this.j)},Wr.prototype.i=function(c){return function(){return c}}({});function Ci(c,v){It.call(this),this.D=c,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}D(Ci,It),t=Ci.prototype,t.open=function(c,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=v,this.readyState=1,er(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(v.body=c),(this.D||h).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zn(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,er(this)),this.g&&(this.readyState=3,er(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;lc(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function lc(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var v=c.value?c.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!c.done}))&&(this.response=this.responseText+=v)}c.done?Zn(this):er(this),this.readyState==3&&lc(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Zn(this))},t.Qa=function(c){this.g&&(this.response=c,Zn(this))},t.ga=function(){this.g&&Zn(this)};function Zn(c){c.readyState=4,c.l=null,c.j=null,c.v=null,er(c)}t.setRequestHeader=function(c,v){this.u.append(c,v)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],v=this.h.entries();for(var T=v.next();!T.done;)T=T.value,c.push(T[0]+": "+T[1]),T=v.next();return c.join(`\r
`)};function er(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ci.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function qr(c){let v="";return J(c,function(T,S){v+=S,v+=":",v+=T,v+=`\r
`}),v}function bs(c,v,T){e:{for(S in T){var S=!1;break e}S=!0}S||(T=qr(T),typeof c=="string"?T!=null&&encodeURIComponent(String(T)):Ke(c,v,T))}function tt(c){It.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}D(tt,It);var Jd=/^https?$/i,gl=["POST","PUT"];t=tt.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,v,T,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);v=v?v.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Qn.g(),this.v=this.o?So(this.o):So(Qn),this.g.onreadystatechange=x(this.Ea,this);try{this.B=!0,this.g.open(v,String(c),!0),this.B=!1}catch(Y){Ri(this,Y);return}if(c=T||"",T=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var W in S)T.set(W,S[W]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Y of S.keys())T.set(Y,S.get(Y));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(T.keys()).find(Y=>Y.toLowerCase()=="content-type"),W=h.FormData&&c instanceof h.FormData,!(0<=Array.prototype.indexOf.call(gl,v,void 0))||S||W||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ue]of T)this.g.setRequestHeader(Y,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Oo(this),this.u=!0,this.g.send(c),this.u=!1}catch(Y){Ri(this,Y)}};function Ri(c,v){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=v,c.m=5,jo(c),En(c)}function jo(c){c.A||(c.A=!0,At(c,"complete"),At(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,At(this,"complete"),At(this,"abort"),En(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),En(this,!0)),tt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?yl(this):this.bb())},t.bb=function(){yl(this)};function yl(c){if(c.h&&typeof l<"u"&&(!c.v[1]||cn(c)!=4||c.Z()!=2)){if(c.u&&cn(c)==4)tl(c.Ea,0,c);else if(At(c,"readystatechange"),cn(c)==4){c.h=!1;try{const ue=c.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var T;if(!(T=v)){var S;if(S=ue===0){var W=String(c.D).match(Ii)[1]||null;!W&&h.self&&h.self.location&&(W=h.self.location.protocol.slice(0,-1)),S=!Jd.test(W?W.toLowerCase():"")}T=S}if(T)At(c,"complete"),At(c,"success");else{c.m=6;try{var Y=2<cn(c)?c.g.statusText:""}catch{Y=""}c.l=Y+" ["+c.Z()+"]",jo(c)}}finally{En(c)}}}}function En(c,v){if(c.g){Oo(c);const T=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,v||At(c,"ready");try{T.onreadystatechange=S}catch{}}}function Oo(c){c.I&&(h.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function cn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<cn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var v=this.g.responseText;return c&&v.indexOf(c)==0&&(v=v.substring(c.length)),il(v)}};function vl(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Lo(c){const v={};c=(c.g&&2<=cn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(U(c[S]))continue;var T=V(c[S]);const W=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const Y=v[W]||[];v[W]=Y,Y.push(T)}N(v,function(S){return S.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _r(c,v,T){return T&&T.internalChannelParams&&T.internalChannelParams[c]||v}function _l(c){this.Aa=0,this.i=[],this.j=new xi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_r("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_r("baseRetryDelayMs",5e3,c),this.cb=_r("retryDelaySeedMs",1e4,c),this.Wa=_r("forwardChannelMaxRetries",2,c),this.wa=_r("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new bi(c&&c.concurrentRequestLimit),this.Da=new Yd,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=_l.prototype,t.la=8,t.G=1,t.connect=function(c,v,T,S){ft(0),this.W=c,this.H=v||{},T&&S!==void 0&&(this.H.OSID=T,this.H.OAID=S),this.F=this.X,this.I=dc(this,null,this.W),wr(this)};function Ft(c){if(Mo(c),c.G==3){var v=c.U++,T=Tn(c.I);if(Ke(T,"SID",c.K),Ke(T,"RID",v),Ke(T,"TYPE","terminate"),Kr(c,T),v=new Xn(c,c.j,v),v.L=2,v.v=Ts(Tn(T)),T=!1,h.navigator&&h.navigator.sendBeacon)try{T=h.navigator.sendBeacon(v.v.toString(),"")}catch{}!T&&h.Image&&(new Image().src=v.v,T=!0),T||(v.g=fc(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Qe(v)}hc(c)}function tr(c){c.g&&(wl(c),c.g.cancel(),c.g=null)}function Mo(c){tr(c),c.u&&(h.clearTimeout(c.u),c.u=null),$o(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&h.clearTimeout(c.s),c.s=null)}function wr(c){if(!xn(c.h)&&!c.s){c.s=!0;var v=c.Ga;xe||le(),H||(xe(),H=!0),oe.add(v,c),c.B=0}}function Zd(c,v){return Zu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=v.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Kn(x(c.Ga,c,v),cc(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const W=new Xn(this,this.j,c);let Y=this.o;if(this.S&&(Y?(Y=b(Y),I(Y,this.S)):Y=this.S),this.m!==null||this.O||(W.H=Y,Y=null),this.P)e:{for(var v=0,T=0;T<this.i.length;T++){t:{var S=this.i[T];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(v+=S,4096<v){v=T;break e}if(v===4096||T===this.i.length-1){v=T+1;break e}}v=1e3}else v=1e3;v=Is(this,W,v),T=Tn(this.I),Ke(T,"RID",c),Ke(T,"CVER",22),this.D&&Ke(T,"X-HTTP-Session-Id",this.D),Kr(this,T),Y&&(this.O?v="headers="+encodeURIComponent(String(qr(Y)))+"&"+v:this.m&&bs(T,this.m,Y)),pl(this.h,W),this.Ua&&Ke(T,"TYPE","init"),this.P?(Ke(T,"$req",v),Ke(T,"SID","null"),W.T=!0,ko(W,T,null)):ko(W,T,v),this.G=2}}else this.G==3&&(c?Fo(this,c):this.i.length==0||xn(this.h)||Fo(this))};function Fo(c,v){var T;v?T=v.l:T=c.U++;const S=Tn(c.I);Ke(S,"SID",c.K),Ke(S,"RID",T),Ke(S,"AID",c.T),Kr(c,S),c.m&&c.o&&bs(S,c.m,c.o),T=new Xn(c,c.j,T,c.B+1),c.m===null&&(T.H=c.o),v&&(c.i=v.D.concat(c.i)),v=Is(c,T,1e3),T.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),pl(c.h,T),ko(T,S,v)}function Kr(c,v){c.H&&J(c.H,function(T,S){Ke(v,S,T)}),c.l&&_s({},function(T,S){Ke(v,S,T)})}function Is(c,v,T){T=Math.min(c.i.length,T);var S=c.l?x(c.l.Na,c.l,c):null;e:{var W=c.i;let Y=-1;for(;;){const ue=["count="+T];Y==-1?0<T?(Y=W[0].g,ue.push("ofs="+Y)):Y=0:ue.push("ofs="+Y);let qe=!0;for(let Ct=0;Ct<T;Ct++){let Me=W[Ct].g;const Vt=W[Ct].map;if(Me-=Y,0>Me)Y=Math.max(0,W[Ct].g-100),qe=!1;else try{ac(Vt,ue,"req"+Me+"_")}catch{S&&S(Vt)}}if(qe){S=ue.join("&");break e}}}return c=c.i.splice(0,T),v.D=c,S}function Pi(c){if(!c.g&&!c.u){c.Y=1;var v=c.Fa;xe||le(),H||(xe(),H=!0),oe.add(v,c),c.v=0}}function Uo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Kn(x(c.Fa,c),cc(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,uc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Kn(x(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),tr(this),uc(this))};function wl(c){c.A!=null&&(h.clearTimeout(c.A),c.A=null)}function uc(c){c.g=new Xn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var v=Tn(c.qa);Ke(v,"RID","rpc"),Ke(v,"SID",c.K),Ke(v,"AID",c.T),Ke(v,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ke(v,"TO",c.ja),Ke(v,"TYPE","xmlhttp"),Kr(c,v),c.m&&c.o&&bs(v,c.m,c.o),c.L&&(c.g.I=c.L);var T=c.g;c=c.ia,T.L=1,T.v=Ts(Tn(v)),T.m=null,T.P=!0,dl(T,c)}t.Za=function(){this.C!=null&&(this.C=null,tr(this),Uo(this),ft(19))};function $o(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function Bo(c,v){var T=null;if(c.g==v){$o(c),wl(c),c.g=null;var S=2}else if(tn(c.h,v))T=v.D,ec(c.h,v),S=1;else return;if(c.G!=0){if(v.o)if(S==1){T=v.m?v.m.length:0,v=Date.now()-v.F;var W=c.B;S=wi(),At(S,new Ao(S,T)),wr(c)}else Pi(c);else if(W=v.s,W==3||W==0&&0<v.X||!(S==1&&Zd(c,v)||S==2&&Uo(c)))switch(T&&0<T.length&&(v=c.h,v.i=v.i.concat(T)),W){case 1:Gr(c,5);break;case 4:Gr(c,10);break;case 3:Gr(c,6);break;default:Gr(c,2)}}}function cc(c,v){let T=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(T*=2),T*v}function Gr(c,v){if(c.j.info("Error code "+v),v==2){var T=x(c.fb,c),S=c.Xa;const W=!S;S=new Hr(S||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Ai(S,"https"),Ts(S),W?Xd(S.toString(),T):oc(S.toString(),T)}else ft(2);c.G=0,c.l&&c.l.sa(v),hc(c),Mo(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function hc(c){if(c.G=0,c.ka=[],c.l){const v=tc(c.h);(v.length!=0||c.i.length!=0)&&(R(c.ka,v),R(c.ka,c.i),c.h.i.length=0,j(c.i),c.i.length=0),c.l.ra()}}function dc(c,v,T){var S=T instanceof Hr?Tn(T):new Hr(T);if(S.g!="")v&&(S.g=v+"."+S.g),ws(S,S.s);else{var W=h.location;S=W.protocol,v=v?v+"."+W.hostname:W.hostname,W=+W.port;var Y=new Hr(null);S&&Ai(Y,S),v&&(Y.g=v),W&&ws(Y,W),T&&(Y.l=T),S=Y}return T=c.D,v=c.ya,T&&v&&Ke(S,T,v),Ke(S,"VER",c.la),Kr(c,S),S}function fc(c,v,T){if(v&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=c.Ca&&!c.pa?new tt(new Wr({eb:T})):new tt(c.pa),v.Ha(c.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function xl(){}t=xl.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function zo(){}zo.prototype.g=function(c,v){return new nn(c,v)};function nn(c,v){It.call(this),this.g=new _l(v),this.l=c,this.h=v&&v.messageUrlParams||null,c=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(c?c["X-WebChannel-Content-Type"]=v.messageContentType:c={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(c?c["X-WebChannel-Client-Profile"]=v.va:c={"X-WebChannel-Client-Profile":v.va}),this.g.S=c,(c=v&&v.Sb)&&!U(c)&&(this.g.m=c),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!U(v)&&(this.g.D=v,c=this.h,c!==null&&v in c&&(c=this.h,v in c&&delete c[v])),this.j=new xr(this)}D(nn,It),nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){Ft(this.g)},nn.prototype.o=function(c){var v=this.g;if(typeof c=="string"){var T={};T.__data__=c,c=T}else this.u&&(T={},T.__data__=sl(c),c=T);v.i.push(new Ju(v.Ya++,c)),v.G==3&&wr(v)},nn.prototype.N=function(){this.g.l=null,delete this.j,Ft(this.g),delete this.g,nn.aa.N.call(this)};function pc(c){mr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var v=c.__sm__;if(v){e:{for(const T in v){c=T;break e}c=void 0}(this.i=c)&&(c=this.i,v=v!==null&&c in v?v[c]:void 0),this.data=v}else this.data=c}D(pc,mr);function mc(){Io.call(this),this.status=1}D(mc,Io);function xr(c){this.g=c}D(xr,xl),xr.prototype.ua=function(){At(this.g,"a")},xr.prototype.ta=function(c){At(this.g,new pc(c))},xr.prototype.sa=function(c){At(this.g,new mc)},xr.prototype.ra=function(){At(this.g,"b")},zo.prototype.createWebChannel=zo.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,RS=function(){return new zo},CS=function(){return wi()},AS=gr,$m={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ro.NO_ERROR=0,Ro.TIMEOUT=8,Ro.HTTP_ERROR=6,Nh=Ro,Gu.COMPLETE="complete",IS=Gu,bo.EventType=Pn,Pn.OPEN="a",Pn.CLOSE="b",Pn.ERROR="c",Pn.MESSAGE="d",It.prototype.listen=It.prototype.K,Xl=bo,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,bS=tt}).apply(typeof mh<"u"?mh:typeof self<"u"?self:typeof window<"u"?window:{});const mx="@firebase/firestore",gx="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wa="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=new Xg("@firebase/firestore");function ma(){return ro.logLevel}function de(t,...e){if(ro.logLevel<=De.DEBUG){const n=e.map(oy);ro.debug(`Firestore (${Wa}): ${t}`,...n)}}function fs(t,...e){if(ro.logLevel<=De.ERROR){const n=e.map(oy);ro.error(`Firestore (${Wa}): ${t}`,...n)}}function ii(t,...e){if(ro.logLevel<=De.WARN){const n=e.map(oy);ro.warn(`Firestore (${Wa}): ${t}`,...n)}}function oy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,PS(t,r,n)}function PS(t,e,n){let r=`FIRESTORE (${Wa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw fs(r),new Error(r)}function We(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||PS(e,i,r)}function Ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends pr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Yt.UNAUTHENTICATED))}shutdown(){}}class Kj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Gj{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){We(this.o===void 0,42304);let r=this.i;const i=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let a=new ei;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ei,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await i(this.currentUser)})},h=f=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(f=>h(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ei)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(We(typeof r.accessToken=="string",31837,{l:r}),new kS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new Yt(e)}}class Qj{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Xj{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Qj(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class yx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Yj{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Bn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){We(this.o===void 0,3512);const r=a=>{a.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,de("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new yx(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(We(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new yx(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jj(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Jj(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function ke(t,e){return t<e?-1:t>e?1:0}function Bm(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return ke(r,i);{const a=NS(),l=Zj(a.encode(vx(t,n)),a.encode(vx(e,n)));return l!==0?l:ke(r,i)}}n+=r>65535?2:1}return ke(t.length,e.length)}function vx(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function Zj(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ke(t[n],e[n]);return ke(t.length,e.length)}function Va(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x="__name__";class Ir{constructor(e,n,r){n===void 0?n=0:n>e.length&&Te(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Te(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ir.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ir?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=Ir.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return ke(e.length,n.length)}static compareSegments(e,n){const r=Ir.isNumericId(e),i=Ir.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Ir.extractNumericId(e).compare(Ir.extractNumericId(n)):Bm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zs.fromString(e.substring(4,e.length-2))}}class Ye extends Ir{construct(e,n,r){return new Ye(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ce(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ye(n)}static emptyPath(){return new Ye([])}}const eO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ht extends Ir{construct(e,n,r){return new Ht(e,n,r)}static isValidIdentifier(e){return eO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_x}static keyField(){return new Ht([_x])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new ce(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if(h==="\\"){if(i+1===e.length)throw new ce(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ce(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else h==="`"?(l=!l,i++):h!=="."||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new ce(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ht(n)}static emptyPath(){return new Ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(Ye.fromString(e))}static fromName(e){return new ve(Ye.fromString(e).popFirst(5))}static empty(){return new ve(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new Ye(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t,e,n){if(!n)throw new ce(Z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function tO(t,e,n,r){if(e===!0&&r===!0)throw new ce(Z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function wx(t){if(!ve.isDocumentKey(t))throw new ce(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function xx(t){if(ve.isDocumentKey(t))throw new ce(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function DS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Id(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Te(12329,{type:typeof t})}function Vr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ce(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Id(t);throw new ce(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Et(t,e){const n={typeString:t};return e&&(n.value=e),n}function Bu(t,e){if(!DS(t))throw new ce(Z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const l=t[r];if(i&&typeof l!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&l!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new ce(Z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=-62135596800,Ex=1e6;class et{static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Ex);return new et(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ce(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Tx)throw new ce(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ex}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Bu(e,et._jsonSchema))return new et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Tx;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}et._jsonSchemaVersion="firestore/timestamp/1.0",et._jsonSchema={type:Et("string",et._jsonSchemaVersion),seconds:Et("number"),nanoseconds:Et("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new et(0,0))}static max(){return new Ae(new et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su=-1;function nO(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ae.fromTimestamp(r===1e9?new et(n+1,0):new et(n,r));return new oi(i,ve.empty(),e)}function rO(t){return new oi(t.readTime,t.key,Su)}class oi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new oi(Ae.min(),ve.empty(),Su)}static max(){return new oi(Ae.max(),ve.empty(),Su)}}function sO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ve.comparator(t.documentKey,e.documentKey),n!==0?n:ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qa(t){if(t.code!==Z.FAILED_PRECONDITION||t.message!==iO)throw t;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new te((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof te?n:te.resolve(n)}catch(n){return te.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):te.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):te.reject(n)}static resolve(e){return new te((n,r)=>{n(e)})}static reject(e){return new te((n,r)=>{r(e)})}static waitFor(e){return new te((n,r)=>{let i=0,a=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++a,l&&a===i&&n()},f=>r(f))}),l=!0,a===i&&n()})}static or(e){let n=te.resolve(!1);for(const r of e)n=n.next(i=>i?te.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,a)=>{r.push(n.call(this,i,a))}),this.waitFor(r)}static mapArray(e,n){return new te((r,i)=>{const a=e.length,l=new Array(a);let h=0;for(let f=0;f<a;f++){const p=f;n(e[p]).next(g=>{l[p]=g,++h,h===a&&r(l)},g=>i(g))}})}static doWhile(e,n){return new te((r,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):r()};a()})}}function aO(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ka(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Ad.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly=-1;function Cd(t){return t==null}function Zh(t){return t===0&&1/t==-1/0}function lO(t){return typeof t=="number"&&Number.isInteger(t)&&!Zh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS="";function uO(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Sx(e)),e=cO(t.get(n),e);return Sx(e)}function cO(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case jS:n+="";break;default:n+=a}}return n}function Sx(t){return t+jS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function pi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function OS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n){this.comparator=e,this.root=n||zt.EMPTY}insert(e,n){return new at(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new gh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new gh(this.root,e,this.comparator,!1)}getReverseIterator(){return new gh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new gh(this.root,e,this.comparator,!0)}}class gh{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zt{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??zt.RED,this.left=i??zt.EMPTY,this.right=a??zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new zt(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return zt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ix(this.data.getIterator())}getIteratorFrom(e){return new Ix(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new kt(this.comparator);return n.data=e,n}}class Ix{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new Cn([])}unionWith(e){let n=new kt(Ht.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Va(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new LS("Invalid base64 string: "+a):a}}(e);return new Wt(n)}static fromUint8Array(e){const n=function(i){let a="";for(let l=0;l<i.length;++l)a+=String.fromCharCode(i[l]);return a}(e);return new Wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const hO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ai(t){if(We(!!t,39018),typeof t=="string"){let e=0;const n=hO.exec(t);if(We(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gt(t.seconds),nanos:gt(t.nanos)}}function gt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function li(t){return typeof t=="string"?Wt.fromBase64String(t):Wt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="server_timestamp",FS="__type__",US="__previous_value__",$S="__local_write_time__";function uy(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[FS])===null||n===void 0?void 0:n.stringValue)===MS}function Rd(t){const e=t.mapValue.fields[US];return uy(e)?Rd(e):e}function bu(t){const e=ai(t.mapValue.fields[$S].timestampValue);return new et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(e,n,r,i,a,l,h,f,p,g){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=p,this.isUsingEmulator=g}}const ed="(default)";class Iu{constructor(e,n){this.projectId=e,this.database=n||ed}static empty(){return new Iu("","")}get isDefaultDatabase(){return this.database===ed}isEqual(e){return e instanceof Iu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS="__type__",fO="__max__",yh={mapValue:{}},zS="__vector__",td="value";function ui(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?uy(t)?4:mO(t)?9007199254740991:pO(t)?10:11:Te(28295,{value:t})}function Mr(t,e){if(t===e)return!0;const n=ui(t);if(n!==ui(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bu(t).isEqual(bu(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const l=ai(i.timestampValue),h=ai(a.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return li(i.bytesValue).isEqual(li(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return gt(i.geoPointValue.latitude)===gt(a.geoPointValue.latitude)&&gt(i.geoPointValue.longitude)===gt(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return gt(i.integerValue)===gt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const l=gt(i.doubleValue),h=gt(a.doubleValue);return l===h?Zh(l)===Zh(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return Va(t.arrayValue.values||[],e.arrayValue.values||[],Mr);case 10:case 11:return function(i,a){const l=i.mapValue.fields||{},h=a.mapValue.fields||{};if(bx(l)!==bx(h))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(h[f]===void 0||!Mr(l[f],h[f])))return!1;return!0}(t,e);default:return Te(52216,{left:t})}}function Au(t,e){return(t.values||[]).find(n=>Mr(n,e))!==void 0}function Da(t,e){if(t===e)return 0;const n=ui(t),r=ui(e);if(n!==r)return ke(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(t.booleanValue,e.booleanValue);case 2:return function(a,l){const h=gt(a.integerValue||a.doubleValue),f=gt(l.integerValue||l.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1}(t,e);case 3:return Ax(t.timestampValue,e.timestampValue);case 4:return Ax(bu(t),bu(e));case 5:return Bm(t.stringValue,e.stringValue);case 6:return function(a,l){const h=li(a),f=li(l);return h.compareTo(f)}(t.bytesValue,e.bytesValue);case 7:return function(a,l){const h=a.split("/"),f=l.split("/");for(let p=0;p<h.length&&p<f.length;p++){const g=ke(h[p],f[p]);if(g!==0)return g}return ke(h.length,f.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,l){const h=ke(gt(a.latitude),gt(l.latitude));return h!==0?h:ke(gt(a.longitude),gt(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Cx(t.arrayValue,e.arrayValue);case 10:return function(a,l){var h,f,p,g;const w=a.fields||{},x=l.fields||{},C=(h=w[td])===null||h===void 0?void 0:h.arrayValue,D=(f=x[td])===null||f===void 0?void 0:f.arrayValue,j=ke(((p=C?.values)===null||p===void 0?void 0:p.length)||0,((g=D?.values)===null||g===void 0?void 0:g.length)||0);return j!==0?j:Cx(C,D)}(t.mapValue,e.mapValue);case 11:return function(a,l){if(a===yh.mapValue&&l===yh.mapValue)return 0;if(a===yh.mapValue)return 1;if(l===yh.mapValue)return-1;const h=a.fields||{},f=Object.keys(h),p=l.fields||{},g=Object.keys(p);f.sort(),g.sort();for(let w=0;w<f.length&&w<g.length;++w){const x=Bm(f[w],g[w]);if(x!==0)return x;const C=Da(h[f[w]],p[g[w]]);if(C!==0)return C}return ke(f.length,g.length)}(t.mapValue,e.mapValue);default:throw Te(23264,{le:n})}}function Ax(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ke(t,e);const n=ai(t),r=ai(e),i=ke(n.seconds,r.seconds);return i!==0?i:ke(n.nanos,r.nanos)}function Cx(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=Da(n[i],r[i]);if(a)return a}return ke(n.length,r.length)}function ja(t){return zm(t)}function zm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ai(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return li(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ve.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=zm(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const l of r)a?a=!1:i+=",",i+=`${l}:${zm(n.fields[l])}`;return i+"}"}(t.mapValue):Te(61005,{value:t})}function Vh(t){switch(ui(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rd(t);return e?16+Vh(e):16;case 5:return 2*t.stringValue.length;case 6:return li(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+Vh(a),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return pi(r.fields,(a,l)=>{i+=a.length+Vh(l)}),i}(t.mapValue);default:throw Te(13486,{value:t})}}function Rx(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Hm(t){return!!t&&"integerValue"in t}function cy(t){return!!t&&"arrayValue"in t}function Px(t){return!!t&&"nullValue"in t}function kx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Dh(t){return!!t&&"mapValue"in t}function pO(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[BS])===null||n===void 0?void 0:n.stringValue)===zS}function lu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return pi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=lu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=lu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function mO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===fO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Dh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=lu(n)}setAll(e){let n=Ht.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const f=this.getFieldsMap(n);this.applyChanges(f,r,i),r={},i=[],n=h.popLast()}l?r[h.lastSegment()]=lu(l):i.push(h.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());Dh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Mr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Dh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){pi(n,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new vn(lu(this.value))}}function HS(t){const e=[];return pi(t.fields,(n,r)=>{const i=new Ht([n]);if(Dh(r)){const a=HS(r.mapValue).fields;if(a.length===0)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n,r,i,a,l,h){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Jt(e,0,Ae.min(),Ae.min(),Ae.min(),vn.empty(),0)}static newFoundDocument(e,n,r,i){return new Jt(e,1,n,Ae.min(),r,i,0)}static newNoDocument(e,n){return new Jt(e,2,n,Ae.min(),Ae.min(),vn.empty(),0)}static newUnknownDocument(e,n){return new Jt(e,3,n,Ae.min(),Ae.min(),vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n){this.position=e,this.inclusive=n}}function Nx(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],l=t.position[i];if(a.field.isKeyField()?r=ve.comparator(ve.fromName(l.referenceValue),n.key):r=Da(l,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Vx(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Mr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,n="asc"){this.field=e,this.dir=n}}function gO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{}class Tt extends WS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new vO(e,n,r):n==="array-contains"?new xO(e,r):n==="in"?new TO(e,r):n==="not-in"?new EO(e,r):n==="array-contains-any"?new SO(e,r):new Tt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new _O(e,r):new wO(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Da(n,this.value)):n!==null&&ui(this.value)===ui(n)&&this.matchesComparison(Da(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fr extends WS{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new fr(e,n)}matches(e){return qS(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function qS(t){return t.op==="and"}function KS(t){return yO(t)&&qS(t)}function yO(t){for(const e of t.filters)if(e instanceof fr)return!1;return!0}function Wm(t){if(t instanceof Tt)return t.field.canonicalString()+t.op.toString()+ja(t.value);if(KS(t))return t.filters.map(e=>Wm(e)).join(",");{const e=t.filters.map(n=>Wm(n)).join(",");return`${t.op}(${e})`}}function GS(t,e){return t instanceof Tt?function(r,i){return i instanceof Tt&&r.op===i.op&&r.field.isEqual(i.field)&&Mr(r.value,i.value)}(t,e):t instanceof fr?function(r,i){return i instanceof fr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,l,h)=>a&&GS(l,i.filters[h]),!0):!1}(t,e):void Te(19439)}function QS(t){return t instanceof Tt?function(n){return`${n.field.canonicalString()} ${n.op} ${ja(n.value)}`}(t):t instanceof fr?function(n){return n.op.toString()+" {"+n.getFilters().map(QS).join(" ,")+"}"}(t):"Filter"}class vO extends Tt{constructor(e,n,r){super(e,n,r),this.key=ve.fromName(r.referenceValue)}matches(e){const n=ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class _O extends Tt{constructor(e,n){super(e,"in",n),this.keys=XS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class wO extends Tt{constructor(e,n){super(e,"not-in",n),this.keys=XS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function XS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ve.fromName(r.referenceValue))}class xO extends Tt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return cy(n)&&Au(n.arrayValue,this.value)}}class TO extends Tt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Au(this.value.arrayValue,n)}}class EO extends Tt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Au(this.value.arrayValue,n)}}class SO extends Tt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!cy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Au(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e,n=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.Pe=null}}function Dx(t,e=null,n=[],r=[],i=null,a=null,l=null){return new bO(t,e,n,r,i,a,l)}function hy(t){const e=Ce(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Wm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Cd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ja(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ja(r)).join(",")),e.Pe=n}return e.Pe}function dy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!gO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!GS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Vx(t.startAt,e.startAt)&&Vx(t.endAt,e.endAt)}function qm(t){return ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,n=null,r=[],i=[],a=null,l="F",h=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=f,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function IO(t,e,n,r,i,a,l,h){return new Ga(t,e,n,r,i,a,l,h)}function fy(t){return new Ga(t)}function jx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function YS(t){return t.collectionGroup!==null}function uu(t){const e=Ce(t);if(e.Te===null){e.Te=[];const n=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new kt(Ht.comparator);return l.filters.forEach(f=>{f.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Te.push(new Cu(a,r))}),n.has(Ht.keyField().canonicalString())||e.Te.push(new Cu(Ht.keyField(),r))}return e.Te}function Dr(t){const e=Ce(t);return e.Ie||(e.Ie=AO(e,uu(t))),e.Ie}function AO(t,e){if(t.limitType==="F")return Dx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new Cu(i.field,a)});const n=t.endAt?new nd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new nd(t.startAt.position,t.startAt.inclusive):null;return Dx(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Km(t,e){const n=t.filters.concat([e]);return new Ga(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function rd(t,e,n){return new Ga(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Pd(t,e){return dy(Dr(t),Dr(e))&&t.limitType===e.limitType}function JS(t){return`${hy(Dr(t))}|lt:${t.limitType}`}function ga(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>QS(i)).join(", ")}]`),Cd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ja(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ja(i)).join(",")),`Target(${r})`}(Dr(t))}; limitType=${t.limitType})`}function kd(t,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ve.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,i){for(const a of uu(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(l,h,f){const p=Nx(l,h,f);return l.inclusive?p<=0:p<0}(r.startAt,uu(r),i)||r.endAt&&!function(l,h,f){const p=Nx(l,h,f);return l.inclusive?p>=0:p>0}(r.endAt,uu(r),i))}(t,e)}function CO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ZS(t){return(e,n)=>{let r=!1;for(const i of uu(t)){const a=RO(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function RO(t,e,n){const r=t.field.isKeyField()?ve.comparator(e.key,n.key):function(a,l,h){const f=l.data.field(a),p=h.data.field(a);return f!==null&&p!==null?Da(f,p):Te(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Te(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){pi(this.inner,(n,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return OS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO=new at(ve.comparator);function ps(){return PO}const eb=new at(ve.comparator);function Yl(...t){let e=eb;for(const n of t)e=e.insert(n.key,n);return e}function tb(t){let e=eb;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Qi(){return cu()}function nb(){return cu()}function cu(){return new go(t=>t.toString(),(t,e)=>t.isEqual(e))}const kO=new at(ve.comparator),NO=new kt(ve.comparator);function je(...t){let e=NO;for(const n of t)e=e.add(n);return e}const VO=new kt(ke);function DO(){return VO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zh(e)?"-0":e}}function rb(t){return{integerValue:""+t}}function jO(t,e){return lO(e)?rb(e):py(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(){this._=void 0}}function OO(t,e,n){return t instanceof Ru?function(i,a){const l={fields:{[FS]:{stringValue:MS},[$S]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&uy(a)&&(a=Rd(a)),a&&(l.fields[US]=a),{mapValue:l}}(n,e):t instanceof Oa?ib(t,e):t instanceof La?ob(t,e):function(i,a){const l=sb(i,a),h=Ox(l)+Ox(i.Ee);return Hm(l)&&Hm(i.Ee)?rb(h):py(i.serializer,h)}(t,e)}function LO(t,e,n){return t instanceof Oa?ib(t,e):t instanceof La?ob(t,e):n}function sb(t,e){return t instanceof sd?function(r){return Hm(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Ru extends Nd{}class Oa extends Nd{constructor(e){super(),this.elements=e}}function ib(t,e){const n=ab(e);for(const r of t.elements)n.some(i=>Mr(i,r))||n.push(r);return{arrayValue:{values:n}}}class La extends Nd{constructor(e){super(),this.elements=e}}function ob(t,e){let n=ab(e);for(const r of t.elements)n=n.filter(i=>!Mr(i,r));return{arrayValue:{values:n}}}class sd extends Nd{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Ox(t){return gt(t.integerValue||t.doubleValue)}function ab(t){return cy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,n){this.field=e,this.transform=n}}function MO(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Oa&&i instanceof Oa||r instanceof La&&i instanceof La?Va(r.elements,i.elements,Mr):r instanceof sd&&i instanceof sd?Mr(r.Ee,i.Ee):r instanceof Ru&&i instanceof Ru}(t.transform,e.transform)}class FO{constructor(e,n){this.version=e,this.transformResults=n}}class hr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new hr}static exists(e){return new hr(void 0,e)}static updateTime(e){return new hr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Vd{}function lb(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new gy(t.key,hr.none()):new zu(t.key,t.data,hr.none());{const n=t.data,r=vn.empty();let i=new kt(Ht.comparator);for(let a of e.fields)if(!i.has(a)){let l=n.field(a);l===null&&a.length>1&&(a=a.popLast(),l=n.field(a)),l===null?r.delete(a):r.set(a,l),i=i.add(a)}return new mi(t.key,r,new Cn(i.toArray()),hr.none())}}function UO(t,e,n){t instanceof zu?function(i,a,l){const h=i.value.clone(),f=Mx(i.fieldTransforms,a,l.transformResults);h.setAll(f),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof mi?function(i,a,l){if(!jh(i.precondition,a))return void a.convertToUnknownDocument(l.version);const h=Mx(i.fieldTransforms,a,l.transformResults),f=a.data;f.setAll(ub(i)),f.setAll(h),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(t,e,n):function(i,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function hu(t,e,n,r){return t instanceof zu?function(a,l,h,f){if(!jh(a.precondition,l))return h;const p=a.value.clone(),g=Fx(a.fieldTransforms,f,l);return p.setAll(g),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null}(t,e,n,r):t instanceof mi?function(a,l,h,f){if(!jh(a.precondition,l))return h;const p=Fx(a.fieldTransforms,f,l),g=l.data;return g.setAll(ub(a)),g.setAll(p),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(w=>w.field))}(t,e,n,r):function(a,l,h){return jh(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function $O(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=sb(r.transform,i||null);a!=null&&(n===null&&(n=vn.empty()),n.set(r.field,a))}return n||null}function Lx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Va(r,i,(a,l)=>MO(a,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class zu extends Vd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class mi extends Vd{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function ub(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Mx(t,e,n){const r=new Map;We(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const a=t[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,LO(l,h,n[i]))}return r}function Fx(t,e,n){const r=new Map;for(const i of t){const a=i.transform,l=n.data.field(i.field);r.set(i.field,OO(a,l,e))}return r}class gy extends Vd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class BO extends Vd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&UO(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=hu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=hu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=nb();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=n.has(i.key)?null:h;const f=lb(l,h);f!==null&&r.set(i.key,f),l.isValidDocument()||l.convertToNoDocument(Ae.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),je())}isEqual(e){return this.batchId===e.batchId&&Va(this.mutations,e.mutations,(n,r)=>Lx(n,r))&&Va(this.baseMutations,e.baseMutations,(n,r)=>Lx(n,r))}}class yy{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){We(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return kO}();const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new yy(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wt,Fe;function qO(t){switch(t){case Z.OK:return Te(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Te(15467,{code:t})}}function cb(t){if(t===void 0)return fs("GRPC error has no .code"),Z.UNKNOWN;switch(t){case wt.OK:return Z.OK;case wt.CANCELLED:return Z.CANCELLED;case wt.UNKNOWN:return Z.UNKNOWN;case wt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case wt.INTERNAL:return Z.INTERNAL;case wt.UNAVAILABLE:return Z.UNAVAILABLE;case wt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case wt.NOT_FOUND:return Z.NOT_FOUND;case wt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case wt.ABORTED:return Z.ABORTED;case wt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case wt.DATA_LOSS:return Z.DATA_LOSS;default:return Te(39323,{code:t})}}(Fe=wt||(wt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KO=new Zs([4294967295,4294967295],0);function Ux(t){const e=NS().encode(t),n=new SS;return n.update(e),new Uint8Array(n.digest())}function $x(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Zs([n,r],0),new Zs([i,a],0)]}class vy{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Jl(`Invalid padding: ${n}`);if(r<0)throw new Jl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Jl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Jl(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Zs.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Zs.fromNumber(r)));return i.compare(KO)===1&&(i=new Zs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=Ux(e),[r,i]=$x(n);for(let a=0;a<this.hashCount;a++){const l=this.pe(r,i,a);if(!this.ye(l))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new vy(a,i,n);return r.forEach(h=>l.insert(h)),l}insert(e){if(this.fe===0)return;const n=Ux(e),[r,i]=$x(n);for(let a=0;a<this.hashCount;a++){const l=this.pe(r,i,a);this.we(l)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Jl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Hu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Dd(Ae.min(),i,new at(ke),ps(),je())}}class Hu{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Hu(r,n,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class hb{constructor(e,n){this.targetId=e,this.De=n}}class db{constructor(e,n,r=Wt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Bx{constructor(){this.ve=0,this.Ce=zx(),this.Fe=Wt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=je(),n=je(),r=je();return this.Ce.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Te(38017,{changeType:a})}}),new Hu(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=zx()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class GO{constructor(e){this.We=e,this.Ge=new Map,this.ze=ps(),this.je=vh(),this.Je=vh(),this.He=new at(ke)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:Te(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const a=i.target;if(qm(a))if(r===0){const l=new ve(a.path);this.Xe(n,l,Jt.newNoDocument(l,Ae.min()))}else We(r===1,20013,{expectedCount:r});else{const l=this.ot(n);if(l!==r){const h=this._t(e),f=h?this.ut(h,e,l):1;if(f!==0){this.rt(n);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,p)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let l,h;try{l=li(r).toUint8Array()}catch(f){if(f instanceof LS)return ii("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new vy(l,i,a)}catch(f){return ii(f instanceof Jl?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.fe===0?null:h}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(a=>{const l=this.We.lt(),h=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.Xe(n,a,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((a,l)=>{const h=this.st(l);if(h){if(a.current&&qm(h.target)){const f=new ve(h.target.path);this.Tt(f).has(l)||this.It(l,f)||this.Xe(l,f,Jt.newNoDocument(f,e))}a.Ne&&(n.set(l,a.Le()),a.ke())}});let r=je();this.Je.forEach((a,l)=>{let h=!0;l.forEachWhile(f=>{const p=this.st(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(a))}),this.ze.forEach((a,l)=>l.setReadTime(e));const i=new Dd(e,n,this.He,this.ze,r);return this.ze=ps(),this.je=vh(),this.Je=vh(),this.He=new at(ke),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Bx,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new kt(ke),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new kt(ke),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Bx),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function vh(){return new at(ve.comparator)}function zx(){return new at(ve.comparator)}const QO={asc:"ASCENDING",desc:"DESCENDING"},XO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},YO={and:"AND",or:"OR"};class JO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Gm(t,e){return t.useProto3Json||Cd(e)?e:{value:e}}function id(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ZO(t,e){return id(t,e.toTimestamp())}function jr(t){return We(!!t,49232),Ae.fromTimestamp(function(n){const r=ai(n);return new et(r.seconds,r.nanos)}(t))}function _y(t,e){return Qm(t,e).canonicalString()}function Qm(t,e){const n=function(i){return new Ye(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function pb(t){const e=Ye.fromString(t);return We(_b(e),10190,{key:e.toString()}),e}function Xm(t,e){return _y(t.databaseId,e.path)}function Gp(t,e){const n=pb(e);if(n.get(1)!==t.databaseId.projectId)throw new ce(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ce(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ve(gb(n))}function mb(t,e){return _y(t.databaseId,e)}function eL(t){const e=pb(t);return e.length===4?Ye.emptyPath():gb(e)}function Ym(t){return new Ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function gb(t){return We(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Hx(t,e,n){return{name:Xm(t,e),fields:n.value.mapValue.fields}}function tL(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Te(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(p,g){return p.useProto3Json?(We(g===void 0||typeof g=="string",58123),Wt.fromBase64String(g||"")):(We(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Wt.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(p){const g=p.code===void 0?Z.UNKNOWN:cb(p.code);return new ce(g,p.message||"")}(l);n=new db(r,i,a,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Gp(t,r.document.name),a=jr(r.document.updateTime),l=r.document.createTime?jr(r.document.createTime):Ae.min(),h=new vn({mapValue:{fields:r.document.fields}}),f=Jt.newFoundDocument(i,a,l,h),p=r.targetIds||[],g=r.removedTargetIds||[];n=new Oh(p,g,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Gp(t,r.document),a=r.readTime?jr(r.readTime):Ae.min(),l=Jt.newNoDocument(i,a),h=r.removedTargetIds||[];n=new Oh([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Gp(t,r.document),a=r.removedTargetIds||[];n=new Oh([],a,i,null)}else{if(!("filter"in e))return Te(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,l=new WO(i,a),h=r.targetId;n=new hb(h,l)}}return n}function nL(t,e){let n;if(e instanceof zu)n={update:Hx(t,e.key,e.value)};else if(e instanceof gy)n={delete:Xm(t,e.key)};else if(e instanceof mi)n={update:Hx(t,e.key,e.data),updateMask:hL(e.fieldMask)};else{if(!(e instanceof BO))return Te(16599,{Rt:e.type});n={verify:Xm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,l){const h=l.transform;if(h instanceof Ru)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Oa)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof La)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof sd)return{fieldPath:l.field.canonicalString(),increment:h.Ee};throw Te(20930,{transform:l.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:ZO(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Te(27497)}(t,e.precondition)),n}function rL(t,e){return t&&t.length>0?(We(e!==void 0,14353),t.map(n=>function(i,a){let l=i.updateTime?jr(i.updateTime):jr(a);return l.isEqual(Ae.min())&&(l=jr(a)),new FO(l,i.transformResults||[])}(n,e))):[]}function sL(t,e){return{documents:[mb(t,e.path)]}}function iL(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=mb(t,i);const a=function(p){if(p.length!==0)return vb(fr.create(p,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const l=function(p){if(p.length!==0)return p.map(g=>function(x){return{field:ya(x.field),direction:lL(x.dir)}}(g))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=Gm(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{Vt:n,parent:i}}function oL(t){let e=eL(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){We(r===1,65062);const g=n.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let a=[];n.where&&(a=function(w){const x=yb(w);return x instanceof fr&&KS(x)?x.getFilters():[x]}(n.where));let l=[];n.orderBy&&(l=function(w){return w.map(x=>function(D){return new Cu(va(D.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(D.direction))}(x))}(n.orderBy));let h=null;n.limit&&(h=function(w){let x;return x=typeof w=="object"?w.value:w,Cd(x)?null:x}(n.limit));let f=null;n.startAt&&(f=function(w){const x=!!w.before,C=w.values||[];return new nd(C,x)}(n.startAt));let p=null;return n.endAt&&(p=function(w){const x=!w.before,C=w.values||[];return new nd(C,x)}(n.endAt)),IO(e,i,l,a,h,"F",f,p)}function aL(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function yb(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=va(n.unaryFilter.field);return Tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=va(n.unaryFilter.field);return Tt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=va(n.unaryFilter.field);return Tt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=va(n.unaryFilter.field);return Tt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}}(t):t.fieldFilter!==void 0?function(n){return Tt.create(va(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return fr.create(n.compositeFilter.filters.map(r=>yb(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Te(1026)}}(n.compositeFilter.op))}(t):Te(30097,{filter:t})}function lL(t){return QO[t]}function uL(t){return XO[t]}function cL(t){return YO[t]}function ya(t){return{fieldPath:t.canonicalString()}}function va(t){return Ht.fromServerFormat(t.fieldPath)}function vb(t){return t instanceof Tt?function(n){if(n.op==="=="){if(kx(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NAN"}};if(Px(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(kx(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NOT_NAN"}};if(Px(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ya(n.field),op:uL(n.op),value:n.value}}}(t):t instanceof fr?function(n){const r=n.getFilters().map(i=>vb(i));return r.length===1?r[0]:{compositeFilter:{op:cL(n.op),filters:r}}}(t):Te(54877,{filter:t})}function hL(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function _b(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,n,r,i,a=Ae.min(),l=Ae.min(),h=Wt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new Qs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e){this.gt=e}}function fL(t){const e=oL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?rd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(){this.Dn=new mL}addToCollectionParentIndex(e,n){return this.Dn.add(n),te.resolve()}getCollectionParents(e,n){return te.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return te.resolve()}deleteFieldIndex(e,n){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,n){return te.resolve()}getDocumentsMatchingTarget(e,n){return te.resolve(null)}getIndexType(e,n){return te.resolve(0)}getFieldIndexes(e,n){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,n){return te.resolve(oi.min())}getMinOffsetFromCollectionGroup(e,n){return te.resolve(oi.min())}updateCollectionGroup(e,n,r){return te.resolve()}updateIndexEntries(e,n){return te.resolve()}}class mL{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new kt(Ye.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new kt(Ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wb=41943040;class yn{static withCacheSize(e){return new yn(e,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yn.DEFAULT_COLLECTION_PERCENTILE=10,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yn.DEFAULT=new yn(wb,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yn.DISABLED=new yn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ma(0)}static ur(){return new Ma(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="LruGarbageCollector",gL=1048576;function Kx([t,e],[n,r]){const i=ke(t,n);return i===0?ke(e,r):i}class yL{constructor(e){this.Tr=e,this.buffer=new kt(Kx),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Kx(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class vL{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){de(qx,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ka(n)?de(qx,"Ignoring IndexedDB error during garbage collection: ",n):await qa(n)}await this.Rr(3e5)})}}class _L{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return te.resolve(Ad.ue);const r=new yL(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(Wx)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Wx):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,a,l,h,f,p;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),i=this.params.maximumSequenceNumbersToCollect):i=w,l=Date.now(),this.nthSequenceNumber(e,i))).next(w=>(r=w,h=Date.now(),this.removeTargets(e,r,n))).next(w=>(a=w,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(w=>(p=Date.now(),ma()<=De.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${i} in `+(h-l)+`ms
	Removed ${a} targets in `+(f-h)+`ms
	Removed ${w} documents in `+(p-f)+`ms
Total Duration: ${p-g}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:w})))}}function wL(t,e){return new _L(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(){this.changes=new go(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?te.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&hu(r.mutation,i,Cn.empty(),et.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,je()).next(()=>r))}getLocalViewOfDocuments(e,n,r=je()){const i=Qi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(a=>{let l=Yl();return a.forEach((h,f)=>{l=l.insert(h,f.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const r=Qi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,je()))}populateOverlays(e,n,r){const i=[];return r.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,r,i){let a=ps();const l=cu(),h=function(){return cu()}();return n.forEach((f,p)=>{const g=r.get(p.key);i.has(p.key)&&(g===void 0||g.mutation instanceof mi)?a=a.insert(p.key,p):g!==void 0?(l.set(p.key,g.mutation.getFieldMask()),hu(g.mutation,p,g.mutation.getFieldMask(),et.now())):l.set(p.key,Cn.empty())}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((p,g)=>l.set(p,g)),n.forEach((p,g)=>{var w;return h.set(p,new TL(g,(w=l.get(p))!==null&&w!==void 0?w:null))}),h))}recalculateAndSaveOverlays(e,n){const r=cu();let i=new at((l,h)=>l-h),a=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(f=>{const p=n.get(f);if(p===null)return;let g=r.get(f)||Cn.empty();g=h.applyToLocalView(p,g),r.set(f,g);const w=(i.get(h.batchId)||je()).add(f);i=i.insert(h.batchId,w)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),p=f.key,g=f.value,w=nb();g.forEach(x=>{if(!a.has(x)){const C=lb(n.get(x),r.get(x));C!==null&&w.set(x,C),a=a.add(x)}}),l.push(this.documentOverlayCache.saveOverlays(e,p,w))}return te.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(l){return ve.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):YS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):te.resolve(Qi());let h=Su,f=a;return l.next(p=>te.forEach(p,(g,w)=>(h<w.largestBatchId&&(h=w.largestBatchId),a.get(g)?te.resolve():this.remoteDocumentCache.getEntry(e,g).next(x=>{f=f.insert(g,x)}))).next(()=>this.populateOverlays(e,p,a)).next(()=>this.computeViews(e,f,p,je())).next(g=>({batchId:h,changes:tb(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ve(n)).next(r=>{let i=Yl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let l=Yl();return this.indexManager.getCollectionParents(e,a).next(h=>te.forEach(h,f=>{const p=function(w,x){return new Ga(x,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(n,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,r,i).next(g=>{g.forEach((w,x)=>{l=l.insert(w,x)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i))).next(l=>{a.forEach((f,p)=>{const g=p.getKey();l.get(g)===null&&(l=l.insert(g,Jt.newInvalidDocument(g)))});let h=Yl();return l.forEach((f,p)=>{const g=a.get(f);g!==void 0&&hu(g.mutation,p,Cn.empty(),et.now()),kd(n,p)&&(h=h.insert(f,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return te.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:jr(i.createTime)}}(n)),te.resolve()}getNamedQuery(e,n){return te.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:fL(i.bundledQuery),readTime:jr(i.readTime)}}(n)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(){this.overlays=new at(ve.comparator),this.kr=new Map}getOverlay(e,n){return te.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Qi();return te.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,a)=>{this.wt(e,n,a)}),te.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),te.resolve()}getOverlaysForCollection(e,n,r){const i=Qi(),a=n.length+1,l=new ve(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const f=h.getNext().value,p=f.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===a&&f.largestBatchId>r&&i.set(f.getKey(),f)}return te.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new at((p,g)=>p-g);const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let g=a.get(p.largestBatchId);g===null&&(g=Qi(),a=a.insert(p.largestBatchId,g)),g.set(p.getKey(),p)}}const h=Qi(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((p,g)=>h.set(p,g)),!(h.size()>=i)););return te.resolve(h)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new HO(n,r));let a=this.kr.get(n);a===void 0&&(a=je(),this.kr.set(n,a)),this.kr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(){this.qr=new kt(Lt.Qr),this.$r=new kt(Lt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Lt(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Lt(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new ve(new Ye([])),r=new Lt(n,e),i=new Lt(n,e+1),a=[];return this.$r.forEachInRange([r,i],l=>{this.Wr(l),a.push(l.key)}),a}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new ve(new Ye([])),r=new Lt(n,e),i=new Lt(n,e+1);let a=je();return this.$r.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const n=new Lt(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Lt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return ve.comparator(e.key,n.key)||ke(e.Hr,n.Hr)}static Ur(e,n){return ke(e.Hr,n.Hr)||ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new kt(Lt.Qr)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new zO(a,n,r,i);this.mutationQueue.push(l);for(const h of i)this.Yr=this.Yr.add(new Lt(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return te.resolve(l)}lookupMutationBatch(e,n){return te.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),a=i<0?0:i;return te.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?ly:this.er-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Lt(n,0),i=new Lt(n,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,i],l=>{const h=this.Zr(l.Hr);a.push(h)}),te.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new kt(ke);return n.forEach(i=>{const a=new Lt(i,0),l=new Lt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,l],h=>{r=r.add(h.Hr)})}),te.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;ve.isDocumentKey(a)||(a=a.child(""));const l=new Lt(new ve(a),0);let h=new kt(ke);return this.Yr.forEachWhile(f=>{const p=f.key.path;return!!r.isPrefixOf(p)&&(p.length===i&&(h=h.add(f.Hr)),!0)},l),te.resolve(this.ei(h))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){We(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return te.forEach(n.mutations,i=>{const a=new Lt(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Lt(n,0),i=this.Yr.firstAfterOrEqual(r);return te.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e){this.ni=e,this.docs=function(){return new at(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,l=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return te.resolve(r?r.document.mutableCopy():Jt.newInvalidDocument(n))}getEntries(e,n){let r=ps();return n.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Jt.newInvalidDocument(i))}),te.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=ps();const l=n.path,h=new ve(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:p,value:{document:g}}=f.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||sO(rO(g),r)<=0||(i.has(g.key)||kd(n,g))&&(a=a.insert(g.key,g.mutableCopy()))}return te.resolve(a)}getAllFromCollectionGroup(e,n,r,i){Te(9500)}ri(e,n){return te.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new RL(this)}getSize(e){return te.resolve(this.size)}}class RL extends xL{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),te.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PL{constructor(e){this.persistence=e,this.ii=new go(n=>hy(n),dy),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.si=0,this.oi=new wy,this.targetCount=0,this._i=Ma.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),te.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Ma(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,te.resolve()}updateTargetData(e,n){return this.hr(n),te.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.ii.forEach((l,h)=>{h.sequenceNumber<=n&&r.get(h.targetId)===null&&(this.ii.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),te.waitFor(a).next(()=>i)}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return te.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),te.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),te.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),te.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return te.resolve(r)}containsKey(e,n){return te.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xb{constructor(e,n){this.ai={},this.overlays={},this.ui=new Ad(0),this.ci=!1,this.ci=!0,this.li=new IL,this.referenceDelegate=e(this),this.hi=new PL(this),this.indexManager=new pL,this.remoteDocumentCache=function(i){return new CL(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new dL(n),this.Ti=new SL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new bL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new AL(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){de("MemoryPersistence","Starting transaction:",e);const i=new kL(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ei(e,n){return te.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class kL extends oO{constructor(e){super(),this.currentSequenceNumber=e}}class xy{constructor(e){this.persistence=e,this.Ai=new wy,this.Ri=null}static Vi(e){return new xy(e)}get mi(){if(this.Ri)return this.Ri;throw Te(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),te.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),te.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.mi,r=>{const i=ve.fromPath(r);return this.fi(e,i).next(a=>{a||n.removeEntry(i,Ae.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return te.or([()=>te.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class od{constructor(e,n){this.persistence=e,this.gi=new go(r=>uO(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=wL(this,n)}static Vi(e,n){return new od(e,n)}Ii(){}di(e){return te.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return te.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(a=>a?te.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ri(e,l=>this.Sr(e,l,n).next(h=>{h||(r++,a.removeEntry(l,Ae.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),te.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),te.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),te.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Vh(e.data.value)),n}Sr(e,n,r){return te.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return te.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=je(),i=je();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Ty(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VL{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return SV()?8:aO(en())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.ps(e,n).next(l=>{a.result=l}).next(()=>{if(!a.result)return this.ys(e,n,i,r).next(l=>{a.result=l})}).next(()=>{if(a.result)return;const l=new NL;return this.ws(e,n,l).next(h=>{if(a.result=h,this.Rs)return this.Ss(e,n,l,h.size)})}).next(()=>a.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(ma()<=De.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",ga(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),te.resolve()):(ma()<=De.DEBUG&&de("QueryEngine","Query:",ga(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(ma()<=De.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",ga(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dr(n))):te.resolve())}ps(e,n){if(jx(n))return te.resolve(null);let r=Dr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=rd(n,null,"F"),r=Dr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=je(...a);return this.gs.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(f=>{const p=this.bs(n,h);return this.Ds(n,p,l,f.readTime)?this.ps(e,rd(n,null,"F")):this.vs(e,p,n,f)}))})))}ys(e,n,r,i){return jx(n)||i.isEqual(Ae.min())?te.resolve(null):this.gs.getDocuments(e,r).next(a=>{const l=this.bs(n,a);return this.Ds(n,l,r,i)?te.resolve(null):(ma()<=De.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ga(n)),this.vs(e,l,n,nO(i,Su)).next(h=>h))})}bs(e,n){let r=new kt(ZS(e));return n.forEach((i,a)=>{kd(e,a)&&(r=r.add(a))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ws(e,n,r){return ma()<=De.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",ga(n)),this.gs.getDocumentsMatchingQuery(e,n,oi.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(a=>(n.forEach(l=>{a=a.insert(l.key,l)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey="LocalStore",DL=3e8;class jL{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new at(ke),this.Ms=new go(a=>hy(a),dy),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EL(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function OL(t,e,n,r){return new jL(t,e,n,r)}async function Tb(t,e){const n=Ce(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],h=[];let f=je();for(const p of i){l.push(p.batchId);for(const g of p.mutations)f=f.add(g.key)}for(const p of a){h.push(p.batchId);for(const g of p.mutations)f=f.add(g.key)}return n.localDocuments.getDocuments(r,f).next(p=>({Bs:p,removedBatchIds:l,addedBatchIds:h}))})})}function LL(t,e){const n=Ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=n.Os.newChangeBuffer({trackRemovals:!0});return function(h,f,p,g){const w=p.batch,x=w.keys();let C=te.resolve();return x.forEach(D=>{C=C.next(()=>g.getEntry(f,D)).next(j=>{const R=p.docVersions.get(D);We(R!==null,48541),j.version.compareTo(R)<0&&(w.applyToRemoteDocument(j,p),j.isValidDocument()&&(j.setReadTime(p.commitVersion),g.addEntry(j)))})}),C.next(()=>h.mutationQueue.removeMutationBatch(f,w))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let f=je();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(f=f.add(h.batch.mutations[p].key));return f}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Eb(t){const e=Ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function ML(t,e){const n=Ce(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const h=[];e.targetChanges.forEach((g,w)=>{const x=i.get(w);if(!x)return;h.push(n.hi.removeMatchingKeys(a,g.removedDocuments,w).next(()=>n.hi.addMatchingKeys(a,g.addedDocuments,w)));let C=x.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?C=C.withResumeToken(Wt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):g.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(g.resumeToken,r)),i=i.insert(w,C),function(j,R,M){return j.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=DL?!0:M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0}(x,C,g)&&h.push(n.hi.updateTargetData(a,C))});let f=ps(),p=je();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(a,g))}),h.push(FL(a,l,e.documentUpdates).next(g=>{f=g.Ls,p=g.ks})),!r.isEqual(Ae.min())){const g=n.hi.getLastRemoteSnapshotVersion(a).next(w=>n.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(g)}return te.waitFor(h).next(()=>l.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,f,p)).next(()=>f)}).then(a=>(n.Fs=i,a))}function FL(t,e,n){let r=je(),i=je();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let l=ps();return n.forEach((h,f)=>{const p=a.get(h);f.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(h)),f.isNoDocument()&&f.version.isEqual(Ae.min())?(e.removeEntry(h,f.readTime),l=l.insert(h,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),l=l.insert(h,f)):de(Ey,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",f.version)}),{Ls:l,ks:i}})}function UL(t,e){const n=Ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ly),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $L(t,e){const n=Ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(a=>a?(i=a,te.resolve(i)):n.hi.allocateTargetId(r).next(l=>(i=new Qs(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function Jm(t,e,n){const r=Ce(t),i=r.Fs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!Ka(l))throw l;de(Ey,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function Gx(t,e,n){const r=Ce(t);let i=Ae.min(),a=je();return r.persistence.runTransaction("Execute query","readwrite",l=>function(f,p,g){const w=Ce(f),x=w.Ms.get(g);return x!==void 0?te.resolve(w.Fs.get(x)):w.hi.getTargetData(p,g)}(r,l,Dr(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(l,h.targetId).next(f=>{a=f})}).next(()=>r.Cs.getDocumentsMatchingQuery(l,e,n?i:Ae.min(),n?a:je())).next(h=>(BL(r,CO(e),h),{documents:h,qs:a})))}function BL(t,e,n){let r=t.xs.get(e)||Ae.min();n.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.xs.set(e,r)}class Qx{constructor(){this.activeTargetIds=DO()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zL{constructor(){this.Fo=new Qx,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Qx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="ConnectivityMonitor";class Yx{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){de(Xx,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){de(Xx,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _h=null;function Zm(){return _h===null?_h=function(){return 268435456+Math.round(2147483648*Math.random())}():_h++,"0x"+_h.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="RestConnection",WL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qL{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===ed?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,a){const l=Zm(),h=this.Go(e,n.toUriEncodedString());de(Qp,`Sending RPC '${e}' ${l}:`,h,r);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(f,i,a);const{host:p}=new URL(h),g=fi(p);return this.jo(e,h,f,r,g).then(w=>(de(Qp,`Received RPC '${e}' ${l}: `,w),w),w=>{throw ii(Qp,`RPC '${e}' ${l} failed with error: `,w,"url: ",h,"request:",r),w})}Jo(e,n,r,i,a,l){return this.Wo(e,n,r,i,a)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Wa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}Go(e,n){const r=WL[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class GL extends qL{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,a){const l=Zm();return new Promise((h,f)=>{const p=new bS;p.setWithCredentials(!0),p.listenOnce(IS.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Nh.NO_ERROR:const w=p.getResponseJson();de(Xt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(w)),h(w);break;case Nh.TIMEOUT:de(Xt,`RPC '${e}' ${l} timed out`),f(new ce(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Nh.HTTP_ERROR:const x=p.getStatus();if(de(Xt,`RPC '${e}' ${l} failed with status:`,x,"response text:",p.getResponseText()),x>0){let C=p.getResponseJson();Array.isArray(C)&&(C=C[0]);const D=C?.error;if(D&&D.status&&D.message){const j=function(M){const U=M.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(U)>=0?U:Z.UNKNOWN}(D.status);f(new ce(j,D.message))}else f(new ce(Z.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new ce(Z.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{c_:e,streamId:l,l_:p.getLastErrorCode(),h_:p.getLastError()})}}finally{de(Xt,`RPC '${e}' ${l} completed.`)}});const g=JSON.stringify(i);de(Xt,`RPC '${e}' ${l} sending request:`,i),p.send(n,"POST",g,r,15)})}P_(e,n,r){const i=Zm(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=RS(),h=CS(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.zo(f.initMessageHeaders,n,r),f.encodeInitMessageHeaders=!0;const g=a.join("");de(Xt,`Creating RPC '${e}' stream ${i}: ${g}`,f);const w=l.createWebChannel(g,f);this.T_(w);let x=!1,C=!1;const D=new KL({Ho:R=>{C?de(Xt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(x||(de(Xt,`Opening RPC '${e}' stream ${i} transport.`),w.open(),x=!0),de(Xt,`RPC '${e}' stream ${i} sending:`,R),w.send(R))},Yo:()=>w.close()}),j=(R,M,U)=>{R.listen(M,z=>{try{U(z)}catch(G){setTimeout(()=>{throw G},0)}})};return j(w,Xl.EventType.OPEN,()=>{C||(de(Xt,`RPC '${e}' stream ${i} transport opened.`),D.s_())}),j(w,Xl.EventType.CLOSE,()=>{C||(C=!0,de(Xt,`RPC '${e}' stream ${i} transport closed`),D.__(),this.I_(w))}),j(w,Xl.EventType.ERROR,R=>{C||(C=!0,ii(Xt,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),D.__(new ce(Z.UNAVAILABLE,"The operation could not be completed")))}),j(w,Xl.EventType.MESSAGE,R=>{var M;if(!C){const U=R.data[0];We(!!U,16349);const z=U,G=z?.error||((M=z[0])===null||M===void 0?void 0:M.error);if(G){de(Xt,`RPC '${e}' stream ${i} received error:`,G);const X=G.status;let J=function(A){const I=wt[A];if(I!==void 0)return cb(I)}(X),N=G.message;J===void 0&&(J=Z.INTERNAL,N="Unknown error status: "+X+" with message "+G.message),C=!0,D.__(new ce(J,N)),w.close()}else de(Xt,`RPC '${e}' stream ${i} received:`,U),D.a_(U)}}),j(h,AS.STAT_EVENT,R=>{R.stat===$m.PROXY?de(Xt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===$m.NOPROXY&&de(Xt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{D.o_()},0),D}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Xp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jd(t){return new JO(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&de("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx="PersistentStream";class bb{constructor(e,n,r,i,a,l,h,f){this.Fi=e,this.w_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Sb(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(fs(n.toString()),fs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new ce(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return de(Jx,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(de(Jx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class QL extends bb{constructor(e,n,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,l),this.serializer=a}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=tL(this.serializer,e),r=function(a){if(!("targetChange"in a))return Ae.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Ae.min():l.readTime?jr(l.readTime):Ae.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=Ym(this.serializer),n.addTarget=function(a,l){let h;const f=l.target;if(h=qm(f)?{documents:sL(a,f)}:{query:iL(a,f).Vt},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=fb(a,l.resumeToken);const p=Gm(a,l.expectedCount);p!==null&&(h.expectedCount=p)}else if(l.snapshotVersion.compareTo(Ae.min())>0){h.readTime=id(a,l.snapshotVersion.toTimestamp());const p=Gm(a,l.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const r=aL(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=Ym(this.serializer),n.removeTarget=e,this.k_(n)}}class XL extends bb{constructor(e,n,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,l),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=rL(e.writeResults,e.commitTime),r=jr(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=Ym(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>nL(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{}class JL extends YL{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new ce(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Wo(e,Qm(n,r),i,a,l)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ce(Z.UNKNOWN,a.toString())})}Jo(e,n,r,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Jo(e,Qm(n,r),i,l,h,a)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ce(Z.UNKNOWN,l.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class ZL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(fs(n),this._a=!1):de("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so="RemoteStore";class eM{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(l=>{r.enqueueAndForget(async()=>{yo(this)&&(de(so,"Restarting streams for network reachability change."),await async function(f){const p=Ce(f);p.Ia.add(4),await Wu(p),p.Aa.set("Unknown"),p.Ia.delete(4),await Od(p)}(this))})}),this.Aa=new ZL(r,i)}}async function Od(t){if(yo(t))for(const e of t.da)await e(!0)}async function Wu(t){for(const e of t.da)await e(!1)}function Ib(t,e){const n=Ce(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Ay(n)?Iy(n):Qa(n).x_()&&by(n,e))}function Sy(t,e){const n=Ce(t),r=Qa(n);n.Ta.delete(e),r.x_()&&Ab(n,e),n.Ta.size===0&&(r.x_()?r.B_():yo(n)&&n.Aa.set("Unknown"))}function by(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Qa(t).H_(e)}function Ab(t,e){t.Ra.$e(e),Qa(t).Y_(e)}function Iy(t){t.Ra=new GO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Qa(t).start(),t.Aa.aa()}function Ay(t){return yo(t)&&!Qa(t).M_()&&t.Ta.size>0}function yo(t){return Ce(t).Ia.size===0}function Cb(t){t.Ra=void 0}async function tM(t){t.Aa.set("Online")}async function nM(t){t.Ta.forEach((e,n)=>{by(t,e)})}async function rM(t,e){Cb(t),Ay(t)?(t.Aa.la(e),Iy(t)):t.Aa.set("Unknown")}async function sM(t,e,n){if(t.Aa.set("Online"),e instanceof db&&e.state===2&&e.cause)try{await async function(i,a){const l=a.cause;for(const h of a.targetIds)i.Ta.has(h)&&(await i.remoteSyncer.rejectListen(h,l),i.Ta.delete(h),i.Ra.removeTarget(h))}(t,e)}catch(r){de(so,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await ad(t,r)}else if(e instanceof Oh?t.Ra.Ye(e):e instanceof hb?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Ae.min()))try{const r=await Eb(t.localStore);n.compareTo(r)>=0&&await function(a,l){const h=a.Ra.Pt(l);return h.targetChanges.forEach((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const g=a.Ta.get(p);g&&a.Ta.set(p,g.withResumeToken(f.resumeToken,l))}}),h.targetMismatches.forEach((f,p)=>{const g=a.Ta.get(f);if(!g)return;a.Ta.set(f,g.withResumeToken(Wt.EMPTY_BYTE_STRING,g.snapshotVersion)),Ab(a,f);const w=new Qs(g.target,f,p,g.sequenceNumber);by(a,w)}),a.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(r){de(so,"Failed to raise snapshot:",r),await ad(t,r)}}async function ad(t,e,n){if(!Ka(e))throw e;t.Ia.add(1),await Wu(t),t.Aa.set("Offline"),n||(n=()=>Eb(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{de(so,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Od(t)})}function Rb(t,e){return e().catch(n=>ad(t,n,e))}async function Ld(t){const e=Ce(t),n=ci(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:ly;for(;iM(e);)try{const i=await UL(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,oM(e,i)}catch(i){await ad(e,i)}Pb(e)&&kb(e)}function iM(t){return yo(t)&&t.Pa.length<10}function oM(t,e){t.Pa.push(e);const n=ci(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function Pb(t){return yo(t)&&!ci(t).M_()&&t.Pa.length>0}function kb(t){ci(t).start()}async function aM(t){ci(t).na()}async function lM(t){const e=ci(t);for(const n of t.Pa)e.X_(n.mutations)}async function uM(t,e,n){const r=t.Pa.shift(),i=yy.from(r,e,n);await Rb(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Ld(t)}async function cM(t,e){e&&ci(t).Z_&&await async function(r,i){if(function(l){return qO(l)&&l!==Z.ABORTED}(i.code)){const a=r.Pa.shift();ci(r).N_(),await Rb(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await Ld(r)}}(t,e),Pb(t)&&kb(t)}async function Zx(t,e){const n=Ce(t);n.asyncQueue.verifyOperationInProgress(),de(so,"RemoteStore received new credentials");const r=yo(n);n.Ia.add(3),await Wu(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Od(n)}async function hM(t,e){const n=Ce(t);e?(n.Ia.delete(2),await Od(n)):e||(n.Ia.add(2),await Wu(n),n.Aa.set("Unknown"))}function Qa(t){return t.Va||(t.Va=function(n,r,i){const a=Ce(n);return a.ia(),new QL(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Zo:tM.bind(null,t),e_:nM.bind(null,t),n_:rM.bind(null,t),J_:sM.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Ay(t)?Iy(t):t.Aa.set("Unknown")):(await t.Va.stop(),Cb(t))})),t.Va}function ci(t){return t.ma||(t.ma=function(n,r,i){const a=Ce(n);return a.ia(),new XL(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:aM.bind(null,t),n_:cM.bind(null,t),ea:lM.bind(null,t),ta:uM.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Ld(t)):(await t.ma.stop(),t.Pa.length>0&&(de(so,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ei,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const l=Date.now()+r,h=new Cy(e,n,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ry(t,e){if(fs("AsyncQueue",`${e}: ${t}`),Ka(t))return new ce(Z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{static emptySet(e){return new Pa(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ve.comparator(n.key,r.key):(n,r)=>ve.comparator(n.key,r.key),this.keyedMap=Yl(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Pa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Pa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(){this.fa=new at(ve.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Te(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Fa{constructor(e,n,r,i,a,l,h,f,p){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,n,r,i,a){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new Fa(e,n,Pa.emptySet(n),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class fM{constructor(){this.queries=t1(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=Ce(n),a=i.queries;i.queries=t1(),a.forEach((l,h)=>{for(const f of h.wa)f.onError(r)})})(this,new ce(Z.ABORTED,"Firestore shutting down"))}}function t1(){return new go(t=>JS(t),Pd)}async function Nb(t,e){const n=Ce(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.Sa()&&e.ba()&&(r=2):(a=new dM,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await n.onListen(i,!0);break;case 1:a.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(l){const h=Ry(l,`Initialization of query '${ga(e.query)}' failed`);return void e.onError(h)}n.queries.set(i,a),a.wa.push(e),e.va(n.onlineState),a.ya&&e.Ca(a.ya)&&Py(n)}async function Vb(t,e){const n=Ce(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const l=a.wa.indexOf(e);l>=0&&(a.wa.splice(l,1),a.wa.length===0?i=e.ba()?0:1:!a.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function pM(t,e){const n=Ce(t);let r=!1;for(const i of e){const a=i.query,l=n.queries.get(a);if(l){for(const h of l.wa)h.Ca(i)&&(r=!0);l.ya=i}}r&&Py(n)}function mM(t,e,n){const r=Ce(t),i=r.queries.get(e);if(i)for(const a of i.wa)a.onError(n);r.queries.delete(e)}function Py(t){t.Da.forEach(e=>{e.next()})}var eg,n1;(n1=eg||(eg={})).Fa="default",n1.Cache="cache";class Db{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Fa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Fa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==eg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e){this.key=e}}class Ob{constructor(e){this.key=e}}class gM{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=je(),this.mutatedKeys=je(),this.Xa=ZS(e),this.eu=new Pa(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new e1,i=n?n.eu:this.eu;let a=n?n.mutatedKeys:this.mutatedKeys,l=i,h=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,w)=>{const x=i.get(g),C=kd(this.query,w)?w:null,D=!!x&&this.mutatedKeys.has(x.key),j=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let R=!1;x&&C?x.data.isEqual(C.data)?D!==j&&(r.track({type:3,doc:C}),R=!0):this.iu(x,C)||(r.track({type:2,doc:C}),R=!0,(f&&this.Xa(C,f)>0||p&&this.Xa(C,p)<0)&&(h=!0)):!x&&C?(r.track({type:0,doc:C}),R=!0):x&&!C&&(r.track({type:1,doc:x}),R=!0,(f||p)&&(h=!0)),R&&(C?(l=l.add(C),a=j?a.add(g):a.delete(g)):(l=l.delete(g),a=a.delete(g)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),a=a.delete(g.key),r.track({type:1,doc:g})}return{eu:l,ru:r,Ds:h,mutatedKeys:a}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const l=e.ru.pa();l.sort((g,w)=>function(C,D){const j=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{At:R})}};return j(C)-j(D)}(g.type,w.type)||this.Xa(g.doc,w.doc)),this.su(r),i=i!=null&&i;const h=n&&!i?this.ou():[],f=this.Za.size===0&&this.current&&!i?1:0,p=f!==this.Ya;return this.Ya=f,l.length!==0||p?{snapshot:new Fa(this.query,e.eu,a,l,e.mutatedKeys,f===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:h}:{_u:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new e1,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=je(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new Ob(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new jb(r))}),n}uu(e){this.Ha=e.qs,this.Za=je();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Fa.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const ky="SyncEngine";class yM{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class vM{constructor(e){this.key=e,this.lu=!1}}class _M{constructor(e,n,r,i,a,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.hu={},this.Pu=new go(h=>JS(h),Pd),this.Tu=new Map,this.Iu=new Set,this.du=new at(ve.comparator),this.Eu=new Map,this.Au=new wy,this.Ru={},this.Vu=new Map,this.mu=Ma.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function wM(t,e,n=!0){const r=Bb(t);let i;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.cu()):i=await Lb(r,e,n,!0),i}async function xM(t,e){const n=Bb(t);await Lb(n,e,!0,!1)}async function Lb(t,e,n,r){const i=await $L(t.localStore,Dr(e)),a=i.targetId,l=t.sharedClientState.addLocalQueryTarget(a,n);let h;return r&&(h=await TM(t,e,a,l==="current",i.resumeToken)),t.isPrimaryClient&&n&&Ib(t.remoteStore,i),h}async function TM(t,e,n,r,i){t.gu=(w,x,C)=>async function(j,R,M,U){let z=R.view.nu(M);z.Ds&&(z=await Gx(j.localStore,R.query,!1).then(({documents:N})=>R.view.nu(N,z)));const G=U&&U.targetChanges.get(R.targetId),X=U&&U.targetMismatches.get(R.targetId)!=null,J=R.view.applyChanges(z,j.isPrimaryClient,G,X);return s1(j,R.targetId,J._u),J.snapshot}(t,w,x,C);const a=await Gx(t.localStore,e,!0),l=new gM(e,a.qs),h=l.nu(a.documents),f=Hu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),p=l.applyChanges(h,t.isPrimaryClient,f);s1(t,n,p._u);const g=new yM(e,n,l);return t.Pu.set(e,g),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),p.snapshot}async function EM(t,e,n){const r=Ce(t),i=r.Pu.get(e),a=r.Tu.get(i.targetId);if(a.length>1)return r.Tu.set(i.targetId,a.filter(l=>!Pd(l,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Jm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Sy(r.remoteStore,i.targetId),tg(r,i.targetId)}).catch(qa)):(tg(r,i.targetId),await Jm(r.localStore,i.targetId,!0))}async function SM(t,e){const n=Ce(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Sy(n.remoteStore,r.targetId))}async function bM(t,e,n){const r=NM(t);try{const i=await function(l,h){const f=Ce(l),p=et.now(),g=h.reduce((C,D)=>C.add(D.key),je());let w,x;return f.persistence.runTransaction("Locally write mutations","readwrite",C=>{let D=ps(),j=je();return f.Os.getEntries(C,g).next(R=>{D=R,D.forEach((M,U)=>{U.isValidDocument()||(j=j.add(M))})}).next(()=>f.localDocuments.getOverlayedDocuments(C,D)).next(R=>{w=R;const M=[];for(const U of h){const z=$O(U,w.get(U.key).overlayedDocument);z!=null&&M.push(new mi(U.key,z,HS(z.value.mapValue),hr.exists(!0)))}return f.mutationQueue.addMutationBatch(C,p,M,h)}).next(R=>{x=R;const M=R.applyToLocalDocumentSet(w,j);return f.documentOverlayCache.saveOverlays(C,R.batchId,M)})}).then(()=>({batchId:x.batchId,changes:tb(w)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,h,f){let p=l.Ru[l.currentUser.toKey()];p||(p=new at(ke)),p=p.insert(h,f),l.Ru[l.currentUser.toKey()]=p}(r,i.batchId,n),await qu(r,i.changes),await Ld(r.remoteStore)}catch(i){const a=Ry(i,"Failed to persist write");n.reject(a)}}async function Mb(t,e){const n=Ce(t);try{const r=await ML(n.localStore,e);e.targetChanges.forEach((i,a)=>{const l=n.Eu.get(a);l&&(We(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.lu=!0:i.modifiedDocuments.size>0?We(l.lu,14607):i.removedDocuments.size>0&&(We(l.lu,42227),l.lu=!1))}),await qu(n,r,e)}catch(r){await qa(r)}}function r1(t,e,n){const r=Ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((a,l)=>{const h=l.view.va(e);h.snapshot&&i.push(h.snapshot)}),function(l,h){const f=Ce(l);f.onlineState=h;let p=!1;f.queries.forEach((g,w)=>{for(const x of w.wa)x.va(h)&&(p=!0)}),p&&Py(f)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function IM(t,e,n){const r=Ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),a=i&&i.key;if(a){let l=new at(ve.comparator);l=l.insert(a,Jt.newNoDocument(a,Ae.min()));const h=je().add(a),f=new Dd(Ae.min(),new Map,new at(ke),l,h);await Mb(r,f),r.du=r.du.remove(a),r.Eu.delete(e),Ny(r)}else await Jm(r.localStore,e,!1).then(()=>tg(r,e,n)).catch(qa)}async function AM(t,e){const n=Ce(t),r=e.batch.batchId;try{const i=await LL(n.localStore,e);Ub(n,r,null),Fb(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await qu(n,i)}catch(i){await qa(i)}}async function CM(t,e,n){const r=Ce(t);try{const i=await function(l,h){const f=Ce(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let g;return f.mutationQueue.lookupMutationBatch(p,h).next(w=>(We(w!==null,37113),g=w.keys(),f.mutationQueue.removeMutationBatch(p,w))).next(()=>f.mutationQueue.performConsistencyCheck(p)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(p,g,h)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,g)).next(()=>f.localDocuments.getDocuments(p,g))})}(r.localStore,e);Ub(r,e,n),Fb(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await qu(r,i)}catch(i){await qa(i)}}function Fb(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function Ub(t,e,n){const r=Ce(t);let i=r.Ru[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function tg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||$b(t,r)})}function $b(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Sy(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Ny(t))}function s1(t,e,n){for(const r of n)r instanceof jb?(t.Au.addReference(r.key,e),RM(t,r)):r instanceof Ob?(de(ky,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||$b(t,r.key)):Te(19791,{yu:r})}function RM(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(de(ky,"New document in limbo: "+n),t.Iu.add(r),Ny(t))}function Ny(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new ve(Ye.fromString(e)),r=t.mu.next();t.Eu.set(r,new vM(n)),t.du=t.du.insert(n,r),Ib(t.remoteStore,new Qs(Dr(fy(n.path)),r,"TargetPurposeLimboResolution",Ad.ue))}}async function qu(t,e,n){const r=Ce(t),i=[],a=[],l=[];r.Pu.isEmpty()||(r.Pu.forEach((h,f)=>{l.push(r.gu(f,e,n).then(p=>{var g;if((p||n)&&r.isPrimaryClient){const w=p?!p.fromCache:(g=n?.targetChanges.get(f.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(f.targetId,w?"current":"not-current")}if(p){i.push(p);const w=Ty.Es(f.targetId,p);a.push(w)}}))}),await Promise.all(l),r.hu.J_(i),await async function(f,p){const g=Ce(f);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>te.forEach(p,x=>te.forEach(x.Is,C=>g.persistence.referenceDelegate.addReference(w,x.targetId,C)).next(()=>te.forEach(x.ds,C=>g.persistence.referenceDelegate.removeReference(w,x.targetId,C)))))}catch(w){if(!Ka(w))throw w;de(Ey,"Failed to update sequence numbers: "+w)}for(const w of p){const x=w.targetId;if(!w.fromCache){const C=g.Fs.get(x),D=C.snapshotVersion,j=C.withLastLimboFreeSnapshotVersion(D);g.Fs=g.Fs.insert(x,j)}}}(r.localStore,a))}async function PM(t,e){const n=Ce(t);if(!n.currentUser.isEqual(e)){de(ky,"User change. New user:",e.toKey());const r=await Tb(n.localStore,e);n.currentUser=e,function(a,l){a.Vu.forEach(h=>{h.forEach(f=>{f.reject(new ce(Z.CANCELLED,l))})}),a.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await qu(n,r.Bs)}}function kM(t,e){const n=Ce(t),r=n.Eu.get(e);if(r&&r.lu)return je().add(r.key);{let i=je();const a=n.Tu.get(e);if(!a)return i;for(const l of a){const h=n.Pu.get(l);i=i.unionWith(h.view.tu)}return i}}function Bb(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Mb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=IM.bind(null,e),e.hu.J_=pM.bind(null,e.eventManager),e.hu.pu=mM.bind(null,e.eventManager),e}function NM(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=AM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CM.bind(null,e),e}class ld{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return OL(this.persistence,new VL,e.initialUser,this.serializer)}Du(e){return new xb(xy.Vi,this.serializer)}bu(e){return new zL}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ld.provider={build:()=>new ld};class VM extends ld{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){We(this.persistence.referenceDelegate instanceof od,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new vL(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?yn.withCacheSize(this.cacheSizeBytes):yn.DEFAULT;return new xb(r=>od.Vi(r,n),this.serializer)}}class ng{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>r1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=PM.bind(null,this.syncEngine),await hM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new fM}()}createDatastore(e){const n=jd(e.databaseInfo.databaseId),r=function(a){return new GL(a)}(e.databaseInfo);return function(a,l,h,f){return new JL(a,l,h,f)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,a,l,h){return new eM(r,i,a,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>r1(this.syncEngine,n,0),function(){return Yx.C()?new Yx:new HL}())}createSyncEngine(e,n){return function(i,a,l,h,f,p,g){const w=new _M(i,a,l,h,f,p);return g&&(w.fu=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const a=Ce(i);de(so,"RemoteStore shutting down."),a.Ia.add(5),await Wu(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ng.provider={build:()=>new ng};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):fs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi="FirestoreClient";class DM{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Yt.UNAUTHENTICATED,this.clientId=ay.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async l=>{de(hi,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(de(hi,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ei;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ry(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Yp(t,e){t.asyncQueue.verifyOperationInProgress(),de(hi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Tb(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{ii("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{de("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{ii("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function i1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await jM(t);de(hi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Zx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Zx(e.remoteStore,i)),t._onlineComponents=e}async function jM(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){de(hi,"Using user provided OfflineComponentProvider");try{await Yp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Z.FAILED_PRECONDITION||i.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ii("Error using user provided cache. Falling back to memory cache: "+n),await Yp(t,new ld)}}else de(hi,"Using default OfflineComponentProvider"),await Yp(t,new VM(void 0));return t._offlineComponents}async function Hb(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(de(hi,"Using user provided OnlineComponentProvider"),await i1(t,t._uninitializedComponentsProvider._online)):(de(hi,"Using default OnlineComponentProvider"),await i1(t,new ng))),t._onlineComponents}function OM(t){return Hb(t).then(e=>e.syncEngine)}async function rg(t){const e=await Hb(t),n=e.eventManager;return n.onListen=wM.bind(null,e.syncEngine),n.onUnlisten=EM.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=xM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=SM.bind(null,e.syncEngine),n}function LM(t,e,n={}){const r=new ei;return t.asyncQueue.enqueueAndForget(async()=>function(a,l,h,f,p){const g=new zb({next:x=>{g.Ou(),l.enqueueAndForget(()=>Vb(a,w)),x.fromCache&&f.source==="server"?p.reject(new ce(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(x)},error:x=>p.reject(x)}),w=new Db(h,g,{includeMetadataChanges:!0,ka:!0});return Nb(a,w)}(await rg(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb="firestore.googleapis.com",a1=!0;class l1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ce(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qb,this.ssl=a1}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:a1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gL)throw new ce(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Wb((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ce(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ce(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ce(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Md{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new qj;switch(r.type){case"firstParty":return new Xj(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ce(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=o1.get(n);r&&(de("ComponentProvider","Removing Datastore"),o1.delete(n),r.terminate())}(this),Promise.resolve()}}function MM(t,e,n,r={}){var i;t=Vr(t,Md);const a=fi(e),l=t._getSettings(),h=Object.assign(Object.assign({},l),{emulatorOptions:t._getEmulatorOptions()}),f=`${e}:${n}`;a&&(Gg(`https://${f}`),Qg("Firestore",!0)),l.host!==qb&&l.host!==f&&ii("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},l),{host:f,ssl:a,emulatorOptions:r});if(!us(p,h)&&(t._setSettings(p),r.mockUserToken)){let g,w;if(typeof r.mockUserToken=="string")g=r.mockUserToken,w=Yt.MOCK_USER;else{g=OE(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const x=r.mockUserToken.sub||r.mockUserToken.user_id;if(!x)throw new ce(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Yt(x)}t._authCredentials=new Kj(new kS(g,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ms(this.firestore,e,this._query)}}class St{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ti(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new St(this.firestore,e,this._key)}toJSON(){return{type:St._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Bu(n,St._jsonSchema))return new St(e,r||null,new ve(Ye.fromString(n.referencePath)))}}St._jsonSchemaVersion="firestore/documentReference/1.0",St._jsonSchema={type:Et("string",St._jsonSchemaVersion),referencePath:Et("string")};class ti extends ms{constructor(e,n,r){super(e,n,fy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new St(this.firestore,null,new ve(e))}withConverter(e){return new ti(this.firestore,e,this._path)}}function fa(t,e,...n){if(t=ct(t),VS("collection","path",e),t instanceof Md){const r=Ye.fromString(e,...n);return xx(r),new ti(t,null,r)}{if(!(t instanceof St||t instanceof ti))throw new ce(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ye.fromString(e,...n));return xx(r),new ti(t.firestore,null,r)}}function _a(t,e,...n){if(t=ct(t),arguments.length===1&&(e=ay.newId()),VS("doc","path",e),t instanceof Md){const r=Ye.fromString(e,...n);return wx(r),new St(t,null,new ve(r))}{if(!(t instanceof St||t instanceof ti))throw new ce(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ye.fromString(e,...n));return wx(r),new St(t.firestore,t instanceof ti?t.converter:null,new ve(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1="AsyncQueue";class c1{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Sb(this,"async_queue_retry"),this.oc=()=>{const r=Xp();r&&de(u1,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Xp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Xp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new ei;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Ka(e))throw e;de(u1,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,fs("INTERNAL UNHANDLED ERROR: ",h1(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=Cy.createAndSchedule(this,e,n,r,a=>this.lc(a));return this.ec.push(i),i}ac(){this.tc&&Te(47125,{hc:h1(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function h1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class io extends Md{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new c1,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new c1(e),this._firestoreClient=void 0,await e}}}function FM(t,e){const n=typeof t=="object"?t:xd(),r=typeof t=="string"?t:ed,i=po(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=VE("firestore");a&&MM(i,...a)}return i}function Vy(t){if(t._terminated)throw new ce(Z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||UM(t),t._firestoreClient}function UM(t){var e,n,r;const i=t._freezeSettings(),a=function(h,f,p,g){return new dO(h,f,p,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,Wb(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new DM(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(h){const f=h?._online.build();return{_offline:h?._offline.build(f),_online:f}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zn(Wt.fromBase64String(e))}catch(n){throw new ce(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zn(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Bu(e,zn._jsonSchema))return zn.fromBase64String(e.bytes)}}zn._jsonSchemaVersion="firestore/bytes/1.0",zn._jsonSchema={type:Et("string",zn._jsonSchemaVersion),bytes:Et("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ce(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ce(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ce(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Or._jsonSchemaVersion}}static fromJSON(e){if(Bu(e,Or._jsonSchema))return new Or(e.latitude,e.longitude)}}Or._jsonSchemaVersion="firestore/geoPoint/1.0",Or._jsonSchema={type:Et("string",Or._jsonSchemaVersion),latitude:Et("number"),longitude:Et("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Lr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Bu(e,Lr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Lr(e.vectorValues);throw new ce(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Lr._jsonSchemaVersion="firestore/vectorValue/1.0",Lr._jsonSchema={type:Et("string",Lr._jsonSchemaVersion),vectorValues:Et("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M=/^__.*__$/;class BM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new mi(e,this.data,this.fieldMask,n,this.fieldTransforms):new zu(e,this.data,n,this.fieldTransforms)}}class Kb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new mi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Gb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ec:t})}}class Ud{constructor(e,n,r,i,a,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Ud(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return ud(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(Gb(this.Ec)&&$M.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class zM{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||jd(e)}Dc(e,n,r,i=!1){return new Ud({Ec:e,methodName:n,bc:r,path:Ht.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Dy(t){const e=t._freezeSettings(),n=jd(t._databaseId);return new zM(t._databaseId,!!e.ignoreUndefinedProperties,n)}function HM(t,e,n,r,i,a={}){const l=t.Dc(a.merge||a.mergeFields?2:0,e,n,i);My("Data must be an object, but it was:",l,r);const h=Xb(r,l);let f,p;if(a.merge)f=new Cn(l.fieldMask),p=l.fieldTransforms;else if(a.mergeFields){const g=[];for(const w of a.mergeFields){const x=sg(e,w,n);if(!l.contains(x))throw new ce(Z.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);Jb(g,x)||g.push(x)}f=new Cn(g),p=l.fieldTransforms.filter(w=>f.covers(w.field))}else f=null,p=l.fieldTransforms;return new BM(new vn(h),f,p)}class $d extends Xa{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $d}}function Qb(t,e,n){return new Ud({Ec:3,bc:e.settings.bc,methodName:t._methodName,mc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class jy extends Xa{_toFieldTransform(e){return new my(e.path,new Ru)}isEqual(e){return e instanceof jy}}class Oy extends Xa{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=Qb(this,e,!0),r=this.vc.map(a=>vo(a,n)),i=new Oa(r);return new my(e.path,i)}isEqual(e){return e instanceof Oy&&us(this.vc,e.vc)}}class Ly extends Xa{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=Qb(this,e,!0),r=this.vc.map(a=>vo(a,n)),i=new La(r);return new my(e.path,i)}isEqual(e){return e instanceof Ly&&us(this.vc,e.vc)}}function WM(t,e,n,r){const i=t.Dc(1,e,n);My("Data must be an object, but it was:",i,r);const a=[],l=vn.empty();pi(r,(f,p)=>{const g=Fy(e,f,n);p=ct(p);const w=i.gc(g);if(p instanceof $d)a.push(g);else{const x=vo(p,w);x!=null&&(a.push(g),l.set(g,x))}});const h=new Cn(a);return new Kb(l,h,i.fieldTransforms)}function qM(t,e,n,r,i,a){const l=t.Dc(1,e,n),h=[sg(e,r,n)],f=[i];if(a.length%2!=0)throw new ce(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)h.push(sg(e,a[x])),f.push(a[x+1]);const p=[],g=vn.empty();for(let x=h.length-1;x>=0;--x)if(!Jb(p,h[x])){const C=h[x];let D=f[x];D=ct(D);const j=l.gc(C);if(D instanceof $d)p.push(C);else{const R=vo(D,j);R!=null&&(p.push(C),g.set(C,R))}}const w=new Cn(p);return new Kb(g,w,l.fieldTransforms)}function KM(t,e,n,r=!1){return vo(n,t.Dc(r?4:3,e))}function vo(t,e){if(Yb(t=ct(t)))return My("Unsupported field value:",e,t),Xb(t,e);if(t instanceof Xa)return function(r,i){if(!Gb(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const a=[];let l=0;for(const h of r){let f=vo(h,i.yc(l));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),l++}return{arrayValue:{values:a}}}(t,e)}return function(r,i){if((r=ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jO(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=et.fromDate(r);return{timestampValue:id(i.serializer,a)}}if(r instanceof et){const a=new et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:id(i.serializer,a)}}if(r instanceof Or)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zn)return{bytesValue:fb(i.serializer,r._byteString)};if(r instanceof St){const a=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw i.wc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:_y(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Lr)return function(l,h){return{mapValue:{fields:{[BS]:{stringValue:zS},[td]:{arrayValue:{values:l.toArray().map(p=>{if(typeof p!="number")throw h.wc("VectorValues must only contain numeric values.");return py(h.serializer,p)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${Id(r)}`)}(t,e)}function Xb(t,e){const n={};return OS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pi(t,(r,i)=>{const a=vo(i,e.Vc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function Yb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof et||t instanceof Or||t instanceof zn||t instanceof St||t instanceof Xa||t instanceof Lr)}function My(t,e,n){if(!Yb(n)||!DS(n)){const r=Id(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function sg(t,e,n){if((e=ct(e))instanceof Fd)return e._internalPath;if(typeof e=="string")return Fy(t,e);throw ud("Field path arguments must be of type string or ",t,!1,void 0,n)}const GM=new RegExp("[~\\*/\\[\\]]");function Fy(t,e,n){if(e.search(GM)>=0)throw ud(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Fd(...e.split("."))._internalPath}catch{throw ud(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ud(t,e,n,r,i){const a=r&&!r.isEmpty(),l=i!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||l)&&(f+=" (found",a&&(f+=` in field ${r}`),l&&(f+=` in document ${i}`),f+=")"),new ce(Z.INVALID_ARGUMENT,h+t+f)}function Jb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zb{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new St(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Bd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class QM extends Zb{data(){return super.data()}}function Bd(t,e){return typeof e=="string"?Fy(t,e):e instanceof Fd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ce(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Uy{}class $y extends Uy{}function Jp(t,e,...n){let r=[];e instanceof Uy&&r.push(e),r=r.concat(n),function(a){const l=a.filter(f=>f instanceof By).length,h=a.filter(f=>f instanceof zd).length;if(l>1||l>0&&h>0)throw new ce(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class zd extends $y{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new zd(e,n,r)}_apply(e){const n=this._parse(e);return tI(e._query,n),new ms(e.firestore,e.converter,Km(e._query,n))}_parse(e){const n=Dy(e.firestore);return function(a,l,h,f,p,g,w){let x;if(p.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ce(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){m1(w,g);const D=[];for(const j of w)D.push(p1(f,a,j));x={arrayValue:{values:D}}}else x=p1(f,a,w)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||m1(w,g),x=KM(h,l,w,g==="in"||g==="not-in");return Tt.create(p,g,x)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Zp(t,e,n){const r=e,i=Bd("where",t);return zd._create(i,r,n)}class By extends Uy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new By(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:fr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,a){let l=i;const h=a.getFlattenedFilters();for(const f of h)tI(l,f),l=Km(l,f)}(e._query,n),new ms(e.firestore,e.converter,Km(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class zy extends $y{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new zy(e,n)}_apply(e){const n=function(i,a,l){if(i.startAt!==null)throw new ce(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ce(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Cu(a,l)}(e._query,this._field,this._direction);return new ms(e.firestore,e.converter,function(i,a){const l=i.explicitOrderBy.concat([a]);return new Ga(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function f1(t,e="asc"){const n=e,r=Bd("orderBy",t);return zy._create(r,n)}class Hy extends $y{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Hy(e,n,r)}_apply(e){return new ms(e.firestore,e.converter,rd(e._query,this._limit,this._limitType))}}function XM(t){return Hy._create("limit",t,"F")}function p1(t,e,n){if(typeof(n=ct(n))=="string"){if(n==="")throw new ce(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!YS(e)&&n.indexOf("/")!==-1)throw new ce(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ye.fromString(n));if(!ve.isDocumentKey(r))throw new ce(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Rx(t,new ve(r))}if(n instanceof St)return Rx(t,n._key);throw new ce(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Id(n)}.`)}function m1(t,e){if(!Array.isArray(t)||t.length===0)throw new ce(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function tI(t,e){const n=function(i,a){for(const l of i)for(const h of l.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ce(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class YM{convertValue(e,n="none"){switch(ui(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(li(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return pi(e,(i,a)=>{r[i]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,i;const a=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[td].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(l=>gt(l.doubleValue));return new Lr(a)}convertGeoPoint(e){return new Or(gt(e.latitude),gt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Rd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(bu(e));default:return null}}convertTimestamp(e){const n=ai(e);return new et(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ye.fromString(e);We(_b(r),9688,{name:e});const i=new Iu(r.get(1),r.get(3)),a=new ve(r.popFirst(5));return i.isEqual(n)||fs(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JM(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Zl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zi extends Zb{constructor(e,n,r,i,a,l){super(e,n,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Lh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Bd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Zi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Zi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zi._jsonSchema={type:Et("string",Zi._jsonSchemaVersion),bundleSource:Et("string","DocumentSnapshot"),bundleName:Et("string"),bundle:Et("string")};class Lh extends Zi{data(e={}){return super.data(e)}}class eo{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Zl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Lh(this._firestore,this._userDataWriter,r.key,r,new Zl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(h=>{const f=new Lh(i._firestore,i._userDataWriter,h.doc.key,h.doc,new Zl(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}})}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(h=>a||h.type!==3).map(h=>{const f=new Lh(i._firestore,i._userDataWriter,h.doc.key,h.doc,new Zl(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,g=-1;return h.type!==0&&(p=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),g=l.indexOf(h.doc.key)),{type:ZM(h.type),doc:f,oldIndex:p,newIndex:g}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=eo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ay.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ZM(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:t})}}eo._jsonSchemaVersion="firestore/querySnapshot/1.0",eo._jsonSchema={type:Et("string",eo._jsonSchemaVersion),bundleSource:Et("string","QuerySnapshot"),bundleName:Et("string"),bundle:Et("string")};class Wy extends YM{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new St(this.firestore,null,n)}}function e3(t){t=Vr(t,ms);const e=Vr(t.firestore,io),n=Vy(e),r=new Wy(e);return eI(t._query),LM(n,t._query).then(i=>new eo(e,r,t,i))}function wh(t,e,n,...r){t=Vr(t,St);const i=Vr(t.firestore,io),a=Dy(i);let l;return l=typeof(e=ct(e))=="string"||e instanceof Fd?qM(a,"updateDoc",t._key,e,n,r):WM(a,"updateDoc",t._key,e),qy(i,[l.toMutation(t._key,hr.exists(!0))])}function t3(t){return qy(Vr(t.firestore,io),[new gy(t._key,hr.none())])}function em(t,e){const n=Vr(t.firestore,io),r=_a(t),i=JM(t.converter,e);return qy(n,[HM(Dy(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,hr.exists(!1))]).then(()=>r)}function g1(t,...e){var n,r,i;t=ct(t);let a={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||d1(e[l])||(a=e[l++]);const h={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(d1(e[l])){const w=e[l];e[l]=(n=w.next)===null||n===void 0?void 0:n.bind(w),e[l+1]=(r=w.error)===null||r===void 0?void 0:r.bind(w),e[l+2]=(i=w.complete)===null||i===void 0?void 0:i.bind(w)}let f,p,g;if(t instanceof St)p=Vr(t.firestore,io),g=fy(t._key.path),f={next:w=>{e[l]&&e[l](n3(p,t,w))},error:e[l+1],complete:e[l+2]};else{const w=Vr(t,ms);p=Vr(w.firestore,io),g=w._query;const x=new Wy(p);f={next:C=>{e[l]&&e[l](new eo(p,x,w,C))},error:e[l+1],complete:e[l+2]},eI(t._query)}return function(x,C,D,j){const R=new zb(j),M=new Db(C,R,D);return x.asyncQueue.enqueueAndForget(async()=>Nb(await rg(x),M)),()=>{R.Ou(),x.asyncQueue.enqueueAndForget(async()=>Vb(await rg(x),M))}}(Vy(p),g,h,f)}function qy(t,e){return function(r,i){const a=new ei;return r.asyncQueue.enqueueAndForget(async()=>bM(await OM(r),i,a)),a.promise}(Vy(t),e)}function n3(t,e,n){const r=n.docs.get(e._key),i=new Wy(t);return new Zi(t,i,e._key,r,new Zl(n.hasPendingWrites,n.fromCache),e.converter)}function pa(){return new jy("serverTimestamp")}function r3(...t){return new Oy("arrayUnion",t)}function s3(...t){return new Ly("arrayRemove",t)}(function(e,n=!0){(function(i){Wa=i})(mo),dr(new qn("firestore",(r,{instanceIdentifier:i,options:a})=>{const l=r.getProvider("app").getImmediate(),h=new io(new Gj(r.getProvider("auth-internal")),new Yj(l,r.getProvider("app-check-internal")),function(p,g){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ce(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Iu(p.options.projectId,g)}(l,i),l);return a=Object.assign({useFetchStreams:n},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),wn(mx,gx,e),wn(mx,gx,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="firebasestorage.googleapis.com",rI="storageBucket",i3=2*60*1e3,o3=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt extends pr{constructor(e,n,r=0){super(tm(e),`Firebase Storage: ${n} (${tm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,dt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return tm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ht;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ht||(ht={}));function tm(t){return"storage/"+t}function Ky(){const t="An unknown error occurred, please check the error payload for server response.";return new dt(ht.UNKNOWN,t)}function a3(t){return new dt(ht.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function l3(t){return new dt(ht.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function u3(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new dt(ht.UNAUTHENTICATED,t)}function c3(){return new dt(ht.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function h3(t){return new dt(ht.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function d3(){return new dt(ht.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function f3(){return new dt(ht.CANCELED,"User canceled the upload/download.")}function p3(t){return new dt(ht.INVALID_URL,"Invalid URL '"+t+"'.")}function m3(t){return new dt(ht.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function g3(){return new dt(ht.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+rI+"' property when initializing the app?")}function y3(){return new dt(ht.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function v3(){return new dt(ht.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function _3(t){return new dt(ht.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ig(t){return new dt(ht.INVALID_ARGUMENT,t)}function sI(){return new dt(ht.APP_DELETED,"The Firebase app was deleted.")}function w3(t){return new dt(ht.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function du(t,e){return new dt(ht.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Gl(t){throw new dt(ht.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Rn.makeFromUrl(e,n)}catch{return new Rn(e,"")}if(r.path==="")return r;throw m3(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(G){G.path.charAt(G.path.length-1)==="/"&&(G.path_=G.path_.slice(0,-1))}const l="(/(.*))?$",h=new RegExp("^gs://"+i+l,"i"),f={bucket:1,path:3};function p(G){G.path_=decodeURIComponent(G.path)}const g="v[A-Za-z0-9_]+",w=n.replace(/[.]/g,"\\."),x="(/([^?#]*).*)?$",C=new RegExp(`^https?://${w}/${g}/b/${i}/o${x}`,"i"),D={bucket:1,path:3},j=n===nI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,R="([^?#]*)",M=new RegExp(`^https?://${j}/${i}/${R}`,"i"),z=[{regex:h,indices:f,postModify:a},{regex:C,indices:D,postModify:p},{regex:M,indices:{bucket:1,path:2},postModify:p}];for(let G=0;G<z.length;G++){const X=z[G],J=X.regex.exec(e);if(J){const N=J[X.indices.bucket];let b=J[X.indices.path];b||(b=""),r=new Rn(N,b),X.postModify(r);break}}if(r==null)throw p3(e);return r}}class x3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T3(t,e,n){let r=1,i=null,a=null,l=!1,h=0;function f(){return h===2}let p=!1;function g(...R){p||(p=!0,e.apply(null,R))}function w(R){i=setTimeout(()=>{i=null,t(C,f())},R)}function x(){a&&clearTimeout(a)}function C(R,...M){if(p){x();return}if(R){x(),g.call(null,R,...M);return}if(f()||l){x(),g.call(null,R,...M);return}r<64&&(r*=2);let z;h===1?(h=2,z=0):z=(r+Math.random())*1e3,w(z)}let D=!1;function j(R){D||(D=!0,x(),!p&&(i!==null?(R||(h=2),clearTimeout(i),w(0)):R||(h=1)))}return w(0),a=setTimeout(()=>{l=!0,j(!0)},n),j}function E3(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S3(t){return t!==void 0}function b3(t){return typeof t=="object"&&!Array.isArray(t)}function Gy(t){return typeof t=="string"||t instanceof String}function y1(t){return Qy()&&t instanceof Blob}function Qy(){return typeof Blob<"u"}function v1(t,e,n,r){if(r<e)throw ig(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw ig(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function iI(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var to;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(to||(to={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I3(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e,n,r,i,a,l,h,f,p,g,w,x=!0,C=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=f,this.timeout_=p,this.progressCallback_=g,this.connectionFactory_=w,this.retry=x,this.isUsingEmulator=C,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((D,j)=>{this.resolve_=D,this.reject_=j,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new xh(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const l=h=>{const f=h.loaded,p=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,p)};this.progressCallback_!==null&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const h=a.getErrorCode()===to.NO_ERROR,f=a.getStatus();if(!h||I3(f,this.additionalRetryCodes_)&&this.retry){const g=a.getErrorCode()===to.ABORT;r(!1,new xh(!1,null,g));return}const p=this.successCodes_.indexOf(f)!==-1;r(!0,new xh(p,a))})},n=(r,i)=>{const a=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(h,h.getResponse());S3(f)?a(f):a()}catch(f){l(f)}else if(h!==null){const f=Ky();f.serverResponse=h.getErrorText(),this.errorCallback_?l(this.errorCallback_(h,f)):l(f)}else if(i.canceled){const f=this.appDelete_?sI():f3();l(f)}else{const f=d3();l(f)}};this.canceled_?n(!1,new xh(!1,null,!0)):this.backoffId_=T3(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&E3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class xh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function C3(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function R3(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function P3(t,e){e&&(t["X-Firebase-GMPID"]=e)}function k3(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function N3(t,e,n,r,i,a,l=!0,h=!1){const f=iI(t.urlParams),p=t.url+f,g=Object.assign({},t.headers);return P3(g,e),C3(g,n),R3(g,a),k3(g,r),new A3(p,t.method,g,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,l,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V3(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function D3(...t){const e=V3();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Qy())return new Blob(t);throw new dt(ht.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function j3(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O3(t){if(typeof atob>"u")throw _3("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class nm{constructor(e,n){this.data=e,this.contentType=n||null}}function L3(t,e){switch(t){case Ar.RAW:return new nm(oI(e));case Ar.BASE64:case Ar.BASE64URL:return new nm(aI(t,e));case Ar.DATA_URL:return new nm(F3(e),U3(e))}throw Ky()}function oI(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,l=t.charCodeAt(++n);r=65536|(a&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function M3(t){let e;try{e=decodeURIComponent(t)}catch{throw du(Ar.DATA_URL,"Malformed data URL.")}return oI(e)}function aI(t,e){switch(t){case Ar.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw du(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Ar.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw du(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=O3(e)}catch(i){throw i.message.includes("polyfill")?i:du(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class lI{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw du(Ar.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=$3(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function F3(t){const e=new lI(t);return e.base64?aI(Ar.BASE64,e.rest):M3(e.rest)}function U3(t){return new lI(t).contentType}function $3(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,n){let r=0,i="";y1(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(y1(this.data_)){const r=this.data_,i=j3(r,e,n);return i===null?null:new Ks(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ks(r,!0)}}static getBlob(...e){if(Qy()){const n=e.map(r=>r instanceof Ks?r.data_:r);return new Ks(D3.apply(null,n))}else{const n=e.map(l=>Gy(l)?L3(Ar.RAW,l).data:l.data_);let r=0;n.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return n.forEach(l=>{for(let h=0;h<l.length;h++)i[a++]=l[h]}),new Ks(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uI(t){let e;try{e=JSON.parse(t)}catch{return null}return b3(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B3(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function z3(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function cI(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H3(t,e){return e}class on{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||H3}}let Th=null;function W3(t){return!Gy(t)||t.length<2?t:cI(t)}function hI(){if(Th)return Th;const t=[];t.push(new on("bucket")),t.push(new on("generation")),t.push(new on("metageneration")),t.push(new on("name","fullPath",!0));function e(a,l){return W3(l)}const n=new on("name");n.xform=e,t.push(n);function r(a,l){return l!==void 0?Number(l):l}const i=new on("size");return i.xform=r,t.push(i),t.push(new on("timeCreated")),t.push(new on("updated")),t.push(new on("md5Hash",null,!0)),t.push(new on("cacheControl",null,!0)),t.push(new on("contentDisposition",null,!0)),t.push(new on("contentEncoding",null,!0)),t.push(new on("contentLanguage",null,!0)),t.push(new on("contentType",null,!0)),t.push(new on("metadata","customMetadata",!0)),Th=t,Th}function q3(t,e){function n(){const r=t.bucket,i=t.fullPath,a=new Rn(r,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function K3(t,e,n){const r={};r.type="file";const i=n.length;for(let a=0;a<i;a++){const l=n[a];r[l.local]=l.xform(r,e[l.server])}return q3(r,t),r}function dI(t,e,n){const r=uI(e);return r===null?null:K3(t,r,n)}function G3(t,e,n,r){const i=uI(e);if(i===null||!Gy(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const l=encodeURIComponent;return a.split(",").map(p=>{const g=t.bucket,w=t.fullPath,x="/b/"+l(g)+"/o/"+l(w),C=Xy(x,n,r),D=iI({alt:"media",token:p});return C+D})[0]}function Q3(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class fI{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(t){if(!t)throw Ky()}function X3(t,e){function n(r,i){const a=dI(t,i,e);return pI(a!==null),a}return n}function Y3(t,e){function n(r,i){const a=dI(t,i,e);return pI(a!==null),G3(a,i,t.host,t._protocol)}return n}function mI(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=c3():i=u3():n.getStatus()===402?i=l3(t.bucket):n.getStatus()===403?i=h3(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function J3(t){const e=mI(t);function n(r,i){let a=e(r,i);return r.getStatus()===404&&(a=a3(t.path)),a.serverResponse=i.serverResponse,a}return n}function Z3(t,e,n){const r=e.fullServerUrl(),i=Xy(r,t.host,t._protocol),a="GET",l=t.maxOperationRetryTime,h=new fI(i,a,Y3(t,n),l);return h.errorHandler=J3(e),h}function e6(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function t6(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=e6(null,e)),r}function n6(t,e,n,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function h(){let z="";for(let G=0;G<2;G++)z=z+Math.random().toString().slice(2);return z}const f=h();l["Content-Type"]="multipart/related; boundary="+f;const p=t6(e,r,i),g=Q3(p,n),w="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+f+`\r
Content-Type: `+p.contentType+`\r
\r
`,x=`\r
--`+f+"--",C=Ks.getBlob(w,r,x);if(C===null)throw y3();const D={name:p.fullPath},j=Xy(a,t.host,t._protocol),R="POST",M=t.maxUploadRetryTime,U=new fI(j,R,X3(t,n),M);return U.urlParams=D,U.headers=l,U.body=C.uploadData(),U.errorHandler=mI(e),U}class r6{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=to.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=to.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=to.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,a){if(this.sent_)throw Gl("cannot .send() more than once");if(fi(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const l in a)a.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,a[l].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Gl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Gl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Gl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Gl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class s6 extends r6{initXhr(){this.xhr_.responseType="text"}}function gI(){return new s6}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,n){this._service=e,n instanceof Rn?this._location=n:this._location=Rn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new oo(e,n)}get root(){const e=new Rn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return cI(this._location.path)}get storage(){return this._service}get parent(){const e=B3(this._location.path);if(e===null)return null;const n=new Rn(this._location.bucket,e);return new oo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw w3(e)}}function i6(t,e,n){t._throwIfRoot("uploadBytes");const r=n6(t.storage,t._location,hI(),new Ks(e,!0),n);return t.storage.makeRequestWithTokens(r,gI).then(i=>({metadata:i,ref:t}))}function o6(t){t._throwIfRoot("getDownloadURL");const e=Z3(t.storage,t._location,hI());return t.storage.makeRequestWithTokens(e,gI).then(n=>{if(n===null)throw v3();return n})}function a6(t,e){const n=z3(t._location.path,e),r=new Rn(t._location.bucket,n);return new oo(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l6(t){return/^[A-Za-z]+:\/\//.test(t)}function u6(t,e){return new oo(t,e)}function yI(t,e){if(t instanceof Yy){const n=t;if(n._bucket==null)throw g3();const r=new oo(n,n._bucket);return e!=null?yI(r,e):r}else return e!==void 0?a6(t,e):t}function c6(t,e){if(e&&l6(e)){if(t instanceof Yy)return u6(t,e);throw ig("To use ref(service, url), the first argument must be a Storage instance.")}else return yI(t,e)}function _1(t,e){const n=e?.[rI];return n==null?null:Rn.makeFromBucketSpec(n,t)}function h6(t,e,n,r={}){t.host=`${e}:${n}`;const i=fi(e);i&&(Gg(`https://${t.host}/b`),Qg("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(t._overrideAuthToken=typeof a=="string"?a:OE(a,t.app.options.projectId))}class Yy{constructor(e,n,r,i,a,l=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=l,this._bucket=null,this._host=nI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=i3,this._maxUploadRetryTime=o3,this._requests=new Set,i!=null?this._bucket=Rn.makeFromBucketSpec(i,this._host):this._bucket=_1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Rn.makeFromBucketSpec(this._url,e):this._bucket=_1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){v1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){v1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Bn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new oo(this,e)}_makeRequest(e,n,r,i,a=!0){if(this._deleted)return new x3(sI());{const l=N3(e,this._appId,r,i,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const w1="@firebase/storage",x1="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI="storage";function T1(t,e,n){return t=ct(t),i6(t,e,n)}function E1(t){return t=ct(t),o6(t)}function S1(t,e){return t=ct(t),c6(t,e)}function d6(t=xd(),e){t=ct(t);const r=po(t,vI).getImmediate({identifier:e}),i=VE("storage");return i&&f6(r,...i),r}function f6(t,e,n,r={}){h6(t,e,n,r)}function p6(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Yy(n,r,i,e,mo)}function m6(){dr(new qn(vI,p6,"PUBLIC").setMultipleInstances(!0)),wn(w1,x1,""),wn(w1,x1,"esm2017")}m6();const _I="@firebase/installations",Jy="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=1e4,xI=`w:${Jy}`,TI="FIS_v2",g6="https://firebaseinstallations.googleapis.com/v1",y6=60*60*1e3,v6="installations",_6="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w6={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ao=new fo(v6,_6,w6);function EI(t){return t instanceof pr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI({projectId:t}){return`${g6}/projects/${t}/installations`}function bI(t){return{token:t.token,requestStatus:2,expiresIn:T6(t.expiresIn),creationTime:Date.now()}}async function II(t,e){const r=(await e.json()).error;return ao.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function AI({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function x6(t,{refreshToken:e}){const n=AI(t);return n.append("Authorization",E6(e)),n}async function CI(t){const e=await t();return e.status>=500&&e.status<600?t():e}function T6(t){return Number(t.replace("s","000"))}function E6(t){return`${TI} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S6({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=SI(t),i=AI(t),a=e.getImmediate({optional:!0});if(a){const p=await a.getHeartbeatsHeader();p&&i.append("x-firebase-client",p)}const l={fid:n,authVersion:TI,appId:t.appId,sdkVersion:xI},h={method:"POST",headers:i,body:JSON.stringify(l)},f=await CI(()=>fetch(r,h));if(f.ok){const p=await f.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:bI(p.authToken)}}else throw await II("Create Installation",f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b6(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6=/^[cdef][\w-]{21}$/,og="";function A6(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=C6(t);return I6.test(n)?n:og}catch{return og}}function C6(t){return b6(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=new Map;function kI(t,e){const n=Hd(t);NI(n,e),R6(n,e)}function NI(t,e){const n=PI.get(t);if(n)for(const r of n)r(e)}function R6(t,e){const n=P6();n&&n.postMessage({key:t,fid:e}),k6()}let Xi=null;function P6(){return!Xi&&"BroadcastChannel"in self&&(Xi=new BroadcastChannel("[Firebase] FID Change"),Xi.onmessage=t=>{NI(t.data.key,t.data.fid)}),Xi}function k6(){PI.size===0&&Xi&&(Xi.close(),Xi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N6="firebase-installations-database",V6=1,lo="firebase-installations-store";let rm=null;function Zy(){return rm||(rm=wd(N6,V6,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(lo)}}})),rm}async function cd(t,e){const n=Hd(t),i=(await Zy()).transaction(lo,"readwrite"),a=i.objectStore(lo),l=await a.get(n);return await a.put(e,n),await i.done,(!l||l.fid!==e.fid)&&kI(t,e.fid),e}async function VI(t){const e=Hd(t),r=(await Zy()).transaction(lo,"readwrite");await r.objectStore(lo).delete(e),await r.done}async function Wd(t,e){const n=Hd(t),i=(await Zy()).transaction(lo,"readwrite"),a=i.objectStore(lo),l=await a.get(n),h=e(l);return h===void 0?await a.delete(n):await a.put(h,n),await i.done,h&&(!l||l.fid!==h.fid)&&kI(t,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e0(t){let e;const n=await Wd(t.appConfig,r=>{const i=D6(r),a=j6(t,i);return e=a.registrationPromise,a.installationEntry});return n.fid===og?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function D6(t){const e=t||{fid:A6(),registrationStatus:0};return DI(e)}function j6(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(ao.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=O6(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:L6(t)}:{installationEntry:e}}async function O6(t,e){try{const n=await S6(t,e);return cd(t.appConfig,n)}catch(n){throw EI(n)&&n.customData.serverCode===409?await VI(t.appConfig):await cd(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function L6(t){let e=await b1(t.appConfig);for(;e.registrationStatus===1;)await RI(100),e=await b1(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await e0(t);return r||n}return e}function b1(t){return Wd(t,e=>{if(!e)throw ao.create("installation-not-found");return DI(e)})}function DI(t){return M6(t)?{fid:t.fid,registrationStatus:0}:t}function M6(t){return t.registrationStatus===1&&t.registrationTime+wI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F6({appConfig:t,heartbeatServiceProvider:e},n){const r=U6(t,n),i=x6(t,n),a=e.getImmediate({optional:!0});if(a){const p=await a.getHeartbeatsHeader();p&&i.append("x-firebase-client",p)}const l={installation:{sdkVersion:xI,appId:t.appId}},h={method:"POST",headers:i,body:JSON.stringify(l)},f=await CI(()=>fetch(r,h));if(f.ok){const p=await f.json();return bI(p)}else throw await II("Generate Auth Token",f)}function U6(t,{fid:e}){return`${SI(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t0(t,e=!1){let n;const r=await Wd(t.appConfig,a=>{if(!jI(a))throw ao.create("not-registered");const l=a.authToken;if(!e&&z6(l))return a;if(l.requestStatus===1)return n=$6(t,e),a;{if(!navigator.onLine)throw ao.create("app-offline");const h=W6(a);return n=B6(t,h),h}});return n?await n:r.authToken}async function $6(t,e){let n=await I1(t.appConfig);for(;n.authToken.requestStatus===1;)await RI(100),n=await I1(t.appConfig);const r=n.authToken;return r.requestStatus===0?t0(t,e):r}function I1(t){return Wd(t,e=>{if(!jI(e))throw ao.create("not-registered");const n=e.authToken;return q6(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function B6(t,e){try{const n=await F6(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await cd(t.appConfig,r),n}catch(n){if(EI(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await VI(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await cd(t.appConfig,r)}throw n}}function jI(t){return t!==void 0&&t.registrationStatus===2}function z6(t){return t.requestStatus===2&&!H6(t)}function H6(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+y6}function W6(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function q6(t){return t.requestStatus===1&&t.requestTime+wI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K6(t){const e=t,{installationEntry:n,registrationPromise:r}=await e0(e);return r?r.catch(console.error):t0(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G6(t,e=!1){const n=t;return await Q6(n),(await t0(n,e)).token}async function Q6(t){const{registrationPromise:e}=await e0(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X6(t){if(!t||!t.options)throw sm("App Configuration");if(!t.name)throw sm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw sm(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function sm(t){return ao.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI="installations",Y6="installations-internal",J6=t=>{const e=t.getProvider("app").getImmediate(),n=X6(e),r=po(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Z6=t=>{const e=t.getProvider("app").getImmediate(),n=po(e,OI).getImmediate();return{getId:()=>K6(n),getToken:i=>G6(n,i)}};function e5(){dr(new qn(OI,J6,"PUBLIC")),dr(new qn(Y6,Z6,"PRIVATE"))}e5();wn(_I,Jy);wn(_I,Jy,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t5="/firebase-messaging-sw.js",n5="/firebase-cloud-messaging-push-scope",LI="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",r5="https://fcmregistrations.googleapis.com/v1",MI="google.c.a.c_id",s5="google.c.a.c_l",i5="google.c.a.ts",o5="google.c.a.e",A1=1e4;var C1;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(C1||(C1={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Pu;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Pu||(Pu={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function a5(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let a=0;a<r.length;++a)i[a]=r.charCodeAt(a);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im="fcm_token_details_db",l5=5,R1="fcm_token_object_Store";async function u5(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(a=>a.name).includes(im))return null;let e=null;return(await wd(im,l5,{upgrade:async(r,i,a,l)=>{var h;if(i<2||!r.objectStoreNames.contains(R1))return;const f=l.objectStore(R1),p=await f.index("fcmSenderId").get(t);if(await f.clear(),!!p){if(i===2){const g=p;if(!g.auth||!g.p256dh||!g.endpoint)return;e={token:g.fcmToken,createTime:(h=g.createTime)!==null&&h!==void 0?h:Date.now(),subscriptionOptions:{auth:g.auth,p256dh:g.p256dh,endpoint:g.endpoint,swScope:g.swScope,vapidKey:typeof g.vapidKey=="string"?g.vapidKey:rs(g.vapidKey)}}}else if(i===3){const g=p;e={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:rs(g.auth),p256dh:rs(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:rs(g.vapidKey)}}}else if(i===4){const g=p;e={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:rs(g.auth),p256dh:rs(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:rs(g.vapidKey)}}}}}})).close(),await zp(im),await zp("fcm_vapid_details_db"),await zp("undefined"),c5(e)?e:null}function c5(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5="firebase-messaging-database",d5=1,ku="firebase-messaging-store";let om=null;function FI(){return om||(om=wd(h5,d5,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ku)}}})),om}async function f5(t){const e=UI(t),r=await(await FI()).transaction(ku).objectStore(ku).get(e);if(r)return r;{const i=await u5(t.appConfig.senderId);if(i)return await n0(t,i),i}}async function n0(t,e){const n=UI(t),i=(await FI()).transaction(ku,"readwrite");return await i.objectStore(ku).put(e,n),await i.done,e}function UI({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},ln=new fo("messaging","Messaging",p5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m5(t,e){const n=await s0(t),r=$I(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let a;try{a=await(await fetch(r0(t.appConfig),i)).json()}catch(l){throw ln.create("token-subscribe-failed",{errorInfo:l?.toString()})}if(a.error){const l=a.error.message;throw ln.create("token-subscribe-failed",{errorInfo:l})}if(!a.token)throw ln.create("token-subscribe-no-token");return a.token}async function g5(t,e){const n=await s0(t),r=$I(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let a;try{a=await(await fetch(`${r0(t.appConfig)}/${e.token}`,i)).json()}catch(l){throw ln.create("token-update-failed",{errorInfo:l?.toString()})}if(a.error){const l=a.error.message;throw ln.create("token-update-failed",{errorInfo:l})}if(!a.token)throw ln.create("token-update-no-token");return a.token}async function y5(t,e){const r={method:"DELETE",headers:await s0(t)};try{const a=await(await fetch(`${r0(t.appConfig)}/${e}`,r)).json();if(a.error){const l=a.error.message;throw ln.create("token-unsubscribe-failed",{errorInfo:l})}}catch(i){throw ln.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}}function r0({projectId:t}){return`${r5}/projects/${t}/registrations`}async function s0({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function $I({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==LI&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v5=7*24*60*60*1e3;async function _5(t){const e=await x5(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:rs(e.getKey("auth")),p256dh:rs(e.getKey("p256dh"))},r=await f5(t.firebaseDependencies);if(r){if(T5(r.subscriptionOptions,n))return Date.now()>=r.createTime+v5?w5(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await y5(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return P1(t.firebaseDependencies,n)}else return P1(t.firebaseDependencies,n)}async function w5(t,e){try{const n=await g5(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await n0(t.firebaseDependencies,r),n}catch(n){throw n}}async function P1(t,e){const r={token:await m5(t,e),createTime:Date.now(),subscriptionOptions:e};return await n0(t,r),r.token}async function x5(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:a5(e)})}function T5(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,a=e.p256dh===t.p256dh;return n&&r&&i&&a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return E5(e,t),S5(e,t),b5(e,t),e}function E5(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const a=e.notification.icon;a&&(t.notification.icon=a)}function S5(t,e){e.data&&(t.data=e.data)}function b5(t,e){var n,r,i,a,l;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const h=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(a=e.notification)===null||a===void 0?void 0:a.click_action;h&&(t.fcmOptions.link=h);const f=(l=e.fcmOptions)===null||l===void 0?void 0:l.analytics_label;f&&(t.fcmOptions.analyticsLabel=f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(t){return typeof t=="object"&&!!t&&MI in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A5(t){if(!t||!t.options)throw am("App Configuration Object");if(!t.name)throw am("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw am(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function am(t){return ln.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C5{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=A5(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R5(t){try{t.swRegistration=await navigator.serviceWorker.register(t5,{scope:n5}),t.swRegistration.update().catch(()=>{}),await P5(t.swRegistration)}catch(e){throw ln.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}}async function P5(t){return new Promise((e,n)=>{const r=setTimeout(()=>n(new Error(`Service worker not registered after ${A1} ms`)),A1),i=t.installing||t.waiting;t.active?(clearTimeout(r),e()):i?i.onstatechange=a=>{var l;((l=a.target)===null||l===void 0?void 0:l.state)==="activated"&&(i.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k5(t,e){if(!e&&!t.swRegistration&&await R5(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw ln.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N5(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=LI)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V5(t,e){if(!navigator)throw ln.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw ln.create("permission-blocked");return await N5(t,e?.vapidKey),await k5(t,e?.serviceWorkerRegistration),_5(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D5(t,e,n){const r=j5(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[MI],message_name:n[s5],message_time:n[i5],message_device_time:Math.floor(Date.now()/1e3)})}function j5(t){switch(t){case Pu.NOTIFICATION_CLICKED:return"notification_open";case Pu.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O5(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Pu.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(k1(n)):t.onMessageHandler.next(k1(n)));const r=n.data;I5(r)&&r[o5]==="1"&&await D5(t,n.messageType,r)}const N1="@firebase/messaging",V1="0.12.22";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L5=t=>{const e=new C5(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>O5(e,n)),e},M5=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>V5(e,r)}};function F5(){dr(new qn("messaging",L5,"PUBLIC")),dr(new qn("messaging-internal",M5,"PRIVATE")),wn(N1,V1),wn(N1,V1,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U5(){try{await ME()}catch{return!1}return typeof window<"u"&&LE()&&bV()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $5(t=xd()){return U5().then(e=>{if(!e)throw ln.create("unsupported-browser")},e=>{throw ln.create("indexed-db-unsupported")}),po(ct(t),"messaging").getImmediate()}F5();const B5={apiKey:"AIzaSyAg6e-YJd_REGhrPXEzwT6ZUwnecftgRsk",authDomain:"smartfarm-tz-2bb43.firebaseapp.com",projectId:"smartfarm-tz-2bb43",storageBucket:"smartfarm-tz-2bb43.firebasestorage.app",messagingSenderId:"862661138380",appId:"1:862661138380:web:6ca80933812837bc36af69",measurementId:"G-ZWL4ZZCJ7G"},qd=$E(B5),lr=FM(qd),ag=Mj(qd),D1=d6(qd);let z5=null;try{z5=$5(qd)}catch(t){console.log("Firebase messaging not supported in this environment:",t)}/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),W5=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),j1=t=>{const e=W5(t);return e.charAt(0).toUpperCase()+e.slice(1)},BI=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),q5=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var K5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=O.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:l,...h},f)=>O.createElement("svg",{ref:f,...K5,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:BI("lucide",i),...!a&&!q5(h)&&{"aria-hidden":"true"},...h},[...l.map(([p,g])=>O.createElement(p,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=(t,e)=>{const n=O.forwardRef(({className:r,...i},a)=>O.createElement(G5,{ref:a,iconNode:e,className:BI(`lucide-${H5(j1(t))}`,`lucide-${t}`,r),...i}));return n.displayName=j1(t),n};/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],X5=Re("archive",Q5);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]],J5=Re("at-sign",Y5);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],O1=Re("bell",Z5);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],tF=Re("camera",eF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],rF=Re("check-check",nF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],iF=Re("check",sF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],aF=Re("clock",oF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],uF=Re("cloud-rain",lF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],hF=Re("cloud",cF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],fF=Re("download",dF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],mF=Re("ellipsis-vertical",pF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gF=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],zI=Re("ellipsis",gF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],L1=Re("file",yF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],_F=Re("hash",vF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],xF=Re("image",wF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],EF=Re("info",TF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],bF=Re("loader",SF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Nu=Re("map-pin",IF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],CF=Re("menu",AF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RF=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],Mh=Re("message-circle",RF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],kF=Re("message-square",PF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],VF=Re("mic",NF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],M1=Re("moon",DF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],OF=Re("navigation",jF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],HI=Re("paperclip",LF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],FF=Re("pause",MF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],WI=Re("phone",UF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],lm=Re("pin",$F);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],zF=Re("play",BF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HF=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],qI=Re("plus",HF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],qF=Re("refresh-cw",WF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KF=[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]],eu=Re("reply",KF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GF=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ua=Re("search",GF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QF=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],KI=Re("send",QF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],hd=Re("smile",XF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],JF=Re("square",YF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],um=Re("sun",ZF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e9=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],t9=Re("trash-2",e9);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n9=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],GI=Re("user-plus",n9);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r9=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],lg=Re("users",r9);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s9=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],QI=Re("video",s9);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i9=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],o9=Re("volume-2",i9);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a9=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],l9=Re("volume-x",a9);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u9=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],dd=Re("x",u9);function c9({chats:t,selectedChat:e,onSelectChat:n,isDarkMode:r}){const[i,a]=O.useState(!1),[l,h]=O.useState(""),p=[{id:1,name:"John Mwalimu",type:"farmer",location:"Dodoma",distance:"2.3 km",avatar:null,online:!0},{id:2,name:"Grace Market",type:"buyer",location:"Dar es Salaam",distance:"15 km",avatar:null,online:!1},{id:3,name:"AgriTransport Ltd",type:"transporter",location:"Arusha",distance:"8.5 km",avatar:null,online:!0},{id:4,name:"FarmSupply Co",type:"service",location:"Mwanza",distance:"5.2 km",avatar:null,online:!0}].filter(x=>x.name.toLowerCase().includes(l.toLowerCase())||x.type.toLowerCase().includes(l.toLowerCase())),g=x=>{switch(x){case"farmer":return"text-green-500";case"buyer":return"text-blue-500";case"business":return"text-purple-500";default:return"text-gray-500"}},w=x=>{switch(x){case"farmer":return"";case"buyer":return"";case"business":return"";case"transporter":return"";case"service":return"";default:return""}};return y.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"h-full flex flex-col",children:[y.jsx("div",{className:"p-4",children:y.jsxs("div",{className:`relative ${r?"bg-slate-700/50":"bg-white/50"} backdrop-blur-sm rounded-lg`,children:[y.jsx("input",{type:"text",placeholder:"Search conversations...",className:`w-full px-4 py-2 bg-transparent ${r?"text-white placeholder-slate-400":"text-slate-800 placeholder-slate-500"} focus:outline-none`}),y.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:y.jsx("svg",{className:`h-4 w-4 ${r?"text-slate-400":"text-slate-500"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),y.jsx("div",{className:"flex-1 overflow-y-auto",children:y.jsx("div",{className:"space-y-1 px-2",children:t.map(x=>y.jsxs(ae.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n(x),className:`relative p-3 rounded-xl cursor-pointer transition-all duration-200 ${e?.id===x.id?`${r?"bg-blue-600/30 border-blue-500/50":"bg-green-600/20 border-green-500/50"} border backdrop-blur-lg`:`${r?"hover:bg-slate-700/30":"hover:bg-white/30"} backdrop-blur-sm`}`,children:[x.unread>0&&y.jsx(ae.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium z-10",children:x.unread}),y.jsxs("div",{className:"flex items-center space-x-3",children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:`w-12 h-12 rounded-full ${r?"bg-slate-600":"bg-gray-300"} flex items-center justify-center text-2xl overflow-hidden`,children:x.avatar?y.jsx("img",{src:x.avatar,alt:x.name,className:"w-full h-full object-cover"}):y.jsx("span",{children:w(x.type)})}),y.jsx(ae.div,{initial:{scale:0},animate:{scale:1},className:`absolute -bottom-0.5 -right-0.5 w-4 h-4 rounded-full border-2 ${r?"border-slate-800":"border-white"} ${x.online?"bg-green-500":"bg-gray-400"}`})]}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx("h3",{className:`font-semibold truncate ${r?"text-white":"text-slate-800"}`,children:x.name}),y.jsx("span",{className:`text-xs ${g(x.type)}`,children:w(x.type)})]}),y.jsx("span",{className:`text-xs ${r?"text-slate-400":"text-slate-500"}`,children:x.time})]}),y.jsx("div",{className:"flex items-center justify-between mt-1",children:y.jsx("p",{className:`text-sm truncate ${r?"text-slate-300":"text-slate-600"}`,children:x.lastMessage})}),y.jsxs("div",{className:"flex items-center mt-1 space-x-4",children:[y.jsxs("span",{className:`text-xs ${r?"text-slate-400":"text-slate-500"}`,children:[" ",x.location]}),y.jsxs("span",{className:`text-xs ${r?"text-slate-400":"text-slate-500"}`,children:[" ",x.distance]})]})]})]}),y.jsxs(ae.div,{initial:{opacity:0,x:20},whileHover:{opacity:1,x:0},className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex space-x-1",children:[y.jsx(ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:`p-1.5 rounded-lg ${r?"bg-slate-700/50 text-slate-300":"bg-white/50 text-slate-600"} backdrop-blur-sm opacity-0 group-hover:opacity-100 transition-opacity`,children:y.jsx(WI,{size:12})}),y.jsx(ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:`p-1.5 rounded-lg ${r?"bg-slate-700/50 text-slate-300":"bg-white/50 text-slate-600"} backdrop-blur-sm opacity-0 group-hover:opacity-100 transition-opacity`,children:y.jsx(QI,{size:12})})]})]},x.id))})}),y.jsx("div",{className:"p-4",children:y.jsxs(ae.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>a(!0),className:`w-full p-3 rounded-xl ${r?"bg-blue-600/30 border border-blue-500/50 text-blue-300":"bg-green-600/20 border border-green-500/50 text-green-700"} backdrop-blur-lg font-medium transition-all duration-200 hover:shadow-lg flex items-center justify-center space-x-2`,children:[y.jsx(qI,{size:18}),y.jsx("span",{children:"Start New Conversation"})]})}),y.jsx(Hn,{children:i&&y.jsx(ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>a(!1),children:y.jsxs(ae.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:x=>x.stopPropagation(),className:`w-full max-w-md ${r?"bg-slate-800":"bg-white"} rounded-2xl p-6 shadow-2xl`,children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsx("h3",{className:`text-xl font-bold ${r?"text-white":"text-slate-800"}`,children:"Start New Conversation"}),y.jsx("button",{onClick:()=>a(!1),className:`p-2 rounded-lg ${r?"hover:bg-slate-700":"hover:bg-gray-100"}`,children:y.jsx(dd,{size:20,className:r?"text-slate-400":"text-slate-600"})})]}),y.jsxs("div",{className:`relative mb-4 ${r?"bg-slate-700":"bg-gray-100"} rounded-lg`,children:[y.jsx("input",{type:"text",placeholder:"Search users...",value:l,onChange:x=>h(x.target.value),className:`w-full px-4 py-3 bg-transparent ${r?"text-white placeholder-slate-400":"text-slate-800 placeholder-slate-500"} focus:outline-none`}),y.jsx(Ua,{className:`absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 ${r?"text-slate-400":"text-slate-500"}`})]}),y.jsx("div",{className:"max-h-60 overflow-y-auto",children:p.length>0?p.map(x=>y.jsxs(ae.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{n({id:x.id,name:x.name,type:x.type,location:x.location,distance:x.distance,online:x.online,avatar:x.avatar,lastMessage:"Start a conversation...",time:"now",unread:0}),a(!1),h("")},className:`flex items-center space-x-3 p-3 rounded-lg cursor-pointer transition-all duration-200 ${r?"hover:bg-slate-700":"hover:bg-gray-50"}`,children:[y.jsx("div",{className:`w-12 h-12 rounded-full ${r?"bg-slate-600":"bg-gray-300"} flex items-center justify-center text-2xl`,children:w(x.type)}),y.jsxs("div",{className:"flex-1",children:[y.jsx("h4",{className:`font-semibold ${r?"text-white":"text-slate-800"}`,children:x.name}),y.jsxs("p",{className:`text-sm ${r?"text-slate-400":"text-slate-600"}`,children:[x.type.charAt(0).toUpperCase()+x.type.slice(1),"  ",x.location]})]}),y.jsx("div",{className:`w-3 h-3 rounded-full ${x.online?"bg-green-500":"bg-gray-400"}`})]},x.id)):y.jsx("div",{className:"text-center py-8",children:y.jsx("p",{className:`text-lg font-medium ${r?"text-slate-300":"text-slate-600"}`,children:"No farmer, buyer, transporter or any service provider yet"})})})]})})})]})}function h9({chat:t,isDarkMode:e,weatherMood:n,WeatherIcon:r}){const[i,a]=O.useState(!1),[l,h]=O.useState(!1),f=()=>t.online?"text-green-500":"text-gray-400",p=()=>{switch(n){case"sunny":return"text-yellow-500";case"cloudy":return"text-gray-400";case"rainy":return"text-blue-500";default:return"text-gray-400"}};return y.jsxs(ae.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},className:`px-6 py-4 ${e?"bg-slate-800/30":"bg-white/30"} backdrop-blur-lg border-b ${e?"border-slate-700/50":"border-white/30"} flex items-center justify-between`,children:[y.jsxs("div",{className:"flex items-center space-x-4",children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:`w-12 h-12 rounded-full ${e?"bg-slate-600":"bg-gray-300"} flex items-center justify-center text-2xl overflow-hidden border-2 ${e?"border-slate-700":"border-white/50"}`,children:t.avatar?y.jsx("img",{src:t.avatar,alt:t.name,className:"w-full h-full object-cover"}):y.jsx("span",{children:""})}),y.jsx(ae.div,{initial:{scale:0},animate:{scale:1},className:`absolute -bottom-0.5 -right-0.5 w-4 h-4 rounded-full border-2 ${e?"border-slate-800":"border-white"} ${t.online?"bg-green-500":"bg-gray-400"}`})]}),y.jsxs("div",{className:"flex-1",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx("h2",{className:`text-lg font-semibold ${e?"text-white":"text-slate-800"}`,children:t.name}),y.jsx(ae.div,{animate:{scale:[1,1.1,1],rotate:n==="sunny"?[0,5,-5,0]:0},transition:{duration:2,repeat:1/0},className:p(),children:y.jsx(r,{size:16})})]}),y.jsxs("div",{className:"flex items-center space-x-4",children:[y.jsx("p",{className:`text-sm ${f()}`,children:t.online?"Online":"Last seen 2 hours ago"}),t.location&&y.jsxs("p",{className:`text-sm ${e?"text-slate-400":"text-slate-500"}`,children:[" ",t.location]}),t.type&&y.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${t.type==="farmer"?"bg-green-100 text-green-700":t.type==="buyer"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:t.type})]})]})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:`p-2 rounded-lg ${e?"hover:bg-slate-700/50":"hover:bg-white/50"} transition-colors duration-200`,children:y.jsx(Ua,{size:18,className:e?"text-slate-300":"text-slate-600"})}),y.jsx(ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:`p-2 rounded-lg ${e?"hover:bg-slate-700/50":"hover:bg-white/50"} transition-colors duration-200`,children:y.jsx(WI,{size:18,className:e?"text-slate-300":"text-slate-600"})}),y.jsx(ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:`p-2 rounded-lg ${e?"hover:bg-slate-700/50":"hover:bg-white/50"} transition-colors duration-200`,children:y.jsx(QI,{size:18,className:e?"text-slate-300":"text-slate-600"})}),y.jsxs("div",{className:"relative",children:[y.jsx(ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>a(!i),className:`p-2 rounded-lg ${e?"hover:bg-slate-700/50":"hover:bg-white/50"} transition-colors duration-200`,children:y.jsx(zI,{size:18,className:e?"text-slate-300":"text-slate-600"})}),i&&y.jsx(ae.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},className:`absolute right-0 top-full mt-2 w-48 ${e?"bg-slate-800/90":"bg-white/90"} backdrop-blur-lg rounded-xl border ${e?"border-slate-700/50":"border-white/30"} shadow-xl z-50`,children:y.jsx("div",{className:"py-2",children:[{icon:EF,label:"View Profile",color:"text-blue-500"},{icon:GI,label:"Add to Contacts",color:"text-green-500"},{icon:l?o9:l9,label:l?"Unmute":"Mute",color:"text-yellow-500"},{icon:X5,label:"Archive Chat",color:"text-gray-500"},{icon:t9,label:"Delete Chat",color:"text-red-500"}].map((g,w)=>y.jsxs(ae.button,{whileHover:{x:4},onClick:()=>{g.label.includes("Mute")&&h(!l),a(!1)},className:`w-full flex items-center space-x-3 px-4 py-2 text-left ${e?"hover:bg-slate-700/50 text-slate-300":"hover:bg-gray-100/50 text-slate-700"} transition-colors duration-200`,children:[y.jsx(g.icon,{size:16,className:g.color}),y.jsx("span",{className:"text-sm",children:g.label})]},w))})})]})]}),i&&y.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)})]})}function d9({messages:t,isDarkMode:e,isGroup:n=!1}){const r=O.useRef(null),[i,a]=O.useState(null),[l,h]=O.useState(null),[f,p]=O.useState(null),g=()=>{r.current?.scrollIntoView({behavior:"smooth"})};O.useEffect(()=>{g()},[t]);const w=U=>new Date(U).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),x=U=>{const z=new Date,G=new Date(U),X=z-G,J=Math.ceil(X/(1e3*60*60*24));return J===1?"Today":J===2?"Yesterday":J<=7?G.toLocaleDateString("en-US",{weekday:"long"}):G.toLocaleDateString("en-US",{month:"short",day:"numeric"})},C=U=>{switch(U){case"sent":return y.jsx(aF,{size:12,className:"text-gray-400"});case"delivered":return y.jsx(iF,{size:12,className:"text-gray-400"});case"seen":return y.jsx(rF,{size:12,className:"text-blue-500"});default:return null}},D=()=>["","","","","","","",""],j=(U,z)=>{h(null)},R=({message:U,isOwn:z})=>{const G=z?`${e?"bg-gradient-to-r from-blue-600 to-blue-700 text-white":"bg-gradient-to-r from-green-500 to-green-600 text-white"} rounded-t-2xl rounded-bl-2xl rounded-br-md`:`${e?"bg-slate-700/70 text-slate-100":"bg-white/70 text-slate-800"} rounded-t-2xl rounded-br-2xl rounded-bl-md border ${e?"border-slate-600/50":"border-white/50"}`;return y.jsxs(ae.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.3},className:`max-w-xs lg:max-w-md px-4 py-3 ${G} backdrop-blur-md shadow-lg relative group`,onContextMenu:X=>{X.preventDefault(),a(U.id)},children:[n&&!z&&y.jsx("p",{className:`text-xs font-medium mb-1 ${e?"text-slate-300":"text-slate-600"}`,children:U.senderName}),y.jsxs("div",{className:"space-y-2",children:[U.type==="text"&&y.jsx("p",{className:"text-sm leading-relaxed break-words",children:U.text}),U.type==="image"&&y.jsxs("div",{className:"space-y-2",children:[y.jsx("img",{src:U.content,alt:"Shared image",className:"max-w-full rounded-lg cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{}}),U.text&&y.jsx("p",{className:"text-sm",children:U.text})]}),U.type==="audio"&&y.jsxs("div",{className:"flex items-center space-x-3 bg-black/10 rounded-lg p-2",children:[y.jsx(ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>p(f===U.id?null:U.id),className:"p-2 bg-white/20 rounded-full",children:f===U.id?y.jsx(FF,{size:16}):y.jsx(zF,{size:16})}),y.jsx("div",{className:"flex-1 h-8 bg-white/20 rounded-full flex items-center px-2",children:y.jsx("div",{className:"w-full h-1 bg-white/30 rounded-full",children:y.jsx("div",{className:"w-1/3 h-full bg-white rounded-full"})})}),y.jsx("span",{className:"text-xs opacity-70",children:"0:32"})]}),U.type==="file"&&y.jsxs("div",{className:"flex items-center space-x-3 bg-black/10 rounded-lg p-3",children:[y.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:y.jsx(fF,{size:16})}),y.jsxs("div",{className:"flex-1",children:[y.jsx("p",{className:"text-sm font-medium",children:U.fileName}),y.jsx("p",{className:"text-xs opacity-70",children:U.fileSize})]})]})]}),U.reactions&&Object.keys(U.reactions).length>0&&y.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:Object.entries(U.reactions).map(([X,J])=>y.jsxs(ae.span,{whileHover:{scale:1.1},className:"inline-flex items-center space-x-1 bg-black/10 rounded-full px-2 py-1 text-xs cursor-pointer",onClick:()=>j(U.id),children:[y.jsx("span",{children:X}),y.jsx("span",{children:J})]},X))}),y.jsxs("div",{className:`flex items-center justify-end space-x-1 mt-2 ${z?"text-white/70":e?"text-slate-400":"text-slate-500"}`,children:[y.jsx("span",{className:"text-xs",children:w(U.timestamp)}),z&&!n&&C(U.status)]}),y.jsxs(ae.div,{initial:{opacity:0,x:z?20:-20},whileInView:{opacity:1,x:0},className:`absolute top-1/2 transform -translate-y-1/2 ${z?"-left-12":"-right-12"} opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex space-x-1`,children:[y.jsx(ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:`p-1.5 rounded-lg ${e?"bg-slate-700/80 text-slate-300":"bg-white/80 text-slate-600"} backdrop-blur-sm shadow-lg`,children:y.jsx(eu,{size:12})}),y.jsx(ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>h(l===U.id?null:U.id),className:`p-1.5 rounded-lg ${e?"bg-slate-700/80 text-slate-300":"bg-white/80 text-slate-600"} backdrop-blur-sm shadow-lg`,children:y.jsx(hd,{size:12})}),y.jsx(ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:`p-1.5 rounded-lg ${e?"bg-slate-700/80 text-slate-300":"bg-white/80 text-slate-600"} backdrop-blur-sm shadow-lg`,children:y.jsx(zI,{size:12})}),l===U.id&&y.jsx(ae.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:`absolute ${z?"right-0":"left-0"} top-full mt-2 p-2 ${e?"bg-slate-800/90":"bg-white/90"} backdrop-blur-lg rounded-xl border ${e?"border-slate-700/50":"border-white/50"} shadow-xl flex space-x-1 z-50`,children:D().map(X=>y.jsx(ae.button,{whileHover:{scale:1.2},whileTap:{scale:.9},onClick:()=>j(U.id),className:"p-2 hover:bg-black/10 rounded-lg transition-colors",children:X},X))})]})]})},M=t.reduce((U,z)=>{const G=x(z.timestamp);return U[G]||(U[G]=[]),U[G].push(z),U},{});return y.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[y.jsx(Hn,{children:Object.entries(M).map(([U,z])=>y.jsxs("div",{className:"space-y-4",children:[y.jsx(ae.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center justify-center",children:y.jsx("div",{className:`px-3 py-1 rounded-full text-xs ${e?"bg-slate-700/50 text-slate-300":"bg-white/50 text-slate-600"} backdrop-blur-sm border ${e?"border-slate-600/50":"border-white/30"}`,children:U})}),y.jsx("div",{className:"space-y-3",children:z.map(G=>{const X=G.senderId==="me";return y.jsx("div",{className:`flex ${X?"justify-end":"justify-start"}`,children:y.jsx(R,{message:G,isOwn:X})},G.id)})})]},U))}),y.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex justify-start",children:y.jsx("div",{className:`px-4 py-3 rounded-t-2xl rounded-br-2xl rounded-bl-md ${e?"bg-slate-700/70":"bg-white/70"} backdrop-blur-md border ${e?"border-slate-600/50":"border-white/50"} shadow-lg`,children:y.jsx("div",{className:"flex space-x-1",children:[0,1,2].map(U=>y.jsx(ae.div,{animate:{scale:[1,1.5,1],opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0,delay:U*.2},className:`w-2 h-2 rounded-full ${e?"bg-slate-400":"bg-slate-500"}`},U))})})}),y.jsx("div",{ref:r}),l&&y.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>h(null)})]})}function f9({onSendMessage:t,isDarkMode:e}){const[n,r]=O.useState(""),[i,a]=O.useState(!1),[l,h]=O.useState(!1),[f,p]=O.useState(!1),[g,w]=O.useState([]),[x,C]=O.useState(0),D=O.useRef(null),j=O.useRef(null),R=O.useRef(null),M=async()=>{if(n.trim()||g.length>0){const A={text:n.trim(),type:g.length>0?"file":"text"};g.length>0&&(A.files=g.map(I=>({name:I.name,size:I.size,type:I.type,url:I.preview||"#",id:I.id})));try{await t(A),r(""),w([])}catch(I){console.error("Failed to send message:",I)}}},U=A=>{A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),M())},z=(A,I)=>{alert("File uploads are temporarily disabled. Please upgrade to Firebase Blaze plan to enable file uploads."),h(!1)},G=A=>{w(I=>I.filter(V=>V.id!==A))},X=()=>{a(!0),C(0),R.current=setInterval(()=>{C(A=>A+1)},1e3)},J=()=>{a(!1),clearInterval(R.current),t({text:"",type:"audio",duration:x}),C(0)},N=A=>{const I=Math.floor(A/60),V=A%60;return`${I}:${V.toString().padStart(2,"0")}`},b=["","","","","","","","","","","","","","","",""];return y.jsxs("div",{className:`p-4 ${e?"bg-slate-800/30":"bg-white/30"} backdrop-blur-lg border-t ${e?"border-slate-700/50":"border-white/30"}`,children:[y.jsx(Hn,{children:g.length>0&&y.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"mb-4",children:y.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(A=>y.jsxs(ae.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:`relative p-2 rounded-lg ${e?"bg-slate-700/50":"bg-white/50"} backdrop-blur-sm border ${e?"border-slate-600/50":"border-white/50"}`,children:[A.type==="image"&&A.preview?y.jsx("img",{src:A.preview,alt:A.name,className:"w-16 h-16 object-cover rounded"}):y.jsx("div",{className:"w-16 h-16 flex items-center justify-center",children:y.jsx(L1,{size:24,className:e?"text-slate-300":"text-slate-600"})}),y.jsx("p",{className:`text-xs mt-1 ${e?"text-slate-300":"text-slate-600"} truncate max-w-16`,children:A.name}),y.jsx("p",{className:`text-xs ${e?"text-slate-400":"text-slate-500"}`,children:A.size}),y.jsx(ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>G(A.id),className:"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs",children:y.jsx(dd,{size:12})})]},A.id))})})}),y.jsx(Hn,{children:i&&y.jsxs(ae.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:`mb-4 p-4 rounded-lg ${e?"bg-red-900/30":"bg-red-100/30"} backdrop-blur-sm border border-red-500/50 flex items-center justify-between`,children:[y.jsxs("div",{className:"flex items-center space-x-3",children:[y.jsx(ae.div,{animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0},className:"w-3 h-3 bg-red-500 rounded-full"}),y.jsxs("span",{className:`text-sm font-medium ${e?"text-red-300":"text-red-700"}`,children:["Recording... ",N(x)]})]}),y.jsx(ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:J,className:"p-2 bg-red-500 text-white rounded-lg",children:y.jsx(JF,{size:16})})]})}),y.jsxs("div",{className:"flex items-end space-x-2",children:[y.jsxs("div",{className:"relative",children:[y.jsx(ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>h(!l),className:`p-3 rounded-xl ${l?e?"bg-blue-600 text-white":"bg-green-600 text-white":e?"bg-slate-700/50 text-slate-300":"bg-white/50 text-slate-600"} backdrop-blur-sm transition-colors duration-200`,children:y.jsx(HI,{size:20})}),y.jsx(Hn,{children:l&&y.jsx(ae.div,{initial:{opacity:0,scale:.8,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:10},className:`absolute bottom-full left-0 mb-2 p-2 ${e?"bg-slate-800/90":"bg-white/90"} backdrop-blur-lg rounded-xl border ${e?"border-slate-700/50":"border-white/50"} shadow-xl`,children:y.jsx("div",{className:"grid grid-cols-2 gap-2 w-32",children:[{icon:xF,label:"Photo",action:()=>j.current?.click(),color:"text-purple-500"},{icon:tF,label:"Camera",action:()=>{},color:"text-blue-500"},{icon:L1,label:"File",action:()=>D.current?.click(),color:"text-gray-500"},{icon:Nu,label:"Location",action:()=>{},color:"text-red-500"}].map((A,I)=>y.jsxs(ae.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:A.action,className:`p-3 rounded-lg ${e?"hover:bg-slate-700/50":"hover:bg-gray-100/50"} transition-colors duration-200 flex flex-col items-center space-y-1`,children:[y.jsx(A.icon,{size:20,className:A.color}),y.jsx("span",{className:`text-xs ${e?"text-slate-300":"text-slate-600"}`,children:A.label})]},I))})})})]}),y.jsx("div",{className:`flex-1 rounded-xl ${e?"bg-slate-700/50":"bg-white/50"} backdrop-blur-sm border ${e?"border-slate-600/50":"border-white/50"} p-2 min-h-[3rem] max-h-32 overflow-hidden`,children:y.jsxs("div",{className:"flex items-end space-x-2",children:[y.jsxs("div",{className:"relative",children:[y.jsx(ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>p(!f),className:`p-1 rounded ${e?"text-slate-300 hover:text-white":"text-slate-600 hover:text-slate-800"} transition-colors duration-200`,children:y.jsx(hd,{size:18})}),y.jsx(Hn,{children:f&&y.jsx(ae.div,{initial:{opacity:0,scale:.8,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:10},className:`absolute bottom-full left-0 mb-2 p-3 ${e?"bg-slate-800/90":"bg-white/90"} backdrop-blur-lg rounded-xl border ${e?"border-slate-700/50":"border-white/50"} shadow-xl w-64 z-50`,children:y.jsx("div",{className:"grid grid-cols-8 gap-1",children:b.map((A,I)=>y.jsx(ae.button,{whileHover:{scale:1.2},whileTap:{scale:.9},onClick:()=>{r(V=>V+A),p(!1)},className:"p-2 hover:bg-black/10 rounded text-lg",children:A},I))})})})]}),y.jsx("textarea",{value:n,onChange:A=>r(A.target.value),onKeyPress:U,placeholder:"Type a message...",className:`flex-1 bg-transparent ${e?"text-white placeholder-slate-400":"text-slate-800 placeholder-slate-500"} focus:outline-none resize-none max-h-20 min-h-[1.5rem]`,rows:1,style:{height:"auto",minHeight:"1.5rem",maxHeight:"5rem"},onInput:A=>{A.target.style.height="auto",A.target.style.height=Math.min(A.target.scrollHeight,80)+"px"}})]})}),n.trim()||g.length>0?y.jsx(ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:M,className:`p-3 rounded-xl ${e?"bg-blue-600 hover:bg-blue-700 text-white":"bg-green-600 hover:bg-green-700 text-white"} transition-colors duration-200 shadow-lg`,children:y.jsx(KI,{size:20})}):y.jsx(ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onMouseDown:X,onMouseUp:J,onMouseLeave:J,className:`p-3 rounded-xl ${i?"bg-red-600 text-white":e?"bg-slate-700/50 text-slate-300 hover:bg-slate-600/50":"bg-white/50 text-slate-600 hover:bg-white/70"} backdrop-blur-sm transition-colors duration-200`,children:y.jsx(VF,{size:20})})]}),y.jsx("input",{ref:D,type:"file",multiple:!0,className:"hidden",onChange:A=>z(),accept:".pdf,.doc,.docx,.txt,.xlsx,.ppt,.pptx"}),y.jsx("input",{ref:j,type:"file",multiple:!0,className:"hidden",onChange:A=>z(),accept:"image/*"}),(l||f)&&y.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>{h(!1),p(!1)}})]})}function p9({userLocation:t,isDarkMode:e}){const[n,r]=O.useState([]),[i,a]=O.useState(!0),[l,h]=O.useState(5),[f,p]=O.useState("all"),[g,w]=O.useState(""),x=[{id:1,name:"Hassan Mwanga",type:"farmer",avatar:"/api/placeholder/40/40",distance:"1.2 km",location:"Dodoma Central",crops:["Maize","Sunflower"],rating:4.8,online:!0,lastSeen:"Active now",bio:"Experienced maize farmer with 15 years of expertise"},{id:2,name:"Grace Agro Ltd",type:"buyer",avatar:"/api/placeholder/40/40",distance:"2.8 km",location:"Dodoma Industrial",interests:["Maize","Rice","Vegetables"],rating:4.6,online:!1,lastSeen:"30 min ago",bio:"Agricultural produce buyer, fair prices guaranteed"},{id:3,name:"John Kimaro",type:"farmer",avatar:"/api/placeholder/40/40",distance:"3.5 km",location:"Dodoma Rural",crops:["Vegetables","Fruits"],rating:4.9,online:!0,lastSeen:"Active now",bio:"Organic farming specialist, premium quality produce"},{id:4,name:"Agri-Tech Solutions",type:"business",avatar:"/api/placeholder/40/40",distance:"4.1 km",location:"Dodoma Tech Hub",services:["Equipment","Consulting","Training"],rating:4.7,online:!0,lastSeen:"Active now",bio:"Modern farming solutions and equipment rental"},{id:5,name:"Amina Said",type:"farmer",avatar:"/api/placeholder/40/40",distance:"4.8 km",location:"Dodoma East",crops:["Rice","Beans"],rating:4.5,online:!1,lastSeen:"2 hours ago",bio:"Rice cultivation expert, sustainable farming practices"}];O.useEffect(()=>{a(!0),setTimeout(()=>{r(x),a(!1)},2e3)},[t,l]);const C=()=>{a(!0),setTimeout(()=>{r([...x].sort(()=>Math.random()-.5)),a(!1)},1500)},D=M=>{r(U=>U.map(z=>z.id===M?{...z,friendRequestSent:!0}:z))},j=M=>{switch(M){case"farmer":return{emoji:"",bg:"bg-green-100 text-green-700"};case"buyer":return{emoji:"",bg:"bg-blue-100 text-blue-700"};case"business":return{emoji:"",bg:"bg-purple-100 text-purple-700"};default:return{emoji:"",bg:"bg-gray-100 text-gray-700"}}},R=n.filter(M=>f==="all"||M.type===f).filter(M=>M.name.toLowerCase().includes(g.toLowerCase())||M.location.toLowerCase().includes(g.toLowerCase())||M.crops&&M.crops.some(U=>U.toLowerCase().includes(g.toLowerCase()))||M.interests&&M.interests.some(U=>U.toLowerCase().includes(g.toLowerCase()))||M.services&&M.services.some(U=>U.toLowerCase().includes(g.toLowerCase())));return y.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"h-full flex flex-col",children:[y.jsxs("div",{className:"p-4 space-y-4",children:[y.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${e?"bg-slate-700/50":"bg-white/50"} backdrop-blur-sm border ${e?"border-slate-600/50":"border-white/50"}`,children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(OF,{size:16,className:e?"text-blue-400":"text-green-600"}),y.jsx("span",{className:`text-sm ${e?"text-slate-300":"text-slate-700"}`,children:t?"Location detected":"Enable location"})]}),y.jsx(ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:C,disabled:i,className:`p-1 rounded ${e?"text-slate-400 hover:text-white":"text-slate-600 hover:text-slate-800"} transition-colors duration-200`,children:y.jsx(qF,{size:16,className:i?"animate-spin":""})})]}),y.jsxs("div",{className:`relative ${e?"bg-slate-700/50":"bg-white/50"} backdrop-blur-sm rounded-lg border ${e?"border-slate-600/50":"border-white/50"}`,children:[y.jsx("input",{type:"text",placeholder:"Search nearby users...",value:g,onChange:M=>w(M.target.value),className:`w-full px-4 py-2 bg-transparent ${e?"text-white placeholder-slate-400":"text-slate-800 placeholder-slate-500"} focus:outline-none`}),y.jsx(Ua,{size:16,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${e?"text-slate-400":"text-slate-500"}`})]}),y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("div",{className:`flex rounded-lg p-1 ${e?"bg-slate-700/50":"bg-white/50"} backdrop-blur-sm`,children:[{id:"all",label:"All"},{id:"farmer",label:"Farmers"},{id:"buyer",label:"Buyers"},{id:"business",label:"Business"}].map(M=>y.jsx(ae.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>p(M.id),className:`px-3 py-1 rounded text-xs font-medium transition-all duration-200 ${f===M.id?`${e?"bg-blue-600 text-white":"bg-green-600 text-white"} shadow-lg`:`${e?"text-slate-300 hover:text-white":"text-slate-600 hover:text-slate-800"}`}`,children:M.label},M.id))}),y.jsxs("select",{value:l,onChange:M=>h(Number(M.target.value)),className:`px-3 py-1 rounded text-xs ${e?"bg-slate-700/50 text-slate-300":"bg-white/50 text-slate-700"} backdrop-blur-sm border ${e?"border-slate-600/50":"border-white/50"} focus:outline-none`,children:[y.jsx("option",{value:1,children:"1 km"}),y.jsx("option",{value:5,children:"5 km"}),y.jsx("option",{value:10,children:"10 km"}),y.jsx("option",{value:25,children:"25 km"}),y.jsx("option",{value:50,children:"50 km"})]})]})]}),y.jsx("div",{className:"flex-1 overflow-y-auto px-2",children:i?y.jsx("div",{className:"flex items-center justify-center py-12",children:y.jsxs("div",{className:"text-center",children:[y.jsx(ae.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"mb-4",children:y.jsx(bF,{size:32,className:e?"text-blue-400":"text-green-600"})}),y.jsx("p",{className:`text-sm ${e?"text-slate-300":"text-slate-600"}`,children:"Discovering nearby users..."})]})}):R.length===0?y.jsx("div",{className:"flex items-center justify-center py-12",children:y.jsxs("div",{className:"text-center",children:[y.jsx(Nu,{size:48,className:`mb-4 mx-auto ${e?"text-slate-400":"text-slate-500"}`}),y.jsx("p",{className:`text-sm ${e?"text-slate-300":"text-slate-600"}`,children:"No users found in your area"}),y.jsx("p",{className:`text-xs mt-1 ${e?"text-slate-400":"text-slate-500"}`,children:"Try increasing the search radius"})]})}):y.jsx("div",{className:"space-y-2 pb-4",children:y.jsx(Hn,{children:R.map(M=>{const U=j(M.type);return y.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:`p-4 rounded-xl ${e?"bg-slate-700/30 hover:bg-slate-700/50":"bg-white/30 hover:bg-white/50"} backdrop-blur-sm border ${e?"border-slate-600/50":"border-white/50"} transition-all duration-200`,children:y.jsxs("div",{className:"flex items-start space-x-3",children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:`w-12 h-12 rounded-full ${e?"bg-slate-600":"bg-gray-300"} flex items-center justify-center text-2xl overflow-hidden`,children:M.avatar?y.jsx("img",{src:M.avatar,alt:M.name,className:"w-full h-full object-cover"}):y.jsx("span",{children:U.emoji})}),y.jsx(ae.div,{initial:{scale:0},animate:{scale:1},className:`absolute -bottom-0.5 -right-0.5 w-4 h-4 rounded-full border-2 ${e?"border-slate-800":"border-white"} ${M.online?"bg-green-500":"bg-gray-400"}`})]}),y.jsx("div",{className:"flex-1 min-w-0",children:y.jsxs("div",{className:"flex items-start justify-between",children:[y.jsxs("div",{className:"flex-1",children:[y.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[y.jsx("h3",{className:`font-semibold truncate ${e?"text-white":"text-slate-800"}`,children:M.name}),y.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${U.bg}`,children:M.type})]}),y.jsxs("div",{className:"flex items-center space-x-4 mb-2",children:[y.jsxs("span",{className:`text-xs flex items-center ${e?"text-slate-400":"text-slate-500"}`,children:[y.jsx(Nu,{size:12,className:"mr-1"}),M.distance,"  ",M.location]}),y.jsx("span",{className:`text-xs ${M.online?"text-green-500":e?"text-slate-400":"text-slate-500"}`,children:M.lastSeen})]}),y.jsx("p",{className:`text-xs ${e?"text-slate-300":"text-slate-600"} mb-2`,children:M.bio}),y.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:(M.crops||M.interests||M.services||[]).slice(0,3).map((z,G)=>y.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${e?"bg-slate-600/50 text-slate-300":"bg-gray-100 text-gray-700"}`,children:z},G))}),y.jsxs("div",{className:"flex items-center space-x-1",children:[y.jsx("span",{className:"text-yellow-500",children:""}),y.jsx("span",{className:`text-xs ${e?"text-slate-300":"text-slate-600"}`,children:M.rating})]})]}),y.jsxs("div",{className:"flex flex-col space-y-2",children:[M.friendRequestSent?y.jsx(ae.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:`px-3 py-1 rounded-lg text-xs ${e?"bg-green-600/20 text-green-400":"bg-green-100 text-green-700"} text-center`,children:"Request Sent"}):y.jsxs(ae.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>D(M.id),className:`px-3 py-1 rounded-lg text-xs ${e?"bg-blue-600/20 text-blue-400 hover:bg-blue-600/30":"bg-green-100 text-green-700 hover:bg-green-200"} transition-colors duration-200 flex items-center space-x-1`,children:[y.jsx(GI,{size:12}),y.jsx("span",{children:"Connect"})]}),y.jsxs(ae.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-3 py-1 rounded-lg text-xs ${e?"bg-slate-600/50 text-slate-300 hover:bg-slate-600/70":"bg-white/50 text-slate-600 hover:bg-white/70"} transition-colors duration-200 flex items-center space-x-1`,children:[y.jsx(Mh,{size:12}),y.jsx("span",{children:"Message"})]})]})]})})]})},M.id)})})})})]})}function m9({isDarkMode:t}){const[e,n]=O.useState(""),[r,i]=O.useState(""),[a,l]=O.useState(!1),[h,f]=O.useState("all"),[p,g]=O.useState(null),[w,x]=O.useState(null),C=O.useRef(null),[D,j]=O.useState([{id:1,user:{id:1,name:"Hassan Mwanga",avatar:"/api/placeholder/32/32",type:"farmer",online:!0},message:"Salamu zote! Hali ya mvua imekuwa nzuri sana msimu huu. Je, mmepata changamoto zoyote za wadudu kwenye mazao?",timestamp:new Date(Date.now()-1e3*60*5),reactions:[{emoji:"",count:3,users:["Grace","John","Amina"]},{emoji:"",count:1,users:["Grace"]}],replies:2,pinned:!1,edited:!1,mentions:[],type:"text"},{id:2,user:{id:2,name:"Grace Agro Ltd",avatar:"/api/placeholder/32/32",type:"buyer",online:!0},message:"@Hassan Mwanga Ndiyo, tunasikia changamoto za wadudu, hasa kwenye mahindi. Tunahitaji mbinu za kibiolojia.",timestamp:new Date(Date.now()-1e3*60*3),reactions:[{emoji:"",count:2,users:["Hassan","John"]}],replies:0,pinned:!1,edited:!1,mentions:["Hassan Mwanga"],type:"text",replyTo:1},{id:3,user:{id:3,name:"John Kimaro",avatar:"/api/placeholder/32/32",type:"farmer",online:!0},message:"Nimejaribu kutumia dawa za asili kama neem na pyrethrum. Zimekuwa na matokeo mazuri!",timestamp:new Date(Date.now()-1e3*60*2),reactions:[{emoji:"",count:4,users:["Hassan","Grace","Amina","Tech"]},{emoji:"",count:2,users:["Hassan","Amina"]}],replies:1,pinned:!0,edited:!1,mentions:[],type:"text"},{id:4,user:{id:4,name:"Agri-Tech Solutions",avatar:"/api/placeholder/32/32",type:"business",online:!0},message:"Tunauza sprayers za kielektroniki zenye teknolojia ya GPS. Zinawezesha matumizi sahihi ya dawa.",timestamp:new Date(Date.now()-1e3*60*1),reactions:[{emoji:"",count:1,users:["John"]}],replies:0,pinned:!1,edited:!1,mentions:[],type:"text",attachments:[{type:"image",url:"/api/placeholder/200/150",name:"smart-sprayer.jpg"}]}]),R=()=>{C.current?.scrollIntoView({behavior:"smooth"})};O.useEffect(()=>{R()},[D]);const M=()=>{if(!e.trim())return;const I={id:Date.now(),user:{id:999,name:"You",avatar:"/api/placeholder/32/32",type:"farmer",online:!0},message:e,timestamp:new Date,reactions:[],replies:0,pinned:!1,edited:!1,mentions:U(e),type:"text",replyTo:p?.id};j(V=>[...V,I]),n(""),g(null)},U=I=>{const V=/@(\w+(?:\s+\w+)*)/g,F=[];let P;for(;(P=V.exec(I))!==null;)F.push(P[1]);return F},z=(I,V)=>{j(F=>F.map(P=>P.id===I?P.reactions.find(Ue=>Ue.emoji===V)?{...P,reactions:P.reactions.filter(Ue=>Ue.emoji!==V)}:{...P,reactions:[...P.reactions,{emoji:V,count:1,users:["You"]}]}:P))},G=I=>{g(I),x(null)},X=I=>{j(V=>V.map(F=>F.id===I?{...F,pinned:!F.pinned}:F))},J=I=>{switch(I){case"farmer":return{emoji:"",color:"text-green-500"};case"buyer":return{emoji:"",color:"text-blue-500"};case"business":return{emoji:"",color:"text-purple-500"};default:return{emoji:"",color:"text-gray-500"}}},N=I=>{const F=new Date-I,P=Math.floor(F/(1e3*60)),Ie=Math.floor(F/(1e3*60*60)),Ue=Math.floor(F/(1e3*60*60*24));return P<1?"Now":P<60?`${P}m`:Ie<24?`${Ie}h`:`${Ue}d`},b=["","","","","","","","","",""],A=D.filter(I=>{const V=!r||I.message.toLowerCase().includes(r.toLowerCase())||I.user.name.toLowerCase().includes(r.toLowerCase()),F=h==="all"||h==="pinned"&&I.pinned||h==="mentions"&&I.mentions.includes("You")||h==="threads"&&I.replies>0;return V&&F});return y.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"h-full flex flex-col",children:[y.jsxs("div",{className:`p-4 border-b ${t?"border-slate-600/50 bg-slate-800/30":"border-white/50 bg-white/30"} backdrop-blur-sm`,children:[y.jsxs("div",{className:"flex items-center justify-between mb-3",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(_F,{size:20,className:t?"text-blue-400":"text-green-600"}),y.jsx("h2",{className:`font-semibold ${t?"text-white":"text-slate-800"}`,children:"SmartFarm Community"}),y.jsxs("div",{className:"flex items-center space-x-1",children:[y.jsx(lg,{size:14,className:t?"text-slate-400":"text-slate-500"}),y.jsx("span",{className:`text-xs ${t?"text-slate-400":"text-slate-500"}`,children:"1,247 members"})]})]}),y.jsx(ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:`p-2 rounded-lg ${t?"text-slate-400 hover:text-white hover:bg-slate-700/50":"text-slate-600 hover:text-slate-800 hover:bg-white/50"} transition-all duration-200`,children:y.jsx(mF,{size:16})})]}),y.jsx("div",{className:"flex items-center space-x-2 mb-2",children:y.jsxs("div",{className:`flex-1 relative ${t?"bg-slate-700/50":"bg-white/50"} backdrop-blur-sm rounded-lg border ${t?"border-slate-600/50":"border-white/50"}`,children:[y.jsx("input",{type:"text",placeholder:"Search messages...",value:r,onChange:I=>i(I.target.value),className:`w-full px-3 py-2 bg-transparent text-sm ${t?"text-white placeholder-slate-400":"text-slate-800 placeholder-slate-500"} focus:outline-none`}),y.jsx(Ua,{size:14,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${t?"text-slate-400":"text-slate-500"}`})]})}),y.jsx("div",{className:`flex rounded-lg p-1 ${t?"bg-slate-700/50":"bg-white/50"} backdrop-blur-sm`,children:[{id:"all",label:"All",icon:kF},{id:"pinned",label:"Pinned",icon:lm},{id:"mentions",label:"Mentions",icon:J5},{id:"threads",label:"Threads",icon:eu}].map(I=>y.jsxs(ae.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>f(I.id),className:`flex items-center space-x-1 px-3 py-1 rounded text-xs font-medium transition-all duration-200 ${h===I.id?`${t?"bg-blue-600 text-white":"bg-green-600 text-white"} shadow-lg`:`${t?"text-slate-300 hover:text-white":"text-slate-600 hover:text-slate-800"}`}`,children:[y.jsx(I.icon,{size:12}),y.jsx("span",{children:I.label})]},I.id))})]}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[y.jsx(Hn,{children:A.map(I=>{const V=J(I.user.type),F=I.replyTo,P=F?D.find(Ie=>Ie.id===I.replyTo):null;return y.jsxs(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:`${t?"bg-slate-700/20 hover:bg-slate-700/30":"bg-white/20 hover:bg-white/30"} backdrop-blur-sm rounded-xl p-4 border ${t?"border-slate-600/30":"border-white/30"} transition-all duration-200 group ${I.pinned?"ring-2 ring-yellow-500/30":""}`,children:[F&&P&&y.jsxs("div",{className:`mb-2 p-2 rounded-lg ${t?"bg-slate-600/30":"bg-gray-100/50"} border-l-2 ${t?"border-blue-400":"border-green-500"}`,children:[y.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[y.jsx(eu,{size:12,className:t?"text-slate-400":"text-slate-500"}),y.jsxs("span",{className:`text-xs ${t?"text-slate-400":"text-slate-500"}`,children:["Replying to ",P.user.name]})]}),y.jsx("p",{className:`text-xs ${t?"text-slate-300":"text-slate-600"} truncate`,children:P.message})]}),y.jsxs("div",{className:"flex items-start space-x-3",children:[y.jsxs("div",{className:"relative",children:[y.jsx("div",{className:`w-10 h-10 rounded-full ${t?"bg-slate-600":"bg-gray-300"} flex items-center justify-center overflow-hidden`,children:I.user.avatar?y.jsx("img",{src:I.user.avatar,alt:I.user.name,className:"w-full h-full object-cover"}):y.jsx("span",{className:"text-lg",children:V.emoji})}),y.jsx(ae.div,{initial:{scale:0},animate:{scale:1},className:`absolute -bottom-0.5 -right-0.5 w-3 h-3 rounded-full border ${t?"border-slate-800":"border-white"} ${I.user.online?"bg-green-500":"bg-gray-400"}`})]}),y.jsxs("div",{className:"flex-1 min-w-0",children:[y.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[y.jsx("h4",{className:`font-semibold text-sm ${t?"text-white":"text-slate-800"}`,children:I.user.name}),y.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${V.color} bg-current/10`,children:I.user.type}),y.jsx("span",{className:`text-xs ${t?"text-slate-400":"text-slate-500"}`,children:N(I.timestamp)}),I.edited&&y.jsx("span",{className:`text-xs ${t?"text-slate-400":"text-slate-500"}`,children:"(edited)"}),I.pinned&&y.jsx(lm,{size:12,className:"text-yellow-500"})]}),y.jsx("div",{className:`text-sm mb-2 ${t?"text-slate-300":"text-slate-700"}`,children:I.message.split(/(@\w+(?:\s+\w+)*)/).map((Ie,Ue)=>Ie.startsWith("@")?y.jsx("span",{className:`${t?"text-blue-400 bg-blue-400/10":"text-green-600 bg-green-100"} px-1 rounded`,children:Ie},Ue):Ie)}),I.attachments&&y.jsx("div",{className:"mb-2",children:I.attachments.map((Ie,Ue)=>y.jsx("div",{className:"max-w-xs",children:Ie.type==="image"&&y.jsx("img",{src:Ie.url,alt:Ie.name,className:"rounded-lg border border-gray-200"})},Ue))}),I.reactions.length>0&&y.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:I.reactions.map((Ie,Ue)=>y.jsxs(ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>z(I.id,Ie.emoji),className:`flex items-center space-x-1 px-2 py-1 rounded-full text-xs ${t?"bg-slate-600/50 hover:bg-slate-600/70":"bg-white/50 hover:bg-white/70"} transition-colors duration-200`,children:[y.jsx("span",{children:Ie.emoji}),y.jsx("span",{children:Ie.count})]},Ue))}),y.jsxs("div",{className:"flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[y.jsx(ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>G(I),className:`p-1 rounded ${t?"text-slate-400 hover:text-white hover:bg-slate-600/50":"text-slate-500 hover:text-slate-700 hover:bg-white/50"} transition-all duration-200`,children:y.jsx(eu,{size:14})}),y.jsx("div",{className:"relative",children:y.jsx(ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:`p-1 rounded ${t?"text-slate-400 hover:text-white hover:bg-slate-600/50":"text-slate-500 hover:text-slate-700 hover:bg-white/50"} transition-all duration-200`,children:y.jsx(hd,{size:14})})}),y.jsx(ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>X(I.id),className:`p-1 rounded ${I.pinned?"text-yellow-500":t?"text-slate-400 hover:text-white hover:bg-slate-600/50":"text-slate-500 hover:text-slate-700 hover:bg-white/50"} transition-all duration-200`,children:y.jsx(lm,{size:14})}),I.replies>0&&y.jsxs("button",{className:`text-xs ${t?"text-slate-400 hover:text-white":"text-slate-500 hover:text-slate-700"} transition-colors duration-200`,children:[I.replies," ",I.replies===1?"reply":"replies"]})]})]})]})]},I.id)})}),y.jsx("div",{ref:C})]}),p&&y.jsx(ae.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`px-4 py-2 ${t?"bg-slate-700/50 border-slate-600/50":"bg-white/50 border-white/50"} backdrop-blur-sm border-t`,children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(eu,{size:14,className:t?"text-blue-400":"text-green-600"}),y.jsxs("span",{className:`text-sm ${t?"text-slate-300":"text-slate-700"}`,children:["Replying to ",p.user.name]})]}),y.jsx(ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>g(null),className:`text-xs ${t?"text-slate-400 hover:text-white":"text-slate-500 hover:text-slate-700"} transition-colors duration-200`,children:"Cancel"})]})}),y.jsxs("div",{className:`p-4 border-t ${t?"border-slate-600/50 bg-slate-800/30":"border-white/50 bg-white/30"} backdrop-blur-sm`,children:[y.jsxs("div",{className:`flex items-end space-x-2 p-3 rounded-xl ${t?"bg-slate-700/50 border-slate-600/50":"bg-white/50 border-white/50"} backdrop-blur-sm border`,children:[y.jsx(ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:`p-2 rounded-lg ${t?"text-slate-400 hover:text-white hover:bg-slate-600/50":"text-slate-600 hover:text-slate-800 hover:bg-white/50"} transition-all duration-200`,children:y.jsx(HI,{size:18})}),y.jsx("div",{className:"flex-1",children:y.jsx("textarea",{value:e,onChange:I=>n(I.target.value),onKeyPress:I=>{I.key==="Enter"&&!I.shiftKey&&(I.preventDefault(),M())},placeholder:"Share your thoughts with the community...",className:`w-full bg-transparent ${t?"text-white placeholder-slate-400":"text-slate-800 placeholder-slate-500"} resize-none focus:outline-none text-sm`,rows:"1",style:{minHeight:"20px",maxHeight:"100px"}})}),y.jsx(ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>l(!a),className:`p-2 rounded-lg ${t?"text-slate-400 hover:text-white hover:bg-slate-600/50":"text-slate-600 hover:text-slate-800 hover:bg-white/50"} transition-all duration-200`,children:y.jsx(hd,{size:18})}),y.jsx(ae.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:M,disabled:!e.trim(),className:`p-2 rounded-lg ${e.trim()?`${t?"bg-blue-600 hover:bg-blue-700":"bg-green-600 hover:bg-green-700"} text-white`:`${t?"bg-slate-600 text-slate-400":"bg-gray-300 text-gray-500"} cursor-not-allowed`} transition-all duration-200`,children:y.jsx(KI,{size:18})})]}),y.jsx(Hn,{children:a&&y.jsx(ae.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:`mt-2 p-2 rounded-xl ${t?"bg-slate-700/90":"bg-white/90"} backdrop-blur-sm border ${t?"border-slate-600/50":"border-white/50"} shadow-lg`,children:y.jsx("div",{className:"grid grid-cols-10 gap-1",children:b.map((I,V)=>y.jsx(ae.button,{whileHover:{scale:1.2},whileTap:{scale:.9},onClick:()=>{n(F=>F+I),l(!1)},className:"p-2 rounded-lg hover:bg-gray-100/20 transition-colors duration-200",children:I},V))})})})]})]})}const g9=()=>{const[t]=ES(ag),[e,n]=O.useState([]),[r,i]=O.useState(null),[a,l]=O.useState([]),[h,f]=O.useState(!0),[p,g]=O.useState(null),w=O.useRef(null),x=O.useRef(null);return O.useEffect(()=>{if(!t){n([]),f(!1);return}const G=Jp(fa(lr,"chats"),Zp("participants","array-contains",t.uid),f1("lastMessageTime","desc"));return w.current=g1(G,X=>{const J=[];X.forEach(N=>{J.push({id:N.id,...N.data()})}),n(J),f(!1)},X=>{console.error("Error loading chats:",X),g("Failed to load chats"),f(!1)}),()=>{w.current&&w.current()}},[t]),O.useEffect(()=>{if(!r){l([]);return}const G=Jp(fa(lr,"chats",r.id,"messages"),f1("timestamp","asc"),XM(100));return x.current=g1(G,X=>{const J=[];X.forEach(N=>{J.push({id:N.id,...N.data()})}),l(J)},X=>{console.error("Error loading messages:",X),g("Failed to load messages")}),()=>{x.current&&x.current()}},[r]),{chats:e,activeChat:r,messages:a,loading:h,error:p,setActiveChat:i,createPrivateChat:async(G,X)=>{if(!t)return null;try{const J=Jp(fa(lr,"chats"),Zp("participants","array-contains",t.uid),Zp("type","==","private")),N=await e3(J);let b=null;if(N.forEach(F=>{const P=F.data();P.participants.includes(G)&&(b={id:F.id,...P})}),b)return i(b),b;const A={type:"private",participants:[t.uid,G],participantData:{[t.uid]:{displayName:t.displayName||"Anonymous",photoURL:t.photoURL||null,email:t.email},[G]:X},createdAt:pa(),lastMessage:null,lastMessageTime:pa(),unreadCount:{[t.uid]:0,[G]:0}},V={id:(await em(fa(lr,"chats"),A)).id,...A};return i(V),V}catch(J){return console.error("Error creating private chat:",J),g("Failed to create chat"),null}},createGroupChat:async(G,X,J=null)=>{if(!t)return null;try{let N=null;if(J){const V=S1(D1,`group-images/${Date.now()}_${J.name}`),F=await T1(V,J);N=await E1(F.ref)}const b={type:"group",name:G,participants:[t.uid,...X],admin:t.uid,groupImage:N,createdAt:pa(),lastMessage:null,lastMessageTime:pa(),unreadCount:X.reduce((V,F)=>({...V,[F]:0}),{[t.uid]:0})},I={id:(await em(fa(lr,"chats"),b)).id,...b};return i(I),I}catch(N){return console.error("Error creating group chat:",N),g("Failed to create group chat"),null}},sendMessage:async(G,X="text",J=null)=>{if(!(!t||!r||!G.trim()&&!J))try{let N=null,b=null;if(J){const I=S1(D1,`chat-files/${r.id}/${Date.now()}_${J.name}`),V=await T1(I,J);N=await E1(V.ref),b=J.name}const A={senderId:t.uid,senderName:t.displayName||"Anonymous",senderPhoto:t.photoURL||null,content:G.trim(),type:X,timestamp:pa(),fileURL:N,fileName:b,reactions:{},edited:!1,replyTo:null};await em(fa(lr,"chats",r.id,"messages"),A),await wh(_a(lr,"chats",r.id),{lastMessage:X==="text"?G:`${X==="image"?"":""} ${X}`,lastMessageTime:pa(),[`unreadCount.${t.uid}`]:0})}catch(N){console.error("Error sending message:",N),g("Failed to send message")}},markAsRead:async G=>{if(!(!t||!G))try{await wh(_a(lr,"chats",G),{[`unreadCount.${t.uid}`]:0})}catch(X){console.error("Error marking as read:",X)}},deleteMessage:async G=>{if(!(!t||!r))try{await t3(_a(lr,"chats",r.id,"messages",G))}catch(X){console.error("Error deleting message:",X),g("Failed to delete message")}},addReaction:async(G,X)=>{if(!(!t||!r))try{const J=_a(lr,"chats",r.id,"messages",G);await wh(J,{[`reactions.${X}`]:r3(t.uid)})}catch(J){console.error("Error adding reaction:",J)}},removeReaction:async(G,X)=>{if(!(!t||!r))try{const J=_a(lr,"chats",r.id,"messages",G);await wh(J,{[`reactions.${X}`]:s3(t.uid)})}catch(J){console.error("Error removing reaction:",J)}}}};function y9(){const[t,e]=O.useState("private"),[n,r]=O.useState(null),[i,a]=O.useState(!1),[l,h]=O.useState(null),[f,p]=O.useState("sunny"),[g,w]=O.useState(!0),[x,C]=O.useState(!1),[D,j]=O.useState(!1),[R,M]=O.useState(!1),[U,z]=O.useState(""),G=O.useRef(null);O.useEffect(()=>{const H=()=>{M(window.innerWidth<768)};return H(),window.addEventListener("resize",H),()=>window.removeEventListener("resize",H)},[]);const[X,J,N]=ES(ag),{chats:b,messages:A,sendMessage:I}=g9(X?.uid,n?.id),V=async()=>{try{await x4(ag)}catch(H){console.error("Authentication failed:",H)}};O.useEffect(()=>{!J&&!X&&V()},[J,X]);const[F,P]=O.useState([{id:1,senderId:"farmer1",senderName:"Mwalimu John",text:"Weather update: Light rains expected in Dodoma region today ",timestamp:new Date(Date.now()-18e5),type:"text",reactions:{"":5,"":2,"":8},replies:[]},{id:2,senderId:"buyer2",senderName:"Grace Market",text:"Current maize prices: 1,200 TSH per kg in Dar market",timestamp:new Date(Date.now()-9e5),type:"text",reactions:{"":12,"":6},replies:[{id:"r1",senderId:"farmer3",senderName:"Peter",text:"That's good pricing! Better than last month",timestamp:new Date(Date.now()-6e5)}]}]);O.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(H=>{h({lat:H.coords.latitude,lng:H.coords.longitude})},H=>{console.log("Location access denied")})},[]),O.useEffect(()=>{const H=["sunny","cloudy","rainy"],oe=setInterval(()=>{p(H[Math.floor(Math.random()*H.length)])},1e4);return()=>clearInterval(oe)},[]);const Ie=i?"bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900":"bg-gradient-to-br from-blue-50 via-green-50 to-blue-100",Ue=f==="sunny"?um:f==="cloudy"?hF:uF,xe=[{id:1,name:"John Mwalimu",type:"farmer",location:"Dodoma",distance:"2.3 km",avatar:null,online:!0},{id:2,name:"Grace Market",type:"buyer",location:"Dar es Salaam",distance:"15 km",avatar:null,online:!1},{id:3,name:"AgriTransport Ltd",type:"transporter",location:"Arusha",distance:"8.5 km",avatar:null,online:!0},{id:4,name:"FarmSupply Co",type:"service",location:"Mwanza",distance:"5.2 km",avatar:null,online:!0}].filter(H=>H.name.toLowerCase().includes(U.toLowerCase())||H.type.toLowerCase().includes(U.toLowerCase()));return y.jsxs("div",{className:`min-h-screen ${Ie} transition-all duration-700 relative overflow-hidden`,children:[y.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(6)].map((H,oe)=>y.jsx(ae.div,{className:`absolute w-64 h-64 rounded-full opacity-10 ${i?"bg-blue-400":"bg-green-400"}`,animate:{x:[0,100,0],y:[0,-50,0],scale:[1,1.2,1]},transition:{duration:8+oe*2,repeat:1/0,ease:"easeInOut"},style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`}},oe))}),y.jsxs("div",{className:"relative z-10 h-screen flex",children:[R&&y.jsx("div",{className:`fixed top-0 left-0 right-0 z-50 p-4 ${i?"bg-slate-800/90":"bg-white/90"} backdrop-blur-lg border-b ${i?"border-slate-700/50":"border-white/30"}`,children:y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx(ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>C(!x),className:`p-2 rounded-lg ${i?"bg-slate-700/50 text-white":"bg-white/50 text-slate-800"} backdrop-blur-sm`,children:x?y.jsx(dd,{size:20}):y.jsx(CF,{size:20})}),y.jsxs("div",{className:`flex-1 mx-4 relative ${i?"bg-slate-700/50":"bg-white/50"} backdrop-blur-sm rounded-lg`,children:[y.jsx("input",{type:"text",placeholder:"Search conversations...",value:U,onChange:H=>z(H.target.value),className:`w-full px-4 py-2 bg-transparent ${i?"text-white placeholder-slate-400":"text-slate-800 placeholder-slate-500"} focus:outline-none`}),y.jsx(Ua,{className:`absolute right-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${i?"text-slate-400":"text-slate-500"}`})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>w(!g),className:`p-2 rounded-lg ${g?"bg-green-500/20 text-green-600":"bg-gray-500/20 text-gray-600"} backdrop-blur-sm`,children:y.jsx(O1,{size:16})}),y.jsx(ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>a(!i),className:`p-2 rounded-lg ${i?"bg-yellow-500/20 text-yellow-400":"bg-slate-500/20 text-slate-600"} backdrop-blur-sm`,children:i?y.jsx(um,{size:16}):y.jsx(M1,{size:16})})]})]})}),y.jsx(Hn,{children:R&&x&&y.jsx(ae.div,{initial:{x:-300,opacity:0},animate:{x:0,opacity:1},exit:{x:-300,opacity:0},transition:{duration:.3},className:`fixed top-0 left-0 w-80 h-full z-40 ${i?"bg-slate-800/95":"bg-white/95"} backdrop-blur-lg border-r ${i?"border-slate-700/50":"border-white/30"} pt-20`,children:y.jsx("div",{className:"p-4",children:y.jsx("div",{className:`flex flex-col space-y-2 rounded-lg p-2 ${i?"bg-slate-700/50":"bg-white/50"} backdrop-blur-sm`,children:[{id:"private",icon:Mh,label:"Private"},{id:"group",icon:lg,label:"Groups"},{id:"nearby",icon:Nu,label:"Nearby"}].map(H=>y.jsxs(ae.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{e(H.id),C(!1)},className:`flex items-center justify-start py-3 px-4 rounded-md text-sm font-medium transition-all duration-200 ${t===H.id?`${i?"bg-blue-600 text-white":"bg-green-600 text-white"} shadow-lg`:`${i?"text-slate-300 hover:text-white hover:bg-slate-600/50":"text-slate-600 hover:text-slate-800 hover:bg-white/50"}`}`,children:[y.jsx(H.icon,{size:20,className:"mr-3"}),H.label]},H.id))})})})}),!R&&y.jsxs(ae.div,{className:`w-80 ${i?"bg-slate-800/30":"bg-white/30"} backdrop-blur-lg border-r ${i?"border-slate-700/50":"border-white/30"} flex flex-col`,initial:{x:-300},animate:{x:0},transition:{duration:.5},children:[y.jsxs("div",{className:`p-4 border-b ${i?"border-slate-700/50":"border-white/30"}`,children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsx("h1",{className:`text-xl font-bold ${i?"text-white":"text-slate-800"}`,children:"Chat Platform"}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsx(ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>w(!g),className:`p-2 rounded-lg ${g?"bg-green-500/20 text-green-600":"bg-gray-500/20 text-gray-600"} backdrop-blur-sm`,children:y.jsx(O1,{size:16})}),y.jsx(ae.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>a(!i),className:`p-2 rounded-lg ${i?"bg-yellow-500/20 text-yellow-400":"bg-slate-500/20 text-slate-600"} backdrop-blur-sm`,children:i?y.jsx(um,{size:16}):y.jsx(M1,{size:16})})]})]}),y.jsx("div",{className:`flex rounded-lg p-1 ${i?"bg-slate-700/50":"bg-white/50"} backdrop-blur-sm`,children:[{id:"private",icon:Mh,label:"Private"},{id:"group",icon:lg,label:"Groups"},{id:"nearby",icon:Nu,label:"Nearby"}].map(H=>y.jsxs(ae.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>e(H.id),className:`flex-1 flex items-center justify-center py-2 px-3 rounded-md text-sm font-medium transition-all duration-200 ${t===H.id?`${i?"bg-blue-600 text-white":"bg-green-600 text-white"} shadow-lg`:`${i?"text-slate-300 hover:text-white":"text-slate-600 hover:text-slate-800"}`}`,children:[y.jsx(H.icon,{size:16,className:"mr-1"}),H.label]},H.id))})]}),y.jsx("div",{className:"flex-1 overflow-hidden",children:y.jsxs(Hn,{mode:"wait",children:[t==="private"&&y.jsx(c9,{chats:b,selectedChat:n,onSelectChat:r,isDarkMode:i}),t==="group"&&y.jsx(m9,{isDarkMode:i,messages:F,setMessages:P}),t==="nearby"&&y.jsx(p9,{userLocation:l,isDarkMode:i})]})})]}),y.jsx("div",{className:`flex-1 flex flex-col ${R?"pt-20":""}`,children:n||t==="group"?y.jsxs(y.Fragment,{children:[y.jsx(h9,{chat:n||{name:"Farmers Community",online:!0},isDarkMode:i,weatherMood:f,WeatherIcon:Ue}),y.jsx("div",{ref:G,className:"flex-1 overflow-hidden",children:y.jsx(d9,{messages:t==="group"?F:A,isDarkMode:i,isGroup:t==="group"})}),y.jsx(f9,{onSendMessage:H=>{t==="group"?P(oe=>[...oe,{id:Date.now(),senderId:X?.uid||"anonymous",senderName:X?.displayName||"You",text:H.text,timestamp:new Date,type:H.type,reactions:{},replies:[]}]):n&&I&&I(H.text,H.type,H.file)},isDarkMode:i})]}):y.jsx(ae.div,{className:"flex-1 flex items-center justify-center p-4",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:y.jsxs("div",{className:"text-center max-w-md",children:[y.jsx(ae.div,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},className:`w-32 h-32 mx-auto mb-6 rounded-full ${i?"bg-slate-700/50":"bg-white/50"} backdrop-blur-lg flex items-center justify-center border ${i?"border-slate-600/50":"border-white/30"}`,children:y.jsx(Mh,{size:48,className:i?"text-blue-400":"text-green-600"})}),y.jsx("h3",{className:`text-2xl font-bold ${i?"text-white":"text-slate-800"} mb-2`,children:"Welcome to SmartFarm Chat"}),y.jsx("p",{className:`${i?"text-slate-300":"text-slate-600"} mb-6`,children:"Connect with farmers and buyers in your area. Share experiences, negotiate deals, and grow together."})]})})}),R&&y.jsxs(ae.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>j(!0),className:`fixed bottom-6 left-1/2 transform -translate-x-1/2 z-50 px-6 py-3 rounded-full ${i?"bg-blue-600 text-white shadow-lg shadow-blue-600/25":"bg-green-600 text-white shadow-lg shadow-green-600/25"} backdrop-blur-lg font-medium transition-all duration-200 flex items-center space-x-2`,children:[y.jsx(qI,{size:20}),y.jsx("span",{children:"Start New Conversation"})]}),y.jsx(Hn,{children:D&&y.jsx(ae.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>j(!1),children:y.jsxs(ae.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:H=>H.stopPropagation(),className:`w-full max-w-md ${i?"bg-slate-800":"bg-white"} rounded-2xl p-6 shadow-2xl`,children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsx("h3",{className:`text-xl font-bold ${i?"text-white":"text-slate-800"}`,children:"Start New Conversation"}),y.jsx("button",{onClick:()=>j(!1),className:`p-2 rounded-lg ${i?"hover:bg-slate-700":"hover:bg-gray-100"}`,children:y.jsx(dd,{size:20,className:i?"text-slate-400":"text-slate-600"})})]}),y.jsxs("div",{className:`relative mb-4 ${i?"bg-slate-700":"bg-gray-100"} rounded-lg`,children:[y.jsx("input",{type:"text",placeholder:"Search users...",value:U,onChange:H=>z(H.target.value),className:`w-full px-4 py-3 bg-transparent ${i?"text-white placeholder-slate-400":"text-slate-800 placeholder-slate-500"} focus:outline-none`}),y.jsx(Ua,{className:`absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 ${i?"text-slate-400":"text-slate-500"}`})]}),y.jsx("div",{className:"max-h-60 overflow-y-auto",children:xe.length>0?xe.map(H=>y.jsxs(ae.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{r({id:H.id,name:H.name,type:H.type,location:H.location,distance:H.distance,online:H.online,avatar:H.avatar,lastMessage:"Start a conversation...",time:"now",unread:0}),j(!1),z("")},className:`flex items-center space-x-3 p-3 rounded-lg cursor-pointer transition-all duration-200 ${i?"hover:bg-slate-700":"hover:bg-gray-50"}`,children:[y.jsx("div",{className:`w-12 h-12 rounded-full ${i?"bg-slate-600":"bg-gray-300"} flex items-center justify-center text-2xl`,children:H.type==="farmer"?"":H.type==="buyer"?"":H.type==="transporter"?"":""}),y.jsxs("div",{className:"flex-1",children:[y.jsx("h4",{className:`font-semibold ${i?"text-white":"text-slate-800"}`,children:H.name}),y.jsxs("p",{className:`text-sm ${i?"text-slate-400":"text-slate-600"}`,children:[H.type.charAt(0).toUpperCase()+H.type.slice(1),"  ",H.location]})]}),y.jsx("div",{className:`w-3 h-3 rounded-full ${H.online?"bg-green-500":"bg-gray-400"}`})]},H.id)):y.jsx("div",{className:"text-center py-8",children:y.jsx("p",{className:`text-lg font-medium ${i?"text-slate-300":"text-slate-600"}`,children:"No farmer, buyer, transporter or any service provider yet"})})})]})})})]})]})}function v9(){return y.jsx(lR,{children:y.jsxs(tR,{children:[y.jsx(Eh,{path:"/",element:y.jsx(yR,{})}),y.jsx(Eh,{path:"/weather",element:y.jsx(oV,{})}),y.jsx(Eh,{path:"/chat",element:y.jsx(y9,{})})]})})}uC.createRoot(document.getElementById("root")).render(y.jsx(U1.StrictMode,{children:y.jsx(v9,{})}));
