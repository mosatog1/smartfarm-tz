function QA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function O1(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var yp={exports:{}},Hl={},vp={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l_;function XA(){if(l_)return Ve;l_=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),w=Symbol.iterator;function T($){return $===null||typeof $!="object"?null:($=w&&$[w]||$["@@iterator"],typeof $=="function"?$:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},V=Object.assign,O={};function R($,ee,ye){this.props=$,this.context=ee,this.refs=O,this.updater=ye||C}R.prototype.isReactComponent={},R.prototype.setState=function($,ee){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,ee,"setState")},R.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function L(){}L.prototype=R.prototype;function U($,ee,ye){this.props=$,this.context=ee,this.refs=O,this.updater=ye||C}var z=U.prototype=new L;z.constructor=U,V(z,R.prototype),z.isPureReactComponent=!0;var K=Array.isArray,Q=Object.prototype.hasOwnProperty,Y={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function S($,ee,ye){var Pe,Ne={},Le=null,ze=null;if(ee!=null)for(Pe in ee.ref!==void 0&&(ze=ee.ref),ee.key!==void 0&&(Le=""+ee.key),ee)Q.call(ee,Pe)&&!N.hasOwnProperty(Pe)&&(Ne[Pe]=ee[Pe]);var He=arguments.length-2;if(He===1)Ne.children=ye;else if(1<He){for(var Ge=Array(He),Nt=0;Nt<He;Nt++)Ge[Nt]=arguments[Nt+2];Ne.children=Ge}if($&&$.defaultProps)for(Pe in He=$.defaultProps,He)Ne[Pe]===void 0&&(Ne[Pe]=He[Pe]);return{$$typeof:t,type:$,key:Le,ref:ze,props:Ne,_owner:Y.current}}function A($,ee){return{$$typeof:t,type:$.type,key:ee,ref:$.ref,props:$.props,_owner:$._owner}}function b($){return typeof $=="object"&&$!==null&&$.$$typeof===t}function D($){var ee={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(ye){return ee[ye]})}var F=/\/+/g;function P($,ee){return typeof $=="object"&&$!==null&&$.key!=null?D(""+$.key):ee.toString(36)}function Ae($,ee,ye,Pe,Ne){var Le=typeof $;(Le==="undefined"||Le==="boolean")&&($=null);var ze=!1;if($===null)ze=!0;else switch(Le){case"string":case"number":ze=!0;break;case"object":switch($.$$typeof){case t:case e:ze=!0}}if(ze)return ze=$,Ne=Ne(ze),$=Pe===""?"."+P(ze,0):Pe,K(Ne)?(ye="",$!=null&&(ye=$.replace(F,"$&/")+"/"),Ae(Ne,ee,ye,"",function(Nt){return Nt})):Ne!=null&&(b(Ne)&&(Ne=A(Ne,ye+(!Ne.key||ze&&ze.key===Ne.key?"":(""+Ne.key).replace(F,"$&/")+"/")+$)),ee.push(Ne)),1;if(ze=0,Pe=Pe===""?".":Pe+":",K($))for(var He=0;He<$.length;He++){Le=$[He];var Ge=Pe+P(Le,He);ze+=Ae(Le,ee,ye,Ge,Ne)}else if(Ge=T($),typeof Ge=="function")for($=Ge.call($),He=0;!(Le=$.next()).done;)Le=Le.value,Ge=Pe+P(Le,He++),ze+=Ae(Le,ee,ye,Ge,Ne);else if(Le==="object")throw ee=String($),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return ze}function $e($,ee,ye){if($==null)return $;var Pe=[],Ne=0;return Ae($,Pe,"","",function(Le){return ee.call(ye,Le,Ne++)}),Pe}function It($){if($._status===-1){var ee=$._result;ee=ee(),ee.then(function(ye){($._status===0||$._status===-1)&&($._status=1,$._result=ye)},function(ye){($._status===0||$._status===-1)&&($._status=2,$._result=ye)}),$._status===-1&&($._status=0,$._result=ee)}if($._status===1)return $._result.default;throw $._result}var Ie={current:null},J={transition:null},le={ReactCurrentDispatcher:Ie,ReactCurrentBatchConfig:J,ReactCurrentOwner:Y};function oe(){throw Error("act(...) is not supported in production builds of React.")}return Ve.Children={map:$e,forEach:function($,ee,ye){$e($,function(){ee.apply(this,arguments)},ye)},count:function($){var ee=0;return $e($,function(){ee++}),ee},toArray:function($){return $e($,function(ee){return ee})||[]},only:function($){if(!b($))throw Error("React.Children.only expected to receive a single React element child.");return $}},Ve.Component=R,Ve.Fragment=n,Ve.Profiler=i,Ve.PureComponent=U,Ve.StrictMode=r,Ve.Suspense=f,Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=le,Ve.act=oe,Ve.cloneElement=function($,ee,ye){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var Pe=V({},$.props),Ne=$.key,Le=$.ref,ze=$._owner;if(ee!=null){if(ee.ref!==void 0&&(Le=ee.ref,ze=Y.current),ee.key!==void 0&&(Ne=""+ee.key),$.type&&$.type.defaultProps)var He=$.type.defaultProps;for(Ge in ee)Q.call(ee,Ge)&&!N.hasOwnProperty(Ge)&&(Pe[Ge]=ee[Ge]===void 0&&He!==void 0?He[Ge]:ee[Ge])}var Ge=arguments.length-2;if(Ge===1)Pe.children=ye;else if(1<Ge){He=Array(Ge);for(var Nt=0;Nt<Ge;Nt++)He[Nt]=arguments[Nt+2];Pe.children=He}return{$$typeof:t,type:$.type,key:Ne,ref:Le,props:Pe,_owner:ze}},Ve.createContext=function($){return $={$$typeof:l,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:a,_context:$},$.Consumer=$},Ve.createElement=S,Ve.createFactory=function($){var ee=S.bind(null,$);return ee.type=$,ee},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function($){return{$$typeof:h,render:$}},Ve.isValidElement=b,Ve.lazy=function($){return{$$typeof:g,_payload:{_status:-1,_result:$},_init:It}},Ve.memo=function($,ee){return{$$typeof:p,type:$,compare:ee===void 0?null:ee}},Ve.startTransition=function($){var ee=J.transition;J.transition={};try{$()}finally{J.transition=ee}},Ve.unstable_act=oe,Ve.useCallback=function($,ee){return Ie.current.useCallback($,ee)},Ve.useContext=function($){return Ie.current.useContext($)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function($){return Ie.current.useDeferredValue($)},Ve.useEffect=function($,ee){return Ie.current.useEffect($,ee)},Ve.useId=function(){return Ie.current.useId()},Ve.useImperativeHandle=function($,ee,ye){return Ie.current.useImperativeHandle($,ee,ye)},Ve.useInsertionEffect=function($,ee){return Ie.current.useInsertionEffect($,ee)},Ve.useLayoutEffect=function($,ee){return Ie.current.useLayoutEffect($,ee)},Ve.useMemo=function($,ee){return Ie.current.useMemo($,ee)},Ve.useReducer=function($,ee,ye){return Ie.current.useReducer($,ee,ye)},Ve.useRef=function($){return Ie.current.useRef($)},Ve.useState=function($){return Ie.current.useState($)},Ve.useSyncExternalStore=function($,ee,ye){return Ie.current.useSyncExternalStore($,ee,ye)},Ve.useTransition=function(){return Ie.current.useTransition()},Ve.version="18.3.1",Ve}var u_;function ig(){return u_||(u_=1,vp.exports=XA()),vp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c_;function YA(){if(c_)return Hl;c_=1;var t=ig(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function l(h,f,p){var g,w={},T=null,C=null;p!==void 0&&(T=""+p),f.key!==void 0&&(T=""+f.key),f.ref!==void 0&&(C=f.ref);for(g in f)r.call(f,g)&&!a.hasOwnProperty(g)&&(w[g]=f[g]);if(h&&h.defaultProps)for(g in f=h.defaultProps,f)w[g]===void 0&&(w[g]=f[g]);return{$$typeof:e,type:h,key:T,ref:C,props:w,_owner:i.current}}return Hl.Fragment=n,Hl.jsx=l,Hl.jsxs=l,Hl}var h_;function JA(){return h_||(h_=1,yp.exports=YA()),yp.exports}var _=JA(),M=ig();const j1=O1(M),ZA=QA({__proto__:null,default:j1},[M]);var oh={},_p={exports:{}},gn={},wp={exports:{}},xp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d_;function eC(){return d_||(d_=1,function(t){function e(J,le){var oe=J.length;J.push(le);e:for(;0<oe;){var $=oe-1>>>1,ee=J[$];if(0<i(ee,le))J[$]=le,J[oe]=ee,oe=$;else break e}}function n(J){return J.length===0?null:J[0]}function r(J){if(J.length===0)return null;var le=J[0],oe=J.pop();if(oe!==le){J[0]=oe;e:for(var $=0,ee=J.length,ye=ee>>>1;$<ye;){var Pe=2*($+1)-1,Ne=J[Pe],Le=Pe+1,ze=J[Le];if(0>i(Ne,oe))Le<ee&&0>i(ze,Ne)?(J[$]=ze,J[Le]=oe,$=Le):(J[$]=Ne,J[Pe]=oe,$=Pe);else if(Le<ee&&0>i(ze,oe))J[$]=ze,J[Le]=oe,$=Le;else break e}}return le}function i(J,le){var oe=J.sortIndex-le.sortIndex;return oe!==0?oe:J.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var f=[],p=[],g=1,w=null,T=3,C=!1,V=!1,O=!1,R=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(J){for(var le=n(p);le!==null;){if(le.callback===null)r(p);else if(le.startTime<=J)r(p),le.sortIndex=le.expirationTime,e(f,le);else break;le=n(p)}}function K(J){if(O=!1,z(J),!V)if(n(f)!==null)V=!0,It(Q);else{var le=n(p);le!==null&&Ie(K,le.startTime-J)}}function Q(J,le){V=!1,O&&(O=!1,L(S),S=-1),C=!0;var oe=T;try{for(z(le),w=n(f);w!==null&&(!(w.expirationTime>le)||J&&!D());){var $=w.callback;if(typeof $=="function"){w.callback=null,T=w.priorityLevel;var ee=$(w.expirationTime<=le);le=t.unstable_now(),typeof ee=="function"?w.callback=ee:w===n(f)&&r(f),z(le)}else r(f);w=n(f)}if(w!==null)var ye=!0;else{var Pe=n(p);Pe!==null&&Ie(K,Pe.startTime-le),ye=!1}return ye}finally{w=null,T=oe,C=!1}}var Y=!1,N=null,S=-1,A=5,b=-1;function D(){return!(t.unstable_now()-b<A)}function F(){if(N!==null){var J=t.unstable_now();b=J;var le=!0;try{le=N(!0,J)}finally{le?P():(Y=!1,N=null)}}else Y=!1}var P;if(typeof U=="function")P=function(){U(F)};else if(typeof MessageChannel<"u"){var Ae=new MessageChannel,$e=Ae.port2;Ae.port1.onmessage=F,P=function(){$e.postMessage(null)}}else P=function(){R(F,0)};function It(J){N=J,Y||(Y=!0,P())}function Ie(J,le){S=R(function(){J(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(J){J.callback=null},t.unstable_continueExecution=function(){V||C||(V=!0,It(Q))},t.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<J?Math.floor(1e3/J):5},t.unstable_getCurrentPriorityLevel=function(){return T},t.unstable_getFirstCallbackNode=function(){return n(f)},t.unstable_next=function(J){switch(T){case 1:case 2:case 3:var le=3;break;default:le=T}var oe=T;T=le;try{return J()}finally{T=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(J,le){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var oe=T;T=J;try{return le()}finally{T=oe}},t.unstable_scheduleCallback=function(J,le,oe){var $=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?$+oe:$):oe=$,J){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=oe+ee,J={id:g++,callback:le,priorityLevel:J,startTime:oe,expirationTime:ee,sortIndex:-1},oe>$?(J.sortIndex=oe,e(p,J),n(f)===null&&J===n(p)&&(O?(L(S),S=-1):O=!0,Ie(K,oe-$))):(J.sortIndex=ee,e(f,J),V||C||(V=!0,It(Q))),J},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(J){var le=T;return function(){var oe=T;T=le;try{return J.apply(this,arguments)}finally{T=oe}}}}(xp)),xp}var f_;function tC(){return f_||(f_=1,wp.exports=eC()),wp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p_;function nC(){if(p_)return gn;p_=1;var t=ig(),e=tC();function n(s){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function a(s,o){l(s,o),l(s+"Capture",o)}function l(s,o){for(i[s]=o,s=0;s<o.length;s++)r.add(o[s])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),f=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},w={};function T(s){return f.call(w,s)?!0:f.call(g,s)?!1:p.test(s)?w[s]=!0:(g[s]=!0,!1)}function C(s,o,u,d){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return d?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function V(s,o,u,d){if(o===null||typeof o>"u"||C(s,o,u,d))return!0;if(d)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function O(s,o,u,d,m,v,E){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=d,this.attributeNamespace=m,this.mustUseProperty=u,this.propertyName=s,this.type=o,this.sanitizeURL=v,this.removeEmptyString=E}var R={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){R[s]=new O(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var o=s[0];R[o]=new O(o,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){R[s]=new O(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){R[s]=new O(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){R[s]=new O(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){R[s]=new O(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){R[s]=new O(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){R[s]=new O(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){R[s]=new O(s,5,!1,s.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function U(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var o=s.replace(L,U);R[o]=new O(o,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var o=s.replace(L,U);R[o]=new O(o,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var o=s.replace(L,U);R[o]=new O(o,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){R[s]=new O(s,1,!1,s.toLowerCase(),null,!1,!1)}),R.xlinkHref=new O("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){R[s]=new O(s,1,!1,s.toLowerCase(),null,!0,!0)});function z(s,o,u,d){var m=R.hasOwnProperty(o)?R[o]:null;(m!==null?m.type!==0:d||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(V(o,u,m,d)&&(u=null),d||m===null?T(o)&&(u===null?s.removeAttribute(o):s.setAttribute(o,""+u)):m.mustUseProperty?s[m.propertyName]=u===null?m.type===3?!1:"":u:(o=m.attributeName,d=m.attributeNamespace,u===null?s.removeAttribute(o):(m=m.type,u=m===3||m===4&&u===!0?"":""+u,d?s.setAttributeNS(d,o,u):s.setAttribute(o,u))))}var K=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Q=Symbol.for("react.element"),Y=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),D=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),Ae=Symbol.for("react.suspense_list"),$e=Symbol.for("react.memo"),It=Symbol.for("react.lazy"),Ie=Symbol.for("react.offscreen"),J=Symbol.iterator;function le(s){return s===null||typeof s!="object"?null:(s=J&&s[J]||s["@@iterator"],typeof s=="function"?s:null)}var oe=Object.assign,$;function ee(s){if($===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);$=o&&o[1]||""}return`
`+$+s}var ye=!1;function Pe(s,o){if(!s||ye)return"";ye=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(G){var d=G}Reflect.construct(s,[],o)}else{try{o.call()}catch(G){d=G}s.call(o.prototype)}else{try{throw Error()}catch(G){d=G}s()}}catch(G){if(G&&d&&typeof G.stack=="string"){for(var m=G.stack.split(`
`),v=d.stack.split(`
`),E=m.length-1,k=v.length-1;1<=E&&0<=k&&m[E]!==v[k];)k--;for(;1<=E&&0<=k;E--,k--)if(m[E]!==v[k]){if(E!==1||k!==1)do if(E--,k--,0>k||m[E]!==v[k]){var j=`
`+m[E].replace(" at new "," at ");return s.displayName&&j.includes("<anonymous>")&&(j=j.replace("<anonymous>",s.displayName)),j}while(1<=E&&0<=k);break}}}finally{ye=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?ee(s):""}function Ne(s){switch(s.tag){case 5:return ee(s.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return s=Pe(s.type,!1),s;case 11:return s=Pe(s.type.render,!1),s;case 1:return s=Pe(s.type,!0),s;default:return""}}function Le(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case N:return"Fragment";case Y:return"Portal";case A:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case Ae:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case D:return(s.displayName||"Context")+".Consumer";case b:return(s._context.displayName||"Context")+".Provider";case F:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case $e:return o=s.displayName||null,o!==null?o:Le(s.type)||"Memo";case It:o=s._payload,s=s._init;try{return Le(s(o))}catch{}}return null}function ze(s){var o=s.type;switch(s.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=o.render,s=s.displayName||s.name||"",o.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Le(o);case 8:return o===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function He(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ge(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Nt(s){var o=Ge(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),d=""+s[o];if(!s.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var m=u.get,v=u.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return m.call(this)},set:function(E){d=""+E,v.call(this,E)}}),Object.defineProperty(s,o,{enumerable:u.enumerable}),{getValue:function(){return d},setValue:function(E){d=""+E},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function Mr(s){s._valueTracker||(s._valueTracker=Nt(s))}function _o(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var u=o.getValue(),d="";return s&&(d=Ge(s)?s.checked?"true":"false":s.value),s=d,s!==u?(o.setValue(s),!0):!1}function gs(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function gi(s,o){var u=o.checked;return oe({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function wo(s,o){var u=o.defaultValue==null?"":o.defaultValue,d=o.checked!=null?o.checked:o.defaultChecked;u=He(o.value!=null?o.value:u),s._wrapperState={initialChecked:d,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Xa(s,o){o=o.checked,o!=null&&z(s,"checked",o,!1)}function Ya(s,o){Xa(s,o);var u=He(o.value),d=o.type;if(u!=null)d==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(d==="submit"||d==="reset"){s.removeAttribute("value");return}o.hasOwnProperty("value")?xo(s,o.type,u):o.hasOwnProperty("defaultValue")&&xo(s,o.type,He(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(s.defaultChecked=!!o.defaultChecked)}function Wu(s,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var d=o.type;if(!(d!=="submit"&&d!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+s._wrapperState.initialValue,u||o===s.value||(s.value=o),s.defaultValue=o}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function xo(s,o,u){(o!=="number"||gs(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var Fr=Array.isArray;function Ur(s,o,u,d){if(s=s.options,o){o={};for(var m=0;m<u.length;m++)o["$"+u[m]]=!0;for(u=0;u<s.length;u++)m=o.hasOwnProperty("$"+s[u].value),s[u].selected!==m&&(s[u].selected=m),m&&d&&(s[u].defaultSelected=!0)}else{for(u=""+He(u),o=null,m=0;m<s.length;m++){if(s[m].value===u){s[m].selected=!0,d&&(s[m].defaultSelected=!0);return}o!==null||s[m].disabled||(o=s[m])}o!==null&&(o.selected=!0)}}function Ja(s,o){if(o.dangerouslySetInnerHTML!=null)throw Error(n(91));return oe({},o,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function To(s,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(n(92));if(Fr(u)){if(1<u.length)throw Error(n(93));u=u[0]}o=u}o==null&&(o=""),u=o}s._wrapperState={initialValue:He(u)}}function Eo(s,o){var u=He(o.value),d=He(o.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),o.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),d!=null&&(s.defaultValue=""+d)}function Za(s){var o=s.textContent;o===s._wrapperState.initialValue&&o!==""&&o!==null&&(s.value=o)}function bt(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function At(s,o){return s==null||s==="http://www.w3.org/1999/xhtml"?bt(o):s==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Br,el=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,d,m){MSApp.execUnsafeLocalFunction(function(){return s(o,u,d,m)})}:s}(function(s,o){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=o;else{for(Br=Br||document.createElement("div"),Br.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Br.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;o.firstChild;)s.appendChild(o.firstChild)}});function ys(s,o){if(o){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=o;return}}s.textContent=o}var yi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vi=["Webkit","ms","Moz","O"];Object.keys(yi).forEach(function(s){vi.forEach(function(o){o=o+s.charAt(0).toUpperCase()+s.substring(1),yi[o]=yi[s]})});function tl(s,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||yi.hasOwnProperty(s)&&yi[s]?(""+o).trim():o+"px"}function nl(s,o){s=s.style;for(var u in o)if(o.hasOwnProperty(u)){var d=u.indexOf("--")===0,m=tl(u,o[u],d);u==="float"&&(u="cssFloat"),d?s.setProperty(u,m):s[u]=m}}var rl=oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sl(s,o){if(o){if(rl[s]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(n(137,s));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(n(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(n(61))}if(o.style!=null&&typeof o.style!="object")throw Error(n(62))}}function il(s,o){if(s.indexOf("-")===-1)return typeof o.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _i=null;function So(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Io=null,Pn=null,pr=null;function bo(s){if(s=Rl(s)){if(typeof Io!="function")throw Error(n(280));var o=s.stateNode;o&&(o=xc(o),Io(s.stateNode,s.type,o))}}function mr(s){Pn?pr?pr.push(s):pr=[s]:Pn=s}function ol(){if(Pn){var s=Pn,o=pr;if(pr=Pn=null,bo(s),o)for(s=0;s<o.length;s++)bo(o[s])}}function wi(s,o){return s(o)}function al(){}var $r=!1;function ll(s,o,u){if($r)return s(o,u);$r=!0;try{return wi(s,o,u)}finally{$r=!1,(Pn!==null||pr!==null)&&(al(),ol())}}function ft(s,o){var u=s.stateNode;if(u===null)return null;var d=xc(u);if(d===null)return null;u=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(n(231,o,typeof u));return u}var Ao=!1;if(h)try{var qn={};Object.defineProperty(qn,"passive",{get:function(){Ao=!0}}),window.addEventListener("test",qn,qn),window.removeEventListener("test",qn,qn)}catch{Ao=!1}function xi(s,o,u,d,m,v,E,k,j){var G=Array.prototype.slice.call(arguments,3);try{o.apply(u,G)}catch(re){this.onError(re)}}var Ti=!1,Co=null,Kn=!1,ul=null,Hd={onError:function(s){Ti=!0,Co=s}};function Ro(s,o,u,d,m,v,E,k,j){Ti=!1,Co=null,xi.apply(Hd,arguments)}function qu(s,o,u,d,m,v,E,k,j){if(Ro.apply(this,arguments),Ti){if(Ti){var G=Co;Ti=!1,Co=null}else throw Error(n(198));Kn||(Kn=!0,ul=G)}}function Gn(s){var o=s,u=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(u=o.return),s=o.return;while(s)}return o.tag===3?u:null}function Ei(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function Qn(s){if(Gn(s)!==s)throw Error(n(188))}function Ku(s){var o=s.alternate;if(!o){if(o=Gn(s),o===null)throw Error(n(188));return o!==s?null:s}for(var u=s,d=o;;){var m=u.return;if(m===null)break;var v=m.alternate;if(v===null){if(d=m.return,d!==null){u=d;continue}break}if(m.child===v.child){for(v=m.child;v;){if(v===u)return Qn(m),s;if(v===d)return Qn(m),o;v=v.sibling}throw Error(n(188))}if(u.return!==d.return)u=m,d=v;else{for(var E=!1,k=m.child;k;){if(k===u){E=!0,u=m,d=v;break}if(k===d){E=!0,d=m,u=v;break}k=k.sibling}if(!E){for(k=v.child;k;){if(k===u){E=!0,u=v,d=m;break}if(k===d){E=!0,d=v,u=m;break}k=k.sibling}if(!E)throw Error(n(189))}}if(u.alternate!==d)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?s:o}function cl(s){return s=Ku(s),s!==null?Po(s):null}function Po(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var o=Po(s);if(o!==null)return o;s=s.sibling}return null}var ko=e.unstable_scheduleCallback,hl=e.unstable_cancelCallback,Gu=e.unstable_shouldYield,Wd=e.unstable_requestPaint,Qe=e.unstable_now,Qu=e.unstable_getCurrentPriorityLevel,Si=e.unstable_ImmediatePriority,vs=e.unstable_UserBlockingPriority,kn=e.unstable_NormalPriority,dl=e.unstable_LowPriority,Xu=e.unstable_IdlePriority,Ii=null,xn=null;function Yu(s){if(xn&&typeof xn.onCommitFiberRoot=="function")try{xn.onCommitFiberRoot(Ii,s,void 0,(s.current.flags&128)===128)}catch{}}var tn=Math.clz32?Math.clz32:Zu,fl=Math.log,Ju=Math.LN2;function Zu(s){return s>>>=0,s===0?32:31-(fl(s)/Ju|0)|0}var No=64,Vo=4194304;function _s(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function bi(s,o){var u=s.pendingLanes;if(u===0)return 0;var d=0,m=s.suspendedLanes,v=s.pingedLanes,E=u&268435455;if(E!==0){var k=E&~m;k!==0?d=_s(k):(v&=E,v!==0&&(d=_s(v)))}else E=u&~m,E!==0?d=_s(E):v!==0&&(d=_s(v));if(d===0)return 0;if(o!==0&&o!==d&&(o&m)===0&&(m=d&-d,v=o&-o,m>=v||m===16&&(v&4194240)!==0))return o;if((d&4)!==0&&(d|=u&16),o=s.entangledLanes,o!==0)for(s=s.entanglements,o&=d;0<o;)u=31-tn(o),m=1<<u,d|=s[u],o&=~m;return d}function qd(s,o){switch(s){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zr(s,o){for(var u=s.suspendedLanes,d=s.pingedLanes,m=s.expirationTimes,v=s.pendingLanes;0<v;){var E=31-tn(v),k=1<<E,j=m[E];j===-1?((k&u)===0||(k&d)!==0)&&(m[E]=qd(k,o)):j<=o&&(s.expiredLanes|=k),v&=~k}}function Tn(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Ai(){var s=No;return No<<=1,(No&4194240)===0&&(No=64),s}function ws(s){for(var o=[],u=0;31>u;u++)o.push(s);return o}function xs(s,o,u){s.pendingLanes|=o,o!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,o=31-tn(o),s[o]=u}function Ke(s,o){var u=s.pendingLanes&~o;s.pendingLanes=o,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=o,s.mutableReadLanes&=o,s.entangledLanes&=o,o=s.entanglements;var d=s.eventTimes;for(s=s.expirationTimes;0<u;){var m=31-tn(u),v=1<<m;o[m]=0,d[m]=-1,s[m]=-1,u&=~v}}function Ts(s,o){var u=s.entangledLanes|=o;for(s=s.entanglements;u;){var d=31-tn(u),m=1<<d;m&o|s[d]&o&&(s[d]|=o),u&=~m}}var je=0;function Es(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var ec,Do,tc,nc,rc,pl=!1,gr=[],Mt=null,Xn=null,Yn=null,Ss=new Map,Nn=new Map,yr=[],Kd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function sc(s,o){switch(s){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":Xn=null;break;case"mouseover":case"mouseout":Yn=null;break;case"pointerover":case"pointerout":Ss.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nn.delete(o.pointerId)}}function un(s,o,u,d,m,v){return s===null||s.nativeEvent!==v?(s={blockedOn:o,domEventName:u,eventSystemFlags:d,nativeEvent:v,targetContainers:[m]},o!==null&&(o=Rl(o),o!==null&&Do(o)),s):(s.eventSystemFlags|=d,o=s.targetContainers,m!==null&&o.indexOf(m)===-1&&o.push(m),s)}function Gd(s,o,u,d,m){switch(o){case"focusin":return Mt=un(Mt,s,o,u,d,m),!0;case"dragenter":return Xn=un(Xn,s,o,u,d,m),!0;case"mouseover":return Yn=un(Yn,s,o,u,d,m),!0;case"pointerover":var v=m.pointerId;return Ss.set(v,un(Ss.get(v)||null,s,o,u,d,m)),!0;case"gotpointercapture":return v=m.pointerId,Nn.set(v,un(Nn.get(v)||null,s,o,u,d,m)),!0}return!1}function ic(s){var o=Ni(s.target);if(o!==null){var u=Gn(o);if(u!==null){if(o=u.tag,o===13){if(o=Ei(u),o!==null){s.blockedOn=o,rc(s.priority,function(){tc(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Hr(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var u=Oo(s.domEventName,s.eventSystemFlags,o[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var d=new u.constructor(u.type,u);_i=d,u.target.dispatchEvent(d),_i=null}else return o=Rl(u),o!==null&&Do(o),s.blockedOn=u,!1;o.shift()}return!0}function Ci(s,o,u){Hr(s)&&u.delete(o)}function oc(){pl=!1,Mt!==null&&Hr(Mt)&&(Mt=null),Xn!==null&&Hr(Xn)&&(Xn=null),Yn!==null&&Hr(Yn)&&(Yn=null),Ss.forEach(Ci),Nn.forEach(Ci)}function Jn(s,o){s.blockedOn===o&&(s.blockedOn=null,pl||(pl=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,oc)))}function Zn(s){function o(m){return Jn(m,s)}if(0<gr.length){Jn(gr[0],s);for(var u=1;u<gr.length;u++){var d=gr[u];d.blockedOn===s&&(d.blockedOn=null)}}for(Mt!==null&&Jn(Mt,s),Xn!==null&&Jn(Xn,s),Yn!==null&&Jn(Yn,s),Ss.forEach(o),Nn.forEach(o),u=0;u<yr.length;u++)d=yr[u],d.blockedOn===s&&(d.blockedOn=null);for(;0<yr.length&&(u=yr[0],u.blockedOn===null);)ic(u),u.blockedOn===null&&yr.shift()}var Wr=K.ReactCurrentBatchConfig,Is=!0;function tt(s,o,u,d){var m=je,v=Wr.transition;Wr.transition=null;try{je=1,ml(s,o,u,d)}finally{je=m,Wr.transition=v}}function Qd(s,o,u,d){var m=je,v=Wr.transition;Wr.transition=null;try{je=4,ml(s,o,u,d)}finally{je=m,Wr.transition=v}}function ml(s,o,u,d){if(Is){var m=Oo(s,o,u,d);if(m===null)af(s,o,d,Ri,u),sc(s,d);else if(Gd(m,s,o,u,d))d.stopPropagation();else if(sc(s,d),o&4&&-1<Kd.indexOf(s)){for(;m!==null;){var v=Rl(m);if(v!==null&&ec(v),v=Oo(s,o,u,d),v===null&&af(s,o,d,Ri,u),v===m)break;m=v}m!==null&&d.stopPropagation()}else af(s,o,d,null,u)}}var Ri=null;function Oo(s,o,u,d){if(Ri=null,s=So(d),s=Ni(s),s!==null)if(o=Gn(s),o===null)s=null;else if(u=o.tag,u===13){if(s=Ei(o),s!==null)return s;s=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null);return Ri=s,null}function gl(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qu()){case Si:return 1;case vs:return 4;case kn:case dl:return 16;case Xu:return 536870912;default:return 16}default:return 16}}var En=null,jo=null,cn=null;function yl(){if(cn)return cn;var s,o=jo,u=o.length,d,m="value"in En?En.value:En.textContent,v=m.length;for(s=0;s<u&&o[s]===m[s];s++);var E=u-s;for(d=1;d<=E&&o[u-d]===m[v-d];d++);return cn=m.slice(s,1<d?1-d:void 0)}function Lo(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function vr(){return!0}function vl(){return!1}function Ft(s){function o(u,d,m,v,E){this._reactName=u,this._targetInst=m,this.type=d,this.nativeEvent=v,this.target=E,this.currentTarget=null;for(var k in s)s.hasOwnProperty(k)&&(u=s[k],this[k]=u?u(v):v[k]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?vr:vl,this.isPropagationStopped=vl,this}return oe(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=vr)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=vr)},persist:function(){},isPersistent:vr}),o}var er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mo=Ft(er),_r=oe({},er,{view:0,detail:0}),Xd=Ft(_r),Fo,qr,bs,Pi=oe({},_r,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==bs&&(bs&&s.type==="mousemove"?(Fo=s.screenX-bs.screenX,qr=s.screenY-bs.screenY):qr=Fo=0,bs=s),Fo)},movementY:function(s){return"movementY"in s?s.movementY:qr}}),Uo=Ft(Pi),_l=oe({},Pi,{dataTransfer:0}),ac=Ft(_l),Bo=oe({},_r,{relatedTarget:0}),$o=Ft(Bo),lc=oe({},er,{animationName:0,elapsedTime:0,pseudoElement:0}),Kr=Ft(lc),uc=oe({},er,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),cc=Ft(uc),hc=oe({},er,{data:0}),wl=Ft(hc),zo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fc(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=dc[s])?!!o[s]:!1}function wr(){return fc}var c=oe({},_r,{key:function(s){if(s.key){var o=zo[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=Lo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?nn[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wr,charCode:function(s){return s.type==="keypress"?Lo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Lo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),y=Ft(c),x=oe({},Pi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),I=Ft(x),H=oe({},_r,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wr}),X=Ft(H),ae=oe({},er,{propertyName:0,elapsedTime:0,pseudoElement:0}),qe=Ft(ae),Ct=oe({},Pi,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Me=Ft(Ct),Vt=[9,13,27,32],yt=h&&"CompositionEvent"in window,Vn=null;h&&"documentMode"in document&&(Vn=document.documentMode);var Sn=h&&"TextEvent"in window&&!Vn,ki=h&&(!yt||Vn&&8<Vn&&11>=Vn),Ho=" ",n0=!1;function r0(s,o){switch(s){case"keyup":return Vt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function s0(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Wo=!1;function qb(s,o){switch(s){case"compositionend":return s0(o);case"keypress":return o.which!==32?null:(n0=!0,Ho);case"textInput":return s=o.data,s===Ho&&n0?null:s;default:return null}}function Kb(s,o){if(Wo)return s==="compositionend"||!yt&&r0(s,o)?(s=yl(),cn=jo=En=null,Wo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ki&&o.locale!=="ko"?null:o.data;default:return null}}var Gb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function i0(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!Gb[s.type]:o==="textarea"}function o0(s,o,u,d){mr(d),o=vc(o,"onChange"),0<o.length&&(u=new Mo("onChange","change",null,u,d),s.push({event:u,listeners:o}))}var xl=null,Tl=null;function Qb(s){S0(s,0)}function pc(s){var o=Xo(s);if(_o(o))return s}function Xb(s,o){if(s==="change")return o}var a0=!1;if(h){var Yd;if(h){var Jd="oninput"in document;if(!Jd){var l0=document.createElement("div");l0.setAttribute("oninput","return;"),Jd=typeof l0.oninput=="function"}Yd=Jd}else Yd=!1;a0=Yd&&(!document.documentMode||9<document.documentMode)}function u0(){xl&&(xl.detachEvent("onpropertychange",c0),Tl=xl=null)}function c0(s){if(s.propertyName==="value"&&pc(Tl)){var o=[];o0(o,Tl,s,So(s)),ll(Qb,o)}}function Yb(s,o,u){s==="focusin"?(u0(),xl=o,Tl=u,xl.attachEvent("onpropertychange",c0)):s==="focusout"&&u0()}function Jb(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return pc(Tl)}function Zb(s,o){if(s==="click")return pc(o)}function eA(s,o){if(s==="input"||s==="change")return pc(o)}function tA(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var tr=typeof Object.is=="function"?Object.is:tA;function El(s,o){if(tr(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var u=Object.keys(s),d=Object.keys(o);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var m=u[d];if(!f.call(o,m)||!tr(s[m],o[m]))return!1}return!0}function h0(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function d0(s,o){var u=h0(s);s=0;for(var d;u;){if(u.nodeType===3){if(d=s+u.textContent.length,s<=o&&d>=o)return{node:u,offset:o-s};s=d}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=h0(u)}}function f0(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?f0(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function p0(){for(var s=window,o=gs();o instanceof s.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)s=o.contentWindow;else break;o=gs(s.document)}return o}function Zd(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}function nA(s){var o=p0(),u=s.focusedElem,d=s.selectionRange;if(o!==u&&u&&u.ownerDocument&&f0(u.ownerDocument.documentElement,u)){if(d!==null&&Zd(u)){if(o=d.start,s=d.end,s===void 0&&(s=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(s,u.value.length);else if(s=(o=u.ownerDocument||document)&&o.defaultView||window,s.getSelection){s=s.getSelection();var m=u.textContent.length,v=Math.min(d.start,m);d=d.end===void 0?v:Math.min(d.end,m),!s.extend&&v>d&&(m=d,d=v,v=m),m=d0(u,v);var E=d0(u,d);m&&E&&(s.rangeCount!==1||s.anchorNode!==m.node||s.anchorOffset!==m.offset||s.focusNode!==E.node||s.focusOffset!==E.offset)&&(o=o.createRange(),o.setStart(m.node,m.offset),s.removeAllRanges(),v>d?(s.addRange(o),s.extend(E.node,E.offset)):(o.setEnd(E.node,E.offset),s.addRange(o)))}}for(o=[],s=u;s=s.parentNode;)s.nodeType===1&&o.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)s=o[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var rA=h&&"documentMode"in document&&11>=document.documentMode,qo=null,ef=null,Sl=null,tf=!1;function m0(s,o,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;tf||qo==null||qo!==gs(d)||(d=qo,"selectionStart"in d&&Zd(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Sl&&El(Sl,d)||(Sl=d,d=vc(ef,"onSelect"),0<d.length&&(o=new Mo("onSelect","select",null,o,u),s.push({event:o,listeners:d}),o.target=qo)))}function mc(s,o){var u={};return u[s.toLowerCase()]=o.toLowerCase(),u["Webkit"+s]="webkit"+o,u["Moz"+s]="moz"+o,u}var Ko={animationend:mc("Animation","AnimationEnd"),animationiteration:mc("Animation","AnimationIteration"),animationstart:mc("Animation","AnimationStart"),transitionend:mc("Transition","TransitionEnd")},nf={},g0={};h&&(g0=document.createElement("div").style,"AnimationEvent"in window||(delete Ko.animationend.animation,delete Ko.animationiteration.animation,delete Ko.animationstart.animation),"TransitionEvent"in window||delete Ko.transitionend.transition);function gc(s){if(nf[s])return nf[s];if(!Ko[s])return s;var o=Ko[s],u;for(u in o)if(o.hasOwnProperty(u)&&u in g0)return nf[s]=o[u];return s}var y0=gc("animationend"),v0=gc("animationiteration"),_0=gc("animationstart"),w0=gc("transitionend"),x0=new Map,T0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function As(s,o){x0.set(s,o),a(o,[s])}for(var rf=0;rf<T0.length;rf++){var sf=T0[rf],sA=sf.toLowerCase(),iA=sf[0].toUpperCase()+sf.slice(1);As(sA,"on"+iA)}As(y0,"onAnimationEnd"),As(v0,"onAnimationIteration"),As(_0,"onAnimationStart"),As("dblclick","onDoubleClick"),As("focusin","onFocus"),As("focusout","onBlur"),As(w0,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Il="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oA=new Set("cancel close invalid load scroll toggle".split(" ").concat(Il));function E0(s,o,u){var d=s.type||"unknown-event";s.currentTarget=u,qu(d,o,void 0,s),s.currentTarget=null}function S0(s,o){o=(o&4)!==0;for(var u=0;u<s.length;u++){var d=s[u],m=d.event;d=d.listeners;e:{var v=void 0;if(o)for(var E=d.length-1;0<=E;E--){var k=d[E],j=k.instance,G=k.currentTarget;if(k=k.listener,j!==v&&m.isPropagationStopped())break e;E0(m,k,G),v=j}else for(E=0;E<d.length;E++){if(k=d[E],j=k.instance,G=k.currentTarget,k=k.listener,j!==v&&m.isPropagationStopped())break e;E0(m,k,G),v=j}}}if(Kn)throw s=ul,Kn=!1,ul=null,s}function Je(s,o){var u=o[ff];u===void 0&&(u=o[ff]=new Set);var d=s+"__bubble";u.has(d)||(I0(o,s,2,!1),u.add(d))}function of(s,o,u){var d=0;o&&(d|=4),I0(u,s,d,o)}var yc="_reactListening"+Math.random().toString(36).slice(2);function bl(s){if(!s[yc]){s[yc]=!0,r.forEach(function(u){u!=="selectionchange"&&(oA.has(u)||of(u,!1,s),of(u,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[yc]||(o[yc]=!0,of("selectionchange",!1,o))}}function I0(s,o,u,d){switch(gl(o)){case 1:var m=tt;break;case 4:m=Qd;break;default:m=ml}u=m.bind(null,o,u,s),m=void 0,!Ao||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(m=!0),d?m!==void 0?s.addEventListener(o,u,{capture:!0,passive:m}):s.addEventListener(o,u,!0):m!==void 0?s.addEventListener(o,u,{passive:m}):s.addEventListener(o,u,!1)}function af(s,o,u,d,m){var v=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var E=d.tag;if(E===3||E===4){var k=d.stateNode.containerInfo;if(k===m||k.nodeType===8&&k.parentNode===m)break;if(E===4)for(E=d.return;E!==null;){var j=E.tag;if((j===3||j===4)&&(j=E.stateNode.containerInfo,j===m||j.nodeType===8&&j.parentNode===m))return;E=E.return}for(;k!==null;){if(E=Ni(k),E===null)return;if(j=E.tag,j===5||j===6){d=v=E;continue e}k=k.parentNode}}d=d.return}ll(function(){var G=v,re=So(u),se=[];e:{var ne=x0.get(s);if(ne!==void 0){var he=Mo,pe=s;switch(s){case"keypress":if(Lo(u)===0)break e;case"keydown":case"keyup":he=y;break;case"focusin":pe="focus",he=$o;break;case"focusout":pe="blur",he=$o;break;case"beforeblur":case"afterblur":he=$o;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Uo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=ac;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=X;break;case y0:case v0:case _0:he=Kr;break;case w0:he=qe;break;case"scroll":he=Xd;break;case"wheel":he=Me;break;case"copy":case"cut":case"paste":he=cc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=I}var me=(o&4)!==0,pt=!me&&s==="scroll",W=me?ne!==null?ne+"Capture":null:ne;me=[];for(var B=G,q;B!==null;){q=B;var ie=q.stateNode;if(q.tag===5&&ie!==null&&(q=ie,W!==null&&(ie=ft(B,W),ie!=null&&me.push(Al(B,ie,q)))),pt)break;B=B.return}0<me.length&&(ne=new he(ne,pe,null,u,re),se.push({event:ne,listeners:me}))}}if((o&7)===0){e:{if(ne=s==="mouseover"||s==="pointerover",he=s==="mouseout"||s==="pointerout",ne&&u!==_i&&(pe=u.relatedTarget||u.fromElement)&&(Ni(pe)||pe[Gr]))break e;if((he||ne)&&(ne=re.window===re?re:(ne=re.ownerDocument)?ne.defaultView||ne.parentWindow:window,he?(pe=u.relatedTarget||u.toElement,he=G,pe=pe?Ni(pe):null,pe!==null&&(pt=Gn(pe),pe!==pt||pe.tag!==5&&pe.tag!==6)&&(pe=null)):(he=null,pe=G),he!==pe)){if(me=Uo,ie="onMouseLeave",W="onMouseEnter",B="mouse",(s==="pointerout"||s==="pointerover")&&(me=I,ie="onPointerLeave",W="onPointerEnter",B="pointer"),pt=he==null?ne:Xo(he),q=pe==null?ne:Xo(pe),ne=new me(ie,B+"leave",he,u,re),ne.target=pt,ne.relatedTarget=q,ie=null,Ni(re)===G&&(me=new me(W,B+"enter",pe,u,re),me.target=q,me.relatedTarget=pt,ie=me),pt=ie,he&&pe)t:{for(me=he,W=pe,B=0,q=me;q;q=Go(q))B++;for(q=0,ie=W;ie;ie=Go(ie))q++;for(;0<B-q;)me=Go(me),B--;for(;0<q-B;)W=Go(W),q--;for(;B--;){if(me===W||W!==null&&me===W.alternate)break t;me=Go(me),W=Go(W)}me=null}else me=null;he!==null&&b0(se,ne,he,me,!1),pe!==null&&pt!==null&&b0(se,pt,pe,me,!0)}}e:{if(ne=G?Xo(G):window,he=ne.nodeName&&ne.nodeName.toLowerCase(),he==="select"||he==="input"&&ne.type==="file")var ge=Xb;else if(i0(ne))if(a0)ge=eA;else{ge=Jb;var _e=Yb}else(he=ne.nodeName)&&he.toLowerCase()==="input"&&(ne.type==="checkbox"||ne.type==="radio")&&(ge=Zb);if(ge&&(ge=ge(s,G))){o0(se,ge,u,re);break e}_e&&_e(s,ne,G),s==="focusout"&&(_e=ne._wrapperState)&&_e.controlled&&ne.type==="number"&&xo(ne,"number",ne.value)}switch(_e=G?Xo(G):window,s){case"focusin":(i0(_e)||_e.contentEditable==="true")&&(qo=_e,ef=G,Sl=null);break;case"focusout":Sl=ef=qo=null;break;case"mousedown":tf=!0;break;case"contextmenu":case"mouseup":case"dragend":tf=!1,m0(se,u,re);break;case"selectionchange":if(rA)break;case"keydown":case"keyup":m0(se,u,re)}var we;if(yt)e:{switch(s){case"compositionstart":var Ee="onCompositionStart";break e;case"compositionend":Ee="onCompositionEnd";break e;case"compositionupdate":Ee="onCompositionUpdate";break e}Ee=void 0}else Wo?r0(s,u)&&(Ee="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Ee="onCompositionStart");Ee&&(ki&&u.locale!=="ko"&&(Wo||Ee!=="onCompositionStart"?Ee==="onCompositionEnd"&&Wo&&(we=yl()):(En=re,jo="value"in En?En.value:En.textContent,Wo=!0)),_e=vc(G,Ee),0<_e.length&&(Ee=new wl(Ee,s,null,u,re),se.push({event:Ee,listeners:_e}),we?Ee.data=we:(we=s0(u),we!==null&&(Ee.data=we)))),(we=Sn?qb(s,u):Kb(s,u))&&(G=vc(G,"onBeforeInput"),0<G.length&&(re=new wl("onBeforeInput","beforeinput",null,u,re),se.push({event:re,listeners:G}),re.data=we))}S0(se,o)})}function Al(s,o,u){return{instance:s,listener:o,currentTarget:u}}function vc(s,o){for(var u=o+"Capture",d=[];s!==null;){var m=s,v=m.stateNode;m.tag===5&&v!==null&&(m=v,v=ft(s,u),v!=null&&d.unshift(Al(s,v,m)),v=ft(s,o),v!=null&&d.push(Al(s,v,m))),s=s.return}return d}function Go(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function b0(s,o,u,d,m){for(var v=o._reactName,E=[];u!==null&&u!==d;){var k=u,j=k.alternate,G=k.stateNode;if(j!==null&&j===d)break;k.tag===5&&G!==null&&(k=G,m?(j=ft(u,v),j!=null&&E.unshift(Al(u,j,k))):m||(j=ft(u,v),j!=null&&E.push(Al(u,j,k)))),u=u.return}E.length!==0&&s.push({event:o,listeners:E})}var aA=/\r\n?/g,lA=/\u0000|\uFFFD/g;function A0(s){return(typeof s=="string"?s:""+s).replace(aA,`
`).replace(lA,"")}function _c(s,o,u){if(o=A0(o),A0(s)!==o&&u)throw Error(n(425))}function wc(){}var lf=null,uf=null;function cf(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var hf=typeof setTimeout=="function"?setTimeout:void 0,uA=typeof clearTimeout=="function"?clearTimeout:void 0,C0=typeof Promise=="function"?Promise:void 0,cA=typeof queueMicrotask=="function"?queueMicrotask:typeof C0<"u"?function(s){return C0.resolve(null).then(s).catch(hA)}:hf;function hA(s){setTimeout(function(){throw s})}function df(s,o){var u=o,d=0;do{var m=u.nextSibling;if(s.removeChild(u),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(d===0){s.removeChild(m),Zn(o);return}d--}else u!=="$"&&u!=="$?"&&u!=="$!"||d++;u=m}while(u);Zn(o)}function Cs(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return s}function R0(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return s;o--}else u==="/$"&&o++}s=s.previousSibling}return null}var Qo=Math.random().toString(36).slice(2),xr="__reactFiber$"+Qo,Cl="__reactProps$"+Qo,Gr="__reactContainer$"+Qo,ff="__reactEvents$"+Qo,dA="__reactListeners$"+Qo,fA="__reactHandles$"+Qo;function Ni(s){var o=s[xr];if(o)return o;for(var u=s.parentNode;u;){if(o=u[Gr]||u[xr]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(s=R0(s);s!==null;){if(u=s[xr])return u;s=R0(s)}return o}s=u,u=s.parentNode}return null}function Rl(s){return s=s[xr]||s[Gr],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Xo(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(n(33))}function xc(s){return s[Cl]||null}var pf=[],Yo=-1;function Rs(s){return{current:s}}function Ze(s){0>Yo||(s.current=pf[Yo],pf[Yo]=null,Yo--)}function Xe(s,o){Yo++,pf[Yo]=s.current,s.current=o}var Ps={},qt=Rs(Ps),hn=Rs(!1),Vi=Ps;function Jo(s,o){var u=s.type.contextTypes;if(!u)return Ps;var d=s.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===o)return d.__reactInternalMemoizedMaskedChildContext;var m={},v;for(v in u)m[v]=o[v];return d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=o,s.__reactInternalMemoizedMaskedChildContext=m),m}function dn(s){return s=s.childContextTypes,s!=null}function Tc(){Ze(hn),Ze(qt)}function P0(s,o,u){if(qt.current!==Ps)throw Error(n(168));Xe(qt,o),Xe(hn,u)}function k0(s,o,u){var d=s.stateNode;if(o=o.childContextTypes,typeof d.getChildContext!="function")return u;d=d.getChildContext();for(var m in d)if(!(m in o))throw Error(n(108,ze(s)||"Unknown",m));return oe({},u,d)}function Ec(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Ps,Vi=qt.current,Xe(qt,s),Xe(hn,hn.current),!0}function N0(s,o,u){var d=s.stateNode;if(!d)throw Error(n(169));u?(s=k0(s,o,Vi),d.__reactInternalMemoizedMergedChildContext=s,Ze(hn),Ze(qt),Xe(qt,s)):Ze(hn),Xe(hn,u)}var Qr=null,Sc=!1,mf=!1;function V0(s){Qr===null?Qr=[s]:Qr.push(s)}function pA(s){Sc=!0,V0(s)}function ks(){if(!mf&&Qr!==null){mf=!0;var s=0,o=je;try{var u=Qr;for(je=1;s<u.length;s++){var d=u[s];do d=d(!0);while(d!==null)}Qr=null,Sc=!1}catch(m){throw Qr!==null&&(Qr=Qr.slice(s+1)),ko(Si,ks),m}finally{je=o,mf=!1}}return null}var Zo=[],ea=0,Ic=null,bc=0,Dn=[],On=0,Di=null,Xr=1,Yr="";function Oi(s,o){Zo[ea++]=bc,Zo[ea++]=Ic,Ic=s,bc=o}function D0(s,o,u){Dn[On++]=Xr,Dn[On++]=Yr,Dn[On++]=Di,Di=s;var d=Xr;s=Yr;var m=32-tn(d)-1;d&=~(1<<m),u+=1;var v=32-tn(o)+m;if(30<v){var E=m-m%5;v=(d&(1<<E)-1).toString(32),d>>=E,m-=E,Xr=1<<32-tn(o)+m|u<<m|d,Yr=v+s}else Xr=1<<v|u<<m|d,Yr=s}function gf(s){s.return!==null&&(Oi(s,1),D0(s,1,0))}function yf(s){for(;s===Ic;)Ic=Zo[--ea],Zo[ea]=null,bc=Zo[--ea],Zo[ea]=null;for(;s===Di;)Di=Dn[--On],Dn[On]=null,Yr=Dn[--On],Dn[On]=null,Xr=Dn[--On],Dn[On]=null}var In=null,bn=null,nt=!1,nr=null;function O0(s,o){var u=Fn(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=s,o=s.deletions,o===null?(s.deletions=[u],s.flags|=16):o.push(u)}function j0(s,o){switch(s.tag){case 5:var u=s.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(s.stateNode=o,In=s,bn=Cs(o.firstChild),!0):!1;case 6:return o=s.pendingProps===""||o.nodeType!==3?null:o,o!==null?(s.stateNode=o,In=s,bn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=Di!==null?{id:Xr,overflow:Yr}:null,s.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=Fn(18,null,null,0),u.stateNode=o,u.return=s,s.child=u,In=s,bn=null,!0):!1;default:return!1}}function vf(s){return(s.mode&1)!==0&&(s.flags&128)===0}function _f(s){if(nt){var o=bn;if(o){var u=o;if(!j0(s,o)){if(vf(s))throw Error(n(418));o=Cs(u.nextSibling);var d=In;o&&j0(s,o)?O0(d,u):(s.flags=s.flags&-4097|2,nt=!1,In=s)}}else{if(vf(s))throw Error(n(418));s.flags=s.flags&-4097|2,nt=!1,In=s}}}function L0(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;In=s}function Ac(s){if(s!==In)return!1;if(!nt)return L0(s),nt=!0,!1;var o;if((o=s.tag!==3)&&!(o=s.tag!==5)&&(o=s.type,o=o!=="head"&&o!=="body"&&!cf(s.type,s.memoizedProps)),o&&(o=bn)){if(vf(s))throw M0(),Error(n(418));for(;o;)O0(s,o),o=Cs(o.nextSibling)}if(L0(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(o===0){bn=Cs(s.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}s=s.nextSibling}bn=null}}else bn=In?Cs(s.stateNode.nextSibling):null;return!0}function M0(){for(var s=bn;s;)s=Cs(s.nextSibling)}function ta(){bn=In=null,nt=!1}function wf(s){nr===null?nr=[s]:nr.push(s)}var mA=K.ReactCurrentBatchConfig;function Pl(s,o,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(n(309));var d=u.stateNode}if(!d)throw Error(n(147,s));var m=d,v=""+s;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===v?o.ref:(o=function(E){var k=m.refs;E===null?delete k[v]:k[v]=E},o._stringRef=v,o)}if(typeof s!="string")throw Error(n(284));if(!u._owner)throw Error(n(290,s))}return s}function Cc(s,o){throw s=Object.prototype.toString.call(o),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s))}function F0(s){var o=s._init;return o(s._payload)}function U0(s){function o(W,B){if(s){var q=W.deletions;q===null?(W.deletions=[B],W.flags|=16):q.push(B)}}function u(W,B){if(!s)return null;for(;B!==null;)o(W,B),B=B.sibling;return null}function d(W,B){for(W=new Map;B!==null;)B.key!==null?W.set(B.key,B):W.set(B.index,B),B=B.sibling;return W}function m(W,B){return W=Fs(W,B),W.index=0,W.sibling=null,W}function v(W,B,q){return W.index=q,s?(q=W.alternate,q!==null?(q=q.index,q<B?(W.flags|=2,B):q):(W.flags|=2,B)):(W.flags|=1048576,B)}function E(W){return s&&W.alternate===null&&(W.flags|=2),W}function k(W,B,q,ie){return B===null||B.tag!==6?(B=hp(q,W.mode,ie),B.return=W,B):(B=m(B,q),B.return=W,B)}function j(W,B,q,ie){var ge=q.type;return ge===N?re(W,B,q.props.children,ie,q.key):B!==null&&(B.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===It&&F0(ge)===B.type)?(ie=m(B,q.props),ie.ref=Pl(W,B,q),ie.return=W,ie):(ie=Jc(q.type,q.key,q.props,null,W.mode,ie),ie.ref=Pl(W,B,q),ie.return=W,ie)}function G(W,B,q,ie){return B===null||B.tag!==4||B.stateNode.containerInfo!==q.containerInfo||B.stateNode.implementation!==q.implementation?(B=dp(q,W.mode,ie),B.return=W,B):(B=m(B,q.children||[]),B.return=W,B)}function re(W,B,q,ie,ge){return B===null||B.tag!==7?(B=zi(q,W.mode,ie,ge),B.return=W,B):(B=m(B,q),B.return=W,B)}function se(W,B,q){if(typeof B=="string"&&B!==""||typeof B=="number")return B=hp(""+B,W.mode,q),B.return=W,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Q:return q=Jc(B.type,B.key,B.props,null,W.mode,q),q.ref=Pl(W,null,B),q.return=W,q;case Y:return B=dp(B,W.mode,q),B.return=W,B;case It:var ie=B._init;return se(W,ie(B._payload),q)}if(Fr(B)||le(B))return B=zi(B,W.mode,q,null),B.return=W,B;Cc(W,B)}return null}function ne(W,B,q,ie){var ge=B!==null?B.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return ge!==null?null:k(W,B,""+q,ie);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case Q:return q.key===ge?j(W,B,q,ie):null;case Y:return q.key===ge?G(W,B,q,ie):null;case It:return ge=q._init,ne(W,B,ge(q._payload),ie)}if(Fr(q)||le(q))return ge!==null?null:re(W,B,q,ie,null);Cc(W,q)}return null}function he(W,B,q,ie,ge){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return W=W.get(q)||null,k(B,W,""+ie,ge);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case Q:return W=W.get(ie.key===null?q:ie.key)||null,j(B,W,ie,ge);case Y:return W=W.get(ie.key===null?q:ie.key)||null,G(B,W,ie,ge);case It:var _e=ie._init;return he(W,B,q,_e(ie._payload),ge)}if(Fr(ie)||le(ie))return W=W.get(q)||null,re(B,W,ie,ge,null);Cc(B,ie)}return null}function pe(W,B,q,ie){for(var ge=null,_e=null,we=B,Ee=B=0,jt=null;we!==null&&Ee<q.length;Ee++){we.index>Ee?(jt=we,we=null):jt=we.sibling;var Be=ne(W,we,q[Ee],ie);if(Be===null){we===null&&(we=jt);break}s&&we&&Be.alternate===null&&o(W,we),B=v(Be,B,Ee),_e===null?ge=Be:_e.sibling=Be,_e=Be,we=jt}if(Ee===q.length)return u(W,we),nt&&Oi(W,Ee),ge;if(we===null){for(;Ee<q.length;Ee++)we=se(W,q[Ee],ie),we!==null&&(B=v(we,B,Ee),_e===null?ge=we:_e.sibling=we,_e=we);return nt&&Oi(W,Ee),ge}for(we=d(W,we);Ee<q.length;Ee++)jt=he(we,W,Ee,q[Ee],ie),jt!==null&&(s&&jt.alternate!==null&&we.delete(jt.key===null?Ee:jt.key),B=v(jt,B,Ee),_e===null?ge=jt:_e.sibling=jt,_e=jt);return s&&we.forEach(function(Us){return o(W,Us)}),nt&&Oi(W,Ee),ge}function me(W,B,q,ie){var ge=le(q);if(typeof ge!="function")throw Error(n(150));if(q=ge.call(q),q==null)throw Error(n(151));for(var _e=ge=null,we=B,Ee=B=0,jt=null,Be=q.next();we!==null&&!Be.done;Ee++,Be=q.next()){we.index>Ee?(jt=we,we=null):jt=we.sibling;var Us=ne(W,we,Be.value,ie);if(Us===null){we===null&&(we=jt);break}s&&we&&Us.alternate===null&&o(W,we),B=v(Us,B,Ee),_e===null?ge=Us:_e.sibling=Us,_e=Us,we=jt}if(Be.done)return u(W,we),nt&&Oi(W,Ee),ge;if(we===null){for(;!Be.done;Ee++,Be=q.next())Be=se(W,Be.value,ie),Be!==null&&(B=v(Be,B,Ee),_e===null?ge=Be:_e.sibling=Be,_e=Be);return nt&&Oi(W,Ee),ge}for(we=d(W,we);!Be.done;Ee++,Be=q.next())Be=he(we,W,Ee,Be.value,ie),Be!==null&&(s&&Be.alternate!==null&&we.delete(Be.key===null?Ee:Be.key),B=v(Be,B,Ee),_e===null?ge=Be:_e.sibling=Be,_e=Be);return s&&we.forEach(function(GA){return o(W,GA)}),nt&&Oi(W,Ee),ge}function pt(W,B,q,ie){if(typeof q=="object"&&q!==null&&q.type===N&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case Q:e:{for(var ge=q.key,_e=B;_e!==null;){if(_e.key===ge){if(ge=q.type,ge===N){if(_e.tag===7){u(W,_e.sibling),B=m(_e,q.props.children),B.return=W,W=B;break e}}else if(_e.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===It&&F0(ge)===_e.type){u(W,_e.sibling),B=m(_e,q.props),B.ref=Pl(W,_e,q),B.return=W,W=B;break e}u(W,_e);break}else o(W,_e);_e=_e.sibling}q.type===N?(B=zi(q.props.children,W.mode,ie,q.key),B.return=W,W=B):(ie=Jc(q.type,q.key,q.props,null,W.mode,ie),ie.ref=Pl(W,B,q),ie.return=W,W=ie)}return E(W);case Y:e:{for(_e=q.key;B!==null;){if(B.key===_e)if(B.tag===4&&B.stateNode.containerInfo===q.containerInfo&&B.stateNode.implementation===q.implementation){u(W,B.sibling),B=m(B,q.children||[]),B.return=W,W=B;break e}else{u(W,B);break}else o(W,B);B=B.sibling}B=dp(q,W.mode,ie),B.return=W,W=B}return E(W);case It:return _e=q._init,pt(W,B,_e(q._payload),ie)}if(Fr(q))return pe(W,B,q,ie);if(le(q))return me(W,B,q,ie);Cc(W,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,B!==null&&B.tag===6?(u(W,B.sibling),B=m(B,q),B.return=W,W=B):(u(W,B),B=hp(q,W.mode,ie),B.return=W,W=B),E(W)):u(W,B)}return pt}var na=U0(!0),B0=U0(!1),Rc=Rs(null),Pc=null,ra=null,xf=null;function Tf(){xf=ra=Pc=null}function Ef(s){var o=Rc.current;Ze(Rc),s._currentValue=o}function Sf(s,o,u){for(;s!==null;){var d=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),s===u)break;s=s.return}}function sa(s,o){Pc=s,xf=ra=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&o)!==0&&(fn=!0),s.firstContext=null)}function jn(s){var o=s._currentValue;if(xf!==s)if(s={context:s,memoizedValue:o,next:null},ra===null){if(Pc===null)throw Error(n(308));ra=s,Pc.dependencies={lanes:0,firstContext:s}}else ra=ra.next=s;return o}var ji=null;function If(s){ji===null?ji=[s]:ji.push(s)}function $0(s,o,u,d){var m=o.interleaved;return m===null?(u.next=u,If(o)):(u.next=m.next,m.next=u),o.interleaved=u,Jr(s,d)}function Jr(s,o){s.lanes|=o;var u=s.alternate;for(u!==null&&(u.lanes|=o),u=s,s=s.return;s!==null;)s.childLanes|=o,u=s.alternate,u!==null&&(u.childLanes|=o),u=s,s=s.return;return u.tag===3?u.stateNode:null}var Ns=!1;function bf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function z0(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Zr(s,o){return{eventTime:s,lane:o,tag:0,payload:null,callback:null,next:null}}function Vs(s,o,u){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(Ue&2)!==0){var m=d.pending;return m===null?o.next=o:(o.next=m.next,m.next=o),d.pending=o,Jr(s,u)}return m=d.interleaved,m===null?(o.next=o,If(d)):(o.next=m.next,m.next=o),d.interleaved=o,Jr(s,u)}function kc(s,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var d=o.lanes;d&=s.pendingLanes,u|=d,o.lanes=u,Ts(s,u)}}function H0(s,o){var u=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var m=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var E={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};v===null?m=v=E:v=v.next=E,u=u.next}while(u!==null);v===null?m=v=o:v=v.next=o}else m=v=o;u={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:v,shared:d.shared,effects:d.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=o:s.next=o,u.lastBaseUpdate=o}function Nc(s,o,u,d){var m=s.updateQueue;Ns=!1;var v=m.firstBaseUpdate,E=m.lastBaseUpdate,k=m.shared.pending;if(k!==null){m.shared.pending=null;var j=k,G=j.next;j.next=null,E===null?v=G:E.next=G,E=j;var re=s.alternate;re!==null&&(re=re.updateQueue,k=re.lastBaseUpdate,k!==E&&(k===null?re.firstBaseUpdate=G:k.next=G,re.lastBaseUpdate=j))}if(v!==null){var se=m.baseState;E=0,re=G=j=null,k=v;do{var ne=k.lane,he=k.eventTime;if((d&ne)===ne){re!==null&&(re=re.next={eventTime:he,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var pe=s,me=k;switch(ne=o,he=u,me.tag){case 1:if(pe=me.payload,typeof pe=="function"){se=pe.call(he,se,ne);break e}se=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=me.payload,ne=typeof pe=="function"?pe.call(he,se,ne):pe,ne==null)break e;se=oe({},se,ne);break e;case 2:Ns=!0}}k.callback!==null&&k.lane!==0&&(s.flags|=64,ne=m.effects,ne===null?m.effects=[k]:ne.push(k))}else he={eventTime:he,lane:ne,tag:k.tag,payload:k.payload,callback:k.callback,next:null},re===null?(G=re=he,j=se):re=re.next=he,E|=ne;if(k=k.next,k===null){if(k=m.shared.pending,k===null)break;ne=k,k=ne.next,ne.next=null,m.lastBaseUpdate=ne,m.shared.pending=null}}while(!0);if(re===null&&(j=se),m.baseState=j,m.firstBaseUpdate=G,m.lastBaseUpdate=re,o=m.shared.interleaved,o!==null){m=o;do E|=m.lane,m=m.next;while(m!==o)}else v===null&&(m.shared.lanes=0);Fi|=E,s.lanes=E,s.memoizedState=se}}function W0(s,o,u){if(s=o.effects,o.effects=null,s!==null)for(o=0;o<s.length;o++){var d=s[o],m=d.callback;if(m!==null){if(d.callback=null,d=u,typeof m!="function")throw Error(n(191,m));m.call(d)}}}var kl={},Tr=Rs(kl),Nl=Rs(kl),Vl=Rs(kl);function Li(s){if(s===kl)throw Error(n(174));return s}function Af(s,o){switch(Xe(Vl,o),Xe(Nl,s),Xe(Tr,kl),s=o.nodeType,s){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:At(null,"");break;default:s=s===8?o.parentNode:o,o=s.namespaceURI||null,s=s.tagName,o=At(o,s)}Ze(Tr),Xe(Tr,o)}function ia(){Ze(Tr),Ze(Nl),Ze(Vl)}function q0(s){Li(Vl.current);var o=Li(Tr.current),u=At(o,s.type);o!==u&&(Xe(Nl,s),Xe(Tr,u))}function Cf(s){Nl.current===s&&(Ze(Tr),Ze(Nl))}var rt=Rs(0);function Vc(s){for(var o=s;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Rf=[];function Pf(){for(var s=0;s<Rf.length;s++)Rf[s]._workInProgressVersionPrimary=null;Rf.length=0}var Dc=K.ReactCurrentDispatcher,kf=K.ReactCurrentBatchConfig,Mi=0,st=null,Rt=null,Dt=null,Oc=!1,Dl=!1,Ol=0,gA=0;function Kt(){throw Error(n(321))}function Nf(s,o){if(o===null)return!1;for(var u=0;u<o.length&&u<s.length;u++)if(!tr(s[u],o[u]))return!1;return!0}function Vf(s,o,u,d,m,v){if(Mi=v,st=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Dc.current=s===null||s.memoizedState===null?wA:xA,s=u(d,m),Dl){v=0;do{if(Dl=!1,Ol=0,25<=v)throw Error(n(301));v+=1,Dt=Rt=null,o.updateQueue=null,Dc.current=TA,s=u(d,m)}while(Dl)}if(Dc.current=Mc,o=Rt!==null&&Rt.next!==null,Mi=0,Dt=Rt=st=null,Oc=!1,o)throw Error(n(300));return s}function Df(){var s=Ol!==0;return Ol=0,s}function Er(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?st.memoizedState=Dt=s:Dt=Dt.next=s,Dt}function Ln(){if(Rt===null){var s=st.alternate;s=s!==null?s.memoizedState:null}else s=Rt.next;var o=Dt===null?st.memoizedState:Dt.next;if(o!==null)Dt=o,Rt=s;else{if(s===null)throw Error(n(310));Rt=s,s={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Dt===null?st.memoizedState=Dt=s:Dt=Dt.next=s}return Dt}function jl(s,o){return typeof o=="function"?o(s):o}function Of(s){var o=Ln(),u=o.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=s;var d=Rt,m=d.baseQueue,v=u.pending;if(v!==null){if(m!==null){var E=m.next;m.next=v.next,v.next=E}d.baseQueue=m=v,u.pending=null}if(m!==null){v=m.next,d=d.baseState;var k=E=null,j=null,G=v;do{var re=G.lane;if((Mi&re)===re)j!==null&&(j=j.next={lane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),d=G.hasEagerState?G.eagerState:s(d,G.action);else{var se={lane:re,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null};j===null?(k=j=se,E=d):j=j.next=se,st.lanes|=re,Fi|=re}G=G.next}while(G!==null&&G!==v);j===null?E=d:j.next=k,tr(d,o.memoizedState)||(fn=!0),o.memoizedState=d,o.baseState=E,o.baseQueue=j,u.lastRenderedState=d}if(s=u.interleaved,s!==null){m=s;do v=m.lane,st.lanes|=v,Fi|=v,m=m.next;while(m!==s)}else m===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function jf(s){var o=Ln(),u=o.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=s;var d=u.dispatch,m=u.pending,v=o.memoizedState;if(m!==null){u.pending=null;var E=m=m.next;do v=s(v,E.action),E=E.next;while(E!==m);tr(v,o.memoizedState)||(fn=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),u.lastRenderedState=v}return[v,d]}function K0(){}function G0(s,o){var u=st,d=Ln(),m=o(),v=!tr(d.memoizedState,m);if(v&&(d.memoizedState=m,fn=!0),d=d.queue,Lf(Y0.bind(null,u,d,s),[s]),d.getSnapshot!==o||v||Dt!==null&&Dt.memoizedState.tag&1){if(u.flags|=2048,Ll(9,X0.bind(null,u,d,m,o),void 0,null),Ot===null)throw Error(n(349));(Mi&30)!==0||Q0(u,o,m)}return m}function Q0(s,o,u){s.flags|=16384,s={getSnapshot:o,value:u},o=st.updateQueue,o===null?(o={lastEffect:null,stores:null},st.updateQueue=o,o.stores=[s]):(u=o.stores,u===null?o.stores=[s]:u.push(s))}function X0(s,o,u,d){o.value=u,o.getSnapshot=d,J0(o)&&Z0(s)}function Y0(s,o,u){return u(function(){J0(o)&&Z0(s)})}function J0(s){var o=s.getSnapshot;s=s.value;try{var u=o();return!tr(s,u)}catch{return!0}}function Z0(s){var o=Jr(s,1);o!==null&&or(o,s,1,-1)}function ev(s){var o=Er();return typeof s=="function"&&(s=s()),o.memoizedState=o.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:jl,lastRenderedState:s},o.queue=s,s=s.dispatch=_A.bind(null,st,s),[o.memoizedState,s]}function Ll(s,o,u,d){return s={tag:s,create:o,destroy:u,deps:d,next:null},o=st.updateQueue,o===null?(o={lastEffect:null,stores:null},st.updateQueue=o,o.lastEffect=s.next=s):(u=o.lastEffect,u===null?o.lastEffect=s.next=s:(d=u.next,u.next=s,s.next=d,o.lastEffect=s)),s}function tv(){return Ln().memoizedState}function jc(s,o,u,d){var m=Er();st.flags|=s,m.memoizedState=Ll(1|o,u,void 0,d===void 0?null:d)}function Lc(s,o,u,d){var m=Ln();d=d===void 0?null:d;var v=void 0;if(Rt!==null){var E=Rt.memoizedState;if(v=E.destroy,d!==null&&Nf(d,E.deps)){m.memoizedState=Ll(o,u,v,d);return}}st.flags|=s,m.memoizedState=Ll(1|o,u,v,d)}function nv(s,o){return jc(8390656,8,s,o)}function Lf(s,o){return Lc(2048,8,s,o)}function rv(s,o){return Lc(4,2,s,o)}function sv(s,o){return Lc(4,4,s,o)}function iv(s,o){if(typeof o=="function")return s=s(),o(s),function(){o(null)};if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function ov(s,o,u){return u=u!=null?u.concat([s]):null,Lc(4,4,iv.bind(null,o,s),u)}function Mf(){}function av(s,o){var u=Ln();o=o===void 0?null:o;var d=u.memoizedState;return d!==null&&o!==null&&Nf(o,d[1])?d[0]:(u.memoizedState=[s,o],s)}function lv(s,o){var u=Ln();o=o===void 0?null:o;var d=u.memoizedState;return d!==null&&o!==null&&Nf(o,d[1])?d[0]:(s=s(),u.memoizedState=[s,o],s)}function uv(s,o,u){return(Mi&21)===0?(s.baseState&&(s.baseState=!1,fn=!0),s.memoizedState=u):(tr(u,o)||(u=Ai(),st.lanes|=u,Fi|=u,s.baseState=!0),o)}function yA(s,o){var u=je;je=u!==0&&4>u?u:4,s(!0);var d=kf.transition;kf.transition={};try{s(!1),o()}finally{je=u,kf.transition=d}}function cv(){return Ln().memoizedState}function vA(s,o,u){var d=Ls(s);if(u={lane:d,action:u,hasEagerState:!1,eagerState:null,next:null},hv(s))dv(o,u);else if(u=$0(s,o,u,d),u!==null){var m=sn();or(u,s,d,m),fv(u,o,d)}}function _A(s,o,u){var d=Ls(s),m={lane:d,action:u,hasEagerState:!1,eagerState:null,next:null};if(hv(s))dv(o,m);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var E=o.lastRenderedState,k=v(E,u);if(m.hasEagerState=!0,m.eagerState=k,tr(k,E)){var j=o.interleaved;j===null?(m.next=m,If(o)):(m.next=j.next,j.next=m),o.interleaved=m;return}}catch{}finally{}u=$0(s,o,m,d),u!==null&&(m=sn(),or(u,s,d,m),fv(u,o,d))}}function hv(s){var o=s.alternate;return s===st||o!==null&&o===st}function dv(s,o){Dl=Oc=!0;var u=s.pending;u===null?o.next=o:(o.next=u.next,u.next=o),s.pending=o}function fv(s,o,u){if((u&4194240)!==0){var d=o.lanes;d&=s.pendingLanes,u|=d,o.lanes=u,Ts(s,u)}}var Mc={readContext:jn,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},wA={readContext:jn,useCallback:function(s,o){return Er().memoizedState=[s,o===void 0?null:o],s},useContext:jn,useEffect:nv,useImperativeHandle:function(s,o,u){return u=u!=null?u.concat([s]):null,jc(4194308,4,iv.bind(null,o,s),u)},useLayoutEffect:function(s,o){return jc(4194308,4,s,o)},useInsertionEffect:function(s,o){return jc(4,2,s,o)},useMemo:function(s,o){var u=Er();return o=o===void 0?null:o,s=s(),u.memoizedState=[s,o],s},useReducer:function(s,o,u){var d=Er();return o=u!==void 0?u(o):o,d.memoizedState=d.baseState=o,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:o},d.queue=s,s=s.dispatch=vA.bind(null,st,s),[d.memoizedState,s]},useRef:function(s){var o=Er();return s={current:s},o.memoizedState=s},useState:ev,useDebugValue:Mf,useDeferredValue:function(s){return Er().memoizedState=s},useTransition:function(){var s=ev(!1),o=s[0];return s=yA.bind(null,s[1]),Er().memoizedState=s,[o,s]},useMutableSource:function(){},useSyncExternalStore:function(s,o,u){var d=st,m=Er();if(nt){if(u===void 0)throw Error(n(407));u=u()}else{if(u=o(),Ot===null)throw Error(n(349));(Mi&30)!==0||Q0(d,o,u)}m.memoizedState=u;var v={value:u,getSnapshot:o};return m.queue=v,nv(Y0.bind(null,d,v,s),[s]),d.flags|=2048,Ll(9,X0.bind(null,d,v,u,o),void 0,null),u},useId:function(){var s=Er(),o=Ot.identifierPrefix;if(nt){var u=Yr,d=Xr;u=(d&~(1<<32-tn(d)-1)).toString(32)+u,o=":"+o+"R"+u,u=Ol++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=gA++,o=":"+o+"r"+u.toString(32)+":";return s.memoizedState=o},unstable_isNewReconciler:!1},xA={readContext:jn,useCallback:av,useContext:jn,useEffect:Lf,useImperativeHandle:ov,useInsertionEffect:rv,useLayoutEffect:sv,useMemo:lv,useReducer:Of,useRef:tv,useState:function(){return Of(jl)},useDebugValue:Mf,useDeferredValue:function(s){var o=Ln();return uv(o,Rt.memoizedState,s)},useTransition:function(){var s=Of(jl)[0],o=Ln().memoizedState;return[s,o]},useMutableSource:K0,useSyncExternalStore:G0,useId:cv,unstable_isNewReconciler:!1},TA={readContext:jn,useCallback:av,useContext:jn,useEffect:Lf,useImperativeHandle:ov,useInsertionEffect:rv,useLayoutEffect:sv,useMemo:lv,useReducer:jf,useRef:tv,useState:function(){return jf(jl)},useDebugValue:Mf,useDeferredValue:function(s){var o=Ln();return Rt===null?o.memoizedState=s:uv(o,Rt.memoizedState,s)},useTransition:function(){var s=jf(jl)[0],o=Ln().memoizedState;return[s,o]},useMutableSource:K0,useSyncExternalStore:G0,useId:cv,unstable_isNewReconciler:!1};function rr(s,o){if(s&&s.defaultProps){o=oe({},o),s=s.defaultProps;for(var u in s)o[u]===void 0&&(o[u]=s[u]);return o}return o}function Ff(s,o,u,d){o=s.memoizedState,u=u(d,o),u=u==null?o:oe({},o,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var Fc={isMounted:function(s){return(s=s._reactInternals)?Gn(s)===s:!1},enqueueSetState:function(s,o,u){s=s._reactInternals;var d=sn(),m=Ls(s),v=Zr(d,m);v.payload=o,u!=null&&(v.callback=u),o=Vs(s,v,m),o!==null&&(or(o,s,m,d),kc(o,s,m))},enqueueReplaceState:function(s,o,u){s=s._reactInternals;var d=sn(),m=Ls(s),v=Zr(d,m);v.tag=1,v.payload=o,u!=null&&(v.callback=u),o=Vs(s,v,m),o!==null&&(or(o,s,m,d),kc(o,s,m))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var u=sn(),d=Ls(s),m=Zr(u,d);m.tag=2,o!=null&&(m.callback=o),o=Vs(s,m,d),o!==null&&(or(o,s,d,u),kc(o,s,d))}};function pv(s,o,u,d,m,v,E){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,v,E):o.prototype&&o.prototype.isPureReactComponent?!El(u,d)||!El(m,v):!0}function mv(s,o,u){var d=!1,m=Ps,v=o.contextType;return typeof v=="object"&&v!==null?v=jn(v):(m=dn(o)?Vi:qt.current,d=o.contextTypes,v=(d=d!=null)?Jo(s,m):Ps),o=new o(u,v),s.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Fc,s.stateNode=o,o._reactInternals=s,d&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=m,s.__reactInternalMemoizedMaskedChildContext=v),o}function gv(s,o,u,d){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,d),o.state!==s&&Fc.enqueueReplaceState(o,o.state,null)}function Uf(s,o,u,d){var m=s.stateNode;m.props=u,m.state=s.memoizedState,m.refs={},bf(s);var v=o.contextType;typeof v=="object"&&v!==null?m.context=jn(v):(v=dn(o)?Vi:qt.current,m.context=Jo(s,v)),m.state=s.memoizedState,v=o.getDerivedStateFromProps,typeof v=="function"&&(Ff(s,o,v,u),m.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(o=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),o!==m.state&&Fc.enqueueReplaceState(m,m.state,null),Nc(s,u,m,d),m.state=s.memoizedState),typeof m.componentDidMount=="function"&&(s.flags|=4194308)}function oa(s,o){try{var u="",d=o;do u+=Ne(d),d=d.return;while(d);var m=u}catch(v){m=`
Error generating stack: `+v.message+`
`+v.stack}return{value:s,source:o,stack:m,digest:null}}function Bf(s,o,u){return{value:s,source:null,stack:u??null,digest:o??null}}function $f(s,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var EA=typeof WeakMap=="function"?WeakMap:Map;function yv(s,o,u){u=Zr(-1,u),u.tag=3,u.payload={element:null};var d=o.value;return u.callback=function(){qc||(qc=!0,rp=d),$f(s,o)},u}function vv(s,o,u){u=Zr(-1,u),u.tag=3;var d=s.type.getDerivedStateFromError;if(typeof d=="function"){var m=o.value;u.payload=function(){return d(m)},u.callback=function(){$f(s,o)}}var v=s.stateNode;return v!==null&&typeof v.componentDidCatch=="function"&&(u.callback=function(){$f(s,o),typeof d!="function"&&(Os===null?Os=new Set([this]):Os.add(this));var E=o.stack;this.componentDidCatch(o.value,{componentStack:E!==null?E:""})}),u}function _v(s,o,u){var d=s.pingCache;if(d===null){d=s.pingCache=new EA;var m=new Set;d.set(o,m)}else m=d.get(o),m===void 0&&(m=new Set,d.set(o,m));m.has(u)||(m.add(u),s=LA.bind(null,s,o,u),o.then(s,s))}function wv(s){do{var o;if((o=s.tag===13)&&(o=s.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return s;s=s.return}while(s!==null);return null}function xv(s,o,u,d,m){return(s.mode&1)===0?(s===o?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=Zr(-1,1),o.tag=2,Vs(u,o,1))),u.lanes|=1),s):(s.flags|=65536,s.lanes=m,s)}var SA=K.ReactCurrentOwner,fn=!1;function rn(s,o,u,d){o.child=s===null?B0(o,null,u,d):na(o,s.child,u,d)}function Tv(s,o,u,d,m){u=u.render;var v=o.ref;return sa(o,m),d=Vf(s,o,u,d,v,m),u=Df(),s!==null&&!fn?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~m,es(s,o,m)):(nt&&u&&gf(o),o.flags|=1,rn(s,o,d,m),o.child)}function Ev(s,o,u,d,m){if(s===null){var v=u.type;return typeof v=="function"&&!cp(v)&&v.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=v,Sv(s,o,v,d,m)):(s=Jc(u.type,null,d,o,o.mode,m),s.ref=o.ref,s.return=o,o.child=s)}if(v=s.child,(s.lanes&m)===0){var E=v.memoizedProps;if(u=u.compare,u=u!==null?u:El,u(E,d)&&s.ref===o.ref)return es(s,o,m)}return o.flags|=1,s=Fs(v,d),s.ref=o.ref,s.return=o,o.child=s}function Sv(s,o,u,d,m){if(s!==null){var v=s.memoizedProps;if(El(v,d)&&s.ref===o.ref)if(fn=!1,o.pendingProps=d=v,(s.lanes&m)!==0)(s.flags&131072)!==0&&(fn=!0);else return o.lanes=s.lanes,es(s,o,m)}return zf(s,o,u,d,m)}function Iv(s,o,u){var d=o.pendingProps,m=d.children,v=s!==null?s.memoizedState:null;if(d.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xe(la,An),An|=u;else{if((u&1073741824)===0)return s=v!==null?v.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:s,cachePool:null,transitions:null},o.updateQueue=null,Xe(la,An),An|=s,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=v!==null?v.baseLanes:u,Xe(la,An),An|=d}else v!==null?(d=v.baseLanes|u,o.memoizedState=null):d=u,Xe(la,An),An|=d;return rn(s,o,m,u),o.child}function bv(s,o){var u=o.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function zf(s,o,u,d,m){var v=dn(u)?Vi:qt.current;return v=Jo(o,v),sa(o,m),u=Vf(s,o,u,d,v,m),d=Df(),s!==null&&!fn?(o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~m,es(s,o,m)):(nt&&d&&gf(o),o.flags|=1,rn(s,o,u,m),o.child)}function Av(s,o,u,d,m){if(dn(u)){var v=!0;Ec(o)}else v=!1;if(sa(o,m),o.stateNode===null)Bc(s,o),mv(o,u,d),Uf(o,u,d,m),d=!0;else if(s===null){var E=o.stateNode,k=o.memoizedProps;E.props=k;var j=E.context,G=u.contextType;typeof G=="object"&&G!==null?G=jn(G):(G=dn(u)?Vi:qt.current,G=Jo(o,G));var re=u.getDerivedStateFromProps,se=typeof re=="function"||typeof E.getSnapshotBeforeUpdate=="function";se||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(k!==d||j!==G)&&gv(o,E,d,G),Ns=!1;var ne=o.memoizedState;E.state=ne,Nc(o,d,E,m),j=o.memoizedState,k!==d||ne!==j||hn.current||Ns?(typeof re=="function"&&(Ff(o,u,re,d),j=o.memoizedState),(k=Ns||pv(o,u,k,d,ne,j,G))?(se||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(o.flags|=4194308)):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=j),E.props=d,E.state=j,E.context=G,d=k):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{E=o.stateNode,z0(s,o),k=o.memoizedProps,G=o.type===o.elementType?k:rr(o.type,k),E.props=G,se=o.pendingProps,ne=E.context,j=u.contextType,typeof j=="object"&&j!==null?j=jn(j):(j=dn(u)?Vi:qt.current,j=Jo(o,j));var he=u.getDerivedStateFromProps;(re=typeof he=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(k!==se||ne!==j)&&gv(o,E,d,j),Ns=!1,ne=o.memoizedState,E.state=ne,Nc(o,d,E,m);var pe=o.memoizedState;k!==se||ne!==pe||hn.current||Ns?(typeof he=="function"&&(Ff(o,u,he,d),pe=o.memoizedState),(G=Ns||pv(o,u,G,d,ne,pe,j)||!1)?(re||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(d,pe,j),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(d,pe,j)),typeof E.componentDidUpdate=="function"&&(o.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof E.componentDidUpdate!="function"||k===s.memoizedProps&&ne===s.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||k===s.memoizedProps&&ne===s.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=pe),E.props=d,E.state=pe,E.context=j,d=G):(typeof E.componentDidUpdate!="function"||k===s.memoizedProps&&ne===s.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||k===s.memoizedProps&&ne===s.memoizedState||(o.flags|=1024),d=!1)}return Hf(s,o,u,d,v,m)}function Hf(s,o,u,d,m,v){bv(s,o);var E=(o.flags&128)!==0;if(!d&&!E)return m&&N0(o,u,!1),es(s,o,v);d=o.stateNode,SA.current=o;var k=E&&typeof u.getDerivedStateFromError!="function"?null:d.render();return o.flags|=1,s!==null&&E?(o.child=na(o,s.child,null,v),o.child=na(o,null,k,v)):rn(s,o,k,v),o.memoizedState=d.state,m&&N0(o,u,!0),o.child}function Cv(s){var o=s.stateNode;o.pendingContext?P0(s,o.pendingContext,o.pendingContext!==o.context):o.context&&P0(s,o.context,!1),Af(s,o.containerInfo)}function Rv(s,o,u,d,m){return ta(),wf(m),o.flags|=256,rn(s,o,u,d),o.child}var Wf={dehydrated:null,treeContext:null,retryLane:0};function qf(s){return{baseLanes:s,cachePool:null,transitions:null}}function Pv(s,o,u){var d=o.pendingProps,m=rt.current,v=!1,E=(o.flags&128)!==0,k;if((k=E)||(k=s!==null&&s.memoizedState===null?!1:(m&2)!==0),k?(v=!0,o.flags&=-129):(s===null||s.memoizedState!==null)&&(m|=1),Xe(rt,m&1),s===null)return _f(o),s=o.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((o.mode&1)===0?o.lanes=1:s.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(E=d.children,s=d.fallback,v?(d=o.mode,v=o.child,E={mode:"hidden",children:E},(d&1)===0&&v!==null?(v.childLanes=0,v.pendingProps=E):v=Zc(E,d,0,null),s=zi(s,d,u,null),v.return=o,s.return=o,v.sibling=s,o.child=v,o.child.memoizedState=qf(u),o.memoizedState=Wf,s):Kf(o,E));if(m=s.memoizedState,m!==null&&(k=m.dehydrated,k!==null))return IA(s,o,E,d,k,m,u);if(v){v=d.fallback,E=o.mode,m=s.child,k=m.sibling;var j={mode:"hidden",children:d.children};return(E&1)===0&&o.child!==m?(d=o.child,d.childLanes=0,d.pendingProps=j,o.deletions=null):(d=Fs(m,j),d.subtreeFlags=m.subtreeFlags&14680064),k!==null?v=Fs(k,v):(v=zi(v,E,u,null),v.flags|=2),v.return=o,d.return=o,d.sibling=v,o.child=d,d=v,v=o.child,E=s.child.memoizedState,E=E===null?qf(u):{baseLanes:E.baseLanes|u,cachePool:null,transitions:E.transitions},v.memoizedState=E,v.childLanes=s.childLanes&~u,o.memoizedState=Wf,d}return v=s.child,s=v.sibling,d=Fs(v,{mode:"visible",children:d.children}),(o.mode&1)===0&&(d.lanes=u),d.return=o,d.sibling=null,s!==null&&(u=o.deletions,u===null?(o.deletions=[s],o.flags|=16):u.push(s)),o.child=d,o.memoizedState=null,d}function Kf(s,o){return o=Zc({mode:"visible",children:o},s.mode,0,null),o.return=s,s.child=o}function Uc(s,o,u,d){return d!==null&&wf(d),na(o,s.child,null,u),s=Kf(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function IA(s,o,u,d,m,v,E){if(u)return o.flags&256?(o.flags&=-257,d=Bf(Error(n(422))),Uc(s,o,E,d)):o.memoizedState!==null?(o.child=s.child,o.flags|=128,null):(v=d.fallback,m=o.mode,d=Zc({mode:"visible",children:d.children},m,0,null),v=zi(v,m,E,null),v.flags|=2,d.return=o,v.return=o,d.sibling=v,o.child=d,(o.mode&1)!==0&&na(o,s.child,null,E),o.child.memoizedState=qf(E),o.memoizedState=Wf,v);if((o.mode&1)===0)return Uc(s,o,E,null);if(m.data==="$!"){if(d=m.nextSibling&&m.nextSibling.dataset,d)var k=d.dgst;return d=k,v=Error(n(419)),d=Bf(v,d,void 0),Uc(s,o,E,d)}if(k=(E&s.childLanes)!==0,fn||k){if(d=Ot,d!==null){switch(E&-E){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(d.suspendedLanes|E))!==0?0:m,m!==0&&m!==v.retryLane&&(v.retryLane=m,Jr(s,m),or(d,s,m,-1))}return up(),d=Bf(Error(n(421))),Uc(s,o,E,d)}return m.data==="$?"?(o.flags|=128,o.child=s.child,o=MA.bind(null,s),m._reactRetry=o,null):(s=v.treeContext,bn=Cs(m.nextSibling),In=o,nt=!0,nr=null,s!==null&&(Dn[On++]=Xr,Dn[On++]=Yr,Dn[On++]=Di,Xr=s.id,Yr=s.overflow,Di=o),o=Kf(o,d.children),o.flags|=4096,o)}function kv(s,o,u){s.lanes|=o;var d=s.alternate;d!==null&&(d.lanes|=o),Sf(s.return,o,u)}function Gf(s,o,u,d,m){var v=s.memoizedState;v===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:m}:(v.isBackwards=o,v.rendering=null,v.renderingStartTime=0,v.last=d,v.tail=u,v.tailMode=m)}function Nv(s,o,u){var d=o.pendingProps,m=d.revealOrder,v=d.tail;if(rn(s,o,d.children,u),d=rt.current,(d&2)!==0)d=d&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&kv(s,u,o);else if(s.tag===19)kv(s,u,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}d&=1}if(Xe(rt,d),(o.mode&1)===0)o.memoizedState=null;else switch(m){case"forwards":for(u=o.child,m=null;u!==null;)s=u.alternate,s!==null&&Vc(s)===null&&(m=u),u=u.sibling;u=m,u===null?(m=o.child,o.child=null):(m=u.sibling,u.sibling=null),Gf(o,!1,m,u,v);break;case"backwards":for(u=null,m=o.child,o.child=null;m!==null;){if(s=m.alternate,s!==null&&Vc(s)===null){o.child=m;break}s=m.sibling,m.sibling=u,u=m,m=s}Gf(o,!0,u,null,v);break;case"together":Gf(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Bc(s,o){(o.mode&1)===0&&s!==null&&(s.alternate=null,o.alternate=null,o.flags|=2)}function es(s,o,u){if(s!==null&&(o.dependencies=s.dependencies),Fi|=o.lanes,(u&o.childLanes)===0)return null;if(s!==null&&o.child!==s.child)throw Error(n(153));if(o.child!==null){for(s=o.child,u=Fs(s,s.pendingProps),o.child=u,u.return=o;s.sibling!==null;)s=s.sibling,u=u.sibling=Fs(s,s.pendingProps),u.return=o;u.sibling=null}return o.child}function bA(s,o,u){switch(o.tag){case 3:Cv(o),ta();break;case 5:q0(o);break;case 1:dn(o.type)&&Ec(o);break;case 4:Af(o,o.stateNode.containerInfo);break;case 10:var d=o.type._context,m=o.memoizedProps.value;Xe(Rc,d._currentValue),d._currentValue=m;break;case 13:if(d=o.memoizedState,d!==null)return d.dehydrated!==null?(Xe(rt,rt.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?Pv(s,o,u):(Xe(rt,rt.current&1),s=es(s,o,u),s!==null?s.sibling:null);Xe(rt,rt.current&1);break;case 19:if(d=(u&o.childLanes)!==0,(s.flags&128)!==0){if(d)return Nv(s,o,u);o.flags|=128}if(m=o.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Xe(rt,rt.current),d)break;return null;case 22:case 23:return o.lanes=0,Iv(s,o,u)}return es(s,o,u)}var Vv,Qf,Dv,Ov;Vv=function(s,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Qf=function(){},Dv=function(s,o,u,d){var m=s.memoizedProps;if(m!==d){s=o.stateNode,Li(Tr.current);var v=null;switch(u){case"input":m=gi(s,m),d=gi(s,d),v=[];break;case"select":m=oe({},m,{value:void 0}),d=oe({},d,{value:void 0}),v=[];break;case"textarea":m=Ja(s,m),d=Ja(s,d),v=[];break;default:typeof m.onClick!="function"&&typeof d.onClick=="function"&&(s.onclick=wc)}sl(u,d);var E;u=null;for(G in m)if(!d.hasOwnProperty(G)&&m.hasOwnProperty(G)&&m[G]!=null)if(G==="style"){var k=m[G];for(E in k)k.hasOwnProperty(E)&&(u||(u={}),u[E]="")}else G!=="dangerouslySetInnerHTML"&&G!=="children"&&G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&G!=="autoFocus"&&(i.hasOwnProperty(G)?v||(v=[]):(v=v||[]).push(G,null));for(G in d){var j=d[G];if(k=m?.[G],d.hasOwnProperty(G)&&j!==k&&(j!=null||k!=null))if(G==="style")if(k){for(E in k)!k.hasOwnProperty(E)||j&&j.hasOwnProperty(E)||(u||(u={}),u[E]="");for(E in j)j.hasOwnProperty(E)&&k[E]!==j[E]&&(u||(u={}),u[E]=j[E])}else u||(v||(v=[]),v.push(G,u)),u=j;else G==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,k=k?k.__html:void 0,j!=null&&k!==j&&(v=v||[]).push(G,j)):G==="children"?typeof j!="string"&&typeof j!="number"||(v=v||[]).push(G,""+j):G!=="suppressContentEditableWarning"&&G!=="suppressHydrationWarning"&&(i.hasOwnProperty(G)?(j!=null&&G==="onScroll"&&Je("scroll",s),v||k===j||(v=[])):(v=v||[]).push(G,j))}u&&(v=v||[]).push("style",u);var G=v;(o.updateQueue=G)&&(o.flags|=4)}},Ov=function(s,o,u,d){u!==d&&(o.flags|=4)};function Ml(s,o){if(!nt)switch(s.tailMode){case"hidden":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function Gt(s){var o=s.alternate!==null&&s.alternate.child===s.child,u=0,d=0;if(o)for(var m=s.child;m!==null;)u|=m.lanes|m.childLanes,d|=m.subtreeFlags&14680064,d|=m.flags&14680064,m.return=s,m=m.sibling;else for(m=s.child;m!==null;)u|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=s,m=m.sibling;return s.subtreeFlags|=d,s.childLanes=u,o}function AA(s,o,u){var d=o.pendingProps;switch(yf(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(o),null;case 1:return dn(o.type)&&Tc(),Gt(o),null;case 3:return d=o.stateNode,ia(),Ze(hn),Ze(qt),Pf(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(s===null||s.child===null)&&(Ac(o)?o.flags|=4:s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,nr!==null&&(op(nr),nr=null))),Qf(s,o),Gt(o),null;case 5:Cf(o);var m=Li(Vl.current);if(u=o.type,s!==null&&o.stateNode!=null)Dv(s,o,u,d,m),s.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!d){if(o.stateNode===null)throw Error(n(166));return Gt(o),null}if(s=Li(Tr.current),Ac(o)){d=o.stateNode,u=o.type;var v=o.memoizedProps;switch(d[xr]=o,d[Cl]=v,s=(o.mode&1)!==0,u){case"dialog":Je("cancel",d),Je("close",d);break;case"iframe":case"object":case"embed":Je("load",d);break;case"video":case"audio":for(m=0;m<Il.length;m++)Je(Il[m],d);break;case"source":Je("error",d);break;case"img":case"image":case"link":Je("error",d),Je("load",d);break;case"details":Je("toggle",d);break;case"input":wo(d,v),Je("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!v.multiple},Je("invalid",d);break;case"textarea":To(d,v),Je("invalid",d)}sl(u,v),m=null;for(var E in v)if(v.hasOwnProperty(E)){var k=v[E];E==="children"?typeof k=="string"?d.textContent!==k&&(v.suppressHydrationWarning!==!0&&_c(d.textContent,k,s),m=["children",k]):typeof k=="number"&&d.textContent!==""+k&&(v.suppressHydrationWarning!==!0&&_c(d.textContent,k,s),m=["children",""+k]):i.hasOwnProperty(E)&&k!=null&&E==="onScroll"&&Je("scroll",d)}switch(u){case"input":Mr(d),Wu(d,v,!0);break;case"textarea":Mr(d),Za(d);break;case"select":case"option":break;default:typeof v.onClick=="function"&&(d.onclick=wc)}d=m,o.updateQueue=d,d!==null&&(o.flags|=4)}else{E=m.nodeType===9?m:m.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=bt(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=E.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof d.is=="string"?s=E.createElement(u,{is:d.is}):(s=E.createElement(u),u==="select"&&(E=s,d.multiple?E.multiple=!0:d.size&&(E.size=d.size))):s=E.createElementNS(s,u),s[xr]=o,s[Cl]=d,Vv(s,o,!1,!1),o.stateNode=s;e:{switch(E=il(u,d),u){case"dialog":Je("cancel",s),Je("close",s),m=d;break;case"iframe":case"object":case"embed":Je("load",s),m=d;break;case"video":case"audio":for(m=0;m<Il.length;m++)Je(Il[m],s);m=d;break;case"source":Je("error",s),m=d;break;case"img":case"image":case"link":Je("error",s),Je("load",s),m=d;break;case"details":Je("toggle",s),m=d;break;case"input":wo(s,d),m=gi(s,d),Je("invalid",s);break;case"option":m=d;break;case"select":s._wrapperState={wasMultiple:!!d.multiple},m=oe({},d,{value:void 0}),Je("invalid",s);break;case"textarea":To(s,d),m=Ja(s,d),Je("invalid",s);break;default:m=d}sl(u,m),k=m;for(v in k)if(k.hasOwnProperty(v)){var j=k[v];v==="style"?nl(s,j):v==="dangerouslySetInnerHTML"?(j=j?j.__html:void 0,j!=null&&el(s,j)):v==="children"?typeof j=="string"?(u!=="textarea"||j!=="")&&ys(s,j):typeof j=="number"&&ys(s,""+j):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(i.hasOwnProperty(v)?j!=null&&v==="onScroll"&&Je("scroll",s):j!=null&&z(s,v,j,E))}switch(u){case"input":Mr(s),Wu(s,d,!1);break;case"textarea":Mr(s),Za(s);break;case"option":d.value!=null&&s.setAttribute("value",""+He(d.value));break;case"select":s.multiple=!!d.multiple,v=d.value,v!=null?Ur(s,!!d.multiple,v,!1):d.defaultValue!=null&&Ur(s,!!d.multiple,d.defaultValue,!0);break;default:typeof m.onClick=="function"&&(s.onclick=wc)}switch(u){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Gt(o),null;case 6:if(s&&o.stateNode!=null)Ov(s,o,s.memoizedProps,d);else{if(typeof d!="string"&&o.stateNode===null)throw Error(n(166));if(u=Li(Vl.current),Li(Tr.current),Ac(o)){if(d=o.stateNode,u=o.memoizedProps,d[xr]=o,(v=d.nodeValue!==u)&&(s=In,s!==null))switch(s.tag){case 3:_c(d.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&_c(d.nodeValue,u,(s.mode&1)!==0)}v&&(o.flags|=4)}else d=(u.nodeType===9?u:u.ownerDocument).createTextNode(d),d[xr]=o,o.stateNode=d}return Gt(o),null;case 13:if(Ze(rt),d=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(nt&&bn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)M0(),ta(),o.flags|=98560,v=!1;else if(v=Ac(o),d!==null&&d.dehydrated!==null){if(s===null){if(!v)throw Error(n(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(n(317));v[xr]=o}else ta(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Gt(o),v=!1}else nr!==null&&(op(nr),nr=null),v=!0;if(!v)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(d=d!==null,d!==(s!==null&&s.memoizedState!==null)&&d&&(o.child.flags|=8192,(o.mode&1)!==0&&(s===null||(rt.current&1)!==0?Pt===0&&(Pt=3):up())),o.updateQueue!==null&&(o.flags|=4),Gt(o),null);case 4:return ia(),Qf(s,o),s===null&&bl(o.stateNode.containerInfo),Gt(o),null;case 10:return Ef(o.type._context),Gt(o),null;case 17:return dn(o.type)&&Tc(),Gt(o),null;case 19:if(Ze(rt),v=o.memoizedState,v===null)return Gt(o),null;if(d=(o.flags&128)!==0,E=v.rendering,E===null)if(d)Ml(v,!1);else{if(Pt!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(E=Vc(s),E!==null){for(o.flags|=128,Ml(v,!1),d=E.updateQueue,d!==null&&(o.updateQueue=d,o.flags|=4),o.subtreeFlags=0,d=u,u=o.child;u!==null;)v=u,s=d,v.flags&=14680066,E=v.alternate,E===null?(v.childLanes=0,v.lanes=s,v.child=null,v.subtreeFlags=0,v.memoizedProps=null,v.memoizedState=null,v.updateQueue=null,v.dependencies=null,v.stateNode=null):(v.childLanes=E.childLanes,v.lanes=E.lanes,v.child=E.child,v.subtreeFlags=0,v.deletions=null,v.memoizedProps=E.memoizedProps,v.memoizedState=E.memoizedState,v.updateQueue=E.updateQueue,v.type=E.type,s=E.dependencies,v.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return Xe(rt,rt.current&1|2),o.child}s=s.sibling}v.tail!==null&&Qe()>ua&&(o.flags|=128,d=!0,Ml(v,!1),o.lanes=4194304)}else{if(!d)if(s=Vc(E),s!==null){if(o.flags|=128,d=!0,u=s.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),Ml(v,!0),v.tail===null&&v.tailMode==="hidden"&&!E.alternate&&!nt)return Gt(o),null}else 2*Qe()-v.renderingStartTime>ua&&u!==1073741824&&(o.flags|=128,d=!0,Ml(v,!1),o.lanes=4194304);v.isBackwards?(E.sibling=o.child,o.child=E):(u=v.last,u!==null?u.sibling=E:o.child=E,v.last=E)}return v.tail!==null?(o=v.tail,v.rendering=o,v.tail=o.sibling,v.renderingStartTime=Qe(),o.sibling=null,u=rt.current,Xe(rt,d?u&1|2:u&1),o):(Gt(o),null);case 22:case 23:return lp(),d=o.memoizedState!==null,s!==null&&s.memoizedState!==null!==d&&(o.flags|=8192),d&&(o.mode&1)!==0?(An&1073741824)!==0&&(Gt(o),o.subtreeFlags&6&&(o.flags|=8192)):Gt(o),null;case 24:return null;case 25:return null}throw Error(n(156,o.tag))}function CA(s,o){switch(yf(o),o.tag){case 1:return dn(o.type)&&Tc(),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return ia(),Ze(hn),Ze(qt),Pf(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 5:return Cf(o),null;case 13:if(Ze(rt),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(n(340));ta()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return Ze(rt),null;case 4:return ia(),null;case 10:return Ef(o.type._context),null;case 22:case 23:return lp(),null;case 24:return null;default:return null}}var $c=!1,Qt=!1,RA=typeof WeakSet=="function"?WeakSet:Set,fe=null;function aa(s,o){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(d){lt(s,o,d)}else u.current=null}function Xf(s,o,u){try{u()}catch(d){lt(s,o,d)}}var jv=!1;function PA(s,o){if(lf=Is,s=p0(),Zd(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var m=d.anchorOffset,v=d.focusNode;d=d.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break e}var E=0,k=-1,j=-1,G=0,re=0,se=s,ne=null;t:for(;;){for(var he;se!==u||m!==0&&se.nodeType!==3||(k=E+m),se!==v||d!==0&&se.nodeType!==3||(j=E+d),se.nodeType===3&&(E+=se.nodeValue.length),(he=se.firstChild)!==null;)ne=se,se=he;for(;;){if(se===s)break t;if(ne===u&&++G===m&&(k=E),ne===v&&++re===d&&(j=E),(he=se.nextSibling)!==null)break;se=ne,ne=se.parentNode}se=he}u=k===-1||j===-1?null:{start:k,end:j}}else u=null}u=u||{start:0,end:0}}else u=null;for(uf={focusedElem:s,selectionRange:u},Is=!1,fe=o;fe!==null;)if(o=fe,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,fe=s;else for(;fe!==null;){o=fe;try{var pe=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(pe!==null){var me=pe.memoizedProps,pt=pe.memoizedState,W=o.stateNode,B=W.getSnapshotBeforeUpdate(o.elementType===o.type?me:rr(o.type,me),pt);W.__reactInternalSnapshotBeforeUpdate=B}break;case 3:var q=o.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(ie){lt(o,o.return,ie)}if(s=o.sibling,s!==null){s.return=o.return,fe=s;break}fe=o.return}return pe=jv,jv=!1,pe}function Fl(s,o,u){var d=o.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&s)===s){var v=m.destroy;m.destroy=void 0,v!==void 0&&Xf(o,u,v)}m=m.next}while(m!==d)}}function zc(s,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&s)===s){var d=u.create;u.destroy=d()}u=u.next}while(u!==o)}}function Yf(s){var o=s.ref;if(o!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof o=="function"?o(s):o.current=s}}function Lv(s){var o=s.alternate;o!==null&&(s.alternate=null,Lv(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&(delete o[xr],delete o[Cl],delete o[ff],delete o[dA],delete o[fA])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function Mv(s){return s.tag===5||s.tag===3||s.tag===4}function Fv(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Mv(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Jf(s,o,u){var d=s.tag;if(d===5||d===6)s=s.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(s,o):u.insertBefore(s,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(s,u)):(o=u,o.appendChild(s)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=wc));else if(d!==4&&(s=s.child,s!==null))for(Jf(s,o,u),s=s.sibling;s!==null;)Jf(s,o,u),s=s.sibling}function Zf(s,o,u){var d=s.tag;if(d===5||d===6)s=s.stateNode,o?u.insertBefore(s,o):u.appendChild(s);else if(d!==4&&(s=s.child,s!==null))for(Zf(s,o,u),s=s.sibling;s!==null;)Zf(s,o,u),s=s.sibling}var Ut=null,sr=!1;function Ds(s,o,u){for(u=u.child;u!==null;)Uv(s,o,u),u=u.sibling}function Uv(s,o,u){if(xn&&typeof xn.onCommitFiberUnmount=="function")try{xn.onCommitFiberUnmount(Ii,u)}catch{}switch(u.tag){case 5:Qt||aa(u,o);case 6:var d=Ut,m=sr;Ut=null,Ds(s,o,u),Ut=d,sr=m,Ut!==null&&(sr?(s=Ut,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):Ut.removeChild(u.stateNode));break;case 18:Ut!==null&&(sr?(s=Ut,u=u.stateNode,s.nodeType===8?df(s.parentNode,u):s.nodeType===1&&df(s,u),Zn(s)):df(Ut,u.stateNode));break;case 4:d=Ut,m=sr,Ut=u.stateNode.containerInfo,sr=!0,Ds(s,o,u),Ut=d,sr=m;break;case 0:case 11:case 14:case 15:if(!Qt&&(d=u.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){m=d=d.next;do{var v=m,E=v.destroy;v=v.tag,E!==void 0&&((v&2)!==0||(v&4)!==0)&&Xf(u,o,E),m=m.next}while(m!==d)}Ds(s,o,u);break;case 1:if(!Qt&&(aa(u,o),d=u.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=u.memoizedProps,d.state=u.memoizedState,d.componentWillUnmount()}catch(k){lt(u,o,k)}Ds(s,o,u);break;case 21:Ds(s,o,u);break;case 22:u.mode&1?(Qt=(d=Qt)||u.memoizedState!==null,Ds(s,o,u),Qt=d):Ds(s,o,u);break;default:Ds(s,o,u)}}function Bv(s){var o=s.updateQueue;if(o!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new RA),o.forEach(function(d){var m=FA.bind(null,s,d);u.has(d)||(u.add(d),d.then(m,m))})}}function ir(s,o){var u=o.deletions;if(u!==null)for(var d=0;d<u.length;d++){var m=u[d];try{var v=s,E=o,k=E;e:for(;k!==null;){switch(k.tag){case 5:Ut=k.stateNode,sr=!1;break e;case 3:Ut=k.stateNode.containerInfo,sr=!0;break e;case 4:Ut=k.stateNode.containerInfo,sr=!0;break e}k=k.return}if(Ut===null)throw Error(n(160));Uv(v,E,m),Ut=null,sr=!1;var j=m.alternate;j!==null&&(j.return=null),m.return=null}catch(G){lt(m,o,G)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)$v(o,s),o=o.sibling}function $v(s,o){var u=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(ir(o,s),Sr(s),d&4){try{Fl(3,s,s.return),zc(3,s)}catch(me){lt(s,s.return,me)}try{Fl(5,s,s.return)}catch(me){lt(s,s.return,me)}}break;case 1:ir(o,s),Sr(s),d&512&&u!==null&&aa(u,u.return);break;case 5:if(ir(o,s),Sr(s),d&512&&u!==null&&aa(u,u.return),s.flags&32){var m=s.stateNode;try{ys(m,"")}catch(me){lt(s,s.return,me)}}if(d&4&&(m=s.stateNode,m!=null)){var v=s.memoizedProps,E=u!==null?u.memoizedProps:v,k=s.type,j=s.updateQueue;if(s.updateQueue=null,j!==null)try{k==="input"&&v.type==="radio"&&v.name!=null&&Xa(m,v),il(k,E);var G=il(k,v);for(E=0;E<j.length;E+=2){var re=j[E],se=j[E+1];re==="style"?nl(m,se):re==="dangerouslySetInnerHTML"?el(m,se):re==="children"?ys(m,se):z(m,re,se,G)}switch(k){case"input":Ya(m,v);break;case"textarea":Eo(m,v);break;case"select":var ne=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!v.multiple;var he=v.value;he!=null?Ur(m,!!v.multiple,he,!1):ne!==!!v.multiple&&(v.defaultValue!=null?Ur(m,!!v.multiple,v.defaultValue,!0):Ur(m,!!v.multiple,v.multiple?[]:"",!1))}m[Cl]=v}catch(me){lt(s,s.return,me)}}break;case 6:if(ir(o,s),Sr(s),d&4){if(s.stateNode===null)throw Error(n(162));m=s.stateNode,v=s.memoizedProps;try{m.nodeValue=v}catch(me){lt(s,s.return,me)}}break;case 3:if(ir(o,s),Sr(s),d&4&&u!==null&&u.memoizedState.isDehydrated)try{Zn(o.containerInfo)}catch(me){lt(s,s.return,me)}break;case 4:ir(o,s),Sr(s);break;case 13:ir(o,s),Sr(s),m=s.child,m.flags&8192&&(v=m.memoizedState!==null,m.stateNode.isHidden=v,!v||m.alternate!==null&&m.alternate.memoizedState!==null||(np=Qe())),d&4&&Bv(s);break;case 22:if(re=u!==null&&u.memoizedState!==null,s.mode&1?(Qt=(G=Qt)||re,ir(o,s),Qt=G):ir(o,s),Sr(s),d&8192){if(G=s.memoizedState!==null,(s.stateNode.isHidden=G)&&!re&&(s.mode&1)!==0)for(fe=s,re=s.child;re!==null;){for(se=fe=re;fe!==null;){switch(ne=fe,he=ne.child,ne.tag){case 0:case 11:case 14:case 15:Fl(4,ne,ne.return);break;case 1:aa(ne,ne.return);var pe=ne.stateNode;if(typeof pe.componentWillUnmount=="function"){d=ne,u=ne.return;try{o=d,pe.props=o.memoizedProps,pe.state=o.memoizedState,pe.componentWillUnmount()}catch(me){lt(d,u,me)}}break;case 5:aa(ne,ne.return);break;case 22:if(ne.memoizedState!==null){Wv(se);continue}}he!==null?(he.return=ne,fe=he):Wv(se)}re=re.sibling}e:for(re=null,se=s;;){if(se.tag===5){if(re===null){re=se;try{m=se.stateNode,G?(v=m.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none"):(k=se.stateNode,j=se.memoizedProps.style,E=j!=null&&j.hasOwnProperty("display")?j.display:null,k.style.display=tl("display",E))}catch(me){lt(s,s.return,me)}}}else if(se.tag===6){if(re===null)try{se.stateNode.nodeValue=G?"":se.memoizedProps}catch(me){lt(s,s.return,me)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===s)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===s)break e;for(;se.sibling===null;){if(se.return===null||se.return===s)break e;re===se&&(re=null),se=se.return}re===se&&(re=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:ir(o,s),Sr(s),d&4&&Bv(s);break;case 21:break;default:ir(o,s),Sr(s)}}function Sr(s){var o=s.flags;if(o&2){try{e:{for(var u=s.return;u!==null;){if(Mv(u)){var d=u;break e}u=u.return}throw Error(n(160))}switch(d.tag){case 5:var m=d.stateNode;d.flags&32&&(ys(m,""),d.flags&=-33);var v=Fv(s);Zf(s,v,m);break;case 3:case 4:var E=d.stateNode.containerInfo,k=Fv(s);Jf(s,k,E);break;default:throw Error(n(161))}}catch(j){lt(s,s.return,j)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function kA(s,o,u){fe=s,zv(s)}function zv(s,o,u){for(var d=(s.mode&1)!==0;fe!==null;){var m=fe,v=m.child;if(m.tag===22&&d){var E=m.memoizedState!==null||$c;if(!E){var k=m.alternate,j=k!==null&&k.memoizedState!==null||Qt;k=$c;var G=Qt;if($c=E,(Qt=j)&&!G)for(fe=m;fe!==null;)E=fe,j=E.child,E.tag===22&&E.memoizedState!==null?qv(m):j!==null?(j.return=E,fe=j):qv(m);for(;v!==null;)fe=v,zv(v),v=v.sibling;fe=m,$c=k,Qt=G}Hv(s)}else(m.subtreeFlags&8772)!==0&&v!==null?(v.return=m,fe=v):Hv(s)}}function Hv(s){for(;fe!==null;){var o=fe;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Qt||zc(5,o);break;case 1:var d=o.stateNode;if(o.flags&4&&!Qt)if(u===null)d.componentDidMount();else{var m=o.elementType===o.type?u.memoizedProps:rr(o.type,u.memoizedProps);d.componentDidUpdate(m,u.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var v=o.updateQueue;v!==null&&W0(o,v,d);break;case 3:var E=o.updateQueue;if(E!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}W0(o,E,u)}break;case 5:var k=o.stateNode;if(u===null&&o.flags&4){u=k;var j=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":j.autoFocus&&u.focus();break;case"img":j.src&&(u.src=j.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var G=o.alternate;if(G!==null){var re=G.memoizedState;if(re!==null){var se=re.dehydrated;se!==null&&Zn(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Qt||o.flags&512&&Yf(o)}catch(ne){lt(o,o.return,ne)}}if(o===s){fe=null;break}if(u=o.sibling,u!==null){u.return=o.return,fe=u;break}fe=o.return}}function Wv(s){for(;fe!==null;){var o=fe;if(o===s){fe=null;break}var u=o.sibling;if(u!==null){u.return=o.return,fe=u;break}fe=o.return}}function qv(s){for(;fe!==null;){var o=fe;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{zc(4,o)}catch(j){lt(o,u,j)}break;case 1:var d=o.stateNode;if(typeof d.componentDidMount=="function"){var m=o.return;try{d.componentDidMount()}catch(j){lt(o,m,j)}}var v=o.return;try{Yf(o)}catch(j){lt(o,v,j)}break;case 5:var E=o.return;try{Yf(o)}catch(j){lt(o,E,j)}}}catch(j){lt(o,o.return,j)}if(o===s){fe=null;break}var k=o.sibling;if(k!==null){k.return=o.return,fe=k;break}fe=o.return}}var NA=Math.ceil,Hc=K.ReactCurrentDispatcher,ep=K.ReactCurrentOwner,Mn=K.ReactCurrentBatchConfig,Ue=0,Ot=null,vt=null,Bt=0,An=0,la=Rs(0),Pt=0,Ul=null,Fi=0,Wc=0,tp=0,Bl=null,pn=null,np=0,ua=1/0,ts=null,qc=!1,rp=null,Os=null,Kc=!1,js=null,Gc=0,$l=0,sp=null,Qc=-1,Xc=0;function sn(){return(Ue&6)!==0?Qe():Qc!==-1?Qc:Qc=Qe()}function Ls(s){return(s.mode&1)===0?1:(Ue&2)!==0&&Bt!==0?Bt&-Bt:mA.transition!==null?(Xc===0&&(Xc=Ai()),Xc):(s=je,s!==0||(s=window.event,s=s===void 0?16:gl(s.type)),s)}function or(s,o,u,d){if(50<$l)throw $l=0,sp=null,Error(n(185));xs(s,u,d),((Ue&2)===0||s!==Ot)&&(s===Ot&&((Ue&2)===0&&(Wc|=u),Pt===4&&Ms(s,Bt)),mn(s,d),u===1&&Ue===0&&(o.mode&1)===0&&(ua=Qe()+500,Sc&&ks()))}function mn(s,o){var u=s.callbackNode;zr(s,o);var d=bi(s,s===Ot?Bt:0);if(d===0)u!==null&&hl(u),s.callbackNode=null,s.callbackPriority=0;else if(o=d&-d,s.callbackPriority!==o){if(u!=null&&hl(u),o===1)s.tag===0?pA(Gv.bind(null,s)):V0(Gv.bind(null,s)),cA(function(){(Ue&6)===0&&ks()}),u=null;else{switch(Es(d)){case 1:u=Si;break;case 4:u=vs;break;case 16:u=kn;break;case 536870912:u=Xu;break;default:u=kn}u=n_(u,Kv.bind(null,s))}s.callbackPriority=o,s.callbackNode=u}}function Kv(s,o){if(Qc=-1,Xc=0,(Ue&6)!==0)throw Error(n(327));var u=s.callbackNode;if(ca()&&s.callbackNode!==u)return null;var d=bi(s,s===Ot?Bt:0);if(d===0)return null;if((d&30)!==0||(d&s.expiredLanes)!==0||o)o=Yc(s,d);else{o=d;var m=Ue;Ue|=2;var v=Xv();(Ot!==s||Bt!==o)&&(ts=null,ua=Qe()+500,Bi(s,o));do try{OA();break}catch(k){Qv(s,k)}while(!0);Tf(),Hc.current=v,Ue=m,vt!==null?o=0:(Ot=null,Bt=0,o=Pt)}if(o!==0){if(o===2&&(m=Tn(s),m!==0&&(d=m,o=ip(s,m))),o===1)throw u=Ul,Bi(s,0),Ms(s,d),mn(s,Qe()),u;if(o===6)Ms(s,d);else{if(m=s.current.alternate,(d&30)===0&&!VA(m)&&(o=Yc(s,d),o===2&&(v=Tn(s),v!==0&&(d=v,o=ip(s,v))),o===1))throw u=Ul,Bi(s,0),Ms(s,d),mn(s,Qe()),u;switch(s.finishedWork=m,s.finishedLanes=d,o){case 0:case 1:throw Error(n(345));case 2:$i(s,pn,ts);break;case 3:if(Ms(s,d),(d&130023424)===d&&(o=np+500-Qe(),10<o)){if(bi(s,0)!==0)break;if(m=s.suspendedLanes,(m&d)!==d){sn(),s.pingedLanes|=s.suspendedLanes&m;break}s.timeoutHandle=hf($i.bind(null,s,pn,ts),o);break}$i(s,pn,ts);break;case 4:if(Ms(s,d),(d&4194240)===d)break;for(o=s.eventTimes,m=-1;0<d;){var E=31-tn(d);v=1<<E,E=o[E],E>m&&(m=E),d&=~v}if(d=m,d=Qe()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*NA(d/1960))-d,10<d){s.timeoutHandle=hf($i.bind(null,s,pn,ts),d);break}$i(s,pn,ts);break;case 5:$i(s,pn,ts);break;default:throw Error(n(329))}}}return mn(s,Qe()),s.callbackNode===u?Kv.bind(null,s):null}function ip(s,o){var u=Bl;return s.current.memoizedState.isDehydrated&&(Bi(s,o).flags|=256),s=Yc(s,o),s!==2&&(o=pn,pn=u,o!==null&&op(o)),s}function op(s){pn===null?pn=s:pn.push.apply(pn,s)}function VA(s){for(var o=s;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var d=0;d<u.length;d++){var m=u[d],v=m.getSnapshot;m=m.value;try{if(!tr(v(),m))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ms(s,o){for(o&=~tp,o&=~Wc,s.suspendedLanes|=o,s.pingedLanes&=~o,s=s.expirationTimes;0<o;){var u=31-tn(o),d=1<<u;s[u]=-1,o&=~d}}function Gv(s){if((Ue&6)!==0)throw Error(n(327));ca();var o=bi(s,0);if((o&1)===0)return mn(s,Qe()),null;var u=Yc(s,o);if(s.tag!==0&&u===2){var d=Tn(s);d!==0&&(o=d,u=ip(s,d))}if(u===1)throw u=Ul,Bi(s,0),Ms(s,o),mn(s,Qe()),u;if(u===6)throw Error(n(345));return s.finishedWork=s.current.alternate,s.finishedLanes=o,$i(s,pn,ts),mn(s,Qe()),null}function ap(s,o){var u=Ue;Ue|=1;try{return s(o)}finally{Ue=u,Ue===0&&(ua=Qe()+500,Sc&&ks())}}function Ui(s){js!==null&&js.tag===0&&(Ue&6)===0&&ca();var o=Ue;Ue|=1;var u=Mn.transition,d=je;try{if(Mn.transition=null,je=1,s)return s()}finally{je=d,Mn.transition=u,Ue=o,(Ue&6)===0&&ks()}}function lp(){An=la.current,Ze(la)}function Bi(s,o){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,uA(u)),vt!==null)for(u=vt.return;u!==null;){var d=u;switch(yf(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&Tc();break;case 3:ia(),Ze(hn),Ze(qt),Pf();break;case 5:Cf(d);break;case 4:ia();break;case 13:Ze(rt);break;case 19:Ze(rt);break;case 10:Ef(d.type._context);break;case 22:case 23:lp()}u=u.return}if(Ot=s,vt=s=Fs(s.current,null),Bt=An=o,Pt=0,Ul=null,tp=Wc=Fi=0,pn=Bl=null,ji!==null){for(o=0;o<ji.length;o++)if(u=ji[o],d=u.interleaved,d!==null){u.interleaved=null;var m=d.next,v=u.pending;if(v!==null){var E=v.next;v.next=m,d.next=E}u.pending=d}ji=null}return s}function Qv(s,o){do{var u=vt;try{if(Tf(),Dc.current=Mc,Oc){for(var d=st.memoizedState;d!==null;){var m=d.queue;m!==null&&(m.pending=null),d=d.next}Oc=!1}if(Mi=0,Dt=Rt=st=null,Dl=!1,Ol=0,ep.current=null,u===null||u.return===null){Pt=1,Ul=o,vt=null;break}e:{var v=s,E=u.return,k=u,j=o;if(o=Bt,k.flags|=32768,j!==null&&typeof j=="object"&&typeof j.then=="function"){var G=j,re=k,se=re.tag;if((re.mode&1)===0&&(se===0||se===11||se===15)){var ne=re.alternate;ne?(re.updateQueue=ne.updateQueue,re.memoizedState=ne.memoizedState,re.lanes=ne.lanes):(re.updateQueue=null,re.memoizedState=null)}var he=wv(E);if(he!==null){he.flags&=-257,xv(he,E,k,v,o),he.mode&1&&_v(v,G,o),o=he,j=G;var pe=o.updateQueue;if(pe===null){var me=new Set;me.add(j),o.updateQueue=me}else pe.add(j);break e}else{if((o&1)===0){_v(v,G,o),up();break e}j=Error(n(426))}}else if(nt&&k.mode&1){var pt=wv(E);if(pt!==null){(pt.flags&65536)===0&&(pt.flags|=256),xv(pt,E,k,v,o),wf(oa(j,k));break e}}v=j=oa(j,k),Pt!==4&&(Pt=2),Bl===null?Bl=[v]:Bl.push(v),v=E;do{switch(v.tag){case 3:v.flags|=65536,o&=-o,v.lanes|=o;var W=yv(v,j,o);H0(v,W);break e;case 1:k=j;var B=v.type,q=v.stateNode;if((v.flags&128)===0&&(typeof B.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(Os===null||!Os.has(q)))){v.flags|=65536,o&=-o,v.lanes|=o;var ie=vv(v,k,o);H0(v,ie);break e}}v=v.return}while(v!==null)}Jv(u)}catch(ge){o=ge,vt===u&&u!==null&&(vt=u=u.return);continue}break}while(!0)}function Xv(){var s=Hc.current;return Hc.current=Mc,s===null?Mc:s}function up(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),Ot===null||(Fi&268435455)===0&&(Wc&268435455)===0||Ms(Ot,Bt)}function Yc(s,o){var u=Ue;Ue|=2;var d=Xv();(Ot!==s||Bt!==o)&&(ts=null,Bi(s,o));do try{DA();break}catch(m){Qv(s,m)}while(!0);if(Tf(),Ue=u,Hc.current=d,vt!==null)throw Error(n(261));return Ot=null,Bt=0,Pt}function DA(){for(;vt!==null;)Yv(vt)}function OA(){for(;vt!==null&&!Gu();)Yv(vt)}function Yv(s){var o=t_(s.alternate,s,An);s.memoizedProps=s.pendingProps,o===null?Jv(s):vt=o,ep.current=null}function Jv(s){var o=s;do{var u=o.alternate;if(s=o.return,(o.flags&32768)===0){if(u=AA(u,o,An),u!==null){vt=u;return}}else{if(u=CA(u,o),u!==null){u.flags&=32767,vt=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{Pt=6,vt=null;return}}if(o=o.sibling,o!==null){vt=o;return}vt=o=s}while(o!==null);Pt===0&&(Pt=5)}function $i(s,o,u){var d=je,m=Mn.transition;try{Mn.transition=null,je=1,jA(s,o,u,d)}finally{Mn.transition=m,je=d}return null}function jA(s,o,u,d){do ca();while(js!==null);if((Ue&6)!==0)throw Error(n(327));u=s.finishedWork;var m=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(n(177));s.callbackNode=null,s.callbackPriority=0;var v=u.lanes|u.childLanes;if(Ke(s,v),s===Ot&&(vt=Ot=null,Bt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||Kc||(Kc=!0,n_(kn,function(){return ca(),null})),v=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||v){v=Mn.transition,Mn.transition=null;var E=je;je=1;var k=Ue;Ue|=4,ep.current=null,PA(s,u),$v(u,s),nA(uf),Is=!!lf,uf=lf=null,s.current=u,kA(u),Wd(),Ue=k,je=E,Mn.transition=v}else s.current=u;if(Kc&&(Kc=!1,js=s,Gc=m),v=s.pendingLanes,v===0&&(Os=null),Yu(u.stateNode),mn(s,Qe()),o!==null)for(d=s.onRecoverableError,u=0;u<o.length;u++)m=o[u],d(m.value,{componentStack:m.stack,digest:m.digest});if(qc)throw qc=!1,s=rp,rp=null,s;return(Gc&1)!==0&&s.tag!==0&&ca(),v=s.pendingLanes,(v&1)!==0?s===sp?$l++:($l=0,sp=s):$l=0,ks(),null}function ca(){if(js!==null){var s=Es(Gc),o=Mn.transition,u=je;try{if(Mn.transition=null,je=16>s?16:s,js===null)var d=!1;else{if(s=js,js=null,Gc=0,(Ue&6)!==0)throw Error(n(331));var m=Ue;for(Ue|=4,fe=s.current;fe!==null;){var v=fe,E=v.child;if((fe.flags&16)!==0){var k=v.deletions;if(k!==null){for(var j=0;j<k.length;j++){var G=k[j];for(fe=G;fe!==null;){var re=fe;switch(re.tag){case 0:case 11:case 15:Fl(8,re,v)}var se=re.child;if(se!==null)se.return=re,fe=se;else for(;fe!==null;){re=fe;var ne=re.sibling,he=re.return;if(Lv(re),re===G){fe=null;break}if(ne!==null){ne.return=he,fe=ne;break}fe=he}}}var pe=v.alternate;if(pe!==null){var me=pe.child;if(me!==null){pe.child=null;do{var pt=me.sibling;me.sibling=null,me=pt}while(me!==null)}}fe=v}}if((v.subtreeFlags&2064)!==0&&E!==null)E.return=v,fe=E;else e:for(;fe!==null;){if(v=fe,(v.flags&2048)!==0)switch(v.tag){case 0:case 11:case 15:Fl(9,v,v.return)}var W=v.sibling;if(W!==null){W.return=v.return,fe=W;break e}fe=v.return}}var B=s.current;for(fe=B;fe!==null;){E=fe;var q=E.child;if((E.subtreeFlags&2064)!==0&&q!==null)q.return=E,fe=q;else e:for(E=B;fe!==null;){if(k=fe,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:zc(9,k)}}catch(ge){lt(k,k.return,ge)}if(k===E){fe=null;break e}var ie=k.sibling;if(ie!==null){ie.return=k.return,fe=ie;break e}fe=k.return}}if(Ue=m,ks(),xn&&typeof xn.onPostCommitFiberRoot=="function")try{xn.onPostCommitFiberRoot(Ii,s)}catch{}d=!0}return d}finally{je=u,Mn.transition=o}}return!1}function Zv(s,o,u){o=oa(u,o),o=yv(s,o,1),s=Vs(s,o,1),o=sn(),s!==null&&(xs(s,1,o),mn(s,o))}function lt(s,o,u){if(s.tag===3)Zv(s,s,u);else for(;o!==null;){if(o.tag===3){Zv(o,s,u);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Os===null||!Os.has(d))){s=oa(u,s),s=vv(o,s,1),o=Vs(o,s,1),s=sn(),o!==null&&(xs(o,1,s),mn(o,s));break}}o=o.return}}function LA(s,o,u){var d=s.pingCache;d!==null&&d.delete(o),o=sn(),s.pingedLanes|=s.suspendedLanes&u,Ot===s&&(Bt&u)===u&&(Pt===4||Pt===3&&(Bt&130023424)===Bt&&500>Qe()-np?Bi(s,0):tp|=u),mn(s,o)}function e_(s,o){o===0&&((s.mode&1)===0?o=1:(o=Vo,Vo<<=1,(Vo&130023424)===0&&(Vo=4194304)));var u=sn();s=Jr(s,o),s!==null&&(xs(s,o,u),mn(s,u))}function MA(s){var o=s.memoizedState,u=0;o!==null&&(u=o.retryLane),e_(s,u)}function FA(s,o){var u=0;switch(s.tag){case 13:var d=s.stateNode,m=s.memoizedState;m!==null&&(u=m.retryLane);break;case 19:d=s.stateNode;break;default:throw Error(n(314))}d!==null&&d.delete(o),e_(s,u)}var t_;t_=function(s,o,u){if(s!==null)if(s.memoizedProps!==o.pendingProps||hn.current)fn=!0;else{if((s.lanes&u)===0&&(o.flags&128)===0)return fn=!1,bA(s,o,u);fn=(s.flags&131072)!==0}else fn=!1,nt&&(o.flags&1048576)!==0&&D0(o,bc,o.index);switch(o.lanes=0,o.tag){case 2:var d=o.type;Bc(s,o),s=o.pendingProps;var m=Jo(o,qt.current);sa(o,u),m=Vf(null,o,d,s,m,u);var v=Df();return o.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,dn(d)?(v=!0,Ec(o)):v=!1,o.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,bf(o),m.updater=Fc,o.stateNode=m,m._reactInternals=o,Uf(o,d,s,u),o=Hf(null,o,d,!0,v,u)):(o.tag=0,nt&&v&&gf(o),rn(null,o,m,u),o=o.child),o;case 16:d=o.elementType;e:{switch(Bc(s,o),s=o.pendingProps,m=d._init,d=m(d._payload),o.type=d,m=o.tag=BA(d),s=rr(d,s),m){case 0:o=zf(null,o,d,s,u);break e;case 1:o=Av(null,o,d,s,u);break e;case 11:o=Tv(null,o,d,s,u);break e;case 14:o=Ev(null,o,d,rr(d.type,s),u);break e}throw Error(n(306,d,""))}return o;case 0:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:rr(d,m),zf(s,o,d,m,u);case 1:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:rr(d,m),Av(s,o,d,m,u);case 3:e:{if(Cv(o),s===null)throw Error(n(387));d=o.pendingProps,v=o.memoizedState,m=v.element,z0(s,o),Nc(o,d,null,u);var E=o.memoizedState;if(d=E.element,v.isDehydrated)if(v={element:d,isDehydrated:!1,cache:E.cache,pendingSuspenseBoundaries:E.pendingSuspenseBoundaries,transitions:E.transitions},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){m=oa(Error(n(423)),o),o=Rv(s,o,d,u,m);break e}else if(d!==m){m=oa(Error(n(424)),o),o=Rv(s,o,d,u,m);break e}else for(bn=Cs(o.stateNode.containerInfo.firstChild),In=o,nt=!0,nr=null,u=B0(o,null,d,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(ta(),d===m){o=es(s,o,u);break e}rn(s,o,d,u)}o=o.child}return o;case 5:return q0(o),s===null&&_f(o),d=o.type,m=o.pendingProps,v=s!==null?s.memoizedProps:null,E=m.children,cf(d,m)?E=null:v!==null&&cf(d,v)&&(o.flags|=32),bv(s,o),rn(s,o,E,u),o.child;case 6:return s===null&&_f(o),null;case 13:return Pv(s,o,u);case 4:return Af(o,o.stateNode.containerInfo),d=o.pendingProps,s===null?o.child=na(o,null,d,u):rn(s,o,d,u),o.child;case 11:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:rr(d,m),Tv(s,o,d,m,u);case 7:return rn(s,o,o.pendingProps,u),o.child;case 8:return rn(s,o,o.pendingProps.children,u),o.child;case 12:return rn(s,o,o.pendingProps.children,u),o.child;case 10:e:{if(d=o.type._context,m=o.pendingProps,v=o.memoizedProps,E=m.value,Xe(Rc,d._currentValue),d._currentValue=E,v!==null)if(tr(v.value,E)){if(v.children===m.children&&!hn.current){o=es(s,o,u);break e}}else for(v=o.child,v!==null&&(v.return=o);v!==null;){var k=v.dependencies;if(k!==null){E=v.child;for(var j=k.firstContext;j!==null;){if(j.context===d){if(v.tag===1){j=Zr(-1,u&-u),j.tag=2;var G=v.updateQueue;if(G!==null){G=G.shared;var re=G.pending;re===null?j.next=j:(j.next=re.next,re.next=j),G.pending=j}}v.lanes|=u,j=v.alternate,j!==null&&(j.lanes|=u),Sf(v.return,u,o),k.lanes|=u;break}j=j.next}}else if(v.tag===10)E=v.type===o.type?null:v.child;else if(v.tag===18){if(E=v.return,E===null)throw Error(n(341));E.lanes|=u,k=E.alternate,k!==null&&(k.lanes|=u),Sf(E,u,o),E=v.sibling}else E=v.child;if(E!==null)E.return=v;else for(E=v;E!==null;){if(E===o){E=null;break}if(v=E.sibling,v!==null){v.return=E.return,E=v;break}E=E.return}v=E}rn(s,o,m.children,u),o=o.child}return o;case 9:return m=o.type,d=o.pendingProps.children,sa(o,u),m=jn(m),d=d(m),o.flags|=1,rn(s,o,d,u),o.child;case 14:return d=o.type,m=rr(d,o.pendingProps),m=rr(d.type,m),Ev(s,o,d,m,u);case 15:return Sv(s,o,o.type,o.pendingProps,u);case 17:return d=o.type,m=o.pendingProps,m=o.elementType===d?m:rr(d,m),Bc(s,o),o.tag=1,dn(d)?(s=!0,Ec(o)):s=!1,sa(o,u),mv(o,d,m),Uf(o,d,m,u),Hf(null,o,d,!0,s,u);case 19:return Nv(s,o,u);case 22:return Iv(s,o,u)}throw Error(n(156,o.tag))};function n_(s,o){return ko(s,o)}function UA(s,o,u,d){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(s,o,u,d){return new UA(s,o,u,d)}function cp(s){return s=s.prototype,!(!s||!s.isReactComponent)}function BA(s){if(typeof s=="function")return cp(s)?1:0;if(s!=null){if(s=s.$$typeof,s===F)return 11;if(s===$e)return 14}return 2}function Fs(s,o){var u=s.alternate;return u===null?(u=Fn(s.tag,o,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=o,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,o=s.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function Jc(s,o,u,d,m,v){var E=2;if(d=s,typeof s=="function")cp(s)&&(E=1);else if(typeof s=="string")E=5;else e:switch(s){case N:return zi(u.children,m,v,o);case S:E=8,m|=8;break;case A:return s=Fn(12,u,o,m|2),s.elementType=A,s.lanes=v,s;case P:return s=Fn(13,u,o,m),s.elementType=P,s.lanes=v,s;case Ae:return s=Fn(19,u,o,m),s.elementType=Ae,s.lanes=v,s;case Ie:return Zc(u,m,v,o);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case b:E=10;break e;case D:E=9;break e;case F:E=11;break e;case $e:E=14;break e;case It:E=16,d=null;break e}throw Error(n(130,s==null?s:typeof s,""))}return o=Fn(E,u,o,m),o.elementType=s,o.type=d,o.lanes=v,o}function zi(s,o,u,d){return s=Fn(7,s,d,o),s.lanes=u,s}function Zc(s,o,u,d){return s=Fn(22,s,d,o),s.elementType=Ie,s.lanes=u,s.stateNode={isHidden:!1},s}function hp(s,o,u){return s=Fn(6,s,null,o),s.lanes=u,s}function dp(s,o,u){return o=Fn(4,s.children!==null?s.children:[],s.key,o),o.lanes=u,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}function $A(s,o,u,d,m){this.tag=o,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ws(0),this.expirationTimes=ws(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ws(0),this.identifierPrefix=d,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function fp(s,o,u,d,m,v,E,k,j){return s=new $A(s,o,u,k,j),o===1?(o=1,v===!0&&(o|=8)):o=0,v=Fn(3,null,null,o),s.current=v,v.stateNode=s,v.memoizedState={element:d,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},bf(v),s}function zA(s,o,u){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Y,key:d==null?null:""+d,children:s,containerInfo:o,implementation:u}}function r_(s){if(!s)return Ps;s=s._reactInternals;e:{if(Gn(s)!==s||s.tag!==1)throw Error(n(170));var o=s;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(dn(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(n(171))}if(s.tag===1){var u=s.type;if(dn(u))return k0(s,u,o)}return o}function s_(s,o,u,d,m,v,E,k,j){return s=fp(u,d,!0,s,m,v,E,k,j),s.context=r_(null),u=s.current,d=sn(),m=Ls(u),v=Zr(d,m),v.callback=o??null,Vs(u,v,m),s.current.lanes=m,xs(s,m,d),mn(s,d),s}function eh(s,o,u,d){var m=o.current,v=sn(),E=Ls(m);return u=r_(u),o.context===null?o.context=u:o.pendingContext=u,o=Zr(v,E),o.payload={element:s},d=d===void 0?null:d,d!==null&&(o.callback=d),s=Vs(m,o,E),s!==null&&(or(s,m,E,v),kc(s,m,E)),E}function th(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function i_(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<o?u:o}}function pp(s,o){i_(s,o),(s=s.alternate)&&i_(s,o)}function HA(){return null}var o_=typeof reportError=="function"?reportError:function(s){console.error(s)};function mp(s){this._internalRoot=s}nh.prototype.render=mp.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(n(409));eh(s,o,null,null)},nh.prototype.unmount=mp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;Ui(function(){eh(null,s,null,null)}),o[Gr]=null}};function nh(s){this._internalRoot=s}nh.prototype.unstable_scheduleHydration=function(s){if(s){var o=nc();s={blockedOn:null,target:s,priority:o};for(var u=0;u<yr.length&&o!==0&&o<yr[u].priority;u++);yr.splice(u,0,s),u===0&&ic(s)}};function gp(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function rh(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function a_(){}function WA(s,o,u,d,m){if(m){if(typeof d=="function"){var v=d;d=function(){var G=th(E);v.call(G)}}var E=s_(o,d,s,0,null,!1,!1,"",a_);return s._reactRootContainer=E,s[Gr]=E.current,bl(s.nodeType===8?s.parentNode:s),Ui(),E}for(;m=s.lastChild;)s.removeChild(m);if(typeof d=="function"){var k=d;d=function(){var G=th(j);k.call(G)}}var j=fp(s,0,!1,null,null,!1,!1,"",a_);return s._reactRootContainer=j,s[Gr]=j.current,bl(s.nodeType===8?s.parentNode:s),Ui(function(){eh(o,j,u,d)}),j}function sh(s,o,u,d,m){var v=u._reactRootContainer;if(v){var E=v;if(typeof m=="function"){var k=m;m=function(){var j=th(E);k.call(j)}}eh(o,E,s,m)}else E=WA(u,o,s,m,d);return th(E)}ec=function(s){switch(s.tag){case 3:var o=s.stateNode;if(o.current.memoizedState.isDehydrated){var u=_s(o.pendingLanes);u!==0&&(Ts(o,u|1),mn(o,Qe()),(Ue&6)===0&&(ua=Qe()+500,ks()))}break;case 13:Ui(function(){var d=Jr(s,1);if(d!==null){var m=sn();or(d,s,1,m)}}),pp(s,1)}},Do=function(s){if(s.tag===13){var o=Jr(s,134217728);if(o!==null){var u=sn();or(o,s,134217728,u)}pp(s,134217728)}},tc=function(s){if(s.tag===13){var o=Ls(s),u=Jr(s,o);if(u!==null){var d=sn();or(u,s,o,d)}pp(s,o)}},nc=function(){return je},rc=function(s,o){var u=je;try{return je=s,o()}finally{je=u}},Io=function(s,o,u){switch(o){case"input":if(Ya(s,u),o=u.name,u.type==="radio"&&o!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var d=u[o];if(d!==s&&d.form===s.form){var m=xc(d);if(!m)throw Error(n(90));_o(d),Ya(d,m)}}}break;case"textarea":Eo(s,u);break;case"select":o=u.value,o!=null&&Ur(s,!!u.multiple,o,!1)}},wi=ap,al=Ui;var qA={usingClientEntryPoint:!1,Events:[Rl,Xo,xc,mr,ol,ap]},zl={findFiberByHostInstance:Ni,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KA={bundleType:zl.bundleType,version:zl.version,rendererPackageName:zl.rendererPackageName,rendererConfig:zl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=cl(s),s===null?null:s.stateNode},findFiberByHostInstance:zl.findFiberByHostInstance||HA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ih.isDisabled&&ih.supportsFiber)try{Ii=ih.inject(KA),xn=ih}catch{}}return gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qA,gn.createPortal=function(s,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gp(o))throw Error(n(200));return zA(s,o,null,u)},gn.createRoot=function(s,o){if(!gp(s))throw Error(n(299));var u=!1,d="",m=o_;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onRecoverableError!==void 0&&(m=o.onRecoverableError)),o=fp(s,1,!1,null,null,u,!1,d,m),s[Gr]=o.current,bl(s.nodeType===8?s.parentNode:s),new mp(o)},gn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=cl(o),s=s===null?null:s.stateNode,s},gn.flushSync=function(s){return Ui(s)},gn.hydrate=function(s,o,u){if(!rh(o))throw Error(n(200));return sh(null,s,o,!0,u)},gn.hydrateRoot=function(s,o,u){if(!gp(s))throw Error(n(405));var d=u!=null&&u.hydratedSources||null,m=!1,v="",E=o_;if(u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onRecoverableError!==void 0&&(E=u.onRecoverableError)),o=s_(o,null,s,1,u??null,m,!1,v,E),s[Gr]=o.current,bl(s),d)for(s=0;s<d.length;s++)u=d[s],m=u._getVersion,m=m(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,m]:o.mutableSourceEagerHydrationData.push(u,m);return new nh(o)},gn.render=function(s,o,u){if(!rh(o))throw Error(n(200));return sh(null,s,o,!1,u)},gn.unmountComponentAtNode=function(s){if(!rh(s))throw Error(n(40));return s._reactRootContainer?(Ui(function(){sh(null,null,s,!1,function(){s._reactRootContainer=null,s[Gr]=null})}),!0):!1},gn.unstable_batchedUpdates=ap,gn.unstable_renderSubtreeIntoContainer=function(s,o,u,d){if(!rh(u))throw Error(n(200));if(s==null||s._reactInternals===void 0)throw Error(n(38));return sh(s,o,u,!1,d)},gn.version="18.3.1-next-f1338f8080-20240426",gn}var m_;function L1(){if(m_)return _p.exports;m_=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),_p.exports=nC(),_p.exports}var g_;function rC(){if(g_)return oh;g_=1;var t=L1();return oh.createRoot=t.createRoot,oh.hydrateRoot=t.hydrateRoot,oh}var sC=rC();const iC=O1(sC);L1();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function du(){return du=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},du.apply(this,arguments)}var Gs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Gs||(Gs={}));const y_="popstate";function oC(t){t===void 0&&(t={});function e(i,a){let{pathname:l="/",search:h="",hash:f=""}=uo(i.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),om("",{pathname:l,search:h,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let l=i.document.querySelector("base"),h="";if(l&&l.getAttribute("href")){let f=i.location.href,p=f.indexOf("#");h=p===-1?f:f.slice(0,p)}return h+"#"+(typeof a=="string"?a:jh(a))}function r(i,a){og(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return lC(e,n,r,t)}function St(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function og(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function aC(){return Math.random().toString(36).substr(2,8)}function v_(t,e){return{usr:t.state,key:t.key,idx:e}}function om(t,e,n,r){return n===void 0&&(n=null),du({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?uo(e):e,{state:n,key:e&&e.key||r||aC()})}function jh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function uo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function lC(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,l=i.history,h=Gs.Pop,f=null,p=g();p==null&&(p=0,l.replaceState(du({},l.state,{idx:p}),""));function g(){return(l.state||{idx:null}).idx}function w(){h=Gs.Pop;let R=g(),L=R==null?null:R-p;p=R,f&&f({action:h,location:O.location,delta:L})}function T(R,L){h=Gs.Push;let U=om(O.location,R,L);n&&n(U,R),p=g()+1;let z=v_(U,p),K=O.createHref(U);try{l.pushState(z,"",K)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;i.location.assign(K)}a&&f&&f({action:h,location:O.location,delta:1})}function C(R,L){h=Gs.Replace;let U=om(O.location,R,L);n&&n(U,R),p=g();let z=v_(U,p),K=O.createHref(U);l.replaceState(z,"",K),a&&f&&f({action:h,location:O.location,delta:0})}function V(R){let L=i.location.origin!=="null"?i.location.origin:i.location.href,U=typeof R=="string"?R:jh(R);return U=U.replace(/ $/,"%20"),St(L,"No window.location.(origin|href) available to create URL for href: "+U),new URL(U,L)}let O={get action(){return h},get location(){return t(i,l)},listen(R){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(y_,w),f=R,()=>{i.removeEventListener(y_,w),f=null}},createHref(R){return e(i,R)},createURL:V,encodeLocation(R){let L=V(R);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:T,replace:C,go(R){return l.go(R)}};return O}var __;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(__||(__={}));function uC(t,e,n){return n===void 0&&(n="/"),cC(t,e,n)}function cC(t,e,n,r){let i=typeof e=="string"?uo(e):e,a=ag(i.pathname||"/",n);if(a==null)return null;let l=M1(t);hC(l);let h=null;for(let f=0;h==null&&f<l.length;++f){let p=EC(a);h=wC(l[f],p)}return h}function M1(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(a,l,h)=>{let f={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};f.relativePath.startsWith("/")&&(St(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let p=Xs([r,f.relativePath]),g=n.concat(f);a.children&&a.children.length>0&&(St(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),M1(a.children,e,g,p)),!(a.path==null&&!a.index)&&e.push({path:p,score:vC(p,a.index),routesMeta:g})};return t.forEach((a,l)=>{var h;if(a.path===""||!((h=a.path)!=null&&h.includes("?")))i(a,l);else for(let f of F1(a.path))i(a,l,f)}),e}function F1(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let l=F1(r.join("/")),h=[];return h.push(...l.map(f=>f===""?a:[a,f].join("/"))),i&&h.push(...l),h.map(f=>t.startsWith("/")&&f===""?"/":f)}function hC(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:_C(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const dC=/^:[\w-]+$/,fC=3,pC=2,mC=1,gC=10,yC=-2,w_=t=>t==="*";function vC(t,e){let n=t.split("/"),r=n.length;return n.some(w_)&&(r+=yC),e&&(r+=pC),n.filter(i=>!w_(i)).reduce((i,a)=>i+(dC.test(a)?fC:a===""?mC:gC),r)}function _C(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function wC(t,e,n){let{routesMeta:r}=t,i={},a="/",l=[];for(let h=0;h<r.length;++h){let f=r[h],p=h===r.length-1,g=a==="/"?e:e.slice(a.length)||"/",w=xC({path:f.relativePath,caseSensitive:f.caseSensitive,end:p},g),T=f.route;if(!w)return null;Object.assign(i,w.params),l.push({params:i,pathname:Xs([a,w.pathname]),pathnameBase:AC(Xs([a,w.pathnameBase])),route:T}),w.pathnameBase!=="/"&&(a=Xs([a,w.pathnameBase]))}return l}function xC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=TC(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),h=i.slice(1);return{params:r.reduce((p,g,w)=>{let{paramName:T,isOptional:C}=g;if(T==="*"){let O=h[w]||"";l=a.slice(0,a.length-O.length).replace(/(.)\/+$/,"$1")}const V=h[w];return C&&!V?p[T]=void 0:p[T]=(V||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:l,pattern:t}}function TC(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),og(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,h,f)=>(r.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function EC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return og(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function ag(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function SC(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?uo(t):t;return{pathname:n?n.startsWith("/")?n:IC(n,e):e,search:CC(r),hash:RC(i)}}function IC(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Tp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function bC(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function U1(t,e){let n=bC(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function B1(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=uo(t):(i=du({},t),St(!i.pathname||!i.pathname.includes("?"),Tp("?","pathname","search",i)),St(!i.pathname||!i.pathname.includes("#"),Tp("#","pathname","hash",i)),St(!i.search||!i.search.includes("#"),Tp("#","search","hash",i)));let a=t===""||i.pathname==="",l=a?"/":i.pathname,h;if(l==null)h=n;else{let w=e.length-1;if(!r&&l.startsWith("..")){let T=l.split("/");for(;T[0]==="..";)T.shift(),w-=1;i.pathname=T.join("/")}h=w>=0?e[w]:"/"}let f=SC(i,h),p=l&&l!=="/"&&l.endsWith("/"),g=(a||l===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(p||g)&&(f.pathname+="/"),f}const Xs=t=>t.join("/").replace(/\/\/+/g,"/"),AC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),CC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,RC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function PC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const $1=["post","put","patch","delete"];new Set($1);const kC=["get",...$1];new Set(kC);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fu(){return fu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fu.apply(this,arguments)}const lg=M.createContext(null),NC=M.createContext(null),co=M.createContext(null),cd=M.createContext(null),ho=M.createContext({outlet:null,matches:[],isDataRoute:!1}),z1=M.createContext(null);function VC(t,e){let{relative:n}=e===void 0?{}:e;ku()||St(!1);let{basename:r,navigator:i}=M.useContext(co),{hash:a,pathname:l,search:h}=W1(t,{relative:n}),f=l;return r!=="/"&&(f=l==="/"?r:Xs([r,l])),i.createHref({pathname:f,search:h,hash:a})}function ku(){return M.useContext(cd)!=null}function hd(){return ku()||St(!1),M.useContext(cd).location}function H1(t){M.useContext(co).static||M.useLayoutEffect(t)}function DC(){let{isDataRoute:t}=M.useContext(ho);return t?KC():OC()}function OC(){ku()||St(!1);let t=M.useContext(lg),{basename:e,future:n,navigator:r}=M.useContext(co),{matches:i}=M.useContext(ho),{pathname:a}=hd(),l=JSON.stringify(U1(i,n.v7_relativeSplatPath)),h=M.useRef(!1);return H1(()=>{h.current=!0}),M.useCallback(function(p,g){if(g===void 0&&(g={}),!h.current)return;if(typeof p=="number"){r.go(p);return}let w=B1(p,JSON.parse(l),a,g.relative==="path");t==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:Xs([e,w.pathname])),(g.replace?r.replace:r.push)(w,g.state,g)},[e,r,l,a,t])}function W1(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=M.useContext(co),{matches:i}=M.useContext(ho),{pathname:a}=hd(),l=JSON.stringify(U1(i,r.v7_relativeSplatPath));return M.useMemo(()=>B1(t,JSON.parse(l),a,n==="path"),[t,l,a,n])}function jC(t,e){return LC(t,e)}function LC(t,e,n,r){ku()||St(!1);let{navigator:i}=M.useContext(co),{matches:a}=M.useContext(ho),l=a[a.length-1],h=l?l.params:{};l&&l.pathname;let f=l?l.pathnameBase:"/";l&&l.route;let p=hd(),g;if(e){var w;let R=typeof e=="string"?uo(e):e;f==="/"||(w=R.pathname)!=null&&w.startsWith(f)||St(!1),g=R}else g=p;let T=g.pathname||"/",C=T;if(f!=="/"){let R=f.replace(/^\//,"").split("/");C="/"+T.replace(/^\//,"").split("/").slice(R.length).join("/")}let V=uC(t,{pathname:C}),O=$C(V&&V.map(R=>Object.assign({},R,{params:Object.assign({},h,R.params),pathname:Xs([f,i.encodeLocation?i.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?f:Xs([f,i.encodeLocation?i.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),a,n,r);return e&&O?M.createElement(cd.Provider,{value:{location:fu({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:Gs.Pop}},O):O}function MC(){let t=qC(),e=PC(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),n?M.createElement("pre",{style:i},n):null,null)}const FC=M.createElement(MC,null);class UC extends M.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?M.createElement(ho.Provider,{value:this.props.routeContext},M.createElement(z1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function BC(t){let{routeContext:e,match:n,children:r}=t,i=M.useContext(lg);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(ho.Provider,{value:e},r)}function $C(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var a;if(!n)return null;if(n.errors)t=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let l=t,h=(i=n)==null?void 0:i.errors;if(h!=null){let g=l.findIndex(w=>w.route.id&&h?.[w.route.id]!==void 0);g>=0||St(!1),l=l.slice(0,Math.min(l.length,g+1))}let f=!1,p=-1;if(n&&r&&r.v7_partialHydration)for(let g=0;g<l.length;g++){let w=l[g];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(p=g),w.route.id){let{loaderData:T,errors:C}=n,V=w.route.loader&&T[w.route.id]===void 0&&(!C||C[w.route.id]===void 0);if(w.route.lazy||V){f=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((g,w,T)=>{let C,V=!1,O=null,R=null;n&&(C=h&&w.route.id?h[w.route.id]:void 0,O=w.route.errorElement||FC,f&&(p<0&&T===0?(GC("route-fallback"),V=!0,R=null):p===T&&(V=!0,R=w.route.hydrateFallbackElement||null)));let L=e.concat(l.slice(0,T+1)),U=()=>{let z;return C?z=O:V?z=R:w.route.Component?z=M.createElement(w.route.Component,null):w.route.element?z=w.route.element:z=g,M.createElement(BC,{match:w,routeContext:{outlet:g,matches:L,isDataRoute:n!=null},children:z})};return n&&(w.route.ErrorBoundary||w.route.errorElement||T===0)?M.createElement(UC,{location:n.location,revalidation:n.revalidation,component:O,error:C,children:U(),routeContext:{outlet:null,matches:L,isDataRoute:!0}}):U()},null)}var q1=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(q1||{}),K1=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(K1||{});function zC(t){let e=M.useContext(lg);return e||St(!1),e}function HC(t){let e=M.useContext(NC);return e||St(!1),e}function WC(t){let e=M.useContext(ho);return e||St(!1),e}function G1(t){let e=WC(),n=e.matches[e.matches.length-1];return n.route.id||St(!1),n.route.id}function qC(){var t;let e=M.useContext(z1),n=HC(),r=G1();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function KC(){let{router:t}=zC(q1.UseNavigateStable),e=G1(K1.UseNavigateStable),n=M.useRef(!1);return H1(()=>{n.current=!0}),M.useCallback(function(i,a){a===void 0&&(a={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,fu({fromRouteId:e},a)))},[t,e])}const x_={};function GC(t,e,n){x_[t]||(x_[t]=!0)}function QC(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function xh(t){St(!1)}function XC(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Gs.Pop,navigator:a,static:l=!1,future:h}=t;ku()&&St(!1);let f=e.replace(/^\/*/,"/"),p=M.useMemo(()=>({basename:f,navigator:a,static:l,future:fu({v7_relativeSplatPath:!1},h)}),[f,h,a,l]);typeof r=="string"&&(r=uo(r));let{pathname:g="/",search:w="",hash:T="",state:C=null,key:V="default"}=r,O=M.useMemo(()=>{let R=ag(g,f);return R==null?null:{location:{pathname:R,search:w,hash:T,state:C,key:V},navigationType:i}},[f,g,w,T,C,V,i]);return O==null?null:M.createElement(co.Provider,{value:p},M.createElement(cd.Provider,{children:n,value:O}))}function YC(t){let{children:e,location:n}=t;return jC(am(e),n)}new Promise(()=>{});function am(t,e){e===void 0&&(e=[]);let n=[];return M.Children.forEach(t,(r,i)=>{if(!M.isValidElement(r))return;let a=[...e,i];if(r.type===M.Fragment){n.push.apply(n,am(r.props.children,a));return}r.type!==xh&&St(!1),!r.props.index||!r.props.children||St(!1);let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=am(r.props.children,a)),n.push(l)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lm(){return lm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},lm.apply(this,arguments)}function JC(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,a;for(a=0;a<r.length;a++)i=r[a],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function ZC(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function eR(t,e){return t.button===0&&(!e||e==="_self")&&!ZC(t)}const tR=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],nR="6";try{window.__reactRouterVersion=nR}catch{}const rR="startTransition",T_=ZA[rR];function sR(t){let{basename:e,children:n,future:r,window:i}=t,a=M.useRef();a.current==null&&(a.current=oC({window:i,v5Compat:!0}));let l=a.current,[h,f]=M.useState({action:l.action,location:l.location}),{v7_startTransition:p}=r||{},g=M.useCallback(w=>{p&&T_?T_(()=>f(w)):f(w)},[f,p]);return M.useLayoutEffect(()=>l.listen(g),[l,g]),M.useEffect(()=>QC(r),[r]),M.createElement(XC,{basename:e,children:n,location:h.location,navigationType:h.action,navigator:l,future:r})}const iR=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",oR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ha=M.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:a,replace:l,state:h,target:f,to:p,preventScrollReset:g,viewTransition:w}=e,T=JC(e,tR),{basename:C}=M.useContext(co),V,O=!1;if(typeof p=="string"&&oR.test(p)&&(V=p,iR))try{let z=new URL(window.location.href),K=p.startsWith("//")?new URL(z.protocol+p):new URL(p),Q=ag(K.pathname,C);K.origin===z.origin&&Q!=null?p=Q+K.search+K.hash:O=!0}catch{}let R=VC(p,{relative:i}),L=aR(p,{replace:l,state:h,target:f,preventScrollReset:g,relative:i,viewTransition:w});function U(z){r&&r(z),z.defaultPrevented||L(z)}return M.createElement("a",lm({},T,{href:V||R,onClick:O||a?r:U,ref:n,target:f}))});var E_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(E_||(E_={}));var S_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(S_||(S_={}));function aR(t,e){let{target:n,replace:r,state:i,preventScrollReset:a,relative:l,viewTransition:h}=e===void 0?{}:e,f=DC(),p=hd(),g=W1(t,{relative:l});return M.useCallback(w=>{if(eR(w,n)){w.preventDefault();let T=r!==void 0?r:jh(p)===jh(g);f(t,{replace:T,state:i,preventScrollReset:a,relative:l,viewTransition:h})}},[p,f,g,r,i,n,t,a,l,h])}const ah="/smartfarm-tz/assets/logo-CvbaB9oV.jpg",lR="/smartfarm-tz/assets/landing1-BPLwVn9j.jpg",uR="/smartfarm-tz/assets/landing2-BQa-2pHU.jpg",cR="/smartfarm-tz/assets/landing3-lnZwy5I9.jpg",hR="/smartfarm-tz/assets/landing4-CSTi0NXk.jpg",dR="/smartfarm-tz/assets/landing5-CsmTDJC7.jpg";function fR(){const[t,e]=M.useState(!1),[n,r]=M.useState(0),[i,a]=M.useState(""),[l,h]=M.useState(0),[f,p]=M.useState(!1),[g,w]=M.useState(!1),T=[lR,uR,cR,hR,dR],C="Empowering Tanzanian Farmers with Smart Agriculture",V=()=>{e(!t)},O=()=>{w(!g)};return M.useEffect(()=>{const R=setInterval(()=>{r(L=>(L+1)%T.length)},1e4);return()=>clearInterval(R)},[T.length]),M.useEffect(()=>{if(l<C.length){const R=setTimeout(()=>{a(C.substring(0,l+1)),h(l+1)},30);return()=>clearTimeout(R)}else p(!0)},[l,C]),M.useEffect(()=>{h(0),a(""),p(!1)},[C]),_.jsxs("div",{className:"min-h-screen text-gray-800 relative overflow-hidden",children:[t&&_.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-lg transition-all duration-300",onClick:V,children:_.jsxs("div",{className:"relative max-w-2xl p-4",onClick:R=>R.stopPropagation(),children:[_.jsx("img",{src:ah,alt:"SmartFarm Logo",className:"max-h-[90vh] max-w-full rounded-xl shadow-2xl transform transition-transform duration-300 hover:scale-105"}),_.jsx("button",{className:"absolute -top-4 -right-4 bg-white rounded-full p-2 shadow-xl hover:bg-gray-100 transition-colors duration-200",onClick:V,children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),_.jsxs("div",{className:"fixed inset-0 -z-50 overflow-hidden",children:[T.map((R,L)=>_.jsx("div",{className:`absolute inset-0 bg-cover bg-center bg-no-repeat transition-all duration-1000 ease-in-out ${L===n?"opacity-100 scale-100":"opacity-0 scale-105"}`,style:{backgroundImage:`url(${R})`,filter:"blur(4px) brightness(0.9)"}},L)),_.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/10 to-black/30"})]}),_.jsxs("div",{className:"relative z-10 h-full flex flex-col",children:[_.jsxs("header",{className:"flex items-center justify-between p-6 bg-white/10 backdrop-blur-lg shadow-lg sticky top-0 transition-all duration-300 hover:bg-white/20",children:[_.jsxs("div",{className:"flex items-center",children:[_.jsx("button",{onClick:V,className:"focus:outline-none transform transition-transform duration-300 hover:scale-110",children:_.jsx("img",{src:ah,alt:"SmartFarm Logo",className:"h-12 w-12 rounded-full object-cover mr-3 border-2 border-white/80 shadow-lg"})}),_.jsx("h1",{className:"text-2xl font-bold text-white drop-shadow-lg",children:"SmartFarm TZ"})]}),_.jsxs("nav",{className:"hidden md:flex space-x-6 text-sm font-medium",children:[_.jsxs(ha,{to:"/",className:"text-white/90 hover:text-white transition-colors duration-200 relative group",children:["Home",_.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"})]}),_.jsxs(ha,{to:"/weather",className:"text-white/90 hover:text-white transition-colors duration-200 relative group",children:["Weather",_.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"})]}),_.jsxs("a",{href:"#",className:"text-white/90 hover:text-white transition-colors duration-200 relative group",children:["Marketplace",_.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"})]}),_.jsxs("a",{href:"#",className:"text-white/90 hover:text-white transition-colors duration-200 relative group",children:["Academy",_.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"})]}),_.jsxs("a",{href:"#",className:"text-white/90 hover:text-white transition-colors duration-200 relative group",children:["Crop Health",_.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"})]}),_.jsxs(ha,{to:"/chat",className:"text-white/90 hover:text-white transition-colors duration-200 relative group",children:["Chat",_.jsx("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-white transition-all duration-300 group-hover:w-full"})]}),_.jsx("a",{href:"#",className:"px-3 py-1 bg-green-600/90 rounded-lg text-white hover:bg-green-700 transition-colors duration-200",children:"Login"})]}),_.jsx("button",{className:"md:hidden text-white focus:outline-none",onClick:O,children:_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]}),g&&_.jsxs("div",{className:"md:hidden fixed inset-0 z-40",children:[_.jsx("div",{className:"absolute inset-0 bg-black/30",onClick:O}),_.jsx("div",{className:"absolute right-0 top-0 h-full w-2/5 bg-green-800/95 backdrop-blur-md shadow-2xl",children:_.jsxs("div",{className:"flex flex-col p-4 space-y-4",children:[_.jsx(ha,{to:"/",className:"text-white py-2 px-3 rounded-lg hover:bg-white/10",onClick:O,children:"Home"}),_.jsx(ha,{to:"/weather",className:"text-white py-2 px-3 rounded-lg hover:bg-white/10",onClick:O,children:"Weather"}),_.jsx("a",{href:"#",className:"text-white py-2 px-3 rounded-lg hover:bg-white/10",onClick:O,children:"Marketplace"}),_.jsx("a",{href:"#",className:"text-white py-2 px-3 rounded-lg hover:bg-white/10",onClick:O,children:"Academy"}),_.jsx("a",{href:"#",className:"text-white py-2 px-3 rounded-lg hover:bg-white/10",onClick:O,children:"Crop Health"}),_.jsx(ha,{to:"/chat",className:"text-white py-2 px-3 rounded-lg hover:bg-white/10",onClick:O,children:"Chat"}),_.jsx("a",{href:"#",className:"mt-4 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",onClick:O,children:"Login"})]})})]}),_.jsxs("section",{className:"flex-grow flex items-center justify-center text-center py-16 px-4 relative",children:[_.jsx("div",{className:"absolute inset-0 bg-black/10 backdrop-blur-sm -z-10"}),_.jsxs("div",{className:"relative z-10 max-w-4xl",children:[_.jsx("button",{onClick:V,className:"focus:outline-none mb-8 transform transition-transform duration-500 hover:scale-110",children:_.jsx("img",{src:ah,alt:"SmartFarm Logo",className:"h-40 w-40 rounded-full object-cover mx-auto border-4 border-white/80 shadow-2xl"})}),_.jsx("div",{className:"mb-8 min-h-[120px] flex items-center justify-center",children:_.jsxs("h2",{className:"text-4xl md:text-6xl font-bold text-white drop-shadow-xl",children:[i,_.jsx("span",{className:`inline-block w-1 h-12 ml-1 bg-white ${f?"animate-pulse":"opacity-0"}`})]})}),_.jsx("p",{className:"mb-10 text-xl text-white/90 max-w-2xl mx-auto animate-fade-in delay-1000",children:"Join us to revolutionize farming with technology."}),_.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-4",children:[_.jsx("button",{className:"px-8 py-4 bg-green-600/90 text-white font-semibold rounded-xl shadow-lg hover:bg-green-700 transition-all duration-300 transform hover:-translate-y-1",children:"Get Started"}),_.jsx("button",{className:"px-8 py-4 bg-white/20 text-white font-semibold rounded-xl shadow-lg hover:bg-white/30 transition-all duration-300 transform hover:-translate-y-1",children:"Learn More"})]})]})]}),_.jsxs("section",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 px-8 py-16 relative",children:[_.jsx("div",{className:"absolute inset-0 bg-black/10 backdrop-blur-sm -z-10"}),[{title:"Smart Weather Alerts",icon:"sun",delay:100},{title:"Agri Academy",icon:"book",delay:200},{title:"Farm Marketplace",icon:"shopping-cart",delay:300},{title:"Crop Diagnostics",icon:"alert-triangle",delay:400},{title:"Live Support",icon:"message-circle",delay:500},{title:"AI Planning",icon:"cpu",delay:600},{title:"Success Stories",icon:"user",delay:700},{title:"Rewards Program",icon:"star",delay:800}].map(({title:R,icon:L,delay:U})=>_.jsxs("div",{className:"p-8 bg-white/15 backdrop-blur-md rounded-3xl shadow-lg hover:shadow-xl transition-all duration-500 border border-white/20 hover:border-white/40 transform hover:-translate-y-2 animate-fade-in-up",style:{animationDelay:`${U}ms`},children:[_.jsx("div",{className:"text-4xl mb-6 text-white flex justify-center",children:_.jsx("i",{className:`lucide-${L}`})}),_.jsx("h3",{className:"text-xl font-semibold text-white text-center",children:R})]},R))]}),_.jsxs("section",{className:"px-6 py-24 relative",children:[_.jsx("div",{className:"absolute inset-0 bg-black/10 backdrop-blur-sm -z-10"}),_.jsxs("div",{className:"relative z-10 max-w-6xl mx-auto",children:[_.jsx("h3",{className:"text-3xl font-bold text-center mb-16 text-white",children:"What Farmers Say"}),_.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:[{quote:"SmartFarm TZ has transformed how I plan and grow my crops. The weather alerts saved my harvest last season!",author:"Juma, Farmer in Dodoma",role:"Maize Farmer"},{quote:"The marketplace connected me directly with buyers. I got 30% better prices than through middlemen!",author:"Neema, Farmer in Arusha",role:"Vegetable Grower"}].map((R,L)=>_.jsxs("div",{className:"bg-white/15 backdrop-blur-md p-8 rounded-3xl shadow-lg border border-white/20 transform transition-all duration-500 hover:scale-[1.02]",children:[_.jsxs("p",{className:"italic text-white/90 text-lg mb-6",children:['"',R.quote,'"']}),_.jsxs("div",{className:"flex items-center",children:[_.jsx("div",{className:"h-12 w-12 rounded-full bg-white/20 flex items-center justify-center mr-4",children:_.jsx("span",{className:"text-white text-xl",children:L+1})}),_.jsxs("div",{children:[_.jsx("p",{className:"font-semibold text-white",children:R.author}),_.jsx("p",{className:"text-white/70 text-sm",children:R.role})]})]})]},L))})]})]}),_.jsx("footer",{className:"bg-green-800/70 backdrop-blur-lg text-white border-t border-white/20",children:_.jsxs("div",{className:"container mx-auto px-6 py-12",children:[_.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-12",children:[_.jsxs("div",{children:[_.jsxs("div",{className:"flex items-center mb-4",children:[_.jsx("img",{src:ah,alt:"SmartFarm Logo",className:"h-12 w-12 rounded-full object-cover mr-3 border-2 border-white/80"}),_.jsx("h4",{className:"text-xl font-bold",children:"SmartFarm TZ"})]}),_.jsx("p",{className:"text-white/80",children:"Cultivating a brighter future for Tanzanian agriculture through technology and innovation."})]}),_.jsxs("div",{children:[_.jsx("h5",{className:"text-lg font-semibold mb-4",children:"Quick Links"}),_.jsx("ul",{className:"space-y-2",children:["About Us","Services","Marketplace","Academy"].map(R=>_.jsx("li",{children:_.jsx("a",{href:"#",className:"text-white/80 hover:text-white transition-colors duration-200",children:R})},R))})]}),_.jsxs("div",{children:[_.jsx("h5",{className:"text-lg font-semibold mb-4",children:"Resources"}),_.jsx("ul",{className:"space-y-2",children:["Blog","FAQs","Weather Data","Crop Calendar"].map(R=>_.jsx("li",{children:_.jsx("a",{href:"#",className:"text-white/80 hover:text-white transition-colors duration-200",children:R})},R))})]}),_.jsxs("div",{children:[_.jsx("h5",{className:"text-lg font-semibold mb-4",children:"Contact Us"}),_.jsxs("ul",{className:"space-y-2",children:[_.jsxs("li",{className:"flex items-center",children:[_.jsx("i",{className:"lucide-phone mr-2"}),_.jsx("span",{className:"text-white/80",children:"+255 123 456 789"})]}),_.jsxs("li",{className:"flex items-center",children:[_.jsx("i",{className:"lucide-mail mr-2"}),_.jsx("span",{className:"text-white/80",children:"info@smartfarmtz.com"})]})]}),_.jsx("div",{className:"flex space-x-4 mt-4",children:["facebook","twitter","instagram","youtube"].map(R=>_.jsx("a",{href:"#",className:"text-white/80 hover:text-white transition-colors duration-200",children:_.jsx("i",{className:`lucide-${R}`})},R))})]})]}),_.jsxs("div",{className:"border-t border-white/20 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center",children:[_.jsx("p",{children:" 2025 SmartFarm TZ. All rights reserved."}),_.jsxs("div",{className:"flex space-x-6 mt-4 md:mt-0",children:[_.jsx("a",{href:"#",className:"text-white/80 hover:text-white transition-colors duration-200",children:"Privacy Policy"}),_.jsx("a",{href:"#",className:"text-white/80 hover:text-white transition-colors duration-200",children:"Terms of Service"})]})]})]})})]})]})}const ug=M.createContext({});function cg(t){const e=M.useRef(null);return e.current===null&&(e.current=t()),e.current}const hg=typeof window<"u",Q1=hg?M.useLayoutEffect:M.useEffect,dd=M.createContext(null);function dg(t,e){t.indexOf(e)===-1&&t.push(e)}function fg(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const as=(t,e,n)=>n>e?e:n<t?t:n;let pg=()=>{};const ls={},X1=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Y1(t){return typeof t=="object"&&t!==null}const J1=t=>/^0[^.\s]+$/u.test(t);function mg(t){let e;return()=>(e===void 0&&(e=t()),e)}const Hn=t=>t,pR=(t,e)=>n=>e(t(n)),Nu=(...t)=>t.reduce(pR),pu=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r};class gg{constructor(){this.subscriptions=[]}add(e){return dg(this.subscriptions,e),()=>fg(this.subscriptions,e)}notify(e,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,n,r);else for(let a=0;a<i;a++){const l=this.subscriptions[a];l&&l(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ar=t=>t*1e3,Cr=t=>t/1e3;function Z1(t,e){return e?t*(1e3/e):0}const eT=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,mR=1e-7,gR=12;function yR(t,e,n,r,i){let a,l,h=0;do l=e+(n-e)/2,a=eT(l,r,i)-t,a>0?n=l:e=l;while(Math.abs(a)>mR&&++h<gR);return l}function Vu(t,e,n,r){if(t===e&&n===r)return Hn;const i=a=>yR(a,0,1,t,n);return a=>a===0||a===1?a:eT(i(a),e,r)}const tT=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,nT=t=>e=>1-t(1-e),rT=Vu(.33,1.53,.69,.99),yg=nT(rT),sT=tT(yg),iT=t=>(t*=2)<1?.5*yg(t):.5*(2-Math.pow(2,-10*(t-1))),vg=t=>1-Math.sin(Math.acos(t)),oT=nT(vg),aT=tT(vg),vR=Vu(.42,0,1,1),_R=Vu(0,0,.58,1),lT=Vu(.42,0,.58,1),wR=t=>Array.isArray(t)&&typeof t[0]!="number",uT=t=>Array.isArray(t)&&typeof t[0]=="number",xR={linear:Hn,easeIn:vR,easeInOut:lT,easeOut:_R,circIn:vg,circInOut:aT,circOut:oT,backIn:yg,backInOut:sT,backOut:rT,anticipate:iT},TR=t=>typeof t=="string",I_=t=>{if(uT(t)){pg(t.length===4);const[e,n,r,i]=t;return Vu(e,n,r,i)}else if(TR(t))return xR[t];return t},lh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],b_={value:null};function ER(t,e){let n=new Set,r=new Set,i=!1,a=!1;const l=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1},f=0;function p(w){l.has(w)&&(g.schedule(w),t()),f++,w(h)}const g={schedule:(w,T=!1,C=!1)=>{const O=C&&i?n:r;return T&&l.add(w),O.has(w)||O.add(w),w},cancel:w=>{r.delete(w),l.delete(w)},process:w=>{if(h=w,i){a=!0;return}i=!0,[n,r]=[r,n],n.forEach(p),e&&b_.value&&b_.value.frameloop[e].push(f),f=0,n.clear(),i=!1,a&&(a=!1,g.process(w))}};return g}const SR=40;function cT(t,e){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,l=lh.reduce((z,K)=>(z[K]=ER(a,e?K:void 0),z),{}),{setup:h,read:f,resolveKeyframes:p,preUpdate:g,update:w,preRender:T,render:C,postRender:V}=l,O=()=>{const z=ls.useManualTiming?i.timestamp:performance.now();n=!1,ls.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(z-i.timestamp,SR),1)),i.timestamp=z,i.isProcessing=!0,h.process(i),f.process(i),p.process(i),g.process(i),w.process(i),T.process(i),C.process(i),V.process(i),i.isProcessing=!1,n&&e&&(r=!1,t(O))},R=()=>{n=!0,r=!0,i.isProcessing||t(O)};return{schedule:lh.reduce((z,K)=>{const Q=l[K];return z[K]=(Y,N=!1,S=!1)=>(n||R(),Q.schedule(Y,N,S)),z},{}),cancel:z=>{for(let K=0;K<lh.length;K++)l[lh[K]].cancel(z)},state:i,steps:l}}const{schedule:ot,cancel:ni,state:$t,steps:Ep}=cT(typeof requestAnimationFrame<"u"?requestAnimationFrame:Hn,!0);let Th;function IR(){Th=void 0}const _n={now:()=>(Th===void 0&&_n.set($t.isProcessing||ls.useManualTiming?$t.timestamp:performance.now()),Th),set:t=>{Th=t,queueMicrotask(IR)}},hT=t=>e=>typeof e=="string"&&e.startsWith(t),_g=hT("--"),bR=hT("var(--"),wg=t=>bR(t)?AR.test(t.split("/*")[0].trim()):!1,AR=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ua={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},mu={...Ua,transform:t=>as(0,1,t)},uh={...Ua,default:1},eu=t=>Math.round(t*1e5)/1e5,xg=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function CR(t){return t==null}const RR=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Tg=(t,e)=>n=>!!(typeof n=="string"&&RR.test(n)&&n.startsWith(t)||e&&!CR(n)&&Object.prototype.hasOwnProperty.call(n,e)),dT=(t,e,n)=>r=>{if(typeof r!="string")return r;const[i,a,l,h]=r.match(xg);return{[t]:parseFloat(i),[e]:parseFloat(a),[n]:parseFloat(l),alpha:h!==void 0?parseFloat(h):1}},PR=t=>as(0,255,t),Sp={...Ua,transform:t=>Math.round(PR(t))},Ki={test:Tg("rgb","red"),parse:dT("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Sp.transform(t)+", "+Sp.transform(e)+", "+Sp.transform(n)+", "+eu(mu.transform(r))+")"};function kR(t){let e="",n="",r="",i="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),i=t.substring(4,5),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const um={test:Tg("#"),parse:kR,transform:Ki.transform},Du=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),$s=Du("deg"),Rr=Du("%"),Te=Du("px"),NR=Du("vh"),VR=Du("vw"),A_={...Rr,parse:t=>Rr.parse(t)/100,transform:t=>Rr.transform(t*100)},wa={test:Tg("hsl","hue"),parse:dT("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Rr.transform(eu(e))+", "+Rr.transform(eu(n))+", "+eu(mu.transform(r))+")"},wt={test:t=>Ki.test(t)||um.test(t)||wa.test(t),parse:t=>Ki.test(t)?Ki.parse(t):wa.test(t)?wa.parse(t):um.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ki.transform(t):wa.transform(t),getAnimatableNone:t=>{const e=wt.parse(t);return e.alpha=0,wt.transform(e)}},DR=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function OR(t){return isNaN(t)&&typeof t=="string"&&(t.match(xg)?.length||0)+(t.match(DR)?.length||0)>0}const fT="number",pT="color",jR="var",LR="var(",C_="${}",MR=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function gu(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},i=[];let a=0;const h=e.replace(MR,f=>(wt.test(f)?(r.color.push(a),i.push(pT),n.push(wt.parse(f))):f.startsWith(LR)?(r.var.push(a),i.push(jR),n.push(f)):(r.number.push(a),i.push(fT),n.push(parseFloat(f))),++a,C_)).split(C_);return{values:n,split:h,indexes:r,types:i}}function mT(t){return gu(t).values}function gT(t){const{split:e,types:n}=gu(t),r=e.length;return i=>{let a="";for(let l=0;l<r;l++)if(a+=e[l],i[l]!==void 0){const h=n[l];h===fT?a+=eu(i[l]):h===pT?a+=wt.transform(i[l]):a+=i[l]}return a}}const FR=t=>typeof t=="number"?0:wt.test(t)?wt.getAnimatableNone(t):t;function UR(t){const e=mT(t);return gT(t)(e.map(FR))}const ri={test:OR,parse:mT,createTransformer:gT,getAnimatableNone:UR};function Ip(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function BR({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let i=0,a=0,l=0;if(!e)i=a=l=n;else{const h=n<.5?n*(1+e):n+e-n*e,f=2*n-h;i=Ip(f,h,t+1/3),a=Ip(f,h,t),l=Ip(f,h,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:r}}function Lh(t,e){return n=>n>0?e:t}const it=(t,e,n)=>t+(e-t)*n,bp=(t,e,n)=>{const r=t*t,i=n*(e*e-r)+r;return i<0?0:Math.sqrt(i)},$R=[um,Ki,wa],zR=t=>$R.find(e=>e.test(t));function R_(t){const e=zR(t);if(!e)return!1;let n=e.parse(t);return e===wa&&(n=BR(n)),n}const P_=(t,e)=>{const n=R_(t),r=R_(e);if(!n||!r)return Lh(t,e);const i={...n};return a=>(i.red=bp(n.red,r.red,a),i.green=bp(n.green,r.green,a),i.blue=bp(n.blue,r.blue,a),i.alpha=it(n.alpha,r.alpha,a),Ki.transform(i))},cm=new Set(["none","hidden"]);function HR(t,e){return cm.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function WR(t,e){return n=>it(t,e,n)}function Eg(t){return typeof t=="number"?WR:typeof t=="string"?wg(t)?Lh:wt.test(t)?P_:GR:Array.isArray(t)?yT:typeof t=="object"?wt.test(t)?P_:qR:Lh}function yT(t,e){const n=[...t],r=n.length,i=t.map((a,l)=>Eg(a)(a,e[l]));return a=>{for(let l=0;l<r;l++)n[l]=i[l](a);return n}}function qR(t,e){const n={...t,...e},r={};for(const i in n)t[i]!==void 0&&e[i]!==void 0&&(r[i]=Eg(t[i])(t[i],e[i]));return i=>{for(const a in r)n[a]=r[a](i);return n}}function KR(t,e){const n=[],r={color:0,var:0,number:0};for(let i=0;i<e.values.length;i++){const a=e.types[i],l=t.indexes[a][r[a]],h=t.values[l]??0;n[i]=h,r[a]++}return n}const GR=(t,e)=>{const n=ri.createTransformer(e),r=gu(t),i=gu(e);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?cm.has(t)&&!i.values.length||cm.has(e)&&!r.values.length?HR(t,e):Nu(yT(KR(r,i),i.values),n):Lh(t,e)};function vT(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?it(t,e,n):Eg(t)(t,e)}const QR=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>ot.update(e,n),stop:()=>ni(e),now:()=>$t.isProcessing?$t.timestamp:_n.now()}},_T=(t,e,n=10)=>{let r="";const i=Math.max(Math.round(e/n),2);for(let a=0;a<i;a++)r+=Math.round(t(a/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Mh=2e4;function Sg(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<Mh;)e+=n,r=t.next(e);return e>=Mh?1/0:e}function XR(t,e=100,n){const r=n({...t,keyframes:[0,e]}),i=Math.min(Sg(r),Mh);return{type:"keyframes",ease:a=>r.next(i*a).value/e,duration:Cr(i)}}const YR=5;function wT(t,e,n){const r=Math.max(e-YR,0);return Z1(n-t(r),e-r)}const ut={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ap=.001;function JR({duration:t=ut.duration,bounce:e=ut.bounce,velocity:n=ut.velocity,mass:r=ut.mass}){let i,a,l=1-e;l=as(ut.minDamping,ut.maxDamping,l),t=as(ut.minDuration,ut.maxDuration,Cr(t)),l<1?(i=p=>{const g=p*l,w=g*t,T=g-n,C=hm(p,l),V=Math.exp(-w);return Ap-T/C*V},a=p=>{const w=p*l*t,T=w*n+n,C=Math.pow(l,2)*Math.pow(p,2)*t,V=Math.exp(-w),O=hm(Math.pow(p,2),l);return(-i(p)+Ap>0?-1:1)*((T-C)*V)/O}):(i=p=>{const g=Math.exp(-p*t),w=(p-n)*t+1;return-Ap+g*w},a=p=>{const g=Math.exp(-p*t),w=(n-p)*(t*t);return g*w});const h=5/t,f=eP(i,a,h);if(t=Ar(t),isNaN(f))return{stiffness:ut.stiffness,damping:ut.damping,duration:t};{const p=Math.pow(f,2)*r;return{stiffness:p,damping:l*2*Math.sqrt(r*p),duration:t}}}const ZR=12;function eP(t,e,n){let r=n;for(let i=1;i<ZR;i++)r=r-t(r)/e(r);return r}function hm(t,e){return t*Math.sqrt(1-e*e)}const tP=["duration","bounce"],nP=["stiffness","damping","mass"];function k_(t,e){return e.some(n=>t[n]!==void 0)}function rP(t){let e={velocity:ut.velocity,stiffness:ut.stiffness,damping:ut.damping,mass:ut.mass,isResolvedFromDuration:!1,...t};if(!k_(t,nP)&&k_(t,tP))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,a=2*as(.05,1,1-(t.bounce||0))*Math.sqrt(i);e={...e,mass:ut.mass,stiffness:i,damping:a}}else{const n=JR(t);e={...e,...n,mass:ut.mass},e.isResolvedFromDuration=!0}return e}function Fh(t=ut.visualDuration,e=ut.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:i}=n;const a=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],h={done:!1,value:a},{stiffness:f,damping:p,mass:g,duration:w,velocity:T,isResolvedFromDuration:C}=rP({...n,velocity:-Cr(n.velocity||0)}),V=T||0,O=p/(2*Math.sqrt(f*g)),R=l-a,L=Cr(Math.sqrt(f/g)),U=Math.abs(R)<5;r||(r=U?ut.restSpeed.granular:ut.restSpeed.default),i||(i=U?ut.restDelta.granular:ut.restDelta.default);let z;if(O<1){const Q=hm(L,O);z=Y=>{const N=Math.exp(-O*L*Y);return l-N*((V+O*L*R)/Q*Math.sin(Q*Y)+R*Math.cos(Q*Y))}}else if(O===1)z=Q=>l-Math.exp(-L*Q)*(R+(V+L*R)*Q);else{const Q=L*Math.sqrt(O*O-1);z=Y=>{const N=Math.exp(-O*L*Y),S=Math.min(Q*Y,300);return l-N*((V+O*L*R)*Math.sinh(S)+Q*R*Math.cosh(S))/Q}}const K={calculatedDuration:C&&w||null,next:Q=>{const Y=z(Q);if(C)h.done=Q>=w;else{let N=Q===0?V:0;O<1&&(N=Q===0?Ar(V):wT(z,Q,Y));const S=Math.abs(N)<=r,A=Math.abs(l-Y)<=i;h.done=S&&A}return h.value=h.done?l:Y,h},toString:()=>{const Q=Math.min(Sg(K),Mh),Y=_T(N=>K.next(Q*N).value,Q,30);return Q+"ms "+Y},toTransition:()=>{}};return K}Fh.applyToOptions=t=>{const e=XR(t,100,Fh);return t.ease=e.ease,t.duration=Ar(e.duration),t.type="keyframes",t};function dm({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:l,min:h,max:f,restDelta:p=.5,restSpeed:g}){const w=t[0],T={done:!1,value:w},C=S=>h!==void 0&&S<h||f!==void 0&&S>f,V=S=>h===void 0?f:f===void 0||Math.abs(h-S)<Math.abs(f-S)?h:f;let O=n*e;const R=w+O,L=l===void 0?R:l(R);L!==R&&(O=L-w);const U=S=>-O*Math.exp(-S/r),z=S=>L+U(S),K=S=>{const A=U(S),b=z(S);T.done=Math.abs(A)<=p,T.value=T.done?L:b};let Q,Y;const N=S=>{C(T.value)&&(Q=S,Y=Fh({keyframes:[T.value,V(T.value)],velocity:wT(z,S,T.value),damping:i,stiffness:a,restDelta:p,restSpeed:g}))};return N(0),{calculatedDuration:null,next:S=>{let A=!1;return!Y&&Q===void 0&&(A=!0,K(S),N(S)),Q!==void 0&&S>=Q?Y.next(S-Q):(!A&&K(S),T)}}}function sP(t,e,n){const r=[],i=n||ls.mix||vT,a=t.length-1;for(let l=0;l<a;l++){let h=i(t[l],t[l+1]);if(e){const f=Array.isArray(e)?e[l]||Hn:e;h=Nu(f,h)}r.push(h)}return r}function iP(t,e,{clamp:n=!0,ease:r,mixer:i}={}){const a=t.length;if(pg(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const h=sP(e,r,i),f=h.length,p=g=>{if(l&&g<t[0])return e[0];let w=0;if(f>1)for(;w<t.length-2&&!(g<t[w+1]);w++);const T=pu(t[w],t[w+1],g);return h[w](T)};return n?g=>p(as(t[0],t[a-1],g)):p}function oP(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const i=pu(0,e,r);t.push(it(n,1,i))}}function aP(t){const e=[0];return oP(e,t.length-1),e}function lP(t,e){return t.map(n=>n*e)}function uP(t,e){return t.map(()=>e||lT).splice(0,t.length-1)}function tu({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const i=wR(r)?r.map(I_):I_(r),a={done:!1,value:e[0]},l=lP(n&&n.length===e.length?n:aP(e),t),h=iP(l,e,{ease:Array.isArray(i)?i:uP(e,i)});return{calculatedDuration:t,next:f=>(a.value=h(f),a.done=f>=t,a)}}const cP=t=>t!==null;function Ig(t,{repeat:e,repeatType:n="loop"},r,i=1){const a=t.filter(cP),h=i<0||e&&n!=="loop"&&e%2===1?0:a.length-1;return!h||r===void 0?a[h]:r}const hP={decay:dm,inertia:dm,tween:tu,keyframes:tu,spring:Fh};function xT(t){typeof t.type=="string"&&(t.type=hP[t.type])}class bg{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const dP=t=>t/100;class Ag extends bg{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==_n.now()&&this.tick(_n.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;xT(e);const{type:n=tu,repeat:r=0,repeatDelay:i=0,repeatType:a,velocity:l=0}=e;let{keyframes:h}=e;const f=n||tu;f!==tu&&typeof h[0]!="number"&&(this.mixKeyframes=Nu(dP,vT(h[0],h[1])),h=[0,100]);const p=f({...e,keyframes:h});a==="mirror"&&(this.mirroredGenerator=f({...e,keyframes:[...h].reverse(),velocity:-l})),p.calculatedDuration===null&&(p.calculatedDuration=Sg(p));const{calculatedDuration:g}=p;this.calculatedDuration=g,this.resolvedDuration=g+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=p}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:r,totalDuration:i,mixKeyframes:a,mirroredGenerator:l,resolvedDuration:h,calculatedDuration:f}=this;if(this.startTime===null)return r.next(0);const{delay:p=0,keyframes:g,repeat:w,repeatType:T,repeatDelay:C,type:V,onUpdate:O,finalKeyframe:R}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-i/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const L=this.currentTime-p*(this.playbackSpeed>=0?1:-1),U=this.playbackSpeed>=0?L<0:L>i;this.currentTime=Math.max(L,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let z=this.currentTime,K=r;if(w){const S=Math.min(this.currentTime,i)/h;let A=Math.floor(S),b=S%1;!b&&S>=1&&(b=1),b===1&&A--,A=Math.min(A,w+1),!!(A%2)&&(T==="reverse"?(b=1-b,C&&(b-=C/h)):T==="mirror"&&(K=l)),z=as(0,1,b)*h}const Q=U?{done:!1,value:g[0]}:K.next(z);a&&(Q.value=a(Q.value));let{done:Y}=Q;!U&&f!==null&&(Y=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const N=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Y);return N&&V!==dm&&(Q.value=Ig(g,this.options,R,this.speed)),O&&O(Q.value),N&&this.finish(),Q}then(e,n){return this.finished.then(e,n)}get duration(){return Cr(this.calculatedDuration)}get time(){return Cr(this.currentTime)}set time(e){e=Ar(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(_n.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Cr(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=QR,startTime:n}=this.options;this.driver||(this.driver=e(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(_n.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function fP(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Gi=t=>t*180/Math.PI,fm=t=>{const e=Gi(Math.atan2(t[1],t[0]));return pm(e)},pP={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:fm,rotateZ:fm,skewX:t=>Gi(Math.atan(t[1])),skewY:t=>Gi(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},pm=t=>(t=t%360,t<0&&(t+=360),t),N_=fm,V_=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),D_=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),mP={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:V_,scaleY:D_,scale:t=>(V_(t)+D_(t))/2,rotateX:t=>pm(Gi(Math.atan2(t[6],t[5]))),rotateY:t=>pm(Gi(Math.atan2(-t[2],t[0]))),rotateZ:N_,rotate:N_,skewX:t=>Gi(Math.atan(t[4])),skewY:t=>Gi(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function mm(t){return t.includes("scale")?1:0}function gm(t,e){if(!t||t==="none")return mm(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=mP,i=n;else{const h=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=pP,i=h}if(!i)return mm(e);const a=r[e],l=i[1].split(",").map(yP);return typeof a=="function"?a(l):l[a]}const gP=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return gm(n,e)};function yP(t){return parseFloat(t.trim())}const Ba=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],$a=new Set(Ba),O_=t=>t===Ua||t===Te,vP=new Set(["x","y","z"]),_P=Ba.filter(t=>!vP.has(t));function wP(t){const e=[];return _P.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Yi={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>gm(e,"x"),y:(t,{transform:e})=>gm(e,"y")};Yi.translateX=Yi.x;Yi.translateY=Yi.y;const Ji=new Set;let ym=!1,vm=!1,_m=!1;function TT(){if(vm){const t=Array.from(Ji).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const i=wP(r);i.length&&(n.set(r,i),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([a,l])=>{r.getValue(a)?.set(l)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}vm=!1,ym=!1,Ji.forEach(t=>t.complete(_m)),Ji.clear()}function ET(){Ji.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(vm=!0)})}function xP(){_m=!0,ET(),TT(),_m=!1}class Cg{constructor(e,n,r,i,a,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=i,this.element=a,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Ji.add(this),ym||(ym=!0,ot.read(ET),ot.resolveKeyframes(TT))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:i}=this;if(e[0]===null){const a=i?.get(),l=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const h=r.readValue(n,l);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=l),i&&a===void 0&&i.set(e[0])}fP(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Ji.delete(this)}cancel(){this.state==="scheduled"&&(Ji.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const TP=t=>t.startsWith("--");function EP(t,e,n){TP(e)?t.style.setProperty(e,n):t.style[e]=n}const SP=mg(()=>window.ScrollTimeline!==void 0),IP={};function bP(t,e){const n=mg(t);return()=>IP[e]??n()}const ST=bP(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Gl=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,j_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Gl([0,.65,.55,1]),circOut:Gl([.55,0,1,.45]),backIn:Gl([.31,.01,.66,-.59]),backOut:Gl([.33,1.53,.69,.99])};function IT(t,e){if(t)return typeof t=="function"?ST()?_T(t,e):"ease-out":uT(t)?Gl(t):Array.isArray(t)?t.map(n=>IT(n,e)||j_.easeOut):j_[t]}function AP(t,e,n,{delay:r=0,duration:i=300,repeat:a=0,repeatType:l="loop",ease:h="easeOut",times:f}={},p=void 0){const g={[e]:n};f&&(g.offset=f);const w=IT(h,i);Array.isArray(w)&&(g.easing=w);const T={delay:r,duration:i,easing:Array.isArray(w)?"linear":w,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"};return p&&(T.pseudoElement=p),t.animate(g,T)}function bT(t){return typeof t=="function"&&"applyToOptions"in t}function CP({type:t,...e}){return bT(t)&&ST()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class RP extends bg{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:r,keyframes:i,pseudoElement:a,allowFlatten:l=!1,finalKeyframe:h,onComplete:f}=e;this.isPseudoElement=!!a,this.allowFlatten=l,this.options=e,pg(typeof e.type!="string");const p=CP(e);this.animation=AP(n,r,i,p,a),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const g=Ig(i,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(g):EP(n,r,g),this.animation.cancel()}f?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Cr(Number(e))}get time(){return Cr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Ar(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&SP()?(this.animation.timeline=e,Hn):n(this)}}const AT={anticipate:iT,backInOut:sT,circInOut:aT};function PP(t){return t in AT}function kP(t){typeof t.ease=="string"&&PP(t.ease)&&(t.ease=AT[t.ease])}const L_=10;class NP extends RP{constructor(e){kP(e),xT(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:r,onComplete:i,element:a,...l}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const h=new Ag({...l,autoplay:!1}),f=Ar(this.finishedTime??this.time);n.setWithVelocity(h.sample(f-L_).value,h.sample(f).value,L_),h.stop()}}const M_=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ri.test(t)||t==="0")&&!t.startsWith("url("));function VP(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function DP(t,e,n,r){const i=t[0];if(i===null)return!1;if(e==="display"||e==="visibility")return!0;const a=t[t.length-1],l=M_(i,e),h=M_(a,e);return!l||!h?!1:VP(t)||(n==="spring"||bT(n))&&r}function Rg(t){return Y1(t)&&"offsetHeight"in t}const OP=new Set(["opacity","clipPath","filter","transform"]),jP=mg(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function LP(t){const{motionValue:e,name:n,repeatDelay:r,repeatType:i,damping:a,type:l}=t;if(!Rg(e?.owner?.current))return!1;const{onUpdate:h,transformTemplate:f}=e.owner.getProps();return jP()&&n&&OP.has(n)&&(n!=="transform"||!f)&&!h&&!r&&i!=="mirror"&&a!==0&&l!=="inertia"}const MP=40;class FP extends bg{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:a=0,repeatType:l="loop",keyframes:h,name:f,motionValue:p,element:g,...w}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=_n.now();const T={autoplay:e,delay:n,type:r,repeat:i,repeatDelay:a,repeatType:l,name:f,motionValue:p,element:g,...w},C=g?.KeyframeResolver||Cg;this.keyframeResolver=new C(h,(V,O,R)=>this.onKeyframesResolved(V,O,T,!R),f,p,g),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,r,i){this.keyframeResolver=void 0;const{name:a,type:l,velocity:h,delay:f,isHandoff:p,onUpdate:g}=r;this.resolvedAt=_n.now(),DP(e,a,l,h)||((ls.instantAnimations||!f)&&g?.(Ig(e,r,n)),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const T={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>MP?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:e},C=!p&&LP(T)?new NP({...T,element:T.motionValue.owner.current}):new Ag(T);C.finished.then(()=>this.notifyFinished()).catch(Hn),this.pendingTimeline&&(this.stopTimeline=C.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=C}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),xP()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const UP=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function BP(t){const e=UP.exec(t);if(!e)return[,];const[,n,r,i]=e;return[`--${n??r}`,i]}function CT(t,e,n=1){const[r,i]=BP(t);if(!r)return;const a=window.getComputedStyle(e).getPropertyValue(r);if(a){const l=a.trim();return X1(l)?parseFloat(l):l}return wg(i)?CT(i,e,n+1):i}function Pg(t,e){return t?.[e]??t?.default??t}const RT=new Set(["width","height","top","left","right","bottom",...Ba]),$P={test:t=>t==="auto",parse:t=>t},PT=t=>e=>e.test(t),kT=[Ua,Te,Rr,$s,VR,NR,$P],F_=t=>kT.find(PT(t));function zP(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||J1(t):!0}const HP=new Set(["brightness","contrast","saturate","opacity"]);function WP(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(xg)||[];if(!r)return t;const i=n.replace(r,"");let a=HP.has(e)?1:0;return r!==n&&(a*=100),e+"("+a+i+")"}const qP=/\b([a-z-]*)\(.*?\)/gu,wm={...ri,getAnimatableNone:t=>{const e=t.match(qP);return e?e.map(WP).join(" "):t}},U_={...Ua,transform:Math.round},KP={rotate:$s,rotateX:$s,rotateY:$s,rotateZ:$s,scale:uh,scaleX:uh,scaleY:uh,scaleZ:uh,skew:$s,skewX:$s,skewY:$s,distance:Te,translateX:Te,translateY:Te,translateZ:Te,x:Te,y:Te,z:Te,perspective:Te,transformPerspective:Te,opacity:mu,originX:A_,originY:A_,originZ:Te},kg={borderWidth:Te,borderTopWidth:Te,borderRightWidth:Te,borderBottomWidth:Te,borderLeftWidth:Te,borderRadius:Te,radius:Te,borderTopLeftRadius:Te,borderTopRightRadius:Te,borderBottomRightRadius:Te,borderBottomLeftRadius:Te,width:Te,maxWidth:Te,height:Te,maxHeight:Te,top:Te,right:Te,bottom:Te,left:Te,padding:Te,paddingTop:Te,paddingRight:Te,paddingBottom:Te,paddingLeft:Te,margin:Te,marginTop:Te,marginRight:Te,marginBottom:Te,marginLeft:Te,backgroundPositionX:Te,backgroundPositionY:Te,...KP,zIndex:U_,fillOpacity:mu,strokeOpacity:mu,numOctaves:U_},GP={...kg,color:wt,backgroundColor:wt,outlineColor:wt,fill:wt,stroke:wt,borderColor:wt,borderTopColor:wt,borderRightColor:wt,borderBottomColor:wt,borderLeftColor:wt,filter:wm,WebkitFilter:wm},NT=t=>GP[t];function VT(t,e){let n=NT(t);return n!==wm&&(n=ri),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const QP=new Set(["auto","none","0"]);function XP(t,e,n){let r=0,i;for(;r<t.length&&!i;){const a=t[r];typeof a=="string"&&!QP.has(a)&&gu(a).values.length&&(i=t[r]),r++}if(i&&n)for(const a of e)t[a]=VT(n,i)}class YP extends Cg{constructor(e,n,r,i,a){super(e,n,r,i,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<e.length;f++){let p=e[f];if(typeof p=="string"&&(p=p.trim(),wg(p))){const g=CT(p,n.current);g!==void 0&&(e[f]=g),f===e.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!RT.has(r)||e.length!==2)return;const[i,a]=e,l=F_(i),h=F_(a);if(l!==h)if(O_(l)&&O_(h))for(let f=0;f<e.length;f++){const p=e[f];typeof p=="string"&&(e[f]=parseFloat(p))}else Yi[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let i=0;i<e.length;i++)(e[i]===null||zP(e[i]))&&r.push(i);r.length&&XP(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Yi[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&e.getValue(r,i).jump(i,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const i=e.getValue(n);i&&i.jump(this.measuredOrigin,!1);const a=r.length-1,l=r[a];r[a]=Yi[n](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([h,f])=>{e.getValue(h).set(f)}),this.resolveNoneKeyframes()}}function JP(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let r=document;const i=n?.[t]??r.querySelectorAll(t);return i?Array.from(i):[]}return Array.from(t)}const DT=(t,e)=>e&&typeof t=="number"?e.transform(t):t,B_=30,ZP=t=>!isNaN(parseFloat(t));class ek{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,i=!0)=>{const a=_n.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const l of this.dependents)l.dirty();i&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=_n.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=ZP(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new gg);const r=this.events[e].add(n);return e==="change"?()=>{r(),ot.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=_n.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>B_)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,B_);return Z1(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ka(t,e){return new ek(t,e)}const{schedule:Ng}=cT(queueMicrotask,!1),lr={x:!1,y:!1};function OT(){return lr.x||lr.y}function tk(t){return t==="x"||t==="y"?lr[t]?null:(lr[t]=!0,()=>{lr[t]=!1}):lr.x||lr.y?null:(lr.x=lr.y=!0,()=>{lr.x=lr.y=!1})}function jT(t,e){const n=JP(t),r=new AbortController,i={passive:!0,...e,signal:r.signal};return[n,i,()=>r.abort()]}function $_(t){return!(t.pointerType==="touch"||OT())}function nk(t,e,n={}){const[r,i,a]=jT(t,n),l=h=>{if(!$_(h))return;const{target:f}=h,p=e(f,h);if(typeof p!="function"||!f)return;const g=w=>{$_(w)&&(p(w),f.removeEventListener("pointerleave",g))};f.addEventListener("pointerleave",g,i)};return r.forEach(h=>{h.addEventListener("pointerenter",l,i)}),a}const LT=(t,e)=>e?t===e?!0:LT(t,e.parentElement):!1,Vg=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,rk=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function sk(t){return rk.has(t.tagName)||t.tabIndex!==-1}const Eh=new WeakSet;function z_(t){return e=>{e.key==="Enter"&&t(e)}}function Cp(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const ik=(t,e)=>{const n=t.currentTarget;if(!n)return;const r=z_(()=>{if(Eh.has(n))return;Cp(n,"down");const i=z_(()=>{Cp(n,"up")}),a=()=>Cp(n,"cancel");n.addEventListener("keyup",i,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",r,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),e)};function H_(t){return Vg(t)&&!OT()}function ok(t,e,n={}){const[r,i,a]=jT(t,n),l=h=>{const f=h.currentTarget;if(!H_(h))return;Eh.add(f);const p=e(f,h),g=(C,V)=>{window.removeEventListener("pointerup",w),window.removeEventListener("pointercancel",T),Eh.has(f)&&Eh.delete(f),H_(C)&&typeof p=="function"&&p(C,{success:V})},w=C=>{g(C,f===window||f===document||n.useGlobalTarget||LT(f,C.target))},T=C=>{g(C,!1)};window.addEventListener("pointerup",w,i),window.addEventListener("pointercancel",T,i)};return r.forEach(h=>{(n.useGlobalTarget?window:h).addEventListener("pointerdown",l,i),Rg(h)&&(h.addEventListener("focus",p=>ik(p,i)),!sk(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),a}function MT(t){return Y1(t)&&"ownerSVGElement"in t}function ak(t){return MT(t)&&t.tagName==="svg"}const Zt=t=>!!(t&&t.getVelocity),lk=[...kT,wt,ri],uk=t=>lk.find(PT(t)),Dg=M.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class ck extends M.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=Rg(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=i-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function hk({children:t,isPresent:e,anchorX:n}){const r=M.useId(),i=M.useRef(null),a=M.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=M.useContext(Dg);return M.useInsertionEffect(()=>{const{width:h,height:f,top:p,left:g,right:w}=a.current;if(e||!i.current||!h||!f)return;const T=n==="left"?`left: ${g}`:`right: ${w}`;i.current.dataset.motionPopId=r;const C=document.createElement("style");return l&&(C.nonce=l),document.head.appendChild(C),C.sheet&&C.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${f}px !important;
            ${T}px !important;
            top: ${p}px !important;
          }
        `),()=>{document.head.contains(C)&&document.head.removeChild(C)}},[e]),_.jsx(ck,{isPresent:e,childRef:i,sizeRef:a,children:M.cloneElement(t,{ref:i})})}const dk=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:a,mode:l,anchorX:h})=>{const f=cg(fk),p=M.useId();let g=!0,w=M.useMemo(()=>(g=!1,{id:p,initial:e,isPresent:n,custom:i,onExitComplete:T=>{f.set(T,!0);for(const C of f.values())if(!C)return;r&&r()},register:T=>(f.set(T,!1),()=>f.delete(T))}),[n,f,r]);return a&&g&&(w={...w}),M.useMemo(()=>{f.forEach((T,C)=>f.set(C,!1))},[n]),M.useEffect(()=>{!n&&!f.size&&r&&r()},[n]),l==="popLayout"&&(t=_.jsx(hk,{isPresent:n,anchorX:h,children:t})),_.jsx(dd.Provider,{value:w,children:t})};function fk(){return new Map}function FT(t=!0){const e=M.useContext(dd);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=e,a=M.useId();M.useEffect(()=>{if(t)return i(a)},[t]);const l=M.useCallback(()=>t&&r&&r(a),[a,r,t]);return!n&&r?[!1,l]:[!0]}const ch=t=>t.key||"";function W_(t){const e=[];return M.Children.forEach(t,n=>{M.isValidElement(n)&&e.push(n)}),e}const rs=({children:t,custom:e,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:a="sync",propagate:l=!1,anchorX:h="left"})=>{const[f,p]=FT(l),g=M.useMemo(()=>W_(t),[t]),w=l&&!f?[]:g.map(ch),T=M.useRef(!0),C=M.useRef(g),V=cg(()=>new Map),[O,R]=M.useState(g),[L,U]=M.useState(g);Q1(()=>{T.current=!1,C.current=g;for(let Q=0;Q<L.length;Q++){const Y=ch(L[Q]);w.includes(Y)?V.delete(Y):V.get(Y)!==!0&&V.set(Y,!1)}},[L,w.length,w.join("-")]);const z=[];if(g!==O){let Q=[...g];for(let Y=0;Y<L.length;Y++){const N=L[Y],S=ch(N);w.includes(S)||(Q.splice(Y,0,N),z.push(N))}return a==="wait"&&z.length&&(Q=z),U(W_(Q)),R(g),null}const{forceRender:K}=M.useContext(ug);return _.jsx(_.Fragment,{children:L.map(Q=>{const Y=ch(Q),N=l&&!f?!1:g===L||w.includes(Y),S=()=>{if(V.has(Y))V.set(Y,!0);else return;let A=!0;V.forEach(b=>{b||(A=!1)}),A&&(K?.(),U(C.current),l&&p?.(),r&&r())};return _.jsx(dk,{isPresent:N,initial:!T.current||n?void 0:!1,custom:e,presenceAffectsLayout:i,mode:a,onExitComplete:N?void 0:S,anchorX:h,children:Q},Y)})})},UT=M.createContext({strict:!1}),q_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Na={};for(const t in q_)Na[t]={isEnabled:e=>q_[t].some(n=>!!e[n])};function pk(t){for(const e in t)Na[e]={...Na[e],...t[e]}}const mk=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Uh(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||mk.has(t)}let BT=t=>!Uh(t);function gk(t){typeof t=="function"&&(BT=e=>e.startsWith("on")?!Uh(e):t(e))}try{gk(require("@emotion/is-prop-valid").default)}catch{}function yk(t,e,n){const r={};for(const i in t)i==="values"&&typeof t.values=="object"||(BT(i)||n===!0&&Uh(i)||!e&&!Uh(i)||t.draggable&&i.startsWith("onDrag"))&&(r[i]=t[i]);return r}function vk(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,i)=>i==="create"?t:(e.has(i)||e.set(i,t(i)),e.get(i))})}const fd=M.createContext({});function pd(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function yu(t){return typeof t=="string"||Array.isArray(t)}const Og=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],jg=["initial",...Og];function md(t){return pd(t.animate)||jg.some(e=>yu(t[e]))}function $T(t){return!!(md(t)||t.variants)}function _k(t,e){if(md(t)){const{initial:n,animate:r}=t;return{initial:n===!1||yu(n)?n:void 0,animate:yu(r)?r:void 0}}return t.inherit!==!1?e:{}}function wk(t){const{initial:e,animate:n}=_k(t,M.useContext(fd));return M.useMemo(()=>({initial:e,animate:n}),[K_(e),K_(n)])}function K_(t){return Array.isArray(t)?t.join(" "):t}const xk=Symbol.for("motionComponentSymbol");function xa(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Tk(t,e,n){return M.useCallback(r=>{r&&t.onMount&&t.onMount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):xa(n)&&(n.current=r))},[e])}const Lg=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Ek="framerAppearId",zT="data-"+Lg(Ek),HT=M.createContext({});function Sk(t,e,n,r,i){const{visualElement:a}=M.useContext(fd),l=M.useContext(UT),h=M.useContext(dd),f=M.useContext(Dg).reducedMotion,p=M.useRef(null);r=r||l.renderer,!p.current&&r&&(p.current=r(t,{visualState:e,parent:a,props:n,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:f}));const g=p.current,w=M.useContext(HT);g&&!g.projection&&i&&(g.type==="html"||g.type==="svg")&&Ik(p.current,n,i,w);const T=M.useRef(!1);M.useInsertionEffect(()=>{g&&T.current&&g.update(n,h)});const C=n[zT],V=M.useRef(!!C&&!window.MotionHandoffIsComplete?.(C)&&window.MotionHasOptimisedAnimation?.(C));return Q1(()=>{g&&(T.current=!0,window.MotionIsMounted=!0,g.updateFeatures(),Ng.render(g.render),V.current&&g.animationState&&g.animationState.animateChanges())}),M.useEffect(()=>{g&&(!V.current&&g.animationState&&g.animationState.animateChanges(),V.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(C)}),V.current=!1))}),g}function Ik(t,e,n,r){const{layoutId:i,layout:a,drag:l,dragConstraints:h,layoutScroll:f,layoutRoot:p,layoutCrossfade:g}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:WT(t.parent)),t.projection.setOptions({layoutId:i,layout:a,alwaysMeasureLayout:!!l||h&&xa(h),visualElement:t,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:g,layoutScroll:f,layoutRoot:p})}function WT(t){if(t)return t.options.allowProjection!==!1?t.projection:WT(t.parent)}function bk({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:i}){t&&pk(t);function a(h,f){let p;const g={...M.useContext(Dg),...h,layoutId:Ak(h)},{isStatic:w}=g,T=wk(h),C=r(h,w);if(!w&&hg){Ck();const V=Rk(g);p=V.MeasureLayout,T.visualElement=Sk(i,C,g,e,V.ProjectionNode)}return _.jsxs(fd.Provider,{value:T,children:[p&&T.visualElement?_.jsx(p,{visualElement:T.visualElement,...g}):null,n(i,h,Tk(C,T.visualElement,f),C,w,T.visualElement)]})}a.displayName=`motion.${typeof i=="string"?i:`create(${i.displayName??i.name??""})`}`;const l=M.forwardRef(a);return l[xk]=i,l}function Ak({layoutId:t}){const e=M.useContext(ug).id;return e&&t!==void 0?e+"-"+t:t}function Ck(t,e){M.useContext(UT).strict}function Rk(t){const{drag:e,layout:n}=Na;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const vu={};function Pk(t){for(const e in t)vu[e]=t[e],_g(e)&&(vu[e].isCSSVariable=!0)}function qT(t,{layout:e,layoutId:n}){return $a.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!vu[t]||t==="opacity")}const kk={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Nk=Ba.length;function Vk(t,e,n){let r="",i=!0;for(let a=0;a<Nk;a++){const l=Ba[a],h=t[l];if(h===void 0)continue;let f=!0;if(typeof h=="number"?f=h===(l.startsWith("scale")?1:0):f=parseFloat(h)===0,!f||n){const p=DT(h,kg[l]);if(!f){i=!1;const g=kk[l]||l;r+=`${g}(${p}) `}n&&(e[l]=p)}}return r=r.trim(),n?r=n(e,i?"":r):i&&(r="none"),r}function Mg(t,e,n){const{style:r,vars:i,transformOrigin:a}=t;let l=!1,h=!1;for(const f in e){const p=e[f];if($a.has(f)){l=!0;continue}else if(_g(f)){i[f]=p;continue}else{const g=DT(p,kg[f]);f.startsWith("origin")?(h=!0,a[f]=g):r[f]=g}}if(e.transform||(l||n?r.transform=Vk(e,t.transform,n):r.transform&&(r.transform="none")),h){const{originX:f="50%",originY:p="50%",originZ:g=0}=a;r.transformOrigin=`${f} ${p} ${g}`}}const Fg=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function KT(t,e,n){for(const r in e)!Zt(e[r])&&!qT(r,n)&&(t[r]=e[r])}function Dk({transformTemplate:t},e){return M.useMemo(()=>{const n=Fg();return Mg(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Ok(t,e){const n=t.style||{},r={};return KT(r,n,t),Object.assign(r,Dk(t,e)),r}function jk(t,e){const n={},r=Ok(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const Lk={offset:"stroke-dashoffset",array:"stroke-dasharray"},Mk={offset:"strokeDashoffset",array:"strokeDasharray"};function Fk(t,e,n=1,r=0,i=!0){t.pathLength=1;const a=i?Lk:Mk;t[a.offset]=Te.transform(-r);const l=Te.transform(e),h=Te.transform(n);t[a.array]=`${l} ${h}`}function GT(t,{attrX:e,attrY:n,attrScale:r,pathLength:i,pathSpacing:a=1,pathOffset:l=0,...h},f,p,g){if(Mg(t,h,p),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:w,style:T}=t;w.transform&&(T.transform=w.transform,delete w.transform),(T.transform||w.transformOrigin)&&(T.transformOrigin=w.transformOrigin??"50% 50%",delete w.transformOrigin),T.transform&&(T.transformBox=g?.transformBox??"fill-box",delete w.transformBox),e!==void 0&&(w.x=e),n!==void 0&&(w.y=n),r!==void 0&&(w.scale=r),i!==void 0&&Fk(w,i,a,l,!1)}const QT=()=>({...Fg(),attrs:{}}),XT=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Uk(t,e,n,r){const i=M.useMemo(()=>{const a=QT();return GT(a,e,XT(r),t.transformTemplate,t.style),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};KT(a,t.style,t),i.style={...a,...i.style}}return i}const Bk=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Ug(t){return typeof t!="string"||t.includes("-")?!1:!!(Bk.indexOf(t)>-1||/[A-Z]/u.test(t))}function $k(t=!1){return(n,r,i,{latestValues:a},l)=>{const f=(Ug(n)?Uk:jk)(r,a,l,n),p=yk(r,typeof n=="string",t),g=n!==M.Fragment?{...p,...f,ref:i}:{},{children:w}=r,T=M.useMemo(()=>Zt(w)?w.get():w,[w]);return M.createElement(n,{...g,children:T})}}function G_(t){const e=[{},{}];return t?.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function Bg(t,e,n,r){if(typeof e=="function"){const[i,a]=G_(r);e=e(n!==void 0?n:t.custom,i,a)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[i,a]=G_(r);e=e(n!==void 0?n:t.custom,i,a)}return e}function Sh(t){return Zt(t)?t.get():t}function zk({scrapeMotionValuesFromProps:t,createRenderState:e},n,r,i){return{latestValues:Hk(n,r,i,t),renderState:e()}}const YT=t=>(e,n)=>{const r=M.useContext(fd),i=M.useContext(dd),a=()=>zk(t,e,r,i);return n?a():cg(a)};function Hk(t,e,n,r){const i={},a=r(t,{});for(const T in a)i[T]=Sh(a[T]);let{initial:l,animate:h}=t;const f=md(t),p=$T(t);e&&p&&!f&&t.inherit!==!1&&(l===void 0&&(l=e.initial),h===void 0&&(h=e.animate));let g=n?n.initial===!1:!1;g=g||l===!1;const w=g?h:l;if(w&&typeof w!="boolean"&&!pd(w)){const T=Array.isArray(w)?w:[w];for(let C=0;C<T.length;C++){const V=Bg(t,T[C]);if(V){const{transitionEnd:O,transition:R,...L}=V;for(const U in L){let z=L[U];if(Array.isArray(z)){const K=g?z.length-1:0;z=z[K]}z!==null&&(i[U]=z)}for(const U in O)i[U]=O[U]}}}return i}function $g(t,e,n){const{style:r}=t,i={};for(const a in r)(Zt(r[a])||e.style&&Zt(e.style[a])||qT(a,t)||n?.getValue(a)?.liveStyle!==void 0)&&(i[a]=r[a]);return i}const Wk={useVisualState:YT({scrapeMotionValuesFromProps:$g,createRenderState:Fg})};function JT(t,e,n){const r=$g(t,e,n);for(const i in t)if(Zt(t[i])||Zt(e[i])){const a=Ba.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[a]=t[i]}return r}const qk={useVisualState:YT({scrapeMotionValuesFromProps:JT,createRenderState:QT})};function Kk(t,e){return function(r,{forwardMotionProps:i}={forwardMotionProps:!1}){const l={...Ug(r)?qk:Wk,preloadedFeatures:t,useRender:$k(i),createVisualElement:e,Component:r};return bk(l)}}function _u(t,e,n){const r=t.getProps();return Bg(r,e,n!==void 0?n:r.custom,t)}const xm=t=>Array.isArray(t);function Gk(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ka(n))}function Qk(t){return xm(t)?t[t.length-1]||0:t}function Xk(t,e){const n=_u(t,e);let{transitionEnd:r={},transition:i={},...a}=n||{};a={...a,...r};for(const l in a){const h=Qk(a[l]);Gk(t,l,h)}}function Yk(t){return!!(Zt(t)&&t.add)}function Tm(t,e){const n=t.getValue("willChange");if(Yk(n))return n.add(e);if(!n&&ls.WillChange){const r=new ls.WillChange("auto");t.addValue("willChange",r),r.add(e)}}function ZT(t){return t.props[zT]}const Jk=t=>t!==null;function Zk(t,{repeat:e,repeatType:n="loop"},r){const i=t.filter(Jk),a=e&&n!=="loop"&&e%2===1?0:i.length-1;return i[a]}const e2={type:"spring",stiffness:500,damping:25,restSpeed:10},t2=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),n2={type:"keyframes",duration:.8},r2={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},s2=(t,{keyframes:e})=>e.length>2?n2:$a.has(t)?t.startsWith("scale")?t2(e[1]):e2:r2;function i2({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:a,repeatType:l,repeatDelay:h,from:f,elapsed:p,...g}){return!!Object.keys(g).length}const zg=(t,e,n,r={},i,a)=>l=>{const h=Pg(r,t)||{},f=h.delay||r.delay||0;let{elapsed:p=0}=r;p=p-Ar(f);const g={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-p,onUpdate:T=>{e.set(T),h.onUpdate&&h.onUpdate(T)},onComplete:()=>{l(),h.onComplete&&h.onComplete()},name:t,motionValue:e,element:a?void 0:i};i2(h)||Object.assign(g,s2(t,g)),g.duration&&(g.duration=Ar(g.duration)),g.repeatDelay&&(g.repeatDelay=Ar(g.repeatDelay)),g.from!==void 0&&(g.keyframes[0]=g.from);let w=!1;if((g.type===!1||g.duration===0&&!g.repeatDelay)&&(g.duration=0,g.delay===0&&(w=!0)),(ls.instantAnimations||ls.skipAnimations)&&(w=!0,g.duration=0,g.delay=0),g.allowFlatten=!h.type&&!h.ease,w&&!a&&e.get()!==void 0){const T=Zk(g.keyframes,h);if(T!==void 0){ot.update(()=>{g.onUpdate(T),g.onComplete()});return}}return h.isSync?new Ag(g):new FP(g)};function o2({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function eE(t,e,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:l,...h}=e;r&&(a=r);const f=[],p=i&&t.animationState&&t.animationState.getState()[i];for(const g in h){const w=t.getValue(g,t.latestValues[g]??null),T=h[g];if(T===void 0||p&&o2(p,g))continue;const C={delay:n,...Pg(a||{},g)},V=w.get();if(V!==void 0&&!w.isAnimating&&!Array.isArray(T)&&T===V&&!C.velocity)continue;let O=!1;if(window.MotionHandoffAnimation){const L=ZT(t);if(L){const U=window.MotionHandoffAnimation(L,g,ot);U!==null&&(C.startTime=U,O=!0)}}Tm(t,g),w.start(zg(g,w,T,t.shouldReduceMotion&&RT.has(g)?{type:!1}:C,t,O));const R=w.animation;R&&f.push(R)}return l&&Promise.all(f).then(()=>{ot.update(()=>{l&&Xk(t,l)})}),f}function Em(t,e,n={}){const r=_u(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:i=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const a=r?()=>Promise.all(eE(t,r,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:p=0,staggerChildren:g,staggerDirection:w}=i;return a2(t,e,p+f,g,w,n)}:()=>Promise.resolve(),{when:h}=i;if(h){const[f,p]=h==="beforeChildren"?[a,l]:[l,a];return f().then(()=>p())}else return Promise.all([a(),l(n.delay)])}function a2(t,e,n=0,r=0,i=1,a){const l=[],h=(t.variantChildren.size-1)*r,f=i===1?(p=0)=>p*r:(p=0)=>h-p*r;return Array.from(t.variantChildren).sort(l2).forEach((p,g)=>{p.notify("AnimationStart",e),l.push(Em(p,e,{...a,delay:n+f(g)}).then(()=>p.notify("AnimationComplete",e)))}),Promise.all(l)}function l2(t,e){return t.sortNodePosition(e)}function u2(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const i=e.map(a=>Em(t,a,n));r=Promise.all(i)}else if(typeof e=="string")r=Em(t,e,n);else{const i=typeof e=="function"?_u(t,e,n.custom):e;r=Promise.all(eE(t,i,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}function tE(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}const c2=jg.length;function nE(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?nE(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<c2;n++){const r=jg[n],i=t.props[r];(yu(i)||i===!1)&&(e[r]=i)}return e}const h2=[...Og].reverse(),d2=Og.length;function f2(t){return e=>Promise.all(e.map(({animation:n,options:r})=>u2(t,n,r)))}function p2(t){let e=f2(t),n=Q_(),r=!0;const i=f=>(p,g)=>{const w=_u(t,g,f==="exit"?t.presenceContext?.custom:void 0);if(w){const{transition:T,transitionEnd:C,...V}=w;p={...p,...V,...C}}return p};function a(f){e=f(t)}function l(f){const{props:p}=t,g=nE(t.parent)||{},w=[],T=new Set;let C={},V=1/0;for(let R=0;R<d2;R++){const L=h2[R],U=n[L],z=p[L]!==void 0?p[L]:g[L],K=yu(z),Q=L===f?U.isActive:null;Q===!1&&(V=R);let Y=z===g[L]&&z!==p[L]&&K;if(Y&&r&&t.manuallyAnimateOnMount&&(Y=!1),U.protectedKeys={...C},!U.isActive&&Q===null||!z&&!U.prevProp||pd(z)||typeof z=="boolean")continue;const N=m2(U.prevProp,z);let S=N||L===f&&U.isActive&&!Y&&K||R>V&&K,A=!1;const b=Array.isArray(z)?z:[z];let D=b.reduce(i(L),{});Q===!1&&(D={});const{prevResolvedValues:F={}}=U,P={...F,...D},Ae=Ie=>{S=!0,T.has(Ie)&&(A=!0,T.delete(Ie)),U.needsAnimating[Ie]=!0;const J=t.getValue(Ie);J&&(J.liveStyle=!1)};for(const Ie in P){const J=D[Ie],le=F[Ie];if(C.hasOwnProperty(Ie))continue;let oe=!1;xm(J)&&xm(le)?oe=!tE(J,le):oe=J!==le,oe?J!=null?Ae(Ie):T.add(Ie):J!==void 0&&T.has(Ie)?Ae(Ie):U.protectedKeys[Ie]=!0}U.prevProp=z,U.prevResolvedValues=D,U.isActive&&(C={...C,...D}),r&&t.blockInitialAnimation&&(S=!1),S&&(!(Y&&N)||A)&&w.push(...b.map(Ie=>({animation:Ie,options:{type:L}})))}if(T.size){const R={};if(typeof p.initial!="boolean"){const L=_u(t,Array.isArray(p.initial)?p.initial[0]:p.initial);L&&L.transition&&(R.transition=L.transition)}T.forEach(L=>{const U=t.getBaseTarget(L),z=t.getValue(L);z&&(z.liveStyle=!0),R[L]=U??null}),w.push({animation:R})}let O=!!w.length;return r&&(p.initial===!1||p.initial===p.animate)&&!t.manuallyAnimateOnMount&&(O=!1),r=!1,O?e(w):Promise.resolve()}function h(f,p){if(n[f].isActive===p)return Promise.resolve();t.variantChildren?.forEach(w=>w.animationState?.setActive(f,p)),n[f].isActive=p;const g=l(f);for(const w in n)n[w].protectedKeys={};return g}return{animateChanges:l,setActive:h,setAnimateFunction:a,getState:()=>n,reset:()=>{n=Q_(),r=!0}}}function m2(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!tE(e,t):!1}function Hi(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Q_(){return{animate:Hi(!0),whileInView:Hi(),whileHover:Hi(),whileTap:Hi(),whileDrag:Hi(),whileFocus:Hi(),exit:Hi()}}class di{constructor(e){this.isMounted=!1,this.node=e}update(){}}class g2 extends di{constructor(e){super(e),e.animationState||(e.animationState=p2(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();pd(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let y2=0;class v2 extends di{constructor(){super(...arguments),this.id=y2++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e);n&&!e&&i.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const _2={animation:{Feature:g2},exit:{Feature:v2}};function wu(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function Ou(t){return{point:{x:t.pageX,y:t.pageY}}}const w2=t=>e=>Vg(e)&&t(e,Ou(e));function nu(t,e,n,r){return wu(t,e,w2(n),r)}function rE({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function x2({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function T2(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const sE=1e-4,E2=1-sE,S2=1+sE,iE=.01,I2=0-iE,b2=0+iE;function an(t){return t.max-t.min}function A2(t,e,n){return Math.abs(t-e)<=n}function X_(t,e,n,r=.5){t.origin=r,t.originPoint=it(e.min,e.max,t.origin),t.scale=an(n)/an(e),t.translate=it(n.min,n.max,t.origin)-t.originPoint,(t.scale>=E2&&t.scale<=S2||isNaN(t.scale))&&(t.scale=1),(t.translate>=I2&&t.translate<=b2||isNaN(t.translate))&&(t.translate=0)}function ru(t,e,n,r){X_(t.x,e.x,n.x,r?r.originX:void 0),X_(t.y,e.y,n.y,r?r.originY:void 0)}function Y_(t,e,n){t.min=n.min+e.min,t.max=t.min+an(e)}function C2(t,e,n){Y_(t.x,e.x,n.x),Y_(t.y,e.y,n.y)}function J_(t,e,n){t.min=e.min-n.min,t.max=t.min+an(e)}function su(t,e,n){J_(t.x,e.x,n.x),J_(t.y,e.y,n.y)}const Z_=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ta=()=>({x:Z_(),y:Z_()}),ew=()=>({min:0,max:0}),mt=()=>({x:ew(),y:ew()});function Bn(t){return[t("x"),t("y")]}function Rp(t){return t===void 0||t===1}function Sm({scale:t,scaleX:e,scaleY:n}){return!Rp(t)||!Rp(e)||!Rp(n)}function Wi(t){return Sm(t)||oE(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function oE(t){return tw(t.x)||tw(t.y)}function tw(t){return t&&t!=="0%"}function Bh(t,e,n){const r=t-n,i=e*r;return n+i}function nw(t,e,n,r,i){return i!==void 0&&(t=Bh(t,i,r)),Bh(t,n,r)+e}function Im(t,e=0,n=1,r,i){t.min=nw(t.min,e,n,r,i),t.max=nw(t.max,e,n,r,i)}function aE(t,{x:e,y:n}){Im(t.x,e.translate,e.scale,e.originPoint),Im(t.y,n.translate,n.scale,n.originPoint)}const rw=.999999999999,sw=1.0000000000001;function R2(t,e,n,r=!1){const i=n.length;if(!i)return;e.x=e.y=1;let a,l;for(let h=0;h<i;h++){a=n[h],l=a.projectionDelta;const{visualElement:f}=a.options;f&&f.props.style&&f.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Sa(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,aE(t,l)),r&&Wi(a.latestValues)&&Sa(t,a.latestValues))}e.x<sw&&e.x>rw&&(e.x=1),e.y<sw&&e.y>rw&&(e.y=1)}function Ea(t,e){t.min=t.min+e,t.max=t.max+e}function iw(t,e,n,r,i=.5){const a=it(t.min,t.max,i);Im(t,e,n,a,r)}function Sa(t,e){iw(t.x,e.x,e.scaleX,e.scale,e.originX),iw(t.y,e.y,e.scaleY,e.scale,e.originY)}function lE(t,e){return rE(T2(t.getBoundingClientRect(),e))}function P2(t,e,n){const r=lE(t,n),{scroll:i}=e;return i&&(Ea(r.x,i.offset.x),Ea(r.y,i.offset.y)),r}const uE=({current:t})=>t?t.ownerDocument.defaultView:null,ow=(t,e)=>Math.abs(t-e);function k2(t,e){const n=ow(t.x,e.x),r=ow(t.y,e.y);return Math.sqrt(n**2+r**2)}class cE{constructor(e,n,{transformPagePoint:r,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=kp(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,C=k2(w.offset,{x:0,y:0})>=3;if(!T&&!C)return;const{point:V}=w,{timestamp:O}=$t;this.history.push({...V,timestamp:O});const{onStart:R,onMove:L}=this.handlers;T||(R&&R(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),L&&L(this.lastMoveEvent,w)},this.handlePointerMove=(w,T)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=Pp(T,this.transformPagePoint),ot.update(this.updatePoint,!0)},this.handlePointerUp=(w,T)=>{this.end();const{onEnd:C,onSessionEnd:V,resumeAnimation:O}=this.handlers;if(this.dragSnapToOrigin&&O&&O(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const R=kp(w.type==="pointercancel"?this.lastMoveEventInfo:Pp(T,this.transformPagePoint),this.history);this.startEvent&&C&&C(w,R),V&&V(w,R)},!Vg(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=i||window;const l=Ou(e),h=Pp(l,this.transformPagePoint),{point:f}=h,{timestamp:p}=$t;this.history=[{...f,timestamp:p}];const{onSessionStart:g}=n;g&&g(e,kp(h,this.history)),this.removeListeners=Nu(nu(this.contextWindow,"pointermove",this.handlePointerMove),nu(this.contextWindow,"pointerup",this.handlePointerUp),nu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ni(this.updatePoint)}}function Pp(t,e){return e?{point:e(t.point)}:t}function aw(t,e){return{x:t.x-e.x,y:t.y-e.y}}function kp({point:t},e){return{point:t,delta:aw(t,hE(e)),offset:aw(t,N2(e)),velocity:V2(e,.1)}}function N2(t){return t[0]}function hE(t){return t[t.length-1]}function V2(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const i=hE(t);for(;n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Ar(e)));)n--;if(!r)return{x:0,y:0};const a=Cr(i.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const l={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function D2(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?it(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?it(n,t,r.max):Math.min(t,n)),t}function lw(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function O2(t,{top:e,left:n,bottom:r,right:i}){return{x:lw(t.x,n,i),y:lw(t.y,e,r)}}function uw(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function j2(t,e){return{x:uw(t.x,e.x),y:uw(t.y,e.y)}}function L2(t,e){let n=.5;const r=an(t),i=an(e);return i>r?n=pu(e.min,e.max-r,t.min):r>i&&(n=pu(t.min,t.max-i,e.min)),as(0,1,n)}function M2(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const bm=.35;function F2(t=bm){return t===!1?t=0:t===!0&&(t=bm),{x:cw(t,"left","right"),y:cw(t,"top","bottom")}}function cw(t,e,n){return{min:hw(t,e),max:hw(t,n)}}function hw(t,e){return typeof t=="number"?t:t[e]||0}const U2=new WeakMap;class B2{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=mt(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const i=g=>{const{dragSnapToOrigin:w}=this.getProps();w?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ou(g).point)},a=(g,w)=>{const{drag:T,dragPropagation:C,onDragStart:V}=this.getProps();if(T&&!C&&(this.openDragLock&&this.openDragLock(),this.openDragLock=tk(T),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Bn(R=>{let L=this.getAxisMotionValue(R).get()||0;if(Rr.test(L)){const{projection:U}=this.visualElement;if(U&&U.layout){const z=U.layout.layoutBox[R];z&&(L=an(z)*(parseFloat(L)/100))}}this.originPoint[R]=L}),V&&ot.postRender(()=>V(g,w)),Tm(this.visualElement,"transform");const{animationState:O}=this.visualElement;O&&O.setActive("whileDrag",!0)},l=(g,w)=>{const{dragPropagation:T,dragDirectionLock:C,onDirectionLock:V,onDrag:O}=this.getProps();if(!T&&!this.openDragLock)return;const{offset:R}=w;if(C&&this.currentDirection===null){this.currentDirection=$2(R),this.currentDirection!==null&&V&&V(this.currentDirection);return}this.updateAxis("x",w.point,R),this.updateAxis("y",w.point,R),this.visualElement.render(),O&&O(g,w)},h=(g,w)=>this.stop(g,w),f=()=>Bn(g=>this.getAnimationState(g)==="paused"&&this.getAxisMotionValue(g).animation?.play()),{dragSnapToOrigin:p}=this.getProps();this.panSession=new cE(e,{onSessionStart:i,onStart:a,onMove:l,onSessionEnd:h,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:p,contextWindow:uE(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:i}=n;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&ot.postRender(()=>a(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:i}=this.getProps();if(!r||!hh(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(l=D2(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;e&&xa(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=O2(r.layoutBox,e):this.constraints=!1,this.elastic=F2(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Bn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=M2(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!xa(e))return!1;const r=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=P2(r,i.root,this.visualElement.getTransformPagePoint());let l=j2(i.layout.layoutBox,a);if(n){const h=n(x2(l));this.hasMutatedConstraints=!!h,h&&(l=rE(h))}return l}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:h}=this.getProps(),f=this.constraints||{},p=Bn(g=>{if(!hh(g,n,this.currentDirection))return;let w=f&&f[g]||{};l&&(w={min:0,max:0});const T=i?200:1e6,C=i?40:1e7,V={type:"inertia",velocity:r?e[g]:0,bounceStiffness:T,bounceDamping:C,timeConstant:750,restDelta:1,restSpeed:10,...a,...w};return this.startAxisValueAnimation(g,V)});return Promise.all(p).then(h)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return Tm(this.visualElement,e),r.start(zg(e,r,0,n,this.visualElement,!1))}stopAnimation(){Bn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Bn(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Bn(n=>{const{drag:r}=this.getProps();if(!hh(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(n);if(i&&i.layout){const{min:l,max:h}=i.layout.layoutBox[n];a.set(e[n]-it(l,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!xa(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Bn(l=>{const h=this.getAxisMotionValue(l);if(h&&this.constraints!==!1){const f=h.get();i[l]=L2({min:f,max:f},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Bn(l=>{if(!hh(l,e,null))return;const h=this.getAxisMotionValue(l),{min:f,max:p}=this.constraints[l];h.set(it(f,p,i[l]))})}addListeners(){if(!this.visualElement.current)return;U2.set(this.visualElement,this);const e=this.visualElement.current,n=nu(e,"pointerdown",f=>{const{drag:p,dragListener:g=!0}=this.getProps();p&&g&&this.start(f)}),r=()=>{const{dragConstraints:f}=this.getProps();xa(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),ot.read(r);const l=wu(window,"resize",()=>this.scalePositionWithinConstraints()),h=i.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p})=>{this.isDragging&&p&&(Bn(g=>{const w=this.getAxisMotionValue(g);w&&(this.originPoint[g]+=f[g].translate,w.set(w.get()+f[g].translate))}),this.visualElement.render())});return()=>{l(),n(),a(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:l=bm,dragMomentum:h=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:a,dragElastic:l,dragMomentum:h}}}function hh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function $2(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class z2 extends di{constructor(e){super(e),this.removeGroupControls=Hn,this.removeListeners=Hn,this.controls=new B2(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Hn}unmount(){this.removeGroupControls(),this.removeListeners()}}const dw=t=>(e,n)=>{t&&ot.postRender(()=>t(e,n))};class H2 extends di{constructor(){super(...arguments),this.removePointerDownListener=Hn}onPointerDown(e){this.session=new cE(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:uE(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:dw(e),onStart:dw(n),onMove:r,onEnd:(a,l)=>{delete this.session,i&&ot.postRender(()=>i(a,l))}}}mount(){this.removePointerDownListener=nu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ih={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function fw(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Wl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Te.test(t))t=parseFloat(t);else return t;const n=fw(t,e.target.x),r=fw(t,e.target.y);return`${n}% ${r}%`}},W2={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,i=ri.parse(t);if(i.length>5)return r;const a=ri.createTransformer(t),l=typeof i[0]!="number"?1:0,h=n.x.scale*e.x,f=n.y.scale*e.y;i[0+l]/=h,i[1+l]/=f;const p=it(h,f,.5);return typeof i[2+l]=="number"&&(i[2+l]/=p),typeof i[3+l]=="number"&&(i[3+l]/=p),a(i)}};class q2 extends M.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:a}=e;Pk(K2),a&&(n.group&&n.group.add(a),r&&r.register&&i&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Ih.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:i,isPresent:a}=this.props,{projection:l}=r;return l&&(l.isPresent=a,i||e.layoutDependency!==n||n===void 0||e.isPresent!==a?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||ot.postRender(()=>{const h=l.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Ng.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function dE(t){const[e,n]=FT(),r=M.useContext(ug);return _.jsx(q2,{...t,layoutGroup:r,switchLayoutGroup:M.useContext(HT),isPresent:e,safeToRemove:n})}const K2={borderRadius:{...Wl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Wl,borderTopRightRadius:Wl,borderBottomLeftRadius:Wl,borderBottomRightRadius:Wl,boxShadow:W2};function G2(t,e,n){const r=Zt(t)?t:ka(t);return r.start(zg("",r,e,n)),r.animation}const Q2=(t,e)=>t.depth-e.depth;class X2{constructor(){this.children=[],this.isDirty=!1}add(e){dg(this.children,e),this.isDirty=!0}remove(e){fg(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Q2),this.isDirty=!1,this.children.forEach(e)}}function Y2(t,e){const n=_n.now(),r=({timestamp:i})=>{const a=i-n;a>=e&&(ni(r),t(a-e))};return ot.setup(r,!0),()=>ni(r)}const fE=["TopLeft","TopRight","BottomLeft","BottomRight"],J2=fE.length,pw=t=>typeof t=="string"?parseFloat(t):t,mw=t=>typeof t=="number"||Te.test(t);function Z2(t,e,n,r,i,a){i?(t.opacity=it(0,n.opacity??1,eN(r)),t.opacityExit=it(e.opacity??1,0,tN(r))):a&&(t.opacity=it(e.opacity??1,n.opacity??1,r));for(let l=0;l<J2;l++){const h=`border${fE[l]}Radius`;let f=gw(e,h),p=gw(n,h);if(f===void 0&&p===void 0)continue;f||(f=0),p||(p=0),f===0||p===0||mw(f)===mw(p)?(t[h]=Math.max(it(pw(f),pw(p),r),0),(Rr.test(p)||Rr.test(f))&&(t[h]+="%")):t[h]=p}(e.rotate||n.rotate)&&(t.rotate=it(e.rotate||0,n.rotate||0,r))}function gw(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const eN=pE(0,.5,oT),tN=pE(.5,.95,Hn);function pE(t,e,n){return r=>r<t?0:r>e?1:n(pu(t,e,r))}function yw(t,e){t.min=e.min,t.max=e.max}function Un(t,e){yw(t.x,e.x),yw(t.y,e.y)}function vw(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function _w(t,e,n,r,i){return t-=e,t=Bh(t,1/n,r),i!==void 0&&(t=Bh(t,1/i,r)),t}function nN(t,e=0,n=1,r=.5,i,a=t,l=t){if(Rr.test(e)&&(e=parseFloat(e),e=it(l.min,l.max,e/100)-l.min),typeof e!="number")return;let h=it(a.min,a.max,r);t===a&&(h-=e),t.min=_w(t.min,e,n,h,i),t.max=_w(t.max,e,n,h,i)}function ww(t,e,[n,r,i],a,l){nN(t,e[n],e[r],e[i],e.scale,a,l)}const rN=["x","scaleX","originX"],sN=["y","scaleY","originY"];function xw(t,e,n,r){ww(t.x,e,rN,n?n.x:void 0,r?r.x:void 0),ww(t.y,e,sN,n?n.y:void 0,r?r.y:void 0)}function Tw(t){return t.translate===0&&t.scale===1}function mE(t){return Tw(t.x)&&Tw(t.y)}function Ew(t,e){return t.min===e.min&&t.max===e.max}function iN(t,e){return Ew(t.x,e.x)&&Ew(t.y,e.y)}function Sw(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function gE(t,e){return Sw(t.x,e.x)&&Sw(t.y,e.y)}function Iw(t){return an(t.x)/an(t.y)}function bw(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class oN{constructor(){this.members=[]}add(e){dg(this.members,e),e.scheduleRender()}remove(e){if(fg(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(i=>e===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function aN(t,e,n){let r="";const i=t.x.translate/e.x,a=t.y.translate/e.y,l=n?.z||0;if((i||a||l)&&(r=`translate3d(${i}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:p,rotate:g,rotateX:w,rotateY:T,skewX:C,skewY:V}=n;p&&(r=`perspective(${p}px) ${r}`),g&&(r+=`rotate(${g}deg) `),w&&(r+=`rotateX(${w}deg) `),T&&(r+=`rotateY(${T}deg) `),C&&(r+=`skewX(${C}deg) `),V&&(r+=`skewY(${V}deg) `)}const h=t.x.scale*e.x,f=t.y.scale*e.y;return(h!==1||f!==1)&&(r+=`scale(${h}, ${f})`),r||"none"}const Np=["","X","Y","Z"],lN={visibility:"hidden"},uN=1e3;let cN=0;function Vp(t,e,n,r){const{latestValues:i}=e;i[t]&&(n[t]=i[t],e.setStaticValue(t,0),r&&(r[t]=0))}function yE(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=ZT(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:a}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",ot,!(i||a))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&yE(r)}function vE({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(l={},h=e?.()){this.id=cN++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(fN),this.nodes.forEach(vN),this.nodes.forEach(_N),this.nodes.forEach(pN)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new X2)}addEventListener(l,h){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new gg),this.eventHandlers.get(l).add(h)}notifyListeners(l,...h){const f=this.eventHandlers.get(l);f&&f.notify(...h)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=MT(l)&&!ak(l),this.instance=l;const{layoutId:h,layout:f,visualElement:p}=this.options;if(p&&!p.current&&p.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(f||h)&&(this.isLayoutDirty=!0),t){let g;const w=()=>this.root.updateBlockedByResize=!1;t(l,()=>{this.root.updateBlockedByResize=!0,g&&g(),g=Y2(w,250),Ih.hasAnimatedSinceResize&&(Ih.hasAnimatedSinceResize=!1,this.nodes.forEach(Cw))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&p&&(h||f)&&this.addEventListener("didUpdate",({delta:g,hasLayoutChanged:w,hasRelativeLayoutChanged:T,layout:C})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const V=this.options.transition||p.getDefaultTransition()||SN,{onLayoutAnimationStart:O,onLayoutAnimationComplete:R}=p.getProps(),L=!this.targetLayout||!gE(this.targetLayout,C),U=!w&&T;if(this.options.layoutRoot||this.resumeFrom||U||w&&(L||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const z={...Pg(V,"layout"),onPlay:O,onComplete:R};(p.shouldReduceMotion||this.options.layoutRoot)&&(z.delay=0,z.type=!1),this.startAnimation(z),this.setAnimationOrigin(g,U)}else w||Cw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=C})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ni(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(wN),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&yE(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let g=0;g<this.path.length;g++){const w=this.path[g];w.shouldResetTransform=!0,w.updateScroll("snapshot"),w.options.layoutRoot&&w.willUpdate(!1)}const{layoutId:h,layout:f}=this.options;if(h===void 0&&!f)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Aw);return}this.isUpdating||this.nodes.forEach(gN),this.isUpdating=!1,this.nodes.forEach(yN),this.nodes.forEach(hN),this.nodes.forEach(dN),this.clearAllSnapshots();const h=_n.now();$t.delta=as(0,1e3/60,h-$t.timestamp),$t.timestamp=h,$t.isProcessing=!0,Ep.update.process($t),Ep.preRender.process($t),Ep.render.process($t),$t.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Ng.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(mN),this.sharedNodes.forEach(xN)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ot.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ot.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!an(this.snapshot.measuredBox.x)&&!an(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=mt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(h=!1),h&&this.instance){const f=r(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!i)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!mE(this.projectionDelta),f=this.getTransformTemplate(),p=f?f(this.latestValues,""):void 0,g=p!==this.prevTransformTemplateValue;l&&this.instance&&(h||Wi(this.latestValues)||g)&&(i(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const h=this.measurePageBox();let f=this.removeElementScroll(h);return l&&(f=this.removeTransform(f)),IN(f),{animationId:this.root.animationId,measuredBox:h,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return mt();const h=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(bN))){const{scroll:p}=this.root;p&&(Ea(h.x,p.offset.x),Ea(h.y,p.offset.y))}return h}removeElementScroll(l){const h=mt();if(Un(h,l),this.scroll?.wasRoot)return h;for(let f=0;f<this.path.length;f++){const p=this.path[f],{scroll:g,options:w}=p;p!==this.root&&g&&w.layoutScroll&&(g.wasRoot&&Un(h,l),Ea(h.x,g.offset.x),Ea(h.y,g.offset.y))}return h}applyTransform(l,h=!1){const f=mt();Un(f,l);for(let p=0;p<this.path.length;p++){const g=this.path[p];!h&&g.options.layoutScroll&&g.scroll&&g!==g.root&&Sa(f,{x:-g.scroll.offset.x,y:-g.scroll.offset.y}),Wi(g.latestValues)&&Sa(f,g.latestValues)}return Wi(this.latestValues)&&Sa(f,this.latestValues),f}removeTransform(l){const h=mt();Un(h,l);for(let f=0;f<this.path.length;f++){const p=this.path[f];if(!p.instance||!Wi(p.latestValues))continue;Sm(p.latestValues)&&p.updateSnapshot();const g=mt(),w=p.measurePageBox();Un(g,w),xw(h,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,g)}return Wi(this.latestValues)&&xw(h,this.latestValues),h}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==$t.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(l||f&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:g,layoutId:w}=this.options;if(!(!this.layout||!(g||w))){if(this.resolvedRelativeTargetAt=$t.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mt(),this.relativeTargetOrigin=mt(),su(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),Un(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=mt(),this.targetWithTransforms=mt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),C2(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Un(this.target,this.layout.layoutBox),aE(this.target,this.targetDelta)):Un(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mt(),this.relativeTargetOrigin=mt(),su(this.relativeTargetOrigin,this.target,T.target),Un(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Sm(this.parent.latestValues)||oE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),h=!!this.resumingFrom||this!==l;let f=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===$t.timestamp&&(f=!1),f)return;const{layout:p,layoutId:g}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||g))return;Un(this.layoutCorrected,this.layout.layoutBox);const w=this.treeScale.x,T=this.treeScale.y;R2(this.layoutCorrected,this.treeScale,this.path,h),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=mt());const{target:C}=l;if(!C){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(vw(this.prevProjectionDelta.x,this.projectionDelta.x),vw(this.prevProjectionDelta.y,this.projectionDelta.y)),ru(this.projectionDelta,this.layoutCorrected,C,this.latestValues),(this.treeScale.x!==w||this.treeScale.y!==T||!bw(this.projectionDelta.x,this.prevProjectionDelta.x)||!bw(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",C))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ta(),this.projectionDelta=Ta(),this.projectionDeltaWithTransform=Ta()}setAnimationOrigin(l,h=!1){const f=this.snapshot,p=f?f.latestValues:{},g={...this.latestValues},w=Ta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const T=mt(),C=f?f.source:void 0,V=this.layout?this.layout.source:void 0,O=C!==V,R=this.getStack(),L=!R||R.members.length<=1,U=!!(O&&!L&&this.options.crossfade===!0&&!this.path.some(EN));this.animationProgress=0;let z;this.mixTargetDelta=K=>{const Q=K/1e3;Rw(w.x,l.x,Q),Rw(w.y,l.y,Q),this.setTargetDelta(w),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(su(T,this.layout.layoutBox,this.relativeParent.layout.layoutBox),TN(this.relativeTarget,this.relativeTargetOrigin,T,Q),z&&iN(this.relativeTarget,z)&&(this.isProjectionDirty=!1),z||(z=mt()),Un(z,this.relativeTarget)),O&&(this.animationValues=g,Z2(g,p,this.latestValues,Q,U,L)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(ni(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ot.update(()=>{Ih.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=ka(0)),this.currentAnimation=G2(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),l.onUpdate&&l.onUpdate(h)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(uN),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:h,target:f,layout:p,latestValues:g}=l;if(!(!h||!f||!p)){if(this!==l&&this.layout&&p&&_E(this.options.animationType,this.layout.layoutBox,p.layoutBox)){f=this.target||mt();const w=an(this.layout.layoutBox.x);f.x.min=l.target.x.min,f.x.max=f.x.min+w;const T=an(this.layout.layoutBox.y);f.y.min=l.target.y.min,f.y.max=f.y.min+T}Un(h,f),Sa(h,g),ru(this.projectionDeltaWithTransform,this.layoutCorrected,h,g)}}registerSharedNode(l,h){this.sharedNodes.has(l)||this.sharedNodes.set(l,new oN),this.sharedNodes.get(l).add(h);const p=h.options.initialPromotionConfig;h.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(h):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:h,preserveFollowOpacity:f}={}){const p=this.getStack();p&&p.promote(this,f),l&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let h=!1;const{latestValues:f}=l;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(h=!0),!h)return;const p={};f.z&&Vp("z",l,p,this.animationValues);for(let g=0;g<Np.length;g++)Vp(`rotate${Np[g]}`,l,p,this.animationValues),Vp(`skew${Np[g]}`,l,p,this.animationValues);l.render();for(const g in p)l.setStaticValue(g,p[g]),this.animationValues&&(this.animationValues[g]=p[g]);l.scheduleRender()}getProjectionStyles(l){if(!this.instance||this.isSVG)return;if(!this.isVisible)return lN;const h={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=Sh(l?.pointerEvents)||"",h.transform=f?f(this.latestValues,""):"none",h;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const C={};return this.options.layoutId&&(C.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,C.pointerEvents=Sh(l?.pointerEvents)||""),this.hasProjected&&!Wi(this.latestValues)&&(C.transform=f?f({},""):"none",this.hasProjected=!1),C}const g=p.animationValues||p.latestValues;this.applyTransformsToTarget(),h.transform=aN(this.projectionDeltaWithTransform,this.treeScale,g),f&&(h.transform=f(g,h.transform));const{x:w,y:T}=this.projectionDelta;h.transformOrigin=`${w.origin*100}% ${T.origin*100}% 0`,p.animationValues?h.opacity=p===this?g.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:h.opacity=p===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const C in vu){if(g[C]===void 0)continue;const{correct:V,applyTo:O,isCSSVariable:R}=vu[C],L=h.transform==="none"?g[C]:V(g[C],p);if(O){const U=O.length;for(let z=0;z<U;z++)h[O[z]]=L}else R?this.options.visualElement.renderState.vars[C]=L:h[C]=L}return this.options.layoutId&&(h.pointerEvents=p===this?Sh(l?.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(Aw),this.root.sharedNodes.clear()}}}function hN(t){t.updateLayout()}function dN(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:i}=t.options,a=e.source!==t.layout.source;i==="size"?Bn(g=>{const w=a?e.measuredBox[g]:e.layoutBox[g],T=an(w);w.min=n[g].min,w.max=w.min+T}):_E(i,e.layoutBox,n)&&Bn(g=>{const w=a?e.measuredBox[g]:e.layoutBox[g],T=an(n[g]);w.max=w.min+T,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[g].max=t.relativeTarget[g].min+T)});const l=Ta();ru(l,n,e.layoutBox);const h=Ta();a?ru(h,t.applyTransform(r,!0),e.measuredBox):ru(h,n,e.layoutBox);const f=!mE(l);let p=!1;if(!t.resumeFrom){const g=t.getClosestProjectingParent();if(g&&!g.resumeFrom){const{snapshot:w,layout:T}=g;if(w&&T){const C=mt();su(C,e.layoutBox,w.layoutBox);const V=mt();su(V,n,T.layoutBox),gE(C,V)||(p=!0),g.options.layoutRoot&&(t.relativeTarget=V,t.relativeTargetOrigin=C,t.relativeParent=g)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:h,layoutDelta:l,hasLayoutChanged:f,hasRelativeLayoutChanged:p})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function fN(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function pN(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function mN(t){t.clearSnapshot()}function Aw(t){t.clearMeasurements()}function gN(t){t.isLayoutDirty=!1}function yN(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Cw(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function vN(t){t.resolveTargetDelta()}function _N(t){t.calcProjection()}function wN(t){t.resetSkewAndRotation()}function xN(t){t.removeLeadSnapshot()}function Rw(t,e,n){t.translate=it(e.translate,0,n),t.scale=it(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Pw(t,e,n,r){t.min=it(e.min,n.min,r),t.max=it(e.max,n.max,r)}function TN(t,e,n,r){Pw(t.x,e.x,n.x,r),Pw(t.y,e.y,n.y,r)}function EN(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const SN={duration:.45,ease:[.4,0,.1,1]},kw=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Nw=kw("applewebkit/")&&!kw("chrome/")?Math.round:Hn;function Vw(t){t.min=Nw(t.min),t.max=Nw(t.max)}function IN(t){Vw(t.x),Vw(t.y)}function _E(t,e,n){return t==="position"||t==="preserve-aspect"&&!A2(Iw(e),Iw(n),.2)}function bN(t){return t!==t.root&&t.scroll?.wasRoot}const AN=vE({attachResizeListener:(t,e)=>wu(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Dp={current:void 0},wE=vE({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Dp.current){const t=new AN({});t.mount(window),t.setOptions({layoutScroll:!0}),Dp.current=t}return Dp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),CN={pan:{Feature:H2},drag:{Feature:z2,ProjectionNode:wE,MeasureLayout:dE}};function Dw(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,a=r[i];a&&ot.postRender(()=>a(e,Ou(e)))}class RN extends di{mount(){const{current:e}=this.node;e&&(this.unmount=nk(e,(n,r)=>(Dw(this.node,r,"Start"),i=>Dw(this.node,i,"End"))))}unmount(){}}class PN extends di{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Nu(wu(this.node.current,"focus",()=>this.onFocus()),wu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Ow(t,e,n){const{props:r}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&r.whileTap&&t.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),a=r[i];a&&ot.postRender(()=>a(e,Ou(e)))}class kN extends di{mount(){const{current:e}=this.node;e&&(this.unmount=ok(e,(n,r)=>(Ow(this.node,r,"Start"),(i,{success:a})=>Ow(this.node,i,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Am=new WeakMap,Op=new WeakMap,NN=t=>{const e=Am.get(t.target);e&&e(t)},VN=t=>{t.forEach(NN)};function DN({root:t,...e}){const n=t||document;Op.has(n)||Op.set(n,{});const r=Op.get(n),i=JSON.stringify(e);return r[i]||(r[i]=new IntersectionObserver(VN,{root:t,...e})),r[i]}function ON(t,e,n){const r=DN(e);return Am.set(t,n),r.observe(t),()=>{Am.delete(t),r.unobserve(t)}}const jN={some:0,all:1};class LN extends di{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:a}=e,l={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:jN[i]},h=f=>{const{isIntersecting:p}=f;if(this.isInView===p||(this.isInView=p,a&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:g,onViewportLeave:w}=this.node.getProps(),T=p?g:w;T&&T(f)};return ON(this.node.current,l,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(MN(e,n))&&this.startObserver()}unmount(){}}function MN({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const FN={inView:{Feature:LN},tap:{Feature:kN},focus:{Feature:PN},hover:{Feature:RN}},UN={layout:{ProjectionNode:wE,MeasureLayout:dE}},Cm={current:null},xE={current:!1};function BN(){if(xE.current=!0,!!hg)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Cm.current=t.matches;t.addListener(e),e()}else Cm.current=!1}const $N=new WeakMap;function zN(t,e,n){for(const r in e){const i=e[r],a=n[r];if(Zt(i))t.addValue(r,i);else if(Zt(a))t.addValue(r,ka(i,{owner:t}));else if(a!==i)if(t.hasValue(r)){const l=t.getValue(r);l.liveStyle===!0?l.jump(i):l.hasAnimated||l.set(i)}else{const l=t.getStaticValue(r);t.addValue(r,ka(l!==void 0?l:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const jw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class HN{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:a,visualState:l},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Cg,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const T=_n.now();this.renderScheduledAt<T&&(this.renderScheduledAt=T,ot.render(this.render,!1,!0))};const{latestValues:f,renderState:p}=l;this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=p,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=h,this.blockInitialAnimation=!!a,this.isControllingVariants=md(n),this.isVariantNode=$T(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:g,...w}=this.scrapeMotionValuesFromProps(n,{},this);for(const T in w){const C=w[T];f[T]!==void 0&&Zt(C)&&C.set(f[T],!1)}}mount(e){this.current=e,$N.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),xE.current||BN(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Cm.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ni(this.notifyUpdate),ni(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=$a.has(e);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",h=>{this.latestValues[e]=h,this.props.onUpdate&&ot.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{i(),a(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Na){const n=Na[e];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[e]&&i&&r(this.props)&&(this.features[e]=new i(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):mt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<jw.length;r++){const i=jw[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a="on"+i,l=e[a];l&&(this.propEventSubscriptions[i]=this.on(i,l))}this.prevMotionValues=zN(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=ka(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(X1(r)||J1(r))?r=parseFloat(r):!uk(r)&&ri.test(n)&&(r=VT(e,n)),this.setBaseTarget(e,Zt(r)?r.get():r)),Zt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=Bg(this.props,n,this.presenceContext?.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Zt(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new gg),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class TE extends HN{constructor(){super(...arguments),this.KeyframeResolver=YP}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Zt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function EE(t,{style:e,vars:n},r,i){Object.assign(t.style,e,i&&i.getProjectionStyles(r));for(const a in n)t.style.setProperty(a,n[a])}function WN(t){return window.getComputedStyle(t)}class qN extends TE{constructor(){super(...arguments),this.type="html",this.renderInstance=EE}readValueFromInstance(e,n){if($a.has(n))return this.projection?.isProjecting?mm(n):gP(e,n);{const r=WN(e),i=(_g(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:n}){return lE(e,n)}build(e,n,r){Mg(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return $g(e,n,r)}}const SE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function KN(t,e,n,r){EE(t,e,void 0,r);for(const i in e.attrs)t.setAttribute(SE.has(i)?i:Lg(i),e.attrs[i])}class GN extends TE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=mt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if($a.has(n)){const r=NT(n);return r&&r.default||0}return n=SE.has(n)?n:Lg(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return JT(e,n,r)}build(e,n,r){GT(e,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,n,r,i){KN(e,n,r,i)}mount(e){this.isSVGTag=XT(e.tagName),super.mount(e)}}const QN=(t,e)=>Ug(t)?new GN(e):new qN(e,{allowProjection:t!==M.Fragment}),XN=Kk({..._2,...FN,...CN,...UN},QN),ue=vk(XN),da={width:64,height:64,marginBottom:8},jp=({code:t})=>{switch(t){case 0:return _.jsxs("svg",{style:da,viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("circle",{cx:"32",cy:"32",r:"12",fill:"#FFD93B"}),_.jsx("g",{stroke:"#FFD93B",strokeWidth:"3",strokeLinecap:"round",style:{transformOrigin:"32px 32px",animation:"rotateRays 6s linear infinite"},children:[...Array(8)].map((e,n)=>{const r=n*45*(Math.PI/180),i=32+18*Math.cos(r),a=32+18*Math.sin(r),l=32+26*Math.cos(r),h=32+26*Math.sin(r);return _.jsx("line",{x1:i,y1:a,x2:l,y2:h},n)})}),_.jsx("style",{children:`
            @keyframes rotateRays {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
            }
          `})]});case 1:return _.jsxs("svg",{style:da,viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("circle",{cx:"22",cy:"22",r:"10",fill:"#FFD93B"}),_.jsx("ellipse",{cx:"40",cy:"36",rx:"14",ry:"10",fill:"#cbd5e1"}),_.jsx("ellipse",{cx:"34",cy:"38",rx:"14",ry:"10",fill:"#f1f5f9",style:{animation:"floatCloud 6s ease-in-out infinite"}}),_.jsx("style",{children:`
            @keyframes floatCloud {
              0%, 100% { transform: translateY(0); }
              50% { transform: translateY(-5px); }
            }
          `})]});case 3:return _.jsxs("svg",{style:da,viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",fill:"#cbd5e1",children:[_.jsx("ellipse",{cx:"22",cy:"32",rx:"14",ry:"10"}),_.jsx("ellipse",{cx:"40",cy:"36",rx:"18",ry:"12"}),_.jsx("ellipse",{cx:"30",cy:"40",rx:"14",ry:"10",fill:"#94a3b8",style:{animation:"floatCloud 8s ease-in-out infinite"}}),_.jsx("style",{children:`
            @keyframes floatCloud {
              0%, 100% { transform: translateY(0); }
              50% { transform: translateY(-3px); }
            }
          `})]});case 61:return _.jsxs("svg",{style:da,viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("ellipse",{cx:"32",cy:"28",rx:"20",ry:"14",fill:"#94a3b8"}),_.jsx("g",{fill:"#3b82f6",children:[16,24,32,40,48].map((e,n)=>_.jsx("ellipse",{cx:e,cy:"50",rx:"3",ry:"7",style:{animation:`raindropFall ${.6+n*.2}s ease-in-out infinite`,transformOrigin:"center bottom"}},n))}),_.jsx("style",{children:`
            @keyframes raindropFall {
              0%, 100% { transform: translateY(0); opacity: 1; }
              50% { transform: translateY(10px); opacity: 0.6; }
            }
          `})]});case 95:return _.jsxs("svg",{style:da,viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("ellipse",{cx:"32",cy:"28",rx:"20",ry:"14",fill:"#64748b"}),_.jsx("polygon",{points:"28,38 38,38 32,52 40,52 24,68 28,50 20,50",fill:"#facc15",style:{animation:"flash 1.2s ease-in-out infinite"}}),_.jsx("style",{children:`
            @keyframes flash {
              0%, 100% { opacity: 1; }
              50% { opacity: 0.3; }
            }
          `})]});default:return _.jsx("svg",{style:da,viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",fill:"#fff",children:_.jsx("text",{x:"10",y:"35",fontSize:"24",fill:"white",children:""})})}},ql=[{name:"Arusha",lat:-3.3667,lon:36.6833},{name:"Dar es Salaam",lat:-6.7924,lon:39.2083},{name:"Dodoma",lat:-6.163,lon:35.7516},{name:"Geita",lat:-2.8725,lon:32.2295},{name:"Iringa",lat:-7.7667,lon:35.7},{name:"Kagera",lat:-1.5,lon:31},{name:"Katavi",lat:-6.4833,lon:31.1333},{name:"Kigoma",lat:-4.8833,lon:29.6333},{name:"Kilimanjaro",lat:-3.0674,lon:37.3556},{name:"Lindi",lat:-10,lon:39.7167},{name:"Manyara",lat:-4.3167,lon:36.6833},{name:"Mara",lat:-1.5,lon:34.45},{name:"Mbeya",lat:-8.9,lon:33.45},{name:"Morogoro",lat:-6.824,lon:37.663},{name:"Mtwara",lat:-10.2667,lon:40.1833},{name:"Mwanza",lat:-2.5167,lon:32.9},{name:"Njombe",lat:-9.3333,lon:34.7667},{name:"Pemba North",lat:-5.0362,lon:39.7452},{name:"Pemba South",lat:-5.2467,lon:39.7756},{name:"Pwani",lat:-7,lon:38.9167},{name:"Rukwa",lat:-8,lon:31.5},{name:"Ruvuma",lat:-10.687,lon:36.263},{name:"Shinyanga",lat:-3.661,lon:33.421},{name:"Simiyu",lat:-2.8386,lon:34.1419},{name:"Singida",lat:-4.8167,lon:34.75},{name:"Songwe",lat:-8.9167,lon:32.5833},{name:"Tabora",lat:-5.0167,lon:32.8},{name:"Tanga",lat:-5.0667,lon:39.1},{name:"Unguja North",lat:-5.9394,lon:39.279},{name:"Unguja South",lat:-6.2645,lon:39.4135}],YN=t=>["N","NE","E","SE","S","SW","W","NW","N"][Math.round(t/45)%8],JN=(t,e,n)=>[61,63,65,66,67,71,73,75,77,80,81,82].includes(n)?"Rain is coming - good time for planting but delay fertilizer application.":e>=70&&t>=20&&t<=30?"Ideal conditions for planting most crops. The soil moisture is perfect for seed germination.":t>35?"High temperatures detected. Water crops early morning or late evening to reduce evaporation.":e<50?"Low humidity detected. Consider irrigation to maintain soil moisture for your crops.":"Weather conditions are stable. Good time for regular farming activities.",ZN=(t,e=new Date().getMonth())=>{const n=e>=3&&e<=5,r=e>=10&&e<=12;return{Arusha:n?"Wheat and barley":"Vegetables and coffee","Dar es Salaam":"Cassava and coconuts year-round",Dodoma:r?"Sunflowers and sorghum":"Drought-resistant crops",Kilimanjaro:"Coffee and bananas year-round",Mbeya:n?"Maize and beans":"Irish potatoes",Morogoro:n?"Rice and sugarcane":"Vegetables",Mwanza:n?"Cotton and maize":"Cassava",Singida:r?"Sunflowers and groundnuts":"Sorghum",Tabora:n?"Tobacco and maize":"Cassava",Tanga:n?"Sisal and cashews":"Spices"}[t]||"Consult local agriculture extension officer for crop advice"},eV=(t,e=new Date().getMonth())=>({Arusha:e===7?"Coffee harvest starting soon":"",Dodoma:e===6?"Sunflower harvest beginning":"",Mbeya:e===8?"Maize harvest season":"",Mwanza:e===9?"Cotton buyers needed":"",Singida:e===7?"Sunflower harvest starting":""})[t]||"Check local markets for current produce prices",tV=()=>{const[t,e]=M.useState(null),[n,r]=M.useState(null),[i,a]=M.useState(null),[l,h]=M.useState(null),[f,p]=M.useState(null),[g,w]=M.useState(null),[T,C]=M.useState(!0),[V,O]=M.useState("Detecting..."),[R,L]=M.useState({width:window.innerWidth,height:window.innerHeight}),[U,z]=M.useState(window.innerWidth<=768);M.useEffect(()=>{const J=()=>{L({width:window.innerWidth,height:window.innerHeight}),z(window.innerWidth<=768)};return window.addEventListener("resize",J),()=>window.removeEventListener("resize",J)},[]),M.useEffect(()=>{C(!0),navigator.geolocation.getCurrentPosition(J=>{const le={lat:J.coords.latitude,lon:J.coords.longitude};e(le);const oe=ql.reduce(($,ee)=>{const ye=Math.hypot($.lat-le.lat,$.lon-le.lon);return Math.hypot(ee.lat-le.lat,ee.lon-le.lon)<ye?ee:$},ql[0]);w(oe),O(`Near ${oe.name}`),C(!1)},J=>{p("Location access denied. Using default location."),w(ql.find(le=>le.name==="Dodoma")),O("Dodoma (default)"),C(!1)},{timeout:5e3})},[]),M.useEffect(()=>{if(!g)return;const J=async()=>{try{const $=await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${g.lat}&longitude=${g.lon}&hourly=temperature_2m,relative_humidity_2m,weathercode&daily=weathercode,temperature_2m_max,temperature_2m_min&current_weather=true&timezone=auto`)).json();if(!$.current_weather)throw new Error("Incomplete weather data");r($.current_weather),a($.hourly),h($.daily),p(null)}catch(oe){p("Failed to load weather data. Please try again later."),console.error(oe)}};J();const le=setInterval(J,15*60*1e3);return()=>clearInterval(le)},[g]);const K={minHeight:"100vh",boxSizing:"border-box",overflowX:"hidden",padding:U?"20vh 16px 16px 16px":"32px",background:"#f0f4f8"},Q={maxWidth:U?"100%":"1290px",margin:"0 auto",width:"100%"},Y=U?"flex flex-col gap-4":"grid grid-cols-2 gap-6";if(T)return _.jsx("div",{style:K,className:"flex items-center justify-center",children:_.jsxs("div",{className:"text-center p-6 bg-[#e6f0f7] rounded-xl shadow-md max-w-sm w-full border border-[#c8d9e8]",children:[_.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600 mx-auto mb-4"}),_.jsx("p",{className:"text-lg font-medium text-gray-800",children:"Detecting your location..."}),_.jsx("p",{className:"text-sm text-gray-600",children:"Please enable location services"})]})});if(f)return _.jsx("div",{style:K,className:"flex items-center justify-center",children:_.jsxs("div",{className:"text-center p-6 bg-[#e6f0f7] rounded-xl shadow-md max-w-md w-full border border-[#c8d9e8]",children:[_.jsx("div",{className:"text-red-500 text-4xl mb-3",children:""}),_.jsx("h3",{className:"text-lg font-bold mb-2 text-gray-800",children:"Location Error"}),_.jsx("p",{className:"mb-4 text-gray-700",children:f}),_.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Try Again"})]})});if(!n||!i||!l)return _.jsx("div",{style:K,className:"flex items-center justify-center",children:_.jsxs("div",{className:"text-center p-6 bg-[#e6f0f7] rounded-xl shadow-md max-w-md w-full border border-[#c8d9e8]",children:[_.jsx("div",{className:"animate-pulse flex justify-center",children:_.jsx("div",{className:"h-12 w-12 bg-[#d4e3f0] rounded-full"})}),_.jsx("p",{className:"mt-4 text-lg font-medium text-gray-800",children:"Loading weather data..."})]})});const{temperature:N,windspeed:S,winddirection:A,weathercode:b}=n,D=new Date().getHours(),F=i.relative_humidity_2m[D]||0,P=Array.from({length:6},(J,le)=>{const oe=(D+le)%24;return{time:new Date().setHours(oe,0,0,0),temp:i.temperature_2m[oe],code:i.weathercode[oe],humidity:i.relative_humidity_2m[oe]}}),Ae=Array.from({length:3},(J,le)=>({date:new Date(l.time[le]),maxTemp:l.temperature_2m_max[le],minTemp:l.temperature_2m_min[le],code:l.weathercode[le]})),$e=JN(N,F,b),It=ZN(g.name),Ie=eV(g.name);return _.jsx("div",{style:K,children:_.jsxs("div",{style:Q,children:[_.jsxs("div",{className:"text-center mb-6",style:U?{paddingTop:"10vh",marginBottom:"2rem"}:{marginTop:"14rem"},children:[_.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"SmartFarm TZ"}),_.jsx("p",{className:"text-gray-600 mb-3",children:"Weather & Farming Assistant"}),_.jsx("div",{className:"mb-4",children:_.jsx("select",{className:"w-full p-2 border border-gray-300 rounded-md shadow-sm text-sm max-w-md mx-auto bg-black",value:g?.name||"",onChange:J=>{const le=ql.find(oe=>oe.name===J.target.value);w(le)},children:ql.map(J=>_.jsx("option",{value:J.name,children:J.name},J.name))})})]}),_.jsxs("div",{className:Y,children:[_.jsxs("div",{className:"bg-[#e6f0f7] rounded-xl shadow-md p-6 border border-[#c8d9e8]",children:[_.jsx("h2",{className:"text-xl font-bold text-center mb-3 text-gray-800",children:g?.name}),_.jsxs("div",{className:"flex justify-center items-center mb-4",children:[_.jsx(jp,{code:b,className:"w-20 h-20 text-blue-600"}),_.jsxs("span",{className:"text-5xl font-bold ml-4 text-gray-800",children:[N,"C"]})]}),_.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[_.jsxs("div",{className:"bg-[#d4e3f0] p-3 rounded-lg text-center border border-[#b8d0e5]",children:[_.jsx("p",{className:"text-sm text-gray-600",children:"Humidity"}),_.jsxs("p",{className:"font-semibold text-lg text-gray-800",children:[F,"%"]})]}),_.jsxs("div",{className:"bg-[#d4e3f0] p-3 rounded-lg text-center border border-[#b8d0e5]",children:[_.jsx("p",{className:"text-sm text-gray-600",children:"Wind"}),_.jsxs("p",{className:"font-semibold text-lg text-gray-800",children:[S," m/s ",YN(A)]})]})]})]}),_.jsxs("div",{className:"bg-[#e6f0f7] rounded-xl shadow-md p-6 border border-[#c8d9e8]",children:[_.jsx("h3",{className:"font-bold text-lg mb-3 text-gray-800",children:"Next 6 hours"}),_.jsx("div",{className:"flex overflow-x-auto pb-2 gap-3 -mx-1 px-1",children:P.map((J,le)=>_.jsxs("div",{className:"flex-shrink-0 bg-[#d4e3f0] rounded-lg p-3 text-center min-w-[80px] border border-[#b8d0e5]",children:[_.jsxs("p",{className:"font-medium text-sm text-gray-700",children:[new Date(J.time).getHours(),":00"]}),_.jsx(jp,{code:J.code,className:"w-8 h-8 mx-auto my-2 text-blue-600"}),_.jsxs("p",{className:"text-sm font-medium text-gray-800",children:[J.temp,"C"]})]},le))})]}),_.jsxs("div",{className:"bg-[#e6f0f7] rounded-xl shadow-md p-6 border border-[#c8d9e8]",children:[_.jsx("h3",{className:"font-bold text-lg mb-3 text-gray-800",children:"Next 3 days"}),_.jsx("div",{className:"space-y-3",children:Ae.map((J,le)=>_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{children:[_.jsx("p",{className:"font-medium text-base text-gray-800",children:J.date.toLocaleDateString("en-US",{weekday:"short"})}),_.jsx("p",{className:"text-sm text-gray-600",children:J.date.toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),_.jsx(jp,{code:J.code,className:"w-8 h-8 text-blue-600"}),_.jsxs("div",{className:"text-right",children:[_.jsxs("p",{className:"font-medium text-base text-gray-800",children:[J.maxTemp,"C"]}),_.jsxs("p",{className:"text-sm text-gray-600",children:[J.minTemp,"C"]})]})]},le))})]}),_.jsxs("div",{className:"bg-[#e6f0f7] rounded-xl shadow-md p-6 border border-[#c8d9e8]",children:[_.jsx("h3",{className:"font-bold text-lg mb-3 text-gray-800",children:"Farming Advice"}),_.jsx("p",{className:"text-base text-gray-700 mb-3",children:$e}),_.jsxs("p",{className:"text-base text-gray-700 mb-3",children:["Recommended: ",It]}),_.jsx("div",{className:"mt-3 p-3 bg-[#f5e6b3] rounded-lg border border-[#e8d89b]",children:_.jsx("p",{className:"text-sm font-medium text-gray-800",children:Ie})})]})]})]})})};function nV(){return _.jsx("div",{className:"flex justify-center items-center h-screen bg-gradient-to-b from-sky-200 to-blue-500",children:_.jsx(tV,{})})}const rV=()=>{};var Lw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},sV=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=t[n++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=t[n++],l=t[n++],h=t[n++],f=((i&7)<<18|(a&63)<<12|(l&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=t[n++],l=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|l&63)}}return e.join("")},bE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const a=t[i],l=i+1<t.length,h=l?t[i+1]:0,f=i+2<t.length,p=f?t[i+2]:0,g=a>>2,w=(a&3)<<4|h>>4;let T=(h&15)<<2|p>>6,C=p&63;f||(C=64,l||(T=64)),r.push(n[g],n[w],n[T],n[C])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(IE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):sV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const a=n[t.charAt(i++)],h=i<t.length?n[t.charAt(i)]:0;++i;const p=i<t.length?n[t.charAt(i)]:64;++i;const w=i<t.length?n[t.charAt(i)]:64;if(++i,a==null||h==null||p==null||w==null)throw new iV;const T=a<<2|h>>4;if(r.push(T),p!==64){const C=h<<4&240|p>>2;if(r.push(C),w!==64){const V=p<<6&192|w;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class iV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oV=function(t){const e=IE(t);return bE.encodeByteArray(e,!0)},$h=function(t){return oV(t).replace(/\./g,"")},AE=function(t){try{return bE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV=()=>aV().__FIREBASE_DEFAULTS__,uV=()=>{if(typeof process>"u"||typeof Lw>"u")return;const t=Lw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},cV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&AE(t[1]);return e&&JSON.parse(e)},gd=()=>{try{return rV()||lV()||uV()||cV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},CE=t=>{var e,n;return(n=(e=gd())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},RE=t=>{const e=CE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},PE=()=>{var t;return(t=gd())===null||t===void 0?void 0:t.config},kE=t=>{var e;return(e=gd())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Hg(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[$h(JSON.stringify(n)),$h(JSON.stringify(l)),""].join(".")}const iu={};function dV(){const t={prod:[],emulator:[]};for(const e of Object.keys(iu))iu[e]?t.emulator.push(e):t.prod.push(e);return t}function fV(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Mw=!1;function Wg(t,e){if(typeof window>"u"||typeof document>"u"||!fi(window.location.host)||iu[t]===e||iu[t]||Mw)return;iu[t]=e;function n(T){return`__firebase__banner__${T}`}const r="__firebase__banner",a=dV().prod.length>0;function l(){const T=document.getElementById(r);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function f(T,C){T.setAttribute("width","24"),T.setAttribute("id",C),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function p(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Mw=!0,l()},T}function g(T,C){T.setAttribute("id",C),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function w(){const T=fV(r),C=n("text"),V=document.getElementById(C)||document.createElement("span"),O=n("learnmore"),R=document.getElementById(O)||document.createElement("a"),L=n("preprendIcon"),U=document.getElementById(L)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const z=T.element;h(z),g(R,O);const K=p();f(U,L),z.append(U,V,R,K),document.body.appendChild(z)}a?(V.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",w):w()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pV(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(en())}function mV(){var t;const e=(t=gd())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gV(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yV(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vV(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _V(){const t=en();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function wV(){return!mV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function VE(){try{return typeof indexedDB=="object"}catch{return!1}}function DE(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var a;e(((a=i.error)===null||a===void 0?void 0:a.message)||"")}}catch(n){e(n)}})}function xV(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TV="FirebaseError";class fr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=TV,Object.setPrototypeOf(this,fr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fo.prototype.create)}}class fo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,a=this.errors[e],l=a?EV(a,r):"Error",h=`${this.serviceName}: ${l} (${i}).`;return new fr(i,h,r)}}function EV(t,e){return t.replace(SV,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const SV=/\{\$([^}]+)}/g;function IV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function us(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const a=t[i],l=e[i];if(Fw(a)&&Fw(l)){if(!us(a,l))return!1}else if(a!==l)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Fw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function bV(t,e){const n=new AV(t,e);return n.subscribe.bind(n)}class AV{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");CV(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Lp),i.error===void 0&&(i.error=Lp),i.complete===void 0&&(i.complete=Lp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CV(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Lp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(t){return t&&t._delegate?t._delegate:t}class Wn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new hV;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kV(e))try{this.getOrInitializeService({instanceIdentifier:qi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=qi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qi){return this.instances.has(e)}getOptions(e=qi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[a,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(a);r===h&&l.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),a=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:PV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qi){return this.component?this.component.multipleInstances?e:qi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function PV(t){return t===qi?void 0:t}function kV(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new RV(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(De||(De={}));const VV={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},DV=De.INFO,OV={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},jV=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=OV[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qg{constructor(e){this.name=e,this._logLevel=DV,this._logHandler=jV,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?VV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const LV=(t,e)=>e.some(n=>t instanceof n);let Uw,Bw;function MV(){return Uw||(Uw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function FV(){return Bw||(Bw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const OE=new WeakMap,Rm=new WeakMap,jE=new WeakMap,Mp=new WeakMap,Kg=new WeakMap;function UV(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",a),t.removeEventListener("error",l)},a=()=>{n(os(t.result)),i()},l=()=>{r(t.error),i()};t.addEventListener("success",a),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&OE.set(n,t)}).catch(()=>{}),Kg.set(e,t),e}function BV(t){if(Rm.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",l),t.removeEventListener("abort",l)},a=()=>{n(),i()},l=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",a),t.addEventListener("error",l),t.addEventListener("abort",l)});Rm.set(t,e)}let Pm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Rm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||jE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return os(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $V(t){Pm=t(Pm)}function zV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Fp(this),e,...n);return jE.set(r,e.sort?e.sort():[e]),os(r)}:FV().includes(t)?function(...e){return t.apply(Fp(this),e),os(OE.get(this))}:function(...e){return os(t.apply(Fp(this),e))}}function HV(t){return typeof t=="function"?zV(t):(t instanceof IDBTransaction&&BV(t),LV(t,MV())?new Proxy(t,Pm):t)}function os(t){if(t instanceof IDBRequest)return UV(t);if(Mp.has(t))return Mp.get(t);const e=HV(t);return e!==t&&(Mp.set(t,e),Kg.set(e,t)),e}const Fp=t=>Kg.get(t);function yd(t,e,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(t,e),h=os(l);return r&&l.addEventListener("upgradeneeded",f=>{r(os(l.result),f.oldVersion,f.newVersion,os(l.transaction),f)}),n&&l.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),h.then(f=>{a&&f.addEventListener("close",()=>a()),i&&f.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),h}function Up(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),os(n).then(()=>{})}const WV=["get","getKey","getAll","getAllKeys","count"],qV=["put","add","delete","clear"],Bp=new Map;function $w(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Bp.get(e))return Bp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=qV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||WV.includes(n)))return;const a=async function(l,...h){const f=this.transaction(l,i?"readwrite":"readonly");let p=f.store;return r&&(p=p.index(h.shift())),(await Promise.all([p[n](...h),i&&f.done]))[0]};return Bp.set(e,a),a}$V(t=>({...t,get:(e,n,r)=>$w(e,n)||t.get(e,n,r),has:(e,n)=>!!$w(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(GV(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function GV(t){const e=t.getComponent();return e?.type==="VERSION"}const km="@firebase/app",zw="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs=new qg("@firebase/app"),QV="@firebase/app-compat",XV="@firebase/analytics-compat",YV="@firebase/analytics",JV="@firebase/app-check-compat",ZV="@firebase/app-check",eD="@firebase/auth",tD="@firebase/auth-compat",nD="@firebase/database",rD="@firebase/data-connect",sD="@firebase/database-compat",iD="@firebase/functions",oD="@firebase/functions-compat",aD="@firebase/installations",lD="@firebase/installations-compat",uD="@firebase/messaging",cD="@firebase/messaging-compat",hD="@firebase/performance",dD="@firebase/performance-compat",fD="@firebase/remote-config",pD="@firebase/remote-config-compat",mD="@firebase/storage",gD="@firebase/storage-compat",yD="@firebase/firestore",vD="@firebase/ai",_D="@firebase/firestore-compat",wD="firebase",xD="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="[DEFAULT]",TD={[km]:"fire-core",[QV]:"fire-core-compat",[YV]:"fire-analytics",[XV]:"fire-analytics-compat",[ZV]:"fire-app-check",[JV]:"fire-app-check-compat",[eD]:"fire-auth",[tD]:"fire-auth-compat",[nD]:"fire-rtdb",[rD]:"fire-data-connect",[sD]:"fire-rtdb-compat",[iD]:"fire-fn",[oD]:"fire-fn-compat",[aD]:"fire-iid",[lD]:"fire-iid-compat",[uD]:"fire-fcm",[cD]:"fire-fcm-compat",[hD]:"fire-perf",[dD]:"fire-perf-compat",[fD]:"fire-rc",[pD]:"fire-rc-compat",[mD]:"fire-gcs",[gD]:"fire-gcs-compat",[yD]:"fire-fst",[_D]:"fire-fst-compat",[vD]:"fire-vertex","fire-js":"fire-js",[wD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh=new Map,ED=new Map,Vm=new Map;function Hw(t,e){try{t.container.addComponent(e)}catch(n){cs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function hr(t){const e=t.name;if(Vm.has(e))return cs.debug(`There were multiple attempts to register component ${e}.`),!1;Vm.set(e,t);for(const n of zh.values())Hw(n,t);for(const n of ED.values())Hw(n,t);return!0}function po(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function $n(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ys=new fo("app","Firebase",SD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Wn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ys.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=xD;function LE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Nm,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw Ys.create("bad-app-name",{appName:String(i)});if(n||(n=PE()),!n)throw Ys.create("no-options");const a=zh.get(i);if(a){if(us(n,a.options)&&us(r,a.config))return a;throw Ys.create("duplicate-app",{appName:i})}const l=new NV(i);for(const f of Vm.values())l.addComponent(f);const h=new ID(n,r,l);return zh.set(i,h),h}function vd(t=Nm){const e=zh.get(t);if(!e&&t===Nm&&PE())return LE();if(!e)throw Ys.create("no-app",{appName:t});return e}function wn(t,e,n){var r;let i=(r=TD[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const h=[`Unable to register library "${i}" with version "${e}":`];a&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),cs.warn(h.join(" "));return}hr(new Wn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD="firebase-heartbeat-database",AD=1,xu="firebase-heartbeat-store";let $p=null;function ME(){return $p||($p=yd(bD,AD,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ys.create("idb-open",{originalErrorMessage:t.message})})),$p}async function CD(t){try{const n=(await ME()).transaction(xu),r=await n.objectStore(xu).get(FE(t));return await n.done,r}catch(e){if(e instanceof fr)cs.warn(e.message);else{const n=Ys.create("idb-get",{originalErrorMessage:e?.message});cs.warn(n.message)}}}async function Ww(t,e){try{const r=(await ME()).transaction(xu,"readwrite");await r.objectStore(xu).put(e,FE(t)),await r.done}catch(n){if(n instanceof fr)cs.warn(n.message);else{const r=Ys.create("idb-set",{originalErrorMessage:n?.message});cs.warn(r.message)}}}function FE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD=1024,PD=30;class kD{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new VD(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=qw();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>PD){const l=DD(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){cs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=qw(),{heartbeatsToSend:r,unsentEntries:i}=ND(this._heartbeatsCache.heartbeats),a=$h(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(n){return cs.warn(n),""}}}function qw(){return new Date().toISOString().substring(0,10)}function ND(t,e=RD){const n=[];let r=t.slice();for(const i of t){const a=n.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),Kw(n)>e){a.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Kw(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class VD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VE()?DE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await CD(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ww(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ww(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Kw(t){return $h(JSON.stringify({version:2,heartbeats:t})).length}function DD(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(t){hr(new Wn("platform-logger",e=>new KV(e),"PRIVATE")),hr(new Wn("heartbeat",e=>new kD(e),"PRIVATE")),wn(km,zw,t),wn(km,zw,"esm2017"),wn("fire-js","")}OD("");function Gg(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function UE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jD=UE,BE=new fo("auth","Firebase",UE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hh=new qg("@firebase/auth");function LD(t,...e){Hh.logLevel<=De.WARN&&Hh.warn(`Auth (${mo}): ${t}`,...e)}function bh(t,...e){Hh.logLevel<=De.ERROR&&Hh.error(`Auth (${mo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(t,...e){throw Qg(t,...e)}function Pr(t,...e){return Qg(t,...e)}function $E(t,e,n){const r=Object.assign(Object.assign({},jD()),{[e]:n});return new fo("auth","Firebase",r).create(e,{appName:t.name})}function Js(t){return $E(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Qg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return BE.create(t,...e)}function Se(t,e,...n){if(!t)throw Qg(e,...n)}function ss(t){const e="INTERNAL ASSERTION FAILED: "+t;throw bh(e),new Error(e)}function ds(t,e){t||ss(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dm(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function MD(){return Gw()==="http:"||Gw()==="https:"}function Gw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(MD()||yV()||"connection"in navigator)?navigator.onLine:!0}function UD(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n){this.shortDelay=e,this.longDelay=n,ds(n>e,"Short delay should be less than long delay!"),this.isMobile=pV()||vV()}get(){return FD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(t,e){ds(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ss("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ss("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ss("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],zD=new Lu(3e4,6e4);function _d(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function za(t,e,n,r,i={}){return HE(t,i,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const h=ju(Object.assign({key:t.config.apiKey},l)).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const p=Object.assign({method:e,headers:f},a);return gV()||(p.referrerPolicy="no-referrer"),t.emulatorConfig&&fi(t.emulatorConfig.host)&&(p.credentials="include"),zE.fetch()(await qE(t,t.config.apiHost,n,h),p)})}async function HE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},BD),e);try{const i=new HD(t),a=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw dh(t,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const h=a.ok?l.errorMessage:l.error.message,[f,p]=h.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw dh(t,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw dh(t,"email-already-in-use",l);if(f==="USER_DISABLED")throw dh(t,"user-disabled",l);const g=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw $E(t,g,p);hs(t,g)}}catch(i){if(i instanceof fr)throw i;hs(t,"network-request-failed",{message:String(i)})}}async function WE(t,e,n,r,i={}){const a=await za(t,e,n,r,i);return"mfaPendingCredential"in a&&hs(t,"multi-factor-auth-required",{_serverResponse:a}),a}async function qE(t,e,n,r){const i=`${e}${n}?${r}`,a=t,l=a.config.emulator?Xg(t.config,i):`${t.config.apiScheme}://${i}`;return $D.includes(n)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}class HD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Pr(this.auth,"network-request-failed")),zD.get())})}}function dh(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Pr(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WD(t,e){return za(t,"POST","/v1/accounts:delete",e)}async function Wh(t,e){return za(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qD(t,e=!1){const n=ct(t),r=await n.getIdToken(e),i=Yg(r);Se(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,l=a?.sign_in_provider;return{claims:i,token:r,authTime:ou(zp(i.auth_time)),issuedAtTime:ou(zp(i.iat)),expirationTime:ou(zp(i.exp)),signInProvider:l||null,signInSecondFactor:a?.sign_in_second_factor||null}}function zp(t){return Number(t)*1e3}function Yg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return bh("JWT malformed, contained fewer than 3 sections"),null;try{const i=AE(n);return i?JSON.parse(i):(bh("Failed to decode base64 JWT payload"),null)}catch(i){return bh("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Qw(t){const e=Yg(t);return Se(e,"internal-error"),Se(typeof e.exp<"u","internal-error"),Se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tu(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof fr&&KD(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function KD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ou(this.lastLoginAt),this.creationTime=ou(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Tu(t,Wh(n,{idToken:r}));Se(i?.users.length,n,"internal-error");const a=i.users[0];t._notifyReloadListener(a);const l=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?KE(a.providerUserInfo):[],h=XD(t.providerData,l),f=t.isAnonymous,p=!(t.email&&a.passwordHash)&&!h?.length,g=f?p:!1,w={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:h,metadata:new Om(a.createdAt,a.lastLoginAt),isAnonymous:g};Object.assign(t,w)}async function QD(t){const e=ct(t);await qh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XD(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function KE(t){return t.map(e=>{var{providerId:n}=e,r=Gg(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YD(t,e){const n=await HE(t,{},async()=>{const r=ju({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=t.config,l=await qE(t,i,"/v1/token",`key=${a}`),h=await t._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:h,body:r};return t.emulatorConfig&&fi(t.emulatorConfig.host)&&(f.credentials="include"),zE.fetch()(l,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function JD(t,e){return za(t,"POST","/v2/accounts:revokeToken",_d(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Se(e.idToken,"internal-error"),Se(typeof e.idToken<"u","internal-error"),Se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Qw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Se(e.length!==0,"internal-error");const n=Qw(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:a}=await YD(e,n);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:a}=n,l=new Aa;return r&&(Se(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Se(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),a&&(Se(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Aa,this.toJSON())}_performRefresh(){return ss("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(t,e){Se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ur{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,a=Gg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new GD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Om(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const n=await Tu(this,this.stsTokenManager.getToken(this.auth,e));return Se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return qD(this,e)}reload(){return QD(this)}_assign(e){this!==e&&(Se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ur(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await qh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($n(this.auth.app))return Promise.reject(Js(this.auth));const e=await this.getIdToken();return await Tu(this,WD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,a,l,h,f,p,g;const w=(r=n.displayName)!==null&&r!==void 0?r:void 0,T=(i=n.email)!==null&&i!==void 0?i:void 0,C=(a=n.phoneNumber)!==null&&a!==void 0?a:void 0,V=(l=n.photoURL)!==null&&l!==void 0?l:void 0,O=(h=n.tenantId)!==null&&h!==void 0?h:void 0,R=(f=n._redirectEventId)!==null&&f!==void 0?f:void 0,L=(p=n.createdAt)!==null&&p!==void 0?p:void 0,U=(g=n.lastLoginAt)!==null&&g!==void 0?g:void 0,{uid:z,emailVerified:K,isAnonymous:Q,providerData:Y,stsTokenManager:N}=n;Se(z&&N,e,"internal-error");const S=Aa.fromJSON(this.name,N);Se(typeof z=="string",e,"internal-error"),Bs(w,e.name),Bs(T,e.name),Se(typeof K=="boolean",e,"internal-error"),Se(typeof Q=="boolean",e,"internal-error"),Bs(C,e.name),Bs(V,e.name),Bs(O,e.name),Bs(R,e.name),Bs(L,e.name),Bs(U,e.name);const A=new ur({uid:z,auth:e,email:T,emailVerified:K,displayName:w,isAnonymous:Q,photoURL:V,phoneNumber:C,tenantId:O,stsTokenManager:S,createdAt:L,lastLoginAt:U});return Y&&Array.isArray(Y)&&(A.providerData=Y.map(b=>Object.assign({},b))),R&&(A._redirectEventId=R),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new Aa;i.updateFromServerResponse(n);const a=new ur({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await qh(a),a}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Se(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?KE(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!a?.length,h=new Aa;h.updateFromIdToken(r);const f=new ur({uid:i.localId,auth:e,stsTokenManager:h,isAnonymous:l}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Om(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!a?.length};return Object.assign(f,p),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xw=new Map;function is(t){ds(t instanceof Function,"Expected a class definition");let e=Xw.get(t);return e?(ds(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Xw.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}GE.type="NONE";const Yw=GE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(t,e,n){return`firebase:${t}:${e}:${n}`}class Ca{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Ah(this.userKey,i.apiKey,a),this.fullPersistenceKey=Ah("persistence",i.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Wh(this.auth,{idToken:e}).catch(()=>{});return n?ur._fromGetAccountInfoResponse(this.auth,n,e):null}return ur._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ca(is(Yw),e,r);const i=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let a=i[0]||is(Yw);const l=Ah(r,e.config.apiKey,e.name);let h=null;for(const p of n)try{const g=await p._get(l);if(g){let w;if(typeof g=="string"){const T=await Wh(e,{idToken:g}).catch(()=>{});if(!T)break;w=await ur._fromGetAccountInfoResponse(e,T,g)}else w=ur._fromJSON(e,g);p!==a&&(h=w),a=p;break}}catch{}const f=i.filter(p=>p._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new Ca(a,e,r):(a=f[0],h&&await a._set(l,h.toJSON()),await Promise.all(n.map(async p=>{if(p!==a)try{await p._remove(l)}catch{}})),new Ca(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jw(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(QE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(eS(e))return"Blackberry";if(tS(e))return"Webos";if(XE(e))return"Safari";if((e.includes("chrome/")||YE(e))&&!e.includes("edge/"))return"Chrome";if(ZE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function QE(t=en()){return/firefox\//i.test(t)}function XE(t=en()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function YE(t=en()){return/crios\//i.test(t)}function JE(t=en()){return/iemobile/i.test(t)}function ZE(t=en()){return/android/i.test(t)}function eS(t=en()){return/blackberry/i.test(t)}function tS(t=en()){return/webos/i.test(t)}function Jg(t=en()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ZD(t=en()){var e;return Jg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function e4(){return _V()&&document.documentMode===10}function nS(t=en()){return Jg(t)||ZE(t)||tS(t)||eS(t)||/windows phone/i.test(t)||JE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(t,e=[]){let n;switch(t){case"Browser":n=Jw(en());break;case"Worker":n=`${Jw(en())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${mo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=a=>new Promise((l,h)=>{try{const f=e(a);l(f)}catch(f){h(f)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n4(t,e={}){return za(t,"GET","/v2/passwordPolicy",_d(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4=6;class s4{constructor(e){var n,r,i,a;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:r4,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,a,l,h;const f={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,f),this.validatePasswordCharacterOptions(e,f),f.isValid&&(f.isValid=(n=f.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),f.isValid&&(f.isValid=(r=f.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),f.isValid&&(f.isValid=(i=f.containsLowercaseLetter)!==null&&i!==void 0?i:!0),f.isValid&&(f.isValid=(a=f.containsUppercaseLetter)!==null&&a!==void 0?a:!0),f.isValid&&(f.isValid=(l=f.containsNumericCharacter)!==null&&l!==void 0?l:!0),f.isValid&&(f.isValid=(h=f.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),f}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zw(this),this.idTokenSubscription=new Zw(this),this.beforeStateQueue=new t4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=is(n)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await Ca.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((a=this.currentUser)===null||a===void 0?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Wh(this,{idToken:e}),r=await ur._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if($n(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=i?._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===h)&&f?.user&&(i=f.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await qh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=UD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($n(this.app))return Promise.reject(Js(this));const n=e?ct(e):null;return n&&Se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $n(this.app)?Promise.reject(Js(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $n(this.app)?Promise.reject(Js(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(is(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await n4(this),n=new s4(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new fo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await JD(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&is(e)||this._popupRedirectResolver;Se(n,this,"argument-error"),this.redirectPersistenceManager=await Ca.create(this,[is(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const a=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Se(h,this,"internal-error"),h.then(()=>{l||a(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,r,i);return()=>{l=!0,f()}}else{const f=e.addObserver(n);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if($n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&LD(`Error while retrieving App Check token: ${n.error}`),n?.token}}function wd(t){return ct(t)}class Zw{constructor(e){this.auth=e,this.observer=null,this.addObserver=bV(n=>this.observer=n)}get next(){return Se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function o4(t){Zg=t}function a4(t){return Zg.loadJS(t)}function l4(){return Zg.gapiScript}function u4(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c4(t,e){const n=po(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),a=n.getOptions();if(us(a,e??{}))return i;hs(i,"already-initialized")}return n.initialize({options:e})}function h4(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(is);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function d4(t,e,n){const r=wd(t);Se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=sS(e),{host:l,port:h}=f4(e),f=h===null?"":`:${h}`,p={url:`${a}//${l}${f}/`},g=Object.freeze({host:l,port:h,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Se(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Se(us(p,r.config.emulator)&&us(g,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=g,r.settings.appVerificationDisabledForTesting=!0,fi(l)?(Hg(`${a}//${l}${f}`),Wg("Auth",!0)):p4()}function sS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function f4(t){const e=sS(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:ex(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:ex(l)}}}function ex(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function p4(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ss("not implemented")}_getIdTokenResponse(e){return ss("not implemented")}_linkToIdToken(e,n){return ss("not implemented")}_getReauthenticationResolver(e){return ss("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ra(t,e){return WE(t,"POST","/v1/accounts:signInWithIdp",_d(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m4="http://localhost";class no extends iS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new no(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):hs("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,a=Gg(n,["providerId","signInMethod"]);if(!r||!i)return null;const l=new no(r,i);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return Ra(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ra(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ra(e,n)}buildRequest(){const e={requestUri:m4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ju(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu extends oS{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends Mu{constructor(){super("facebook.com")}static credential(e){return no._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zs.credential(e.oauthAccessToken)}catch{return null}}}zs.FACEBOOK_SIGN_IN_METHOD="facebook.com";zs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends Mu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return no._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Hs.credential(n,r)}catch{return null}}}Hs.GOOGLE_SIGN_IN_METHOD="google.com";Hs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws extends Mu{constructor(){super("github.com")}static credential(e){return no._fromParams({providerId:Ws.PROVIDER_ID,signInMethod:Ws.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ws.credentialFromTaggedObject(e)}static credentialFromError(e){return Ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ws.credential(e.oauthAccessToken)}catch{return null}}}Ws.GITHUB_SIGN_IN_METHOD="github.com";Ws.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends Mu{constructor(){super("twitter.com")}static credential(e,n){return no._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return qs.credential(n,r)}catch{return null}}}qs.TWITTER_SIGN_IN_METHOD="twitter.com";qs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g4(t,e){return WE(t,"POST","/v1/accounts:signUp",_d(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const a=await ur._fromIdTokenResponse(e,r,i),l=tx(r);return new si({user:a,providerId:l,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=tx(r);return new si({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function tx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y4(t){var e;if($n(t.app))return Promise.reject(Js(t));const n=wd(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new si({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await g4(n,{returnSecureToken:!0}),i=await si._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh extends fr{constructor(e,n,r,i){var a;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Kh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Kh(e,n,r,i)}}function aS(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Kh._fromErrorAndOperation(t,a,e,r):a})}async function v4(t,e,n=!1){const r=await Tu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return si._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _4(t,e,n=!1){const{auth:r}=t;if($n(r.app))return Promise.reject(Js(r));const i="reauthenticate";try{const a=await Tu(t,aS(r,i,e,t),n);Se(a.idToken,r,"internal-error");const l=Yg(a.idToken);Se(l,r,"internal-error");const{sub:h}=l;return Se(t.uid===h,r,"user-mismatch"),si._forOperation(t,i,a)}catch(a){throw a?.code==="auth/user-not-found"&&hs(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w4(t,e,n=!1){if($n(t.app))return Promise.reject(Js(t));const r="signIn",i=await aS(t,r,e),a=await si._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(a.user),a}function x4(t,e,n,r){return ct(t).onIdTokenChanged(e,n,r)}function T4(t,e,n){return ct(t).beforeAuthStateChanged(e,n)}function E4(t,e,n,r){return ct(t).onAuthStateChanged(e,n,r)}const Gh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Gh,"1"),this.storage.removeItem(Gh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4=1e3,I4=10;class uS extends lS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,f)=>{this.notifyListeners(l,f)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!n&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);e4()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,I4):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},S4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}uS.type="LOCAL";const b4=uS;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS extends lS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}cS.type="SESSION";const hS=cS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A4(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new xd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:a}=n.data,l=this.handlersMap[i];if(!l?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const h=Array.from(l).map(async p=>p(n.origin,a)),f=await A4(h);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,l;return new Promise((h,f)=>{const p=ey("",20);i.port1.start();const g=setTimeout(()=>{f(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(w){const T=w;if(T.data.eventId===p)switch(T.data.status){case"ack":clearTimeout(g),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),h(T.data.response);break;default:clearTimeout(g),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(){return window}function R4(t){kr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(){return typeof kr().WorkerGlobalScope<"u"&&typeof kr().importScripts=="function"}async function P4(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function k4(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function N4(){return dS()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="firebaseLocalStorageDb",V4=1,Qh="firebaseLocalStorage",pS="fbase_key";class Fu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Td(t,e){return t.transaction([Qh],e?"readwrite":"readonly").objectStore(Qh)}function D4(){const t=indexedDB.deleteDatabase(fS);return new Fu(t).toPromise()}function jm(){const t=indexedDB.open(fS,V4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Qh,{keyPath:pS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Qh)?e(r):(r.close(),await D4(),e(await jm()))})})}async function nx(t,e,n){const r=Td(t,!0).put({[pS]:e,value:n});return new Fu(r).toPromise()}async function O4(t,e){const n=Td(t,!1).get(e),r=await new Fu(n).toPromise();return r===void 0?null:r.value}function rx(t,e){const n=Td(t,!0).delete(e);return new Fu(n).toPromise()}const j4=800,L4=3;class mS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>L4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xd._getInstance(N4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await P4(),!this.activeServiceWorker)return;this.sender=new C4(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||k4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await jm();return await nx(e,Gh,"1"),await rx(e,Gh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>nx(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>O4(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>rx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=Td(i,!1).getAll();return new Fu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),j4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mS.type="LOCAL";const M4=mS;new Lu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(t,e){return e?is(e):(Se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty extends iS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ra(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ra(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ra(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function U4(t){return w4(t.auth,new ty(t),t.bypassAuthState)}function B4(t){const{auth:e,user:n}=t;return Se(n,e,"internal-error"),_4(n,new ty(t),t.bypassAuthState)}async function $4(t){const{auth:e,user:n}=t;return Se(n,e,"internal-error"),v4(n,new ty(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,n,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:a,error:l,type:h}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(f))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return U4;case"linkViaPopup":case"linkViaRedirect":return $4;case"reauthViaPopup":case"reauthViaRedirect":return B4;default:hs(this.auth,"internal-error")}}resolve(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4=new Lu(2e3,1e4);class Ia extends gS{constructor(e,n,r,i,a){super(e,n,i,a),this.provider=r,this.authWindow=null,this.pollId=null,Ia.currentPopupAction&&Ia.currentPopupAction.cancel(),Ia.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Se(e,this.auth,"internal-error"),e}async onExecution(){ds(this.filter.length===1,"Popup operations only handle one event");const e=ey();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Pr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Pr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ia.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,z4.get())};e()}}Ia.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4="pendingRedirect",Ch=new Map;class W4 extends gS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ch.get(this.auth._key());if(!e){try{const r=await q4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ch.set(this.auth._key(),e)}return this.bypassAuthState||Ch.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function q4(t,e){const n=Q4(e),r=G4(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function K4(t,e){Ch.set(t._key(),e)}function G4(t){return is(t._redirectPersistence)}function Q4(t){return Ah(H4,t.config.apiKey,t.name)}async function X4(t,e,n=!1){if($n(t.app))return Promise.reject(Js(t));const r=wd(t),i=F4(r,e),l=await new W4(r,i,n).execute();return l&&!n&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y4=10*60*1e3;class J4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Z4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!yS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Pr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Y4&&this.cachedEventUids.clear(),this.cachedEventUids.has(sx(e))}saveEventToCache(e){this.cachedEventUids.add(sx(e)),this.lastProcessedEventTime=Date.now()}}function sx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function yS({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Z4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return yS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eO(t,e={}){return za(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,nO=/^https?/;async function rO(t){if(t.config.emulator)return;const{authorizedDomains:e}=await eO(t);for(const n of e)try{if(sO(n))return}catch{}hs(t,"unauthorized-domain")}function sO(t){const e=Dm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===r}if(!nO.test(n))return!1;if(tO.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO=new Lu(3e4,6e4);function ix(){const t=kr().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function oO(t){return new Promise((e,n)=>{var r,i,a;function l(){ix(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ix(),n(Pr(t,"network-request-failed"))},timeout:iO.get()})}if(!((i=(r=kr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((a=kr().gapi)===null||a===void 0)&&a.load)l();else{const h=u4("iframefcb");return kr()[h]=()=>{gapi.load?l():n(Pr(t,"network-request-failed"))},a4(`${l4()}?onload=${h}`).catch(f=>n(f))}}).catch(e=>{throw Rh=null,e})}let Rh=null;function aO(t){return Rh=Rh||oO(t),Rh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO=new Lu(5e3,15e3),uO="__/auth/iframe",cO="emulator/auth/iframe",hO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fO(t){const e=t.config;Se(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Xg(e,cO):`https://${t.config.authDomain}/${uO}`,r={apiKey:e.apiKey,appName:t.name,v:mo},i=dO.get(t.config.apiHost);i&&(r.eid=i);const a=t._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${ju(r).slice(1)}`}async function pO(t){const e=await aO(t),n=kr().gapi;return Se(n,t,"internal-error"),e.open({where:document.body,url:fO(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hO,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const l=Pr(t,"network-request-failed"),h=kr().setTimeout(()=>{a(l)},lO.get());function f(){kr().clearTimeout(h),i(r)}r.ping(f).then(f,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gO=500,yO=600,vO="_blank",_O="http://localhost";class ox{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wO(t,e,n,r=gO,i=yO){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let h="";const f=Object.assign(Object.assign({},mO),{width:r.toString(),height:i.toString(),top:a,left:l}),p=en().toLowerCase();n&&(h=YE(p)?vO:n),QE(p)&&(e=e||_O,f.scrollbars="yes");const g=Object.entries(f).reduce((T,[C,V])=>`${T}${C}=${V},`,"");if(ZD(p)&&h!=="_self")return xO(e||"",h),new ox(null);const w=window.open(e||"",h,g);Se(w,t,"popup-blocked");try{w.focus()}catch{}return new ox(w)}function xO(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO="__/auth/handler",EO="emulator/auth/handler",SO=encodeURIComponent("fac");async function ax(t,e,n,r,i,a){Se(t.config.authDomain,t,"auth-domain-config-required"),Se(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:mo,eventId:i};if(e instanceof oS){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",IV(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[g,w]of Object.entries({}))l[g]=w}if(e instanceof Mu){const g=e.getScopes().filter(w=>w!=="");g.length>0&&(l.scopes=g.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const g of Object.keys(h))h[g]===void 0&&delete h[g];const f=await t._getAppCheckToken(),p=f?`#${SO}=${encodeURIComponent(f)}`:"";return`${IO(t)}?${ju(h).slice(1)}${p}`}function IO({config:t}){return t.emulator?Xg(t,EO):`https://${t.authDomain}/${TO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="webStorageSupport";class bO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hS,this._completeRedirectFn=X4,this._overrideRedirectResult=K4}async _openPopup(e,n,r,i){var a;ds((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const l=await ax(e,n,r,Dm(),i);return wO(e,l,ey())}async _openRedirect(e,n,r,i){await this._originValidation(e);const a=await ax(e,n,r,Dm(),i);return R4(a),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:a}=this.eventManagers[n];return i?Promise.resolve(i):(ds(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await pO(e),r=new J4(e);return n.register("authEvent",i=>(Se(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hp,{type:Hp},i=>{var a;const l=(a=i?.[0])===null||a===void 0?void 0:a[Hp];l!==void 0&&n(!!l),hs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=rO(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return nS()||XE()||Jg()}}const AO=bO;var lx="@firebase/auth",ux="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PO(t){hr(new Wn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=r.options;Se(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rS(t)},p=new i4(r,i,a,f);return h4(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),hr(new Wn("auth-internal",e=>{const n=wd(e.getProvider("auth").getImmediate());return(r=>new CO(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),wn(lx,ux,RO(t)),wn(lx,ux,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=5*60,NO=kE("authIdTokenMaxAge")||kO;let cx=null;const VO=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>NO)return;const i=n?.token;cx!==i&&(cx=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function DO(t=vd()){const e=po(t,"auth");if(e.isInitialized())return e.getImmediate();const n=c4(t,{popupRedirectResolver:AO,persistence:[M4,b4,hS]}),r=kE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=VO(a.toString());T4(n,l,()=>l(n.currentUser)),x4(n,h=>l(h))}}const i=CE("auth");return i&&d4(n,`http://${i}`),n}function OO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}o4({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const a=Pr("internal-error");a.customData=i,n(a)},r.type="text/javascript",r.charset="UTF-8",OO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PO("Browser");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function jO(t,e,n,r){function i(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function h(g){try{p(r.next(g))}catch(w){l(w)}}function f(g){try{p(r.throw(g))}catch(w){l(w)}}function p(g){g.done?a(g.value):i(g.value).then(h,f)}p((r=r.apply(t,[])).next())})}function LO(t,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,l;return l={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function h(p){return function(g){return f([p,g])}}function f(p){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(a=p[0]&2?i.return:p[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,p[1])).done)return a;switch(i=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,i=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(t,n)}catch(g){p=[6,g],i=0}finally{r=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ba=function(){return ba=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ba.apply(this,arguments)},vS=function(t){return{loading:t==null,value:t}},MO=function(){return function(t,e){switch(e.type){case"error":return ba(ba({},t),{error:e.error,loading:!1,value:void 0});case"reset":return vS(e.defaultValue);case"value":return ba(ba({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},FO=function(t){var e=t?t():void 0,n=M.useReducer(MO(),vS(e)),r=n[0],i=n[1],a=M.useCallback(function(){var f=t?t():void 0;i({type:"reset",defaultValue:f})},[t]),l=M.useCallback(function(f){i({type:"error",error:f})},[]),h=M.useCallback(function(f){i({type:"value",value:f})},[]);return M.useMemo(function(){return{error:r.error,loading:r.loading,reset:a,setError:l,setValue:h,value:r.value}},[r.error,r.loading,a,l,h,r.value])},_S=function(t,e){var n=FO(function(){return t.currentUser}),r=n.error,i=n.loading,a=n.setError,l=n.setValue,h=n.value;return M.useEffect(function(){var f=E4(t,function(p){return jO(void 0,void 0,void 0,function(){var g;return LO(this,function(w){switch(w.label){case 0:return[3,4];case 1:return w.trys.push([1,3,,4]),[4,e.onUserChanged(p)];case 2:return w.sent(),[3,4];case 3:return g=w.sent(),a(g),[3,4];case 4:return l(p),[2]}})})},a);return function(){f()}},[t]),[h,i,r]},UO="firebase",BO="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn(UO,BO,"app");var hx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zs,wS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,S){function A(){}A.prototype=S.prototype,N.D=S.prototype,N.prototype=new A,N.prototype.constructor=N,N.C=function(b,D,F){for(var P=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)P[Ae-2]=arguments[Ae];return S.prototype[D].apply(b,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(N,S,A){A||(A=0);var b=Array(16);if(typeof S=="string")for(var D=0;16>D;++D)b[D]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(D=0;16>D;++D)b[D]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=N.g[0],A=N.g[1],D=N.g[2];var F=N.g[3],P=S+(F^A&(D^F))+b[0]+3614090360&4294967295;S=A+(P<<7&4294967295|P>>>25),P=F+(D^S&(A^D))+b[1]+3905402710&4294967295,F=S+(P<<12&4294967295|P>>>20),P=D+(A^F&(S^A))+b[2]+606105819&4294967295,D=F+(P<<17&4294967295|P>>>15),P=A+(S^D&(F^S))+b[3]+3250441966&4294967295,A=D+(P<<22&4294967295|P>>>10),P=S+(F^A&(D^F))+b[4]+4118548399&4294967295,S=A+(P<<7&4294967295|P>>>25),P=F+(D^S&(A^D))+b[5]+1200080426&4294967295,F=S+(P<<12&4294967295|P>>>20),P=D+(A^F&(S^A))+b[6]+2821735955&4294967295,D=F+(P<<17&4294967295|P>>>15),P=A+(S^D&(F^S))+b[7]+4249261313&4294967295,A=D+(P<<22&4294967295|P>>>10),P=S+(F^A&(D^F))+b[8]+1770035416&4294967295,S=A+(P<<7&4294967295|P>>>25),P=F+(D^S&(A^D))+b[9]+2336552879&4294967295,F=S+(P<<12&4294967295|P>>>20),P=D+(A^F&(S^A))+b[10]+4294925233&4294967295,D=F+(P<<17&4294967295|P>>>15),P=A+(S^D&(F^S))+b[11]+2304563134&4294967295,A=D+(P<<22&4294967295|P>>>10),P=S+(F^A&(D^F))+b[12]+1804603682&4294967295,S=A+(P<<7&4294967295|P>>>25),P=F+(D^S&(A^D))+b[13]+4254626195&4294967295,F=S+(P<<12&4294967295|P>>>20),P=D+(A^F&(S^A))+b[14]+2792965006&4294967295,D=F+(P<<17&4294967295|P>>>15),P=A+(S^D&(F^S))+b[15]+1236535329&4294967295,A=D+(P<<22&4294967295|P>>>10),P=S+(D^F&(A^D))+b[1]+4129170786&4294967295,S=A+(P<<5&4294967295|P>>>27),P=F+(A^D&(S^A))+b[6]+3225465664&4294967295,F=S+(P<<9&4294967295|P>>>23),P=D+(S^A&(F^S))+b[11]+643717713&4294967295,D=F+(P<<14&4294967295|P>>>18),P=A+(F^S&(D^F))+b[0]+3921069994&4294967295,A=D+(P<<20&4294967295|P>>>12),P=S+(D^F&(A^D))+b[5]+3593408605&4294967295,S=A+(P<<5&4294967295|P>>>27),P=F+(A^D&(S^A))+b[10]+38016083&4294967295,F=S+(P<<9&4294967295|P>>>23),P=D+(S^A&(F^S))+b[15]+3634488961&4294967295,D=F+(P<<14&4294967295|P>>>18),P=A+(F^S&(D^F))+b[4]+3889429448&4294967295,A=D+(P<<20&4294967295|P>>>12),P=S+(D^F&(A^D))+b[9]+568446438&4294967295,S=A+(P<<5&4294967295|P>>>27),P=F+(A^D&(S^A))+b[14]+3275163606&4294967295,F=S+(P<<9&4294967295|P>>>23),P=D+(S^A&(F^S))+b[3]+4107603335&4294967295,D=F+(P<<14&4294967295|P>>>18),P=A+(F^S&(D^F))+b[8]+1163531501&4294967295,A=D+(P<<20&4294967295|P>>>12),P=S+(D^F&(A^D))+b[13]+2850285829&4294967295,S=A+(P<<5&4294967295|P>>>27),P=F+(A^D&(S^A))+b[2]+4243563512&4294967295,F=S+(P<<9&4294967295|P>>>23),P=D+(S^A&(F^S))+b[7]+1735328473&4294967295,D=F+(P<<14&4294967295|P>>>18),P=A+(F^S&(D^F))+b[12]+2368359562&4294967295,A=D+(P<<20&4294967295|P>>>12),P=S+(A^D^F)+b[5]+4294588738&4294967295,S=A+(P<<4&4294967295|P>>>28),P=F+(S^A^D)+b[8]+2272392833&4294967295,F=S+(P<<11&4294967295|P>>>21),P=D+(F^S^A)+b[11]+1839030562&4294967295,D=F+(P<<16&4294967295|P>>>16),P=A+(D^F^S)+b[14]+4259657740&4294967295,A=D+(P<<23&4294967295|P>>>9),P=S+(A^D^F)+b[1]+2763975236&4294967295,S=A+(P<<4&4294967295|P>>>28),P=F+(S^A^D)+b[4]+1272893353&4294967295,F=S+(P<<11&4294967295|P>>>21),P=D+(F^S^A)+b[7]+4139469664&4294967295,D=F+(P<<16&4294967295|P>>>16),P=A+(D^F^S)+b[10]+3200236656&4294967295,A=D+(P<<23&4294967295|P>>>9),P=S+(A^D^F)+b[13]+681279174&4294967295,S=A+(P<<4&4294967295|P>>>28),P=F+(S^A^D)+b[0]+3936430074&4294967295,F=S+(P<<11&4294967295|P>>>21),P=D+(F^S^A)+b[3]+3572445317&4294967295,D=F+(P<<16&4294967295|P>>>16),P=A+(D^F^S)+b[6]+76029189&4294967295,A=D+(P<<23&4294967295|P>>>9),P=S+(A^D^F)+b[9]+3654602809&4294967295,S=A+(P<<4&4294967295|P>>>28),P=F+(S^A^D)+b[12]+3873151461&4294967295,F=S+(P<<11&4294967295|P>>>21),P=D+(F^S^A)+b[15]+530742520&4294967295,D=F+(P<<16&4294967295|P>>>16),P=A+(D^F^S)+b[2]+3299628645&4294967295,A=D+(P<<23&4294967295|P>>>9),P=S+(D^(A|~F))+b[0]+4096336452&4294967295,S=A+(P<<6&4294967295|P>>>26),P=F+(A^(S|~D))+b[7]+1126891415&4294967295,F=S+(P<<10&4294967295|P>>>22),P=D+(S^(F|~A))+b[14]+2878612391&4294967295,D=F+(P<<15&4294967295|P>>>17),P=A+(F^(D|~S))+b[5]+4237533241&4294967295,A=D+(P<<21&4294967295|P>>>11),P=S+(D^(A|~F))+b[12]+1700485571&4294967295,S=A+(P<<6&4294967295|P>>>26),P=F+(A^(S|~D))+b[3]+2399980690&4294967295,F=S+(P<<10&4294967295|P>>>22),P=D+(S^(F|~A))+b[10]+4293915773&4294967295,D=F+(P<<15&4294967295|P>>>17),P=A+(F^(D|~S))+b[1]+2240044497&4294967295,A=D+(P<<21&4294967295|P>>>11),P=S+(D^(A|~F))+b[8]+1873313359&4294967295,S=A+(P<<6&4294967295|P>>>26),P=F+(A^(S|~D))+b[15]+4264355552&4294967295,F=S+(P<<10&4294967295|P>>>22),P=D+(S^(F|~A))+b[6]+2734768916&4294967295,D=F+(P<<15&4294967295|P>>>17),P=A+(F^(D|~S))+b[13]+1309151649&4294967295,A=D+(P<<21&4294967295|P>>>11),P=S+(D^(A|~F))+b[4]+4149444226&4294967295,S=A+(P<<6&4294967295|P>>>26),P=F+(A^(S|~D))+b[11]+3174756917&4294967295,F=S+(P<<10&4294967295|P>>>22),P=D+(S^(F|~A))+b[2]+718787259&4294967295,D=F+(P<<15&4294967295|P>>>17),P=A+(F^(D|~S))+b[9]+3951481745&4294967295,N.g[0]=N.g[0]+S&4294967295,N.g[1]=N.g[1]+(D+(P<<21&4294967295|P>>>11))&4294967295,N.g[2]=N.g[2]+D&4294967295,N.g[3]=N.g[3]+F&4294967295}r.prototype.u=function(N,S){S===void 0&&(S=N.length);for(var A=S-this.blockSize,b=this.B,D=this.h,F=0;F<S;){if(D==0)for(;F<=A;)i(this,N,F),F+=this.blockSize;if(typeof N=="string"){for(;F<S;)if(b[D++]=N.charCodeAt(F++),D==this.blockSize){i(this,b),D=0;break}}else for(;F<S;)if(b[D++]=N[F++],D==this.blockSize){i(this,b),D=0;break}}this.h=D,this.o+=S},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var S=1;S<N.length-8;++S)N[S]=0;var A=8*this.o;for(S=N.length-8;S<N.length;++S)N[S]=A&255,A/=256;for(this.u(N),N=Array(16),S=A=0;4>S;++S)for(var b=0;32>b;b+=8)N[A++]=this.g[S]>>>b&255;return N};function a(N,S){var A=h;return Object.prototype.hasOwnProperty.call(A,N)?A[N]:A[N]=S(N)}function l(N,S){this.h=S;for(var A=[],b=!0,D=N.length-1;0<=D;D--){var F=N[D]|0;b&&F==S||(A[D]=F,b=!1)}this.g=A}var h={};function f(N){return-128<=N&&128>N?a(N,function(S){return new l([S|0],0>S?-1:0)}):new l([N|0],0>N?-1:0)}function p(N){if(isNaN(N)||!isFinite(N))return w;if(0>N)return R(p(-N));for(var S=[],A=1,b=0;N>=A;b++)S[b]=N/A|0,A*=4294967296;return new l(S,0)}function g(N,S){if(N.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(N.charAt(0)=="-")return R(g(N.substring(1),S));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=p(Math.pow(S,8)),b=w,D=0;D<N.length;D+=8){var F=Math.min(8,N.length-D),P=parseInt(N.substring(D,D+F),S);8>F?(F=p(Math.pow(S,F)),b=b.j(F).add(p(P))):(b=b.j(A),b=b.add(p(P)))}return b}var w=f(0),T=f(1),C=f(16777216);t=l.prototype,t.m=function(){if(O(this))return-R(this).m();for(var N=0,S=1,A=0;A<this.g.length;A++){var b=this.i(A);N+=(0<=b?b:4294967296+b)*S,S*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(V(this))return"0";if(O(this))return"-"+R(this).toString(N);for(var S=p(Math.pow(N,6)),A=this,b="";;){var D=K(A,S).g;A=L(A,D.j(S));var F=((0<A.g.length?A.g[0]:A.h)>>>0).toString(N);if(A=D,V(A))return F+b;for(;6>F.length;)F="0"+F;b=F+b}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function V(N){if(N.h!=0)return!1;for(var S=0;S<N.g.length;S++)if(N.g[S]!=0)return!1;return!0}function O(N){return N.h==-1}t.l=function(N){return N=L(this,N),O(N)?-1:V(N)?0:1};function R(N){for(var S=N.g.length,A=[],b=0;b<S;b++)A[b]=~N.g[b];return new l(A,~N.h).add(T)}t.abs=function(){return O(this)?R(this):this},t.add=function(N){for(var S=Math.max(this.g.length,N.g.length),A=[],b=0,D=0;D<=S;D++){var F=b+(this.i(D)&65535)+(N.i(D)&65535),P=(F>>>16)+(this.i(D)>>>16)+(N.i(D)>>>16);b=P>>>16,F&=65535,P&=65535,A[D]=P<<16|F}return new l(A,A[A.length-1]&-2147483648?-1:0)};function L(N,S){return N.add(R(S))}t.j=function(N){if(V(this)||V(N))return w;if(O(this))return O(N)?R(this).j(R(N)):R(R(this).j(N));if(O(N))return R(this.j(R(N)));if(0>this.l(C)&&0>N.l(C))return p(this.m()*N.m());for(var S=this.g.length+N.g.length,A=[],b=0;b<2*S;b++)A[b]=0;for(b=0;b<this.g.length;b++)for(var D=0;D<N.g.length;D++){var F=this.i(b)>>>16,P=this.i(b)&65535,Ae=N.i(D)>>>16,$e=N.i(D)&65535;A[2*b+2*D]+=P*$e,U(A,2*b+2*D),A[2*b+2*D+1]+=F*$e,U(A,2*b+2*D+1),A[2*b+2*D+1]+=P*Ae,U(A,2*b+2*D+1),A[2*b+2*D+2]+=F*Ae,U(A,2*b+2*D+2)}for(b=0;b<S;b++)A[b]=A[2*b+1]<<16|A[2*b];for(b=S;b<2*S;b++)A[b]=0;return new l(A,0)};function U(N,S){for(;(N[S]&65535)!=N[S];)N[S+1]+=N[S]>>>16,N[S]&=65535,S++}function z(N,S){this.g=N,this.h=S}function K(N,S){if(V(S))throw Error("division by zero");if(V(N))return new z(w,w);if(O(N))return S=K(R(N),S),new z(R(S.g),R(S.h));if(O(S))return S=K(N,R(S)),new z(R(S.g),S.h);if(30<N.g.length){if(O(N)||O(S))throw Error("slowDivide_ only works with positive integers.");for(var A=T,b=S;0>=b.l(N);)A=Q(A),b=Q(b);var D=Y(A,1),F=Y(b,1);for(b=Y(b,2),A=Y(A,2);!V(b);){var P=F.add(b);0>=P.l(N)&&(D=D.add(A),F=P),b=Y(b,1),A=Y(A,1)}return S=L(N,D.j(S)),new z(D,S)}for(D=w;0<=N.l(S);){for(A=Math.max(1,Math.floor(N.m()/S.m())),b=Math.ceil(Math.log(A)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),F=p(A),P=F.j(S);O(P)||0<P.l(N);)A-=b,F=p(A),P=F.j(S);V(F)&&(F=T),D=D.add(F),N=L(N,P)}return new z(D,N)}t.A=function(N){return K(this,N).h},t.and=function(N){for(var S=Math.max(this.g.length,N.g.length),A=[],b=0;b<S;b++)A[b]=this.i(b)&N.i(b);return new l(A,this.h&N.h)},t.or=function(N){for(var S=Math.max(this.g.length,N.g.length),A=[],b=0;b<S;b++)A[b]=this.i(b)|N.i(b);return new l(A,this.h|N.h)},t.xor=function(N){for(var S=Math.max(this.g.length,N.g.length),A=[],b=0;b<S;b++)A[b]=this.i(b)^N.i(b);return new l(A,this.h^N.h)};function Q(N){for(var S=N.g.length+1,A=[],b=0;b<S;b++)A[b]=N.i(b)<<1|N.i(b-1)>>>31;return new l(A,N.h)}function Y(N,S){var A=S>>5;S%=32;for(var b=N.g.length-A,D=[],F=0;F<b;F++)D[F]=0<S?N.i(F+A)>>>S|N.i(F+A+1)<<32-S:N.i(F+A);return new l(D,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,wS=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=p,l.fromString=g,Zs=l}).apply(typeof hx<"u"?hx:typeof self<"u"?self:typeof window<"u"?window:{});var fh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xS,Ql,TS,Ph,Lm,ES,SS,IS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,y,x){return c==Array.prototype||c==Object.prototype||(c[y]=x.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof fh=="object"&&fh];for(var y=0;y<c.length;++y){var x=c[y];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=n(this);function i(c,y){if(y)e:{var x=r;c=c.split(".");for(var I=0;I<c.length-1;I++){var H=c[I];if(!(H in x))break e;x=x[H]}c=c[c.length-1],I=x[c],y=y(I),y!=I&&y!=null&&e(x,c,{configurable:!0,writable:!0,value:y})}}function a(c,y){c instanceof String&&(c+="");var x=0,I=!1,H={next:function(){if(!I&&x<c.length){var X=x++;return{value:y(X,c[X]),done:!1}}return I=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}i("Array.prototype.values",function(c){return c||function(){return a(this,function(y,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function f(c){var y=typeof c;return y=y!="object"?y:c?Array.isArray(c)?"array":y:"null",y=="array"||y=="object"&&typeof c.length=="number"}function p(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function g(c,y,x){return c.call.apply(c.bind,arguments)}function w(c,y,x){if(!c)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,I),c.apply(y,H)}}return function(){return c.apply(y,arguments)}}function T(c,y,x){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:w,T.apply(null,arguments)}function C(c,y){var x=Array.prototype.slice.call(arguments,1);return function(){var I=x.slice();return I.push.apply(I,arguments),c.apply(this,I)}}function V(c,y){function x(){}x.prototype=y.prototype,c.aa=y.prototype,c.prototype=new x,c.prototype.constructor=c,c.Qb=function(I,H,X){for(var ae=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)ae[qe-2]=arguments[qe];return y.prototype[H].apply(I,ae)}}function O(c){const y=c.length;if(0<y){const x=Array(y);for(let I=0;I<y;I++)x[I]=c[I];return x}return[]}function R(c,y){for(let x=1;x<arguments.length;x++){const I=arguments[x];if(f(I)){const H=c.length||0,X=I.length||0;c.length=H+X;for(let ae=0;ae<X;ae++)c[H+ae]=I[ae]}else c.push(I)}}class L{constructor(y,x){this.i=y,this.j=x,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function U(c){return/^[\s\xa0]*$/.test(c)}function z(){var c=h.navigator;return c&&(c=c.userAgent)?c:""}function K(c){return K[" "](c),c}K[" "]=function(){};var Q=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function Y(c,y,x){for(const I in c)y.call(x,c[I],I,c)}function N(c,y){for(const x in c)y.call(void 0,c[x],x,c)}function S(c){const y={};for(const x in c)y[x]=c[x];return y}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(c,y){let x,I;for(let H=1;H<arguments.length;H++){I=arguments[H];for(x in I)c[x]=I[x];for(let X=0;X<A.length;X++)x=A[X],Object.prototype.hasOwnProperty.call(I,x)&&(c[x]=I[x])}}function D(c){var y=1;c=c.split(":");const x=[];for(;0<y&&c.length;)x.push(c.shift()),y--;return c.length&&x.push(c.join(":")),x}function F(c){h.setTimeout(()=>{throw c},0)}function P(){var c=le;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class Ae{constructor(){this.h=this.g=null}add(y,x){const I=$e.get();I.set(y,x),this.h?this.h.next=I:this.g=I,this.h=I}}var $e=new L(()=>new It,c=>c.reset());class It{constructor(){this.next=this.g=this.h=null}set(y,x){this.h=y,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let Ie,J=!1,le=new Ae,oe=()=>{const c=h.Promise.resolve(void 0);Ie=()=>{c.then($)}};var $=()=>{for(var c;c=P();){try{c.h.call(c.g)}catch(x){F(x)}var y=$e;y.j(c),100>y.h&&(y.h++,c.next=y.g,y.g=c)}J=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var Pe=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const x=()=>{};h.addEventListener("test",x,y),h.removeEventListener("test",x,y)}catch{}return c}();function Ne(c,y){if(ye.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var x=this.type=c.type,I=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget){if(Q){e:{try{K(y.nodeName);var H=!0;break e}catch{}H=!1}H||(y=null)}}else x=="mouseover"?y=c.fromElement:x=="mouseout"&&(y=c.toElement);this.relatedTarget=y,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Le[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ne.aa.h.call(this)}}V(Ne,ye);var Le={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ze="closure_listenable_"+(1e6*Math.random()|0),He=0;function Ge(c,y,x,I,H){this.listener=c,this.proxy=null,this.src=y,this.type=x,this.capture=!!I,this.ha=H,this.key=++He,this.da=this.fa=!1}function Nt(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Mr(c){this.src=c,this.g={},this.h=0}Mr.prototype.add=function(c,y,x,I,H){var X=c.toString();c=this.g[X],c||(c=this.g[X]=[],this.h++);var ae=gs(c,y,I,H);return-1<ae?(y=c[ae],x||(y.fa=!1)):(y=new Ge(y,this.src,X,!!I,H),y.fa=x,c.push(y)),y};function _o(c,y){var x=y.type;if(x in c.g){var I=c.g[x],H=Array.prototype.indexOf.call(I,y,void 0),X;(X=0<=H)&&Array.prototype.splice.call(I,H,1),X&&(Nt(y),c.g[x].length==0&&(delete c.g[x],c.h--))}}function gs(c,y,x,I){for(var H=0;H<c.length;++H){var X=c[H];if(!X.da&&X.listener==y&&X.capture==!!x&&X.ha==I)return H}return-1}var gi="closure_lm_"+(1e6*Math.random()|0),wo={};function Xa(c,y,x,I,H){if(Array.isArray(y)){for(var X=0;X<y.length;X++)Xa(c,y[X],x,I,H);return null}return x=Za(x),c&&c[ze]?c.K(y,x,p(I)?!!I.capture:!1,H):Ya(c,y,x,!1,I,H)}function Ya(c,y,x,I,H,X){if(!y)throw Error("Invalid event type");var ae=p(H)?!!H.capture:!!H,qe=To(c);if(qe||(c[gi]=qe=new Mr(c)),x=qe.add(y,x,I,ae,X),x.proxy)return x;if(I=Wu(),x.proxy=I,I.src=c,I.listener=x,c.addEventListener)Pe||(H=ae),H===void 0&&(H=!1),c.addEventListener(y.toString(),I,H);else if(c.attachEvent)c.attachEvent(Ur(y.toString()),I);else if(c.addListener&&c.removeListener)c.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Wu(){function c(x){return y.call(c.src,c.listener,x)}const y=Ja;return c}function xo(c,y,x,I,H){if(Array.isArray(y))for(var X=0;X<y.length;X++)xo(c,y[X],x,I,H);else I=p(I)?!!I.capture:!!I,x=Za(x),c&&c[ze]?(c=c.i,y=String(y).toString(),y in c.g&&(X=c.g[y],x=gs(X,x,I,H),-1<x&&(Nt(X[x]),Array.prototype.splice.call(X,x,1),X.length==0&&(delete c.g[y],c.h--)))):c&&(c=To(c))&&(y=c.g[y.toString()],c=-1,y&&(c=gs(y,x,I,H)),(x=-1<c?y[c]:null)&&Fr(x))}function Fr(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[ze])_o(y.i,c);else{var x=c.type,I=c.proxy;y.removeEventListener?y.removeEventListener(x,I,c.capture):y.detachEvent?y.detachEvent(Ur(x),I):y.addListener&&y.removeListener&&y.removeListener(I),(x=To(y))?(_o(x,c),x.h==0&&(x.src=null,y[gi]=null)):Nt(c)}}}function Ur(c){return c in wo?wo[c]:wo[c]="on"+c}function Ja(c,y){if(c.da)c=!0;else{y=new Ne(y,this);var x=c.listener,I=c.ha||c.src;c.fa&&Fr(c),c=x.call(I,y)}return c}function To(c){return c=c[gi],c instanceof Mr?c:null}var Eo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Za(c){return typeof c=="function"?c:(c[Eo]||(c[Eo]=function(y){return c.handleEvent(y)}),c[Eo])}function bt(){ee.call(this),this.i=new Mr(this),this.M=this,this.F=null}V(bt,ee),bt.prototype[ze]=!0,bt.prototype.removeEventListener=function(c,y,x,I){xo(this,c,y,x,I)};function At(c,y){var x,I=c.F;if(I)for(x=[];I;I=I.F)x.push(I);if(c=c.M,I=y.type||y,typeof y=="string")y=new ye(y,c);else if(y instanceof ye)y.target=y.target||c;else{var H=y;y=new ye(I,c),b(y,H)}if(H=!0,x)for(var X=x.length-1;0<=X;X--){var ae=y.g=x[X];H=Br(ae,I,!0,y)&&H}if(ae=y.g=c,H=Br(ae,I,!0,y)&&H,H=Br(ae,I,!1,y)&&H,x)for(X=0;X<x.length;X++)ae=y.g=x[X],H=Br(ae,I,!1,y)&&H}bt.prototype.N=function(){if(bt.aa.N.call(this),this.i){var c=this.i,y;for(y in c.g){for(var x=c.g[y],I=0;I<x.length;I++)Nt(x[I]);delete c.g[y],c.h--}}this.F=null},bt.prototype.K=function(c,y,x,I){return this.i.add(String(c),y,!1,x,I)},bt.prototype.L=function(c,y,x,I){return this.i.add(String(c),y,!0,x,I)};function Br(c,y,x,I){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();for(var H=!0,X=0;X<y.length;++X){var ae=y[X];if(ae&&!ae.da&&ae.capture==x){var qe=ae.listener,Ct=ae.ha||ae.src;ae.fa&&_o(c.i,ae),H=qe.call(Ct,I)!==!1&&H}}return H&&!I.defaultPrevented}function el(c,y,x){if(typeof c=="function")x&&(c=T(c,x));else if(c&&typeof c.handleEvent=="function")c=T(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:h.setTimeout(c,y||0)}function ys(c){c.g=el(()=>{c.g=null,c.i&&(c.i=!1,ys(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class yi extends ee{constructor(y,x){super(),this.m=y,this.l=x,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:ys(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vi(c){ee.call(this),this.h=c,this.g={}}V(vi,ee);var tl=[];function nl(c){Y(c.g,function(y,x){this.g.hasOwnProperty(x)&&Fr(y)},c),c.g={}}vi.prototype.N=function(){vi.aa.N.call(this),nl(this)},vi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rl=h.JSON.stringify,sl=h.JSON.parse,il=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function _i(){}_i.prototype.h=null;function So(c){return c.h||(c.h=c.i())}function Io(){}var Pn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function pr(){ye.call(this,"d")}V(pr,ye);function bo(){ye.call(this,"c")}V(bo,ye);var mr={},ol=null;function wi(){return ol=ol||new bt}mr.La="serverreachability";function al(c){ye.call(this,mr.La,c)}V(al,ye);function $r(c){const y=wi();At(y,new al(y))}mr.STAT_EVENT="statevent";function ll(c,y){ye.call(this,mr.STAT_EVENT,c),this.stat=y}V(ll,ye);function ft(c){const y=wi();At(y,new ll(y,c))}mr.Ma="timingevent";function Ao(c,y){ye.call(this,mr.Ma,c),this.size=y}V(Ao,ye);function qn(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},y)}function xi(){this.g=!0}xi.prototype.xa=function(){this.g=!1};function Ti(c,y,x,I,H,X){c.info(function(){if(c.g)if(X)for(var ae="",qe=X.split("&"),Ct=0;Ct<qe.length;Ct++){var Me=qe[Ct].split("=");if(1<Me.length){var Vt=Me[0];Me=Me[1];var yt=Vt.split("_");ae=2<=yt.length&&yt[1]=="type"?ae+(Vt+"="+Me+"&"):ae+(Vt+"=redacted&")}}else ae=null;else ae=X;return"XMLHTTP REQ ("+I+") [attempt "+H+"]: "+y+`
`+x+`
`+ae})}function Co(c,y,x,I,H,X,ae){c.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+H+"]: "+y+`
`+x+`
`+X+" "+ae})}function Kn(c,y,x,I){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+Hd(c,x)+(I?" "+I:"")})}function ul(c,y){c.info(function(){return"TIMEOUT: "+y})}xi.prototype.info=function(){};function Hd(c,y){if(!c.g)return y;if(!y)return null;try{var x=JSON.parse(y);if(x){for(c=0;c<x.length;c++)if(Array.isArray(x[c])){var I=x[c];if(!(2>I.length)){var H=I[1];if(Array.isArray(H)&&!(1>H.length)){var X=H[0];if(X!="noop"&&X!="stop"&&X!="close")for(var ae=1;ae<H.length;ae++)H[ae]=""}}}}return rl(x)}catch{return y}}var Ro={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gn;function Ei(){}V(Ei,_i),Ei.prototype.g=function(){return new XMLHttpRequest},Ei.prototype.i=function(){return{}},Gn=new Ei;function Qn(c,y,x,I){this.j=c,this.i=y,this.l=x,this.R=I||1,this.U=new vi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ku}function Ku(){this.i=null,this.g="",this.h=!1}var cl={},Po={};function ko(c,y,x){c.L=1,c.v=Ts(Tn(y)),c.m=x,c.P=!0,hl(c,null)}function hl(c,y){c.F=Date.now(),Qe(c),c.A=Tn(c.v);var x=c.A,I=c.R;Array.isArray(I)||(I=[String(I)]),Ss(x.i,"t",I),c.C=0,x=c.j.J,c.h=new Ku,c.g=hc(c.j,x?y:null,!c.m),0<c.O&&(c.M=new yi(T(c.Y,c,c.g),c.O)),y=c.U,x=c.g,I=c.ca;var H="readystatechange";Array.isArray(H)||(H&&(tl[0]=H.toString()),H=tl);for(var X=0;X<H.length;X++){var ae=Xa(x,H[X],I||y.handleEvent,!1,y.h||y);if(!ae)break;y.g[ae.key]=ae}y=c.H?S(c.H):{},c.m?(c.u||(c.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,y)):(c.u="GET",c.g.ea(c.A,c.u,null,y)),$r(),Ti(c.i,c.u,c.A,c.l,c.R,c.m)}Qn.prototype.ca=function(c){c=c.target;const y=this.M;y&&cn(c)==3?y.j():this.Y(c)},Qn.prototype.Y=function(c){try{if(c==this.g)e:{const yt=cn(this.g);var y=this.g.Ba();const Vn=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||yl(this.g)))){this.J||yt!=4||y==7||(y==8||0>=Vn?$r(3):$r(2)),Si(this);var x=this.g.Z();this.X=x;t:if(Gu(this)){var I=yl(this.g);c="";var H=I.length,X=cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){kn(this),vs(this);var ae="";break t}this.h.i=new h.TextDecoder}for(y=0;y<H;y++)this.h.h=!0,c+=this.h.i.decode(I[y],{stream:!(X&&y==H-1)});I.length=0,this.h.g+=c,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=x==200,Co(this.i,this.u,this.A,this.l,this.R,yt,x),this.o){if(this.T&&!this.K){t:{if(this.g){var qe,Ct=this.g;if((qe=Ct.g?Ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(qe)){var Me=qe;break t}}Me=null}if(x=Me)Kn(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,dl(this,x);else{this.o=!1,this.s=3,ft(12),kn(this),vs(this);break e}}if(this.P){x=!0;let Sn;for(;!this.J&&this.C<ae.length;)if(Sn=Wd(this,ae),Sn==Po){yt==4&&(this.s=4,ft(14),x=!1),Kn(this.i,this.l,null,"[Incomplete Response]");break}else if(Sn==cl){this.s=4,ft(15),Kn(this.i,this.l,ae,"[Invalid Chunk]"),x=!1;break}else Kn(this.i,this.l,Sn,null),dl(this,Sn);if(Gu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||ae.length!=0||this.h.h||(this.s=1,ft(16),x=!1),this.o=this.o&&x,!x)Kn(this.i,this.l,ae,"[Invalid Chunked Response]"),kn(this),vs(this);else if(0<ae.length&&!this.W){this.W=!0;var Vt=this.j;Vt.g==this&&Vt.ba&&!Vt.M&&(Vt.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),_l(Vt),Vt.M=!0,ft(11))}}else Kn(this.i,this.l,ae,null),dl(this,ae);yt==4&&kn(this),this.o&&!this.J&&(yt==4?$o(this.j,this):(this.o=!1,Qe(this)))}else Lo(this.g),x==400&&0<ae.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),kn(this),vs(this)}}}catch{}finally{}};function Gu(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function Wd(c,y){var x=c.C,I=y.indexOf(`
`,x);return I==-1?Po:(x=Number(y.substring(x,I)),isNaN(x)?cl:(I+=1,I+x>y.length?Po:(y=y.slice(I,I+x),c.C=I+x,y)))}Qn.prototype.cancel=function(){this.J=!0,kn(this)};function Qe(c){c.S=Date.now()+c.I,Qu(c,c.I)}function Qu(c,y){if(c.B!=null)throw Error("WatchDog timer not null");c.B=qn(T(c.ba,c),y)}function Si(c){c.B&&(h.clearTimeout(c.B),c.B=null)}Qn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(ul(this.i,this.A),this.L!=2&&($r(),ft(17)),kn(this),this.s=2,vs(this)):Qu(this,this.S-c)};function vs(c){c.j.G==0||c.J||$o(c.j,c)}function kn(c){Si(c);var y=c.M;y&&typeof y.ma=="function"&&y.ma(),c.M=null,nl(c.U),c.g&&(y=c.g,c.g=null,y.abort(),y.ma())}function dl(c,y){try{var x=c.j;if(x.G!=0&&(x.g==c||tn(x.h,c))){if(!c.K&&tn(x.h,c)&&x.G==3){try{var I=x.Da.g.parse(y)}catch{I=null}if(Array.isArray(I)&&I.length==3){var H=I;if(H[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<c.F)Bo(x),er(x);else break e;Uo(x),ft(18)}}else x.za=H[1],0<x.za-x.T&&37500>H[2]&&x.F&&x.v==0&&!x.C&&(x.C=qn(T(x.Za,x),6e3));if(1>=Yu(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else Kr(x,11)}else if((c.K||x.g==c)&&Bo(x),!U(y))for(H=x.Da.g.parse(y),y=0;y<H.length;y++){let Me=H[y];if(x.T=Me[0],Me=Me[1],x.G==2)if(Me[0]=="c"){x.K=Me[1],x.ia=Me[2];const Vt=Me[3];Vt!=null&&(x.la=Vt,x.j.info("VER="+x.la));const yt=Me[4];yt!=null&&(x.Aa=yt,x.j.info("SVER="+x.Aa));const Vn=Me[5];Vn!=null&&typeof Vn=="number"&&0<Vn&&(I=1.5*Vn,x.L=I,x.j.info("backChannelRequestTimeoutMs_="+I)),I=x;const Sn=c.g;if(Sn){const ki=Sn.g?Sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ki){var X=I.h;X.g||ki.indexOf("spdy")==-1&&ki.indexOf("quic")==-1&&ki.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(fl(X,X.h),X.h=null))}if(I.D){const Ho=Sn.g?Sn.g.getResponseHeader("X-HTTP-Session-Id"):null;Ho&&(I.ya=Ho,Ke(I.I,I.D,Ho))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-c.F,x.j.info("Handshake RTT: "+x.R+"ms")),I=x;var ae=c;if(I.qa=cc(I,I.J?I.ia:null,I.W),ae.K){Ju(I.h,ae);var qe=ae,Ct=I.L;Ct&&(qe.I=Ct),qe.B&&(Si(qe),Qe(qe)),I.g=ae}else Pi(I);0<x.i.length&&_r(x)}else Me[0]!="stop"&&Me[0]!="close"||Kr(x,7);else x.G==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?Kr(x,7):Ft(x):Me[0]!="noop"&&x.l&&x.l.ta(Me),x.v=0)}}$r(4)}catch{}}var Xu=class{constructor(c,y){this.g=c,this.map=y}};function Ii(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xn(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Yu(c){return c.h?1:c.g?c.g.size:0}function tn(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function fl(c,y){c.g?c.g.add(y):c.h=y}function Ju(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}Ii.prototype.cancel=function(){if(this.i=Zu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Zu(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const x of c.g.values())y=y.concat(x.D);return y}return O(c.i)}function No(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(f(c)){for(var y=[],x=c.length,I=0;I<x;I++)y.push(c[I]);return y}y=[],x=0;for(I in c)y[x++]=c[I];return y}function Vo(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(f(c)||typeof c=="string"){var y=[];c=c.length;for(var x=0;x<c;x++)y.push(x);return y}y=[],x=0;for(const I in c)y[x++]=I;return y}}}function _s(c,y){if(c.forEach&&typeof c.forEach=="function")c.forEach(y,void 0);else if(f(c)||typeof c=="string")Array.prototype.forEach.call(c,y,void 0);else for(var x=Vo(c),I=No(c),H=I.length,X=0;X<H;X++)y.call(void 0,I[X],x&&x[X],c)}var bi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qd(c,y){if(c){c=c.split("&");for(var x=0;x<c.length;x++){var I=c[x].indexOf("="),H=null;if(0<=I){var X=c[x].substring(0,I);H=c[x].substring(I+1)}else X=c[x];y(X,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function zr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof zr){this.h=c.h,Ai(this,c.j),this.o=c.o,this.g=c.g,ws(this,c.s),this.l=c.l;var y=c.i,x=new gr;x.i=y.i,y.g&&(x.g=new Map(y.g),x.h=y.h),xs(this,x),this.m=c.m}else c&&(y=String(c).match(bi))?(this.h=!1,Ai(this,y[1]||"",!0),this.o=je(y[2]||""),this.g=je(y[3]||"",!0),ws(this,y[4]),this.l=je(y[5]||"",!0),xs(this,y[6]||"",!0),this.m=je(y[7]||"")):(this.h=!1,this.i=new gr(null,this.h))}zr.prototype.toString=function(){var c=[],y=this.j;y&&c.push(Es(y,Do,!0),":");var x=this.g;return(x||y=="file")&&(c.push("//"),(y=this.o)&&c.push(Es(y,Do,!0),"@"),c.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&c.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&c.push("/"),c.push(Es(x,x.charAt(0)=="/"?nc:tc,!0))),(x=this.i.toString())&&c.push("?",x),(x=this.m)&&c.push("#",Es(x,pl)),c.join("")};function Tn(c){return new zr(c)}function Ai(c,y,x){c.j=x?je(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function ws(c,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);c.s=y}else c.s=null}function xs(c,y,x){y instanceof gr?(c.i=y,yr(c.i,c.h)):(x||(y=Es(y,rc)),c.i=new gr(y,c.h))}function Ke(c,y,x){c.i.set(y,x)}function Ts(c){return Ke(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function je(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Es(c,y,x){return typeof c=="string"?(c=encodeURI(c).replace(y,ec),x&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function ec(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Do=/[#\/\?@]/g,tc=/[#\?:]/g,nc=/[#\?]/g,rc=/[#\?@]/g,pl=/#/g;function gr(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function Mt(c){c.g||(c.g=new Map,c.h=0,c.i&&qd(c.i,function(y,x){c.add(decodeURIComponent(y.replace(/\+/g," ")),x)}))}t=gr.prototype,t.add=function(c,y){Mt(this),this.i=null,c=Nn(this,c);var x=this.g.get(c);return x||this.g.set(c,x=[]),x.push(y),this.h+=1,this};function Xn(c,y){Mt(c),y=Nn(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function Yn(c,y){return Mt(c),y=Nn(c,y),c.g.has(y)}t.forEach=function(c,y){Mt(this),this.g.forEach(function(x,I){x.forEach(function(H){c.call(y,H,I,this)},this)},this)},t.na=function(){Mt(this);const c=Array.from(this.g.values()),y=Array.from(this.g.keys()),x=[];for(let I=0;I<y.length;I++){const H=c[I];for(let X=0;X<H.length;X++)x.push(y[I])}return x},t.V=function(c){Mt(this);let y=[];if(typeof c=="string")Yn(this,c)&&(y=y.concat(this.g.get(Nn(this,c))));else{c=Array.from(this.g.values());for(let x=0;x<c.length;x++)y=y.concat(c[x])}return y},t.set=function(c,y){return Mt(this),this.i=null,c=Nn(this,c),Yn(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},t.get=function(c,y){return c?(c=this.V(c),0<c.length?String(c[0]):y):y};function Ss(c,y,x){Xn(c,y),0<x.length&&(c.i=null,c.g.set(Nn(c,y),O(x)),c.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(var x=0;x<y.length;x++){var I=y[x];const X=encodeURIComponent(String(I)),ae=this.V(I);for(I=0;I<ae.length;I++){var H=X;ae[I]!==""&&(H+="="+encodeURIComponent(String(ae[I]))),c.push(H)}}return this.i=c.join("&")};function Nn(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function yr(c,y){y&&!c.j&&(Mt(c),c.i=null,c.g.forEach(function(x,I){var H=I.toLowerCase();I!=H&&(Xn(this,I),Ss(this,H,x))},c)),c.j=y}function Kd(c,y){const x=new xi;if(h.Image){const I=new Image;I.onload=C(un,x,"TestLoadImage: loaded",!0,y,I),I.onerror=C(un,x,"TestLoadImage: error",!1,y,I),I.onabort=C(un,x,"TestLoadImage: abort",!1,y,I),I.ontimeout=C(un,x,"TestLoadImage: timeout",!1,y,I),h.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=c}else y(!1)}function sc(c,y){const x=new xi,I=new AbortController,H=setTimeout(()=>{I.abort(),un(x,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:I.signal}).then(X=>{clearTimeout(H),X.ok?un(x,"TestPingServer: ok",!0,y):un(x,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(H),un(x,"TestPingServer: error",!1,y)})}function un(c,y,x,I,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),I(x)}catch{}}function Gd(){this.g=new il}function ic(c,y,x){const I=x||"";try{_s(c,function(H,X){let ae=H;p(H)&&(ae=rl(H)),y.push(I+X+"="+encodeURIComponent(ae))})}catch(H){throw y.push(I+"type="+encodeURIComponent("_badmap")),H}}function Hr(c){this.l=c.Ub||null,this.j=c.eb||!1}V(Hr,_i),Hr.prototype.g=function(){return new Ci(this.l,this.j)},Hr.prototype.i=function(c){return function(){return c}}({});function Ci(c,y){bt.call(this),this.D=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(Ci,bt),t=Ci.prototype,t.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=y,this.readyState=1,Zn(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(y.body=c),(this.D||h).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Jn(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Zn(this)),this.g&&(this.readyState=3,Zn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;oc(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function oc(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Jn(this):Zn(this),this.readyState==3&&oc(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Jn(this))},t.Qa=function(c){this.g&&(this.response=c,Jn(this))},t.ga=function(){this.g&&Jn(this)};function Jn(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Zn(c)}t.setRequestHeader=function(c,y){this.u.append(c,y)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var x=y.next();!x.done;)x=x.value,c.push(x[0]+": "+x[1]),x=y.next();return c.join(`\r
`)};function Zn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ci.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Wr(c){let y="";return Y(c,function(x,I){y+=I,y+=":",y+=x,y+=`\r
`}),y}function Is(c,y,x){e:{for(I in x){var I=!1;break e}I=!0}I||(x=Wr(x),typeof c=="string"?x!=null&&encodeURIComponent(String(x)):Ke(c,y,x))}function tt(c){bt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(tt,bt);var Qd=/^https?$/i,ml=["POST","PUT"];t=tt.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,y,x,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gn.g(),this.v=this.o?So(this.o):So(Gn),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(X){Ri(this,X);return}if(c=x||"",x=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var H in I)x.set(H,I[H]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const X of I.keys())x.set(X,I.get(X));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(x.keys()).find(X=>X.toLowerCase()=="content-type"),H=h.FormData&&c instanceof h.FormData,!(0<=Array.prototype.indexOf.call(ml,y,void 0))||I||H||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,ae]of x)this.g.setRequestHeader(X,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{jo(this),this.u=!0,this.g.send(c),this.u=!1}catch(X){Ri(this,X)}};function Ri(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.m=5,Oo(c),En(c)}function Oo(c){c.A||(c.A=!0,At(c,"complete"),At(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,At(this,"complete"),At(this,"abort"),En(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),En(this,!0)),tt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?gl(this):this.bb())},t.bb=function(){gl(this)};function gl(c){if(c.h&&typeof l<"u"&&(!c.v[1]||cn(c)!=4||c.Z()!=2)){if(c.u&&cn(c)==4)el(c.Ea,0,c);else if(At(c,"readystatechange"),cn(c)==4){c.h=!1;try{const ae=c.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var x;if(!(x=y)){var I;if(I=ae===0){var H=String(c.D).match(bi)[1]||null;!H&&h.self&&h.self.location&&(H=h.self.location.protocol.slice(0,-1)),I=!Qd.test(H?H.toLowerCase():"")}x=I}if(x)At(c,"complete"),At(c,"success");else{c.m=6;try{var X=2<cn(c)?c.g.statusText:""}catch{X=""}c.l=X+" ["+c.Z()+"]",Oo(c)}}finally{En(c)}}}}function En(c,y){if(c.g){jo(c);const x=c.g,I=c.v[0]?()=>{}:null;c.g=null,c.v=null,y||At(c,"ready");try{x.onreadystatechange=I}catch{}}}function jo(c){c.I&&(h.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function cn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<cn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),sl(y)}};function yl(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Lo(c){const y={};c=(c.g&&2<=cn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<c.length;I++){if(U(c[I]))continue;var x=D(c[I]);const H=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const X=y[H]||[];y[H]=X,X.push(x)}N(y,function(I){return I.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vr(c,y,x){return x&&x.internalChannelParams&&x.internalChannelParams[c]||y}function vl(c){this.Aa=0,this.i=[],this.j=new xi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vr("baseRetryDelayMs",5e3,c),this.cb=vr("retryDelaySeedMs",1e4,c),this.Wa=vr("forwardChannelMaxRetries",2,c),this.wa=vr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Ii(c&&c.concurrentRequestLimit),this.Da=new Gd,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=vl.prototype,t.la=8,t.G=1,t.connect=function(c,y,x,I){ft(0),this.W=c,this.H=y||{},x&&I!==void 0&&(this.H.OSID=x,this.H.OAID=I),this.F=this.X,this.I=cc(this,null,this.W),_r(this)};function Ft(c){if(Mo(c),c.G==3){var y=c.U++,x=Tn(c.I);if(Ke(x,"SID",c.K),Ke(x,"RID",y),Ke(x,"TYPE","terminate"),qr(c,x),y=new Qn(c,c.j,y),y.L=2,y.v=Ts(Tn(x)),x=!1,h.navigator&&h.navigator.sendBeacon)try{x=h.navigator.sendBeacon(y.v.toString(),"")}catch{}!x&&h.Image&&(new Image().src=y.v,x=!0),x||(y.g=hc(y.j,null),y.g.ea(y.v)),y.F=Date.now(),Qe(y)}uc(c)}function er(c){c.g&&(_l(c),c.g.cancel(),c.g=null)}function Mo(c){er(c),c.u&&(h.clearTimeout(c.u),c.u=null),Bo(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&h.clearTimeout(c.s),c.s=null)}function _r(c){if(!xn(c.h)&&!c.s){c.s=!0;var y=c.Ga;Ie||oe(),J||(Ie(),J=!0),le.add(y,c),c.B=0}}function Xd(c,y){return Yu(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=y.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=qn(T(c.Ga,c,y),lc(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const H=new Qn(this,this.j,c);let X=this.o;if(this.S&&(X?(X=S(X),b(X,this.S)):X=this.S),this.m!==null||this.O||(H.H=X,X=null),this.P)e:{for(var y=0,x=0;x<this.i.length;x++){t:{var I=this.i[x];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(y+=I,4096<y){y=x;break e}if(y===4096||x===this.i.length-1){y=x+1;break e}}y=1e3}else y=1e3;y=bs(this,H,y),x=Tn(this.I),Ke(x,"RID",c),Ke(x,"CVER",22),this.D&&Ke(x,"X-HTTP-Session-Id",this.D),qr(this,x),X&&(this.O?y="headers="+encodeURIComponent(String(Wr(X)))+"&"+y:this.m&&Is(x,this.m,X)),fl(this.h,H),this.Ua&&Ke(x,"TYPE","init"),this.P?(Ke(x,"$req",y),Ke(x,"SID","null"),H.T=!0,ko(H,x,null)):ko(H,x,y),this.G=2}}else this.G==3&&(c?Fo(this,c):this.i.length==0||xn(this.h)||Fo(this))};function Fo(c,y){var x;y?x=y.l:x=c.U++;const I=Tn(c.I);Ke(I,"SID",c.K),Ke(I,"RID",x),Ke(I,"AID",c.T),qr(c,I),c.m&&c.o&&Is(I,c.m,c.o),x=new Qn(c,c.j,x,c.B+1),c.m===null&&(x.H=c.o),y&&(c.i=y.D.concat(c.i)),y=bs(c,x,1e3),x.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),fl(c.h,x),ko(x,I,y)}function qr(c,y){c.H&&Y(c.H,function(x,I){Ke(y,I,x)}),c.l&&_s({},function(x,I){Ke(y,I,x)})}function bs(c,y,x){x=Math.min(c.i.length,x);var I=c.l?T(c.l.Na,c.l,c):null;e:{var H=c.i;let X=-1;for(;;){const ae=["count="+x];X==-1?0<x?(X=H[0].g,ae.push("ofs="+X)):X=0:ae.push("ofs="+X);let qe=!0;for(let Ct=0;Ct<x;Ct++){let Me=H[Ct].g;const Vt=H[Ct].map;if(Me-=X,0>Me)X=Math.max(0,H[Ct].g-100),qe=!1;else try{ic(Vt,ae,"req"+Me+"_")}catch{I&&I(Vt)}}if(qe){I=ae.join("&");break e}}}return c=c.i.splice(0,x),y.D=c,I}function Pi(c){if(!c.g&&!c.u){c.Y=1;var y=c.Fa;Ie||oe(),J||(Ie(),J=!0),le.add(y,c),c.v=0}}function Uo(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=qn(T(c.Fa,c),lc(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,ac(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=qn(T(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),er(this),ac(this))};function _l(c){c.A!=null&&(h.clearTimeout(c.A),c.A=null)}function ac(c){c.g=new Qn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var y=Tn(c.qa);Ke(y,"RID","rpc"),Ke(y,"SID",c.K),Ke(y,"AID",c.T),Ke(y,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ke(y,"TO",c.ja),Ke(y,"TYPE","xmlhttp"),qr(c,y),c.m&&c.o&&Is(y,c.m,c.o),c.L&&(c.g.I=c.L);var x=c.g;c=c.ia,x.L=1,x.v=Ts(Tn(y)),x.m=null,x.P=!0,hl(x,c)}t.Za=function(){this.C!=null&&(this.C=null,er(this),Uo(this),ft(19))};function Bo(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function $o(c,y){var x=null;if(c.g==y){Bo(c),_l(c),c.g=null;var I=2}else if(tn(c.h,y))x=y.D,Ju(c.h,y),I=1;else return;if(c.G!=0){if(y.o)if(I==1){x=y.m?y.m.length:0,y=Date.now()-y.F;var H=c.B;I=wi(),At(I,new Ao(I,x)),_r(c)}else Pi(c);else if(H=y.s,H==3||H==0&&0<y.X||!(I==1&&Xd(c,y)||I==2&&Uo(c)))switch(x&&0<x.length&&(y=c.h,y.i=y.i.concat(x)),H){case 1:Kr(c,5);break;case 4:Kr(c,10);break;case 3:Kr(c,6);break;default:Kr(c,2)}}}function lc(c,y){let x=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(x*=2),x*y}function Kr(c,y){if(c.j.info("Error code "+y),y==2){var x=T(c.fb,c),I=c.Xa;const H=!I;I=new zr(I||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Ai(I,"https"),Ts(I),H?Kd(I.toString(),x):sc(I.toString(),x)}else ft(2);c.G=0,c.l&&c.l.sa(y),uc(c),Mo(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function uc(c){if(c.G=0,c.ka=[],c.l){const y=Zu(c.h);(y.length!=0||c.i.length!=0)&&(R(c.ka,y),R(c.ka,c.i),c.h.i.length=0,O(c.i),c.i.length=0),c.l.ra()}}function cc(c,y,x){var I=x instanceof zr?Tn(x):new zr(x);if(I.g!="")y&&(I.g=y+"."+I.g),ws(I,I.s);else{var H=h.location;I=H.protocol,y=y?y+"."+H.hostname:H.hostname,H=+H.port;var X=new zr(null);I&&Ai(X,I),y&&(X.g=y),H&&ws(X,H),x&&(X.l=x),I=X}return x=c.D,y=c.ya,x&&y&&Ke(I,x,y),Ke(I,"VER",c.la),qr(c,I),I}function hc(c,y,x){if(y&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Ca&&!c.pa?new tt(new Hr({eb:x})):new tt(c.pa),y.Ha(c.J),y}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function wl(){}t=wl.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function zo(){}zo.prototype.g=function(c,y){return new nn(c,y)};function nn(c,y){bt.call(this),this.g=new vl(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(c?c["X-WebChannel-Client-Profile"]=y.va:c={"X-WebChannel-Client-Profile":y.va}),this.g.S=c,(c=y&&y.Sb)&&!U(c)&&(this.g.m=c),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!U(y)&&(this.g.D=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new wr(this)}V(nn,bt),nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){Ft(this.g)},nn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var x={};x.__data__=c,c=x}else this.u&&(x={},x.__data__=rl(c),c=x);y.i.push(new Xu(y.Ya++,c)),y.G==3&&_r(y)},nn.prototype.N=function(){this.g.l=null,delete this.j,Ft(this.g),delete this.g,nn.aa.N.call(this)};function dc(c){pr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const x in y){c=x;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}V(dc,pr);function fc(){bo.call(this),this.status=1}V(fc,bo);function wr(c){this.g=c}V(wr,wl),wr.prototype.ua=function(){At(this.g,"a")},wr.prototype.ta=function(c){At(this.g,new dc(c))},wr.prototype.sa=function(c){At(this.g,new fc)},wr.prototype.ra=function(){At(this.g,"b")},zo.prototype.createWebChannel=zo.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,IS=function(){return new zo},SS=function(){return wi()},ES=mr,Lm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ro.NO_ERROR=0,Ro.TIMEOUT=8,Ro.HTTP_ERROR=6,Ph=Ro,qu.COMPLETE="complete",TS=qu,Io.EventType=Pn,Pn.OPEN="a",Pn.CLOSE="b",Pn.ERROR="c",Pn.MESSAGE="d",bt.prototype.listen=bt.prototype.K,Ql=Io,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,xS=tt}).apply(typeof fh<"u"?fh:typeof self<"u"?self:typeof window<"u"?window:{});const dx="@firebase/firestore",fx="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yt.UNAUTHENTICATED=new Yt(null),Yt.GOOGLE_CREDENTIALS=new Yt("google-credentials-uid"),Yt.FIRST_PARTY=new Yt("first-party-uid"),Yt.MOCK_USER=new Yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ha="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=new qg("@firebase/firestore");function ma(){return ro.logLevel}function de(t,...e){if(ro.logLevel<=De.DEBUG){const n=e.map(ny);ro.debug(`Firestore (${Ha}): ${t}`,...n)}}function fs(t,...e){if(ro.logLevel<=De.ERROR){const n=e.map(ny);ro.error(`Firestore (${Ha}): ${t}`,...n)}}function ii(t,...e){if(ro.logLevel<=De.WARN){const n=e.map(ny);ro.warn(`Firestore (${Ha}): ${t}`,...n)}}function ny(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,bS(t,r,n)}function bS(t,e,n){let r=`FIRESTORE (${Ha}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw fs(r),new Error(r)}function We(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||bS(e,i,r)}function Ce(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends fr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $O{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Yt.UNAUTHENTICATED))}shutdown(){}}class zO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class HO{constructor(e){this.t=e,this.currentUser=Yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){We(this.o===void 0,42304);let r=this.i;const i=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let a=new ei;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ei,e.enqueueRetryable(()=>i(this.currentUser))};const l=()=>{const f=a;e.enqueueRetryable(async()=>{await f.promise,await i(this.currentUser)})},h=f=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(f=>h(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?h(f):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ei)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(We(typeof r.accessToken=="string",31837,{l:r}),new AS(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return We(e===null||typeof e=="string",2055,{h:e}),new Yt(e)}}class WO{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Yt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qO{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new WO(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class px{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KO{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$n(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){We(this.o===void 0,3512);const r=a=>{a.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,de("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new px(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(We(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new px(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=GO(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<n&&(r+=e.charAt(i[a]%62))}return r}}function ke(t,e){return t<e?-1:t>e?1:0}function Mm(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return ke(r,i);{const a=CS(),l=QO(a.encode(mx(t,n)),a.encode(mx(e,n)));return l!==0?l:ke(r,i)}}n+=r>65535?2:1}return ke(t.length,e.length)}function mx(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function QO(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return ke(t[n],e[n]);return ke(t.length,e.length)}function Va(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx="__name__";class Ir{constructor(e,n,r){n===void 0?n=0:n>e.length&&xe(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&xe(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ir.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ir?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const a=Ir.compareSegments(e.get(i),n.get(i));if(a!==0)return a}return ke(e.length,n.length)}static compareSegments(e,n){const r=Ir.isNumericId(e),i=Ir.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Ir.extractNumericId(e).compare(Ir.extractNumericId(n)):Mm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zs.fromString(e.substring(4,e.length-2))}}class Ye extends Ir{construct(e,n,r){return new Ye(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ce(Z.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ye(n)}static emptyPath(){return new Ye([])}}const XO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ht extends Ir{construct(e,n,r){return new Ht(e,n,r)}static isValidIdentifier(e){return XO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ht.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gx}static keyField(){return new Ht([gx])}static fromServerFormat(e){const n=[];let r="",i=0;const a=()=>{if(r.length===0)throw new ce(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if(h==="\\"){if(i+1===e.length)throw new ce(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ce(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else h==="`"?(l=!l,i++):h!=="."||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new ce(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ht(n)}static emptyPath(){return new Ht([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.path=e}static fromPath(e){return new ve(Ye.fromString(e))}static fromName(e){return new ve(Ye.fromString(e).popFirst(5))}static empty(){return new ve(Ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ve(new Ye(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RS(t,e,n){if(!n)throw new ce(Z.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function YO(t,e,n,r){if(e===!0&&r===!0)throw new ce(Z.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function yx(t){if(!ve.isDocumentKey(t))throw new ce(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function vx(t){if(ve.isDocumentKey(t))throw new ce(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function PS(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Ed(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":xe(12329,{type:typeof t})}function Nr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ce(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ed(t);throw new ce(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(t,e){const n={typeString:t};return e&&(n.value=e),n}function Uu(t,e){if(!PS(t))throw new ce(Z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const l=t[r];if(i&&typeof l!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&l!==a.value){n=`Expected '${r}' field to equal '${a.value}'`;break}}if(n)throw new ce(Z.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=-62135596800,wx=1e6;class et{static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*wx);return new et(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ce(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<_x)throw new ce(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wx}_compareTo(e){return this.seconds===e.seconds?ke(this.nanoseconds,e.nanoseconds):ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Uu(e,et._jsonSchema))return new et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-_x;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}et._jsonSchemaVersion="firestore/timestamp/1.0",et._jsonSchema={type:Tt("string",et._jsonSchemaVersion),seconds:Tt("number"),nanoseconds:Tt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{static fromTimestamp(e){return new be(e)}static min(){return new be(new et(0,0))}static max(){return new be(new et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu=-1;function JO(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=be.fromTimestamp(r===1e9?new et(n+1,0):new et(n,r));return new oi(i,ve.empty(),e)}function ZO(t){return new oi(t.readTime,t.key,Eu)}class oi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new oi(be.min(),ve.empty(),Eu)}static max(){return new oi(be.max(),ve.empty(),Eu)}}function ej(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ve.comparator(t.documentKey,e.documentKey),n!==0?n:ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wa(t){if(t.code!==Z.FAILED_PRECONDITION||t.message!==tj)throw t;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new te((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(n,a).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof te?n:te.resolve(n)}catch(n){return te.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):te.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):te.reject(n)}static resolve(e){return new te((n,r)=>{n(e)})}static reject(e){return new te((n,r)=>{r(e)})}static waitFor(e){return new te((n,r)=>{let i=0,a=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++a,l&&a===i&&n()},f=>r(f))}),l=!0,a===i&&n()})}static or(e){let n=te.resolve(!1);for(const r of e)n=n.next(i=>i?te.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,a)=>{r.push(n.call(this,i,a))}),this.waitFor(r)}static mapArray(e,n){return new te((r,i)=>{const a=e.length,l=new Array(a);let h=0;for(let f=0;f<a;f++){const p=f;n(e[p]).next(g=>{l[p]=g,++h,h===a&&r(l)},g=>i(g))}})}static doWhile(e,n){return new te((r,i)=>{const a=()=>{e()===!0?n().next(()=>{a()},i):r()};a()})}}function rj(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function qa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Sd.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy=-1;function Id(t){return t==null}function Xh(t){return t===0&&1/t==-1/0}function sj(t){return typeof t=="number"&&Number.isInteger(t)&&!Xh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS="";function ij(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=xx(e)),e=oj(t.get(n),e);return xx(e)}function oj(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const a=t.charAt(i);switch(a){case"\0":n+="";break;case kS:n+="";break;default:n+=a}}return n}function xx(t){return t+kS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tx(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function pi(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function NS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n){this.comparator=e,this.root=n||zt.EMPTY}insert(e,n){return new at(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,zt.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ph(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ph(this.root,e,this.comparator,!1)}getReverseIterator(){return new ph(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ph(this.root,e,this.comparator,!0)}}class ph{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=n?r(e.key,n):1,n&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class zt{constructor(e,n,r,i,a){this.key=e,this.value=n,this.color=r??zt.RED,this.left=i??zt.EMPTY,this.right=a??zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,a){return new zt(e??this.key,n??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,n,r),null):a===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return zt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}zt.EMPTY=null,zt.RED=!0,zt.BLACK=!1;zt.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,n,r,i,a){return this}insert(e,n,r){return new zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ex(this.data.getIterator())}getIteratorFrom(e){return new Ex(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new kt(this.comparator);return n.data=e,n}}class Ex{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn{constructor(e){this.fields=e,e.sort(Ht.comparator)}static empty(){return new Cn([])}unionWith(e){let n=new kt(Ht.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Cn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Va(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new VS("Invalid base64 string: "+a):a}}(e);return new Wt(n)}static fromUint8Array(e){const n=function(i){let a="";for(let l=0;l<i.length;++l)a+=String.fromCharCode(i[l]);return a}(e);return new Wt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const aj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ai(t){if(We(!!t,39018),typeof t=="string"){let e=0;const n=aj.exec(t);if(We(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gt(t.seconds),nanos:gt(t.nanos)}}function gt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function li(t){return typeof t=="string"?Wt.fromBase64String(t):Wt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="server_timestamp",OS="__type__",jS="__previous_value__",LS="__local_write_time__";function iy(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[OS])===null||n===void 0?void 0:n.stringValue)===DS}function bd(t){const e=t.mapValue.fields[jS];return iy(e)?bd(e):e}function Su(t){const e=ai(t.mapValue.fields[LS].timestampValue);return new et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e,n,r,i,a,l,h,f,p,g){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=f,this.useFetchStreams=p,this.isUsingEmulator=g}}const Yh="(default)";class Iu{constructor(e,n){this.projectId=e,this.database=n||Yh}static empty(){return new Iu("","")}get isDefaultDatabase(){return this.database===Yh}isEqual(e){return e instanceof Iu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="__type__",uj="__max__",mh={mapValue:{}},FS="__vector__",Jh="value";function ui(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?iy(t)?4:hj(t)?9007199254740991:cj(t)?10:11:xe(28295,{value:t})}function Lr(t,e){if(t===e)return!0;const n=ui(t);if(n!==ui(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Su(t).isEqual(Su(e));case 3:return function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const l=ai(i.timestampValue),h=ai(a.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,a){return li(i.bytesValue).isEqual(li(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,a){return gt(i.geoPointValue.latitude)===gt(a.geoPointValue.latitude)&&gt(i.geoPointValue.longitude)===gt(a.geoPointValue.longitude)}(t,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return gt(i.integerValue)===gt(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const l=gt(i.doubleValue),h=gt(a.doubleValue);return l===h?Xh(l)===Xh(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return Va(t.arrayValue.values||[],e.arrayValue.values||[],Lr);case 10:case 11:return function(i,a){const l=i.mapValue.fields||{},h=a.mapValue.fields||{};if(Tx(l)!==Tx(h))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(h[f]===void 0||!Lr(l[f],h[f])))return!1;return!0}(t,e);default:return xe(52216,{left:t})}}function bu(t,e){return(t.values||[]).find(n=>Lr(n,e))!==void 0}function Da(t,e){if(t===e)return 0;const n=ui(t),r=ui(e);if(n!==r)return ke(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ke(t.booleanValue,e.booleanValue);case 2:return function(a,l){const h=gt(a.integerValue||a.doubleValue),f=gt(l.integerValue||l.doubleValue);return h<f?-1:h>f?1:h===f?0:isNaN(h)?isNaN(f)?0:-1:1}(t,e);case 3:return Sx(t.timestampValue,e.timestampValue);case 4:return Sx(Su(t),Su(e));case 5:return Mm(t.stringValue,e.stringValue);case 6:return function(a,l){const h=li(a),f=li(l);return h.compareTo(f)}(t.bytesValue,e.bytesValue);case 7:return function(a,l){const h=a.split("/"),f=l.split("/");for(let p=0;p<h.length&&p<f.length;p++){const g=ke(h[p],f[p]);if(g!==0)return g}return ke(h.length,f.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,l){const h=ke(gt(a.latitude),gt(l.latitude));return h!==0?h:ke(gt(a.longitude),gt(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ix(t.arrayValue,e.arrayValue);case 10:return function(a,l){var h,f,p,g;const w=a.fields||{},T=l.fields||{},C=(h=w[Jh])===null||h===void 0?void 0:h.arrayValue,V=(f=T[Jh])===null||f===void 0?void 0:f.arrayValue,O=ke(((p=C?.values)===null||p===void 0?void 0:p.length)||0,((g=V?.values)===null||g===void 0?void 0:g.length)||0);return O!==0?O:Ix(C,V)}(t.mapValue,e.mapValue);case 11:return function(a,l){if(a===mh.mapValue&&l===mh.mapValue)return 0;if(a===mh.mapValue)return 1;if(l===mh.mapValue)return-1;const h=a.fields||{},f=Object.keys(h),p=l.fields||{},g=Object.keys(p);f.sort(),g.sort();for(let w=0;w<f.length&&w<g.length;++w){const T=Mm(f[w],g[w]);if(T!==0)return T;const C=Da(h[f[w]],p[g[w]]);if(C!==0)return C}return ke(f.length,g.length)}(t.mapValue,e.mapValue);default:throw xe(23264,{le:n})}}function Sx(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ke(t,e);const n=ai(t),r=ai(e),i=ke(n.seconds,r.seconds);return i!==0?i:ke(n.nanos,r.nanos)}function Ix(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const a=Da(n[i],r[i]);if(a)return a}return ke(n.length,r.length)}function Oa(t){return Fm(t)}function Fm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ai(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return li(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ve.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const a of n.values||[])i?i=!1:r+=",",r+=Fm(a);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",a=!0;for(const l of r)a?a=!1:i+=",",i+=`${l}:${Fm(n.fields[l])}`;return i+"}"}(t.mapValue):xe(61005,{value:t})}function kh(t){switch(ui(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bd(t);return e?16+kh(e):16;case 5:return 2*t.stringValue.length;case 6:return li(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,a)=>i+kh(a),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return pi(r.fields,(a,l)=>{i+=a.length+kh(l)}),i}(t.mapValue);default:throw xe(13486,{value:t})}}function bx(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Um(t){return!!t&&"integerValue"in t}function oy(t){return!!t&&"arrayValue"in t}function Ax(t){return!!t&&"nullValue"in t}function Cx(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Nh(t){return!!t&&"mapValue"in t}function cj(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{})[MS])===null||n===void 0?void 0:n.stringValue)===FS}function au(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return pi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=au(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=au(t.arrayValue.values[n]);return e}return Object.assign({},t)}function hj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===uj}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Nh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=au(n)}setAll(e){let n=Ht.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const f=this.getFieldsMap(n);this.applyChanges(f,r,i),r={},i=[],n=h.popLast()}l?r[h.lastSegment()]=au(l):i.push(h.lastSegment())});const a=this.getFieldsMap(n);this.applyChanges(a,r,i)}delete(e){const n=this.field(e.popLast());Nh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Lr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Nh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){pi(n,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new vn(au(this.value))}}function US(t){const e=[];return pi(t.fields,(n,r)=>{const i=new Ht([n]);if(Nh(r)){const a=US(r.mapValue).fields;if(a.length===0)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Cn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e,n,r,i,a,l,h){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Jt(e,0,be.min(),be.min(),be.min(),vn.empty(),0)}static newFoundDocument(e,n,r,i){return new Jt(e,1,n,be.min(),r,i,0)}static newNoDocument(e,n){return new Jt(e,2,n,be.min(),be.min(),vn.empty(),0)}static newUnknownDocument(e,n){return new Jt(e,3,n,be.min(),be.min(),vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Jt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,n){this.position=e,this.inclusive=n}}function Rx(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const a=e[i],l=t.position[i];if(a.field.isKeyField()?r=ve.comparator(ve.fromName(l.referenceValue),n.key):r=Da(l,n.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function Px(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Lr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,n="asc"){this.field=e,this.dir=n}}function dj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{}class xt extends BS{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new pj(e,n,r):n==="array-contains"?new yj(e,r):n==="in"?new vj(e,r):n==="not-in"?new _j(e,r):n==="array-contains-any"?new wj(e,r):new xt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new mj(e,r):new gj(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Da(n,this.value)):n!==null&&ui(this.value)===ui(n)&&this.matchesComparison(Da(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class dr extends BS{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new dr(e,n)}matches(e){return $S(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function $S(t){return t.op==="and"}function zS(t){return fj(t)&&$S(t)}function fj(t){for(const e of t.filters)if(e instanceof dr)return!1;return!0}function Bm(t){if(t instanceof xt)return t.field.canonicalString()+t.op.toString()+Oa(t.value);if(zS(t))return t.filters.map(e=>Bm(e)).join(",");{const e=t.filters.map(n=>Bm(n)).join(",");return`${t.op}(${e})`}}function HS(t,e){return t instanceof xt?function(r,i){return i instanceof xt&&r.op===i.op&&r.field.isEqual(i.field)&&Lr(r.value,i.value)}(t,e):t instanceof dr?function(r,i){return i instanceof dr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((a,l,h)=>a&&HS(l,i.filters[h]),!0):!1}(t,e):void xe(19439)}function WS(t){return t instanceof xt?function(n){return`${n.field.canonicalString()} ${n.op} ${Oa(n.value)}`}(t):t instanceof dr?function(n){return n.op.toString()+" {"+n.getFilters().map(WS).join(" ,")+"}"}(t):"Filter"}class pj extends xt{constructor(e,n,r){super(e,n,r),this.key=ve.fromName(r.referenceValue)}matches(e){const n=ve.comparator(e.key,this.key);return this.matchesComparison(n)}}class mj extends xt{constructor(e,n){super(e,"in",n),this.keys=qS("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class gj extends xt{constructor(e,n){super(e,"not-in",n),this.keys=qS("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function qS(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ve.fromName(r.referenceValue))}class yj extends xt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return oy(n)&&bu(n.arrayValue,this.value)}}class vj extends xt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&bu(this.value.arrayValue,n)}}class _j extends xt{constructor(e,n){super(e,"not-in",n)}matches(e){if(bu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!bu(this.value.arrayValue,n)}}class wj extends xt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!oy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>bu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(e,n=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.Pe=null}}function kx(t,e=null,n=[],r=[],i=null,a=null,l=null){return new xj(t,e,n,r,i,a,l)}function ay(t){const e=Ce(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Bm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(a){return a.field.canonicalString()+a.dir}(r)).join(","),Id(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Oa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Oa(r)).join(",")),e.Pe=n}return e.Pe}function ly(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!dj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!HS(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Px(t.startAt,e.startAt)&&Px(t.endAt,e.endAt)}function $m(t){return ve.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n=null,r=[],i=[],a=null,l="F",h=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=f,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function Tj(t,e,n,r,i,a,l,h){return new Ka(t,e,n,r,i,a,l,h)}function uy(t){return new Ka(t)}function Nx(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function KS(t){return t.collectionGroup!==null}function lu(t){const e=Ce(t);if(e.Te===null){e.Te=[];const n=new Set;for(const a of e.explicitOrderBy)e.Te.push(a),n.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new kt(Ht.comparator);return l.filters.forEach(f=>{f.getFlattenedFilters().forEach(p=>{p.isInequality()&&(h=h.add(p.field))})}),h})(e).forEach(a=>{n.has(a.canonicalString())||a.isKeyField()||e.Te.push(new Au(a,r))}),n.has(Ht.keyField().canonicalString())||e.Te.push(new Au(Ht.keyField(),r))}return e.Te}function Vr(t){const e=Ce(t);return e.Ie||(e.Ie=Ej(e,lu(t))),e.Ie}function Ej(t,e){if(t.limitType==="F")return kx(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const a=i.dir==="desc"?"asc":"desc";return new Au(i.field,a)});const n=t.endAt?new Zh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Zh(t.startAt.position,t.startAt.inclusive):null;return kx(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function zm(t,e){const n=t.filters.concat([e]);return new Ka(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ed(t,e,n){return new Ka(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ad(t,e){return ly(Vr(t),Vr(e))&&t.limitType===e.limitType}function GS(t){return`${ay(Vr(t))}|lt:${t.limitType}`}function ga(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>WS(i)).join(", ")}]`),Id(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Oa(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Oa(i)).join(",")),`Target(${r})`}(Vr(t))}; limitType=${t.limitType})`}function Cd(t,e){return e.isFoundDocument()&&function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):ve.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)}(t,e)&&function(r,i){for(const a of lu(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(l,h,f){const p=Rx(l,h,f);return l.inclusive?p<=0:p<0}(r.startAt,lu(r),i)||r.endAt&&!function(l,h,f){const p=Rx(l,h,f);return l.inclusive?p>=0:p>0}(r.endAt,lu(r),i))}(t,e)}function Sj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function QS(t){return(e,n)=>{let r=!1;for(const i of lu(t)){const a=Ij(i,e,n);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function Ij(t,e,n){const r=t.field.isKeyField()?ve.comparator(e.key,n.key):function(a,l,h){const f=l.data.field(a),p=h.data.field(a);return f!==null&&p!==null?Da(f,p):xe(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return xe(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){pi(this.inner,(n,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return NS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj=new at(ve.comparator);function ps(){return bj}const XS=new at(ve.comparator);function Xl(...t){let e=XS;for(const n of t)e=e.insert(n.key,n);return e}function YS(t){let e=XS;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Qi(){return uu()}function JS(){return uu()}function uu(){return new go(t=>t.toString(),(t,e)=>t.isEqual(e))}const Aj=new at(ve.comparator),Cj=new kt(ve.comparator);function Oe(...t){let e=Cj;for(const n of t)e=e.add(n);return e}const Rj=new kt(ke);function Pj(){return Rj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xh(e)?"-0":e}}function ZS(t){return{integerValue:""+t}}function kj(t,e){return sj(e)?ZS(e):cy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rd{constructor(){this._=void 0}}function Nj(t,e,n){return t instanceof Cu?function(i,a){const l={fields:{[OS]:{stringValue:DS},[LS]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&iy(a)&&(a=bd(a)),a&&(l.fields[jS]=a),{mapValue:l}}(n,e):t instanceof ja?tI(t,e):t instanceof La?nI(t,e):function(i,a){const l=eI(i,a),h=Vx(l)+Vx(i.Ee);return Um(l)&&Um(i.Ee)?ZS(h):cy(i.serializer,h)}(t,e)}function Vj(t,e,n){return t instanceof ja?tI(t,e):t instanceof La?nI(t,e):n}function eI(t,e){return t instanceof td?function(r){return Um(r)||function(a){return!!a&&"doubleValue"in a}(r)}(e)?e:{integerValue:0}:null}class Cu extends Rd{}class ja extends Rd{constructor(e){super(),this.elements=e}}function tI(t,e){const n=rI(e);for(const r of t.elements)n.some(i=>Lr(i,r))||n.push(r);return{arrayValue:{values:n}}}class La extends Rd{constructor(e){super(),this.elements=e}}function nI(t,e){let n=rI(e);for(const r of t.elements)n=n.filter(i=>!Lr(i,r));return{arrayValue:{values:n}}}class td extends Rd{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function Vx(t){return gt(t.integerValue||t.doubleValue)}function rI(t){return oy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e,n){this.field=e,this.transform=n}}function Dj(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ja&&i instanceof ja||r instanceof La&&i instanceof La?Va(r.elements,i.elements,Lr):r instanceof td&&i instanceof td?Lr(r.Ee,i.Ee):r instanceof Cu&&i instanceof Cu}(t.transform,e.transform)}class Oj{constructor(e,n){this.version=e,this.transformResults=n}}class cr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new cr}static exists(e){return new cr(void 0,e)}static updateTime(e){return new cr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Pd{}function sI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new dy(t.key,cr.none()):new Bu(t.key,t.data,cr.none());{const n=t.data,r=vn.empty();let i=new kt(Ht.comparator);for(let a of e.fields)if(!i.has(a)){let l=n.field(a);l===null&&a.length>1&&(a=a.popLast(),l=n.field(a)),l===null?r.delete(a):r.set(a,l),i=i.add(a)}return new mi(t.key,r,new Cn(i.toArray()),cr.none())}}function jj(t,e,n){t instanceof Bu?function(i,a,l){const h=i.value.clone(),f=Ox(i.fieldTransforms,a,l.transformResults);h.setAll(f),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof mi?function(i,a,l){if(!Vh(i.precondition,a))return void a.convertToUnknownDocument(l.version);const h=Ox(i.fieldTransforms,a,l.transformResults),f=a.data;f.setAll(iI(i)),f.setAll(h),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()}(t,e,n):function(i,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function cu(t,e,n,r){return t instanceof Bu?function(a,l,h,f){if(!Vh(a.precondition,l))return h;const p=a.value.clone(),g=jx(a.fieldTransforms,f,l);return p.setAll(g),l.convertToFoundDocument(l.version,p).setHasLocalMutations(),null}(t,e,n,r):t instanceof mi?function(a,l,h,f){if(!Vh(a.precondition,l))return h;const p=jx(a.fieldTransforms,f,l),g=l.data;return g.setAll(iI(a)),g.setAll(p),l.convertToFoundDocument(l.version,g).setHasLocalMutations(),h===null?null:h.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(w=>w.field))}(t,e,n,r):function(a,l,h){return Vh(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function Lj(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),a=eI(r.transform,i||null);a!=null&&(n===null&&(n=vn.empty()),n.set(r.field,a))}return n||null}function Dx(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Va(r,i,(a,l)=>Dj(a,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Bu extends Pd{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class mi extends Pd{constructor(e,n,r,i,a=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function iI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Ox(t,e,n){const r=new Map;We(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const a=t[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,Vj(l,h,n[i]))}return r}function jx(t,e,n){const r=new Map;for(const i of t){const a=i.transform,l=n.data.field(i.field);r.set(i.field,Nj(a,l,e))}return r}class dy extends Pd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Mj extends Pd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&jj(a,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=cu(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=cu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=JS();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=n.has(i.key)?null:h;const f=sI(l,h);f!==null&&r.set(i.key,f),l.isValidDocument()||l.convertToNoDocument(be.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Oe())}isEqual(e){return this.batchId===e.batchId&&Va(this.mutations,e.mutations,(n,r)=>Dx(n,r))&&Va(this.baseMutations,e.baseMutations,(n,r)=>Dx(n,r))}}class fy{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){We(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return Aj}();const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new fy(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t,Fe;function $j(t){switch(t){case Z.OK:return xe(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return xe(15467,{code:t})}}function oI(t){if(t===void 0)return fs("GRPC error has no .code"),Z.UNKNOWN;switch(t){case _t.OK:return Z.OK;case _t.CANCELLED:return Z.CANCELLED;case _t.UNKNOWN:return Z.UNKNOWN;case _t.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case _t.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case _t.INTERNAL:return Z.INTERNAL;case _t.UNAVAILABLE:return Z.UNAVAILABLE;case _t.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case _t.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case _t.NOT_FOUND:return Z.NOT_FOUND;case _t.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case _t.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case _t.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case _t.ABORTED:return Z.ABORTED;case _t.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case _t.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case _t.DATA_LOSS:return Z.DATA_LOSS;default:return xe(39323,{code:t})}}(Fe=_t||(_t={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zj=new Zs([4294967295,4294967295],0);function Lx(t){const e=CS().encode(t),n=new wS;return n.update(e),new Uint8Array(n.digest())}function Mx(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Zs([n,r],0),new Zs([i,a],0)]}class py{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Yl(`Invalid padding: ${n}`);if(r<0)throw new Yl(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Yl(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Yl(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=Zs.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(Zs.fromNumber(r)));return i.compare(zj)===1&&(i=new Zs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=Lx(e),[r,i]=Mx(n);for(let a=0;a<this.hashCount;a++){const l=this.pe(r,i,a);if(!this.ye(l))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new py(a,i,n);return r.forEach(h=>l.insert(h)),l}insert(e){if(this.fe===0)return;const n=Lx(e),[r,i]=Mx(n);for(let a=0;a<this.hashCount;a++){const l=this.pe(r,i,a);this.we(l)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Yl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,n,r,i,a){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,$u.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new kd(be.min(),i,new at(ke),ps(),Oe())}}class $u{constructor(e,n,r,i,a){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new $u(r,n,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class aI{constructor(e,n){this.targetId=e,this.De=n}}class lI{constructor(e,n,r=Wt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Fx{constructor(){this.ve=0,this.Ce=Ux(),this.Fe=Wt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Oe(),n=Oe(),r=Oe();return this.Ce.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:xe(38017,{changeType:a})}}),new $u(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=Ux()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,We(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class Hj{constructor(e){this.We=e,this.Ge=new Map,this.ze=ps(),this.je=gh(),this.Je=gh(),this.He=new at(ke)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:xe(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const a=i.target;if($m(a))if(r===0){const l=new ve(a.path);this.Xe(n,l,Jt.newNoDocument(l,be.min()))}else We(r===1,20013,{expectedCount:r});else{const l=this.ot(n);if(l!==r){const h=this._t(e),f=h?this.ut(h,e,l):1;if(f!==0){this.rt(n);const p=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,p)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=n;let l,h;try{l=li(r).toUint8Array()}catch(f){if(f instanceof VS)return ii("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{h=new py(l,i,a)}catch(f){return ii(f instanceof Yl?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return h.fe===0?null:h}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(a=>{const l=this.We.lt(),h=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(h)||(this.Xe(n,a,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((a,l)=>{const h=this.st(l);if(h){if(a.current&&$m(h.target)){const f=new ve(h.target.path);this.Tt(f).has(l)||this.It(l,f)||this.Xe(l,f,Jt.newNoDocument(f,e))}a.Ne&&(n.set(l,a.Le()),a.ke())}});let r=Oe();this.Je.forEach((a,l)=>{let h=!0;l.forEachWhile(f=>{const p=this.st(f);return!p||p.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(a))}),this.ze.forEach((a,l)=>l.setReadTime(e));const i=new kd(e,n,this.He,this.ze,r);return this.ze=ps(),this.je=gh(),this.Je=gh(),this.He=new at(ke),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new Fx,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new kt(ke),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new kt(ke),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||de("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new Fx),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function gh(){return new at(ve.comparator)}function Ux(){return new at(ve.comparator)}const Wj={asc:"ASCENDING",desc:"DESCENDING"},qj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kj={and:"AND",or:"OR"};class Gj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Hm(t,e){return t.useProto3Json||Id(e)?e:{value:e}}function nd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uI(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Qj(t,e){return nd(t,e.toTimestamp())}function Dr(t){return We(!!t,49232),be.fromTimestamp(function(n){const r=ai(n);return new et(r.seconds,r.nanos)}(t))}function my(t,e){return Wm(t,e).canonicalString()}function Wm(t,e){const n=function(i){return new Ye(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function cI(t){const e=Ye.fromString(t);return We(mI(e),10190,{key:e.toString()}),e}function qm(t,e){return my(t.databaseId,e.path)}function Wp(t,e){const n=cI(e);if(n.get(1)!==t.databaseId.projectId)throw new ce(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ce(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ve(dI(n))}function hI(t,e){return my(t.databaseId,e)}function Xj(t){const e=cI(t);return e.length===4?Ye.emptyPath():dI(e)}function Km(t){return new Ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function dI(t){return We(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Bx(t,e,n){return{name:qm(t,e),fields:n.value.mapValue.fields}}function Yj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:xe(39313,{state:p})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=function(p,g){return p.useProto3Json?(We(g===void 0||typeof g=="string",58123),Wt.fromBase64String(g||"")):(We(g===void 0||g instanceof Buffer||g instanceof Uint8Array,16193),Wt.fromUint8Array(g||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(p){const g=p.code===void 0?Z.UNKNOWN:oI(p.code);return new ce(g,p.message||"")}(l);n=new lI(r,i,a,h||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Wp(t,r.document.name),a=Dr(r.document.updateTime),l=r.document.createTime?Dr(r.document.createTime):be.min(),h=new vn({mapValue:{fields:r.document.fields}}),f=Jt.newFoundDocument(i,a,l,h),p=r.targetIds||[],g=r.removedTargetIds||[];n=new Dh(p,g,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Wp(t,r.document),a=r.readTime?Dr(r.readTime):be.min(),l=Jt.newNoDocument(i,a),h=r.removedTargetIds||[];n=new Dh([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Wp(t,r.document),a=r.removedTargetIds||[];n=new Dh([],a,i,null)}else{if(!("filter"in e))return xe(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,l=new Bj(i,a),h=r.targetId;n=new aI(h,l)}}return n}function Jj(t,e){let n;if(e instanceof Bu)n={update:Bx(t,e.key,e.value)};else if(e instanceof dy)n={delete:qm(t,e.key)};else if(e instanceof mi)n={update:Bx(t,e.key,e.data),updateMask:aL(e.fieldMask)};else{if(!(e instanceof Mj))return xe(16599,{Rt:e.type});n={verify:qm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(a,l){const h=l.transform;if(h instanceof Cu)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof ja)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof La)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof td)return{fieldPath:l.field.canonicalString(),increment:h.Ee};throw xe(20930,{transform:l.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,a){return a.updateTime!==void 0?{updateTime:Qj(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:xe(27497)}(t,e.precondition)),n}function Zj(t,e){return t&&t.length>0?(We(e!==void 0,14353),t.map(n=>function(i,a){let l=i.updateTime?Dr(i.updateTime):Dr(a);return l.isEqual(be.min())&&(l=Dr(a)),new Oj(l,i.transformResults||[])}(n,e))):[]}function eL(t,e){return{documents:[hI(t,e.path)]}}function tL(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=hI(t,i);const a=function(p){if(p.length!==0)return pI(dr.create(p,"and"))}(e.filters);a&&(n.structuredQuery.where=a);const l=function(p){if(p.length!==0)return p.map(g=>function(T){return{field:ya(T.field),direction:sL(T.dir)}}(g))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=Hm(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{Vt:n,parent:i}}function nL(t){let e=Xj(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){We(r===1,65062);const g=n.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let a=[];n.where&&(a=function(w){const T=fI(w);return T instanceof dr&&zS(T)?T.getFilters():[T]}(n.where));let l=[];n.orderBy&&(l=function(w){return w.map(T=>function(V){return new Au(va(V.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction))}(T))}(n.orderBy));let h=null;n.limit&&(h=function(w){let T;return T=typeof w=="object"?w.value:w,Id(T)?null:T}(n.limit));let f=null;n.startAt&&(f=function(w){const T=!!w.before,C=w.values||[];return new Zh(C,T)}(n.startAt));let p=null;return n.endAt&&(p=function(w){const T=!w.before,C=w.values||[];return new Zh(C,T)}(n.endAt)),Tj(e,i,l,a,h,"F",f,p)}function rL(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function fI(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=va(n.unaryFilter.field);return xt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=va(n.unaryFilter.field);return xt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=va(n.unaryFilter.field);return xt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=va(n.unaryFilter.field);return xt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}}(t):t.fieldFilter!==void 0?function(n){return xt.create(va(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return dr.create(n.compositeFilter.filters.map(r=>fI(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return xe(1026)}}(n.compositeFilter.op))}(t):xe(30097,{filter:t})}function sL(t){return Wj[t]}function iL(t){return qj[t]}function oL(t){return Kj[t]}function ya(t){return{fieldPath:t.canonicalString()}}function va(t){return Ht.fromServerFormat(t.fieldPath)}function pI(t){return t instanceof xt?function(n){if(n.op==="=="){if(Cx(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NAN"}};if(Ax(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Cx(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NOT_NAN"}};if(Ax(n.value))return{unaryFilter:{field:ya(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ya(n.field),op:iL(n.op),value:n.value}}}(t):t instanceof dr?function(n){const r=n.getFilters().map(i=>pI(i));return r.length===1?r[0]:{compositeFilter:{op:oL(n.op),filters:r}}}(t):xe(54877,{filter:t})}function aL(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function mI(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,n,r,i,a=be.min(),l=be.min(),h=Wt.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=f}withSequenceNumber(e){return new Qs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e){this.gt=e}}function uL(t){const e=nL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ed(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(){this.Dn=new hL}addToCollectionParentIndex(e,n){return this.Dn.add(n),te.resolve()}getCollectionParents(e,n){return te.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return te.resolve()}deleteFieldIndex(e,n){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,n){return te.resolve()}getDocumentsMatchingTarget(e,n){return te.resolve(null)}getIndexType(e,n){return te.resolve(0)}getFieldIndexes(e,n){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,n){return te.resolve(oi.min())}getMinOffsetFromCollectionGroup(e,n){return te.resolve(oi.min())}updateCollectionGroup(e,n,r){return te.resolve()}updateIndexEntries(e,n){return te.resolve()}}class hL{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new kt(Ye.comparator),a=!i.has(r);return this.index[n]=i.add(r),a}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new kt(Ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gI=41943040;class yn{static withCacheSize(e){return new yn(e,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yn.DEFAULT_COLLECTION_PERCENTILE=10,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yn.DEFAULT=new yn(gI,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yn.DISABLED=new yn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Ma(0)}static ur(){return new Ma(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zx="LruGarbageCollector",dL=1048576;function Hx([t,e],[n,r]){const i=ke(t,n);return i===0?ke(e,r):i}class fL{constructor(e){this.Tr=e,this.buffer=new kt(Hx),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Hx(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class pL{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){de(zx,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){qa(n)?de(zx,"Ignoring IndexedDB error during garbage collection: ",n):await Wa(n)}await this.Rr(3e5)})}}class mL{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return te.resolve(Sd.ue);const r=new fL(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve($x)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$x):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,a,l,h,f,p;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),i=this.params.maximumSequenceNumbersToCollect):i=w,l=Date.now(),this.nthSequenceNumber(e,i))).next(w=>(r=w,h=Date.now(),this.removeTargets(e,r,n))).next(w=>(a=w,f=Date.now(),this.removeOrphanedDocuments(e,r))).next(w=>(p=Date.now(),ma()<=De.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-g}ms
	Determined least recently used ${i} in `+(h-l)+`ms
	Removed ${a} targets in `+(f-h)+`ms
	Removed ${w} documents in `+(p-f)+`ms
Total Duration: ${p-g}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:w})))}}function gL(t,e){return new mL(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(){this.changes=new go(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Jt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?te.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&cu(r.mutation,i,Cn.empty(),et.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Oe()){const i=Qi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(a=>{let l=Xl();return a.forEach((h,f)=>{l=l.insert(h,f.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const r=Qi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Oe()))}populateOverlays(e,n,r){const i=[];return r.forEach(a=>{n.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,r,i){let a=ps();const l=uu(),h=function(){return uu()}();return n.forEach((f,p)=>{const g=r.get(p.key);i.has(p.key)&&(g===void 0||g.mutation instanceof mi)?a=a.insert(p.key,p):g!==void 0?(l.set(p.key,g.mutation.getFieldMask()),cu(g.mutation,p,g.mutation.getFieldMask(),et.now())):l.set(p.key,Cn.empty())}),this.recalculateAndSaveOverlays(e,a).next(f=>(f.forEach((p,g)=>l.set(p,g)),n.forEach((p,g)=>{var w;return h.set(p,new vL(g,(w=l.get(p))!==null&&w!==void 0?w:null))}),h))}recalculateAndSaveOverlays(e,n){const r=uu();let i=new at((l,h)=>l-h),a=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(f=>{const p=n.get(f);if(p===null)return;let g=r.get(f)||Cn.empty();g=h.applyToLocalView(p,g),r.set(f,g);const w=(i.get(h.batchId)||Oe()).add(f);i=i.insert(h.batchId,w)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const f=h.getNext(),p=f.key,g=f.value,w=JS();g.forEach(T=>{if(!a.has(T)){const C=sI(n.get(T),r.get(T));C!==null&&w.set(T,C),a=a.add(T)}}),l.push(this.documentOverlayCache.saveOverlays(e,p,w))}return te.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(l){return ve.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):KS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-a.size):te.resolve(Qi());let h=Eu,f=a;return l.next(p=>te.forEach(p,(g,w)=>(h<w.largestBatchId&&(h=w.largestBatchId),a.get(g)?te.resolve():this.remoteDocumentCache.getEntry(e,g).next(T=>{f=f.insert(g,T)}))).next(()=>this.populateOverlays(e,p,a)).next(()=>this.computeViews(e,f,p,Oe())).next(g=>({batchId:h,changes:YS(g)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ve(n)).next(r=>{let i=Xl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const a=n.collectionGroup;let l=Xl();return this.indexManager.getCollectionParents(e,a).next(h=>te.forEach(h,f=>{const p=function(w,T){return new Ka(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(n,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,p,r,i).next(g=>{g.forEach((w,T)=>{l=l.insert(w,T)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,a,i))).next(l=>{a.forEach((f,p)=>{const g=p.getKey();l.get(g)===null&&(l=l.insert(g,Jt.newInvalidDocument(g)))});let h=Xl();return l.forEach((f,p)=>{const g=a.get(f);g!==void 0&&cu(g.mutation,p,Cn.empty(),et.now()),Cd(n,p)&&(h=h.insert(f,p))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return te.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Dr(i.createTime)}}(n)),te.resolve()}getNamedQuery(e,n){return te.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:uL(i.bundledQuery),readTime:Dr(i.readTime)}}(n)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xL{constructor(){this.overlays=new at(ve.comparator),this.kr=new Map}getOverlay(e,n){return te.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Qi();return te.forEach(n,i=>this.getOverlay(e,i).next(a=>{a!==null&&r.set(i,a)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,a)=>{this.wt(e,n,a)}),te.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.kr.delete(r)),te.resolve()}getOverlaysForCollection(e,n,r){const i=Qi(),a=n.length+1,l=new ve(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const f=h.getNext().value,p=f.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===a&&f.largestBatchId>r&&i.set(f.getKey(),f)}return te.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let a=new at((p,g)=>p-g);const l=this.overlays.getIterator();for(;l.hasNext();){const p=l.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let g=a.get(p.largestBatchId);g===null&&(g=Qi(),a=a.insert(p.largestBatchId,g)),g.set(p.getKey(),p)}}const h=Qi(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((p,g)=>h.set(p,g)),!(h.size()>=i)););return te.resolve(h)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Uj(n,r));let a=this.kr.get(n);a===void 0&&(a=Oe(),this.kr.set(n,a)),this.kr.set(n,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(){this.qr=new kt(Lt.Qr),this.$r=new kt(Lt.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new Lt(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Lt(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new ve(new Ye([])),r=new Lt(n,e),i=new Lt(n,e+1),a=[];return this.$r.forEachInRange([r,i],l=>{this.Wr(l),a.push(l.key)}),a}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new ve(new Ye([])),r=new Lt(n,e),i=new Lt(n,e+1);let a=Oe();return this.$r.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const n=new Lt(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Lt{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return ve.comparator(e.key,n.key)||ke(e.Hr,n.Hr)}static Ur(e,n){return ke(e.Hr,n.Hr)||ve.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new kt(Lt.Qr)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const a=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new Fj(a,n,r,i);this.mutationQueue.push(l);for(const h of i)this.Yr=this.Yr.add(new Lt(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return te.resolve(l)}lookupMutationBatch(e,n){return te.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),a=i<0?0:i;return te.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?sy:this.er-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Lt(n,0),i=new Lt(n,Number.POSITIVE_INFINITY),a=[];return this.Yr.forEachInRange([r,i],l=>{const h=this.Zr(l.Hr);a.push(h)}),te.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new kt(ke);return n.forEach(i=>{const a=new Lt(i,0),l=new Lt(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([a,l],h=>{r=r.add(h.Hr)})}),te.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let a=r;ve.isDocumentKey(a)||(a=a.child(""));const l=new Lt(new ve(a),0);let h=new kt(ke);return this.Yr.forEachWhile(f=>{const p=f.key.path;return!!r.isPrefixOf(p)&&(p.length===i&&(h=h.add(f.Hr)),!0)},l),te.resolve(this.ei(h))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){We(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return te.forEach(n.mutations,i=>{const a=new Lt(i.key,n.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new Lt(n,0),i=this.Yr.firstAfterOrEqual(r);return te.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e){this.ni=e,this.docs=function(){return new at(ve.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),a=i?i.size:0,l=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return te.resolve(r?r.document.mutableCopy():Jt.newInvalidDocument(n))}getEntries(e,n){let r=ps();return n.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Jt.newInvalidDocument(i))}),te.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let a=ps();const l=n.path,h=new ve(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(h);for(;f.hasNext();){const{key:p,value:{document:g}}=f.getNext();if(!l.isPrefixOf(p.path))break;p.path.length>l.length+1||ej(ZO(g),r)<=0||(i.has(g.key)||Cd(n,g))&&(a=a.insert(g.key,g.mutableCopy()))}return te.resolve(a)}getAllFromCollectionGroup(e,n,r,i){xe(9500)}ri(e,n){return te.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new IL(this)}getSize(e){return te.resolve(this.size)}}class IL extends yL{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),te.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e){this.persistence=e,this.ii=new go(n=>ay(n),ly),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.si=0,this.oi=new gy,this.targetCount=0,this._i=Ma.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),te.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new Ma(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,te.resolve()}updateTargetData(e,n){return this.hr(n),te.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,n,r){let i=0;const a=[];return this.ii.forEach((l,h)=>{h.sequenceNumber<=n&&r.get(h.targetId)===null&&(this.ii.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),te.waitFor(a).next(()=>i)}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return te.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),te.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,a=[];return i&&n.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),te.waitFor(a)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),te.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return te.resolve(r)}containsKey(e,n){return te.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,n){this.ai={},this.overlays={},this.ui=new Sd(0),this.ci=!1,this.ci=!0,this.li=new TL,this.referenceDelegate=e(this),this.hi=new bL(this),this.indexManager=new cL,this.remoteDocumentCache=function(i){return new SL(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new lL(n),this.Ti=new wL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new xL,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new EL(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){de("MemoryPersistence","Starting transaction:",e);const i=new AL(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(a=>this.referenceDelegate.di(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ei(e,n){return te.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class AL extends nj{constructor(e){super(),this.currentSequenceNumber=e}}class yy{constructor(e){this.persistence=e,this.Ai=new gy,this.Ri=null}static Vi(e){return new yy(e)}get mi(){if(this.Ri)return this.Ri;throw xe(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),te.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),te.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(a=>this.mi.add(a.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.mi,r=>{const i=ve.fromPath(r);return this.fi(e,i).next(a=>{a||n.removeEntry(i,be.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return te.or([()=>te.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class rd{constructor(e,n){this.persistence=e,this.gi=new go(r=>ij(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=gL(this,n)}static Vi(e,n){return new rd(e,n)}Ii(){}di(e){return te.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return te.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(a=>a?te.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ri(e,l=>this.Sr(e,l,n).next(h=>{h||(r++,a.removeEntry(l,be.min()))})).next(()=>a.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),te.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),te.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),te.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=kh(e.data.value)),n}Sr(e,n,r){return te.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return te.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=Oe(),i=Oe();for(const a of n.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new vy(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return wV()?8:rj(en())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const a={result:null};return this.ps(e,n).next(l=>{a.result=l}).next(()=>{if(!a.result)return this.ys(e,n,i,r).next(l=>{a.result=l})}).next(()=>{if(a.result)return;const l=new CL;return this.ws(e,n,l).next(h=>{if(a.result=h,this.Rs)return this.Ss(e,n,l,h.size)})}).next(()=>a.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(ma()<=De.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",ga(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),te.resolve()):(ma()<=De.DEBUG&&de("QueryEngine","Query:",ga(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(ma()<=De.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",ga(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vr(n))):te.resolve())}ps(e,n){if(Nx(n))return te.resolve(null);let r=Vr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ed(n,null,"F"),r=Vr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=Oe(...a);return this.gs.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(f=>{const p=this.bs(n,h);return this.Ds(n,p,l,f.readTime)?this.ps(e,ed(n,null,"F")):this.vs(e,p,n,f)}))})))}ys(e,n,r,i){return Nx(n)||i.isEqual(be.min())?te.resolve(null):this.gs.getDocuments(e,r).next(a=>{const l=this.bs(n,a);return this.Ds(n,l,r,i)?te.resolve(null):(ma()<=De.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ga(n)),this.vs(e,l,n,JO(i,Eu)).next(h=>h))})}bs(e,n){let r=new kt(QS(e));return n.forEach((i,a)=>{Cd(e,a)&&(r=r.add(a))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const a=e.limitType==="F"?n.last():n.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ws(e,n,r){return ma()<=De.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",ga(n)),this.gs.getDocumentsMatchingQuery(e,n,oi.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(a=>(n.forEach(l=>{a=a.insert(l.key,l)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y="LocalStore",PL=3e8;class kL{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new at(ke),this.Ms=new go(a=>ay(a),ly),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _L(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function NL(t,e,n,r){return new kL(t,e,n,r)}async function vI(t,e){const n=Ce(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],h=[];let f=Oe();for(const p of i){l.push(p.batchId);for(const g of p.mutations)f=f.add(g.key)}for(const p of a){h.push(p.batchId);for(const g of p.mutations)f=f.add(g.key)}return n.localDocuments.getDocuments(r,f).next(p=>({Bs:p,removedBatchIds:l,addedBatchIds:h}))})})}function VL(t,e){const n=Ce(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=n.Os.newChangeBuffer({trackRemovals:!0});return function(h,f,p,g){const w=p.batch,T=w.keys();let C=te.resolve();return T.forEach(V=>{C=C.next(()=>g.getEntry(f,V)).next(O=>{const R=p.docVersions.get(V);We(R!==null,48541),O.version.compareTo(R)<0&&(w.applyToRemoteDocument(O,p),O.isValidDocument()&&(O.setReadTime(p.commitVersion),g.addEntry(O)))})}),C.next(()=>h.mutationQueue.removeMutationBatch(f,w))}(n,r,e,a).next(()=>a.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let f=Oe();for(let p=0;p<h.mutationResults.length;++p)h.mutationResults[p].transformResults.length>0&&(f=f.add(h.batch.mutations[p].key));return f}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function _I(t){const e=Ce(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function DL(t,e){const n=Ce(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const h=[];e.targetChanges.forEach((g,w)=>{const T=i.get(w);if(!T)return;h.push(n.hi.removeMatchingKeys(a,g.removedDocuments,w).next(()=>n.hi.addMatchingKeys(a,g.addedDocuments,w)));let C=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(w)!==null?C=C.withResumeToken(Wt.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):g.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(g.resumeToken,r)),i=i.insert(w,C),function(O,R,L){return O.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=PL?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(T,C,g)&&h.push(n.hi.updateTargetData(a,C))});let f=ps(),p=Oe();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(a,g))}),h.push(OL(a,l,e.documentUpdates).next(g=>{f=g.Ls,p=g.ks})),!r.isEqual(be.min())){const g=n.hi.getLastRemoteSnapshotVersion(a).next(w=>n.hi.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(g)}return te.waitFor(h).next(()=>l.apply(a)).next(()=>n.localDocuments.getLocalViewOfDocuments(a,f,p)).next(()=>f)}).then(a=>(n.Fs=i,a))}function OL(t,e,n){let r=Oe(),i=Oe();return n.forEach(a=>r=r.add(a)),e.getEntries(t,r).next(a=>{let l=ps();return n.forEach((h,f)=>{const p=a.get(h);f.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(h)),f.isNoDocument()&&f.version.isEqual(be.min())?(e.removeEntry(h,f.readTime),l=l.insert(h,f)):!p.isValidDocument()||f.version.compareTo(p.version)>0||f.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(f),l=l.insert(h,f)):de(_y,"Ignoring outdated watch update for ",h,". Current version:",p.version," Watch version:",f.version)}),{Ls:l,ks:i}})}function jL(t,e){const n=Ce(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=sy),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function LL(t,e){const n=Ce(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(a=>a?(i=a,te.resolve(i)):n.hi.allocateTargetId(r).next(l=>(i=new Qs(e,l,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function Gm(t,e,n){const r=Ce(t),i=r.Fs.get(e),a=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i))}catch(l){if(!qa(l))throw l;de(_y,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function Wx(t,e,n){const r=Ce(t);let i=be.min(),a=Oe();return r.persistence.runTransaction("Execute query","readwrite",l=>function(f,p,g){const w=Ce(f),T=w.Ms.get(g);return T!==void 0?te.resolve(w.Fs.get(T)):w.hi.getTargetData(p,g)}(r,l,Vr(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(l,h.targetId).next(f=>{a=f})}).next(()=>r.Cs.getDocumentsMatchingQuery(l,e,n?i:be.min(),n?a:Oe())).next(h=>(ML(r,Sj(e),h),{documents:h,qs:a})))}function ML(t,e,n){let r=t.xs.get(e)||be.min();n.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),t.xs.set(e,r)}class qx{constructor(){this.activeTargetIds=Pj()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class FL{constructor(){this.Fo=new qx,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new qx,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx="ConnectivityMonitor";class Gx{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){de(Kx,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){de(Kx,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yh=null;function Qm(){return yh===null?yh=function(){return 268435456+Math.round(2147483648*Math.random())}():yh++,"0x"+yh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp="RestConnection",BL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $L{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===Yh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,a){const l=Qm(),h=this.Go(e,n.toUriEncodedString());de(qp,`Sending RPC '${e}' ${l}:`,h,r);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(f,i,a);const{host:p}=new URL(h),g=fi(p);return this.jo(e,h,f,r,g).then(w=>(de(qp,`Received RPC '${e}' ${l}: `,w),w),w=>{throw ii(qp,`RPC '${e}' ${l} failed with error: `,w,"url: ",h,"request:",r),w})}Jo(e,n,r,i,a,l){return this.Wo(e,n,r,i,a)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ha}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}Go(e,n){const r=BL[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class HL extends $L{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,a){const l=Qm();return new Promise((h,f)=>{const p=new xS;p.setWithCredentials(!0),p.listenOnce(TS.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Ph.NO_ERROR:const w=p.getResponseJson();de(Xt,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(w)),h(w);break;case Ph.TIMEOUT:de(Xt,`RPC '${e}' ${l} timed out`),f(new ce(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Ph.HTTP_ERROR:const T=p.getStatus();if(de(Xt,`RPC '${e}' ${l} failed with status:`,T,"response text:",p.getResponseText()),T>0){let C=p.getResponseJson();Array.isArray(C)&&(C=C[0]);const V=C?.error;if(V&&V.status&&V.message){const O=function(L){const U=L.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(U)>=0?U:Z.UNKNOWN}(V.status);f(new ce(O,V.message))}else f(new ce(Z.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new ce(Z.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{c_:e,streamId:l,l_:p.getLastErrorCode(),h_:p.getLastError()})}}finally{de(Xt,`RPC '${e}' ${l} completed.`)}});const g=JSON.stringify(i);de(Xt,`RPC '${e}' ${l} sending request:`,i),p.send(n,"POST",g,r,15)})}P_(e,n,r){const i=Qm(),a=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=IS(),h=SS(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.zo(f.initMessageHeaders,n,r),f.encodeInitMessageHeaders=!0;const g=a.join("");de(Xt,`Creating RPC '${e}' stream ${i}: ${g}`,f);const w=l.createWebChannel(g,f);this.T_(w);let T=!1,C=!1;const V=new zL({Ho:R=>{C?de(Xt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(T||(de(Xt,`Opening RPC '${e}' stream ${i} transport.`),w.open(),T=!0),de(Xt,`RPC '${e}' stream ${i} sending:`,R),w.send(R))},Yo:()=>w.close()}),O=(R,L,U)=>{R.listen(L,z=>{try{U(z)}catch(K){setTimeout(()=>{throw K},0)}})};return O(w,Ql.EventType.OPEN,()=>{C||(de(Xt,`RPC '${e}' stream ${i} transport opened.`),V.s_())}),O(w,Ql.EventType.CLOSE,()=>{C||(C=!0,de(Xt,`RPC '${e}' stream ${i} transport closed`),V.__(),this.I_(w))}),O(w,Ql.EventType.ERROR,R=>{C||(C=!0,ii(Xt,`RPC '${e}' stream ${i} transport errored. Name:`,R.name,"Message:",R.message),V.__(new ce(Z.UNAVAILABLE,"The operation could not be completed")))}),O(w,Ql.EventType.MESSAGE,R=>{var L;if(!C){const U=R.data[0];We(!!U,16349);const z=U,K=z?.error||((L=z[0])===null||L===void 0?void 0:L.error);if(K){de(Xt,`RPC '${e}' stream ${i} received error:`,K);const Q=K.status;let Y=function(A){const b=_t[A];if(b!==void 0)return oI(b)}(Q),N=K.message;Y===void 0&&(Y=Z.INTERNAL,N="Unknown error status: "+Q+" with message "+K.message),C=!0,V.__(new ce(Y,N)),w.close()}else de(Xt,`RPC '${e}' stream ${i} received:`,U),V.a_(U)}}),O(h,ES.STAT_EVENT,R=>{R.stat===Lm.PROXY?de(Xt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Lm.NOPROXY&&de(Xt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{V.o_()},0),V}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Kp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(t){return new Gj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,n,r=1e3,i=1.5,a=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=a,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&de("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx="PersistentStream";class xI{constructor(e,n,r,i,a,l,h,f){this.Fi=e,this.w_=r,this.S_=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=f,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new wI(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(fs(n.toString()),fs("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new ce(Z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return de(Qx,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(de(Qx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class WL extends xI{constructor(e,n,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,l),this.serializer=a}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=Yj(this.serializer,e),r=function(a){if(!("targetChange"in a))return be.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?be.min():l.readTime?Dr(l.readTime):be.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=Km(this.serializer),n.addTarget=function(a,l){let h;const f=l.target;if(h=$m(f)?{documents:eL(a,f)}:{query:tL(a,f).Vt},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=uI(a,l.resumeToken);const p=Hm(a,l.expectedCount);p!==null&&(h.expectedCount=p)}else if(l.snapshotVersion.compareTo(be.min())>0){h.readTime=nd(a,l.snapshotVersion.toTimestamp());const p=Hm(a,l.expectedCount);p!==null&&(h.expectedCount=p)}return h}(this.serializer,e);const r=rL(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=Km(this.serializer),n.removeTarget=e,this.k_(n)}}class qL extends xI{constructor(e,n,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,l),this.serializer=a}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return We(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,We(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){We(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=Zj(e.writeResults,e.commitTime),r=Dr(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=Km(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Jj(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{}class GL extends KL{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new ce(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Wo(e,Wm(n,r),i,a,l)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ce(Z.UNKNOWN,a.toString())})}Jo(e,n,r,i,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Jo(e,Wm(n,r),i,l,h,a)).catch(l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ce(Z.UNKNOWN,l.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class QL{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(fs(n),this._a=!1):de("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so="RemoteStore";class XL{constructor(e,n,r,i,a){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=a,this.Ea.xo(l=>{r.enqueueAndForget(async()=>{yo(this)&&(de(so,"Restarting streams for network reachability change."),await async function(f){const p=Ce(f);p.Ia.add(4),await zu(p),p.Aa.set("Unknown"),p.Ia.delete(4),await Vd(p)}(this))})}),this.Aa=new QL(r,i)}}async function Vd(t){if(yo(t))for(const e of t.da)await e(!0)}async function zu(t){for(const e of t.da)await e(!1)}function TI(t,e){const n=Ce(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),Ey(n)?Ty(n):Ga(n).x_()&&xy(n,e))}function wy(t,e){const n=Ce(t),r=Ga(n);n.Ta.delete(e),r.x_()&&EI(n,e),n.Ta.size===0&&(r.x_()?r.B_():yo(n)&&n.Aa.set("Unknown"))}function xy(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ga(t).H_(e)}function EI(t,e){t.Ra.$e(e),Ga(t).Y_(e)}function Ty(t){t.Ra=new Hj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Ga(t).start(),t.Aa.aa()}function Ey(t){return yo(t)&&!Ga(t).M_()&&t.Ta.size>0}function yo(t){return Ce(t).Ia.size===0}function SI(t){t.Ra=void 0}async function YL(t){t.Aa.set("Online")}async function JL(t){t.Ta.forEach((e,n)=>{xy(t,e)})}async function ZL(t,e){SI(t),Ey(t)?(t.Aa.la(e),Ty(t)):t.Aa.set("Unknown")}async function eM(t,e,n){if(t.Aa.set("Online"),e instanceof lI&&e.state===2&&e.cause)try{await async function(i,a){const l=a.cause;for(const h of a.targetIds)i.Ta.has(h)&&(await i.remoteSyncer.rejectListen(h,l),i.Ta.delete(h),i.Ra.removeTarget(h))}(t,e)}catch(r){de(so,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await sd(t,r)}else if(e instanceof Dh?t.Ra.Ye(e):e instanceof aI?t.Ra.it(e):t.Ra.et(e),!n.isEqual(be.min()))try{const r=await _I(t.localStore);n.compareTo(r)>=0&&await function(a,l){const h=a.Ra.Pt(l);return h.targetChanges.forEach((f,p)=>{if(f.resumeToken.approximateByteSize()>0){const g=a.Ta.get(p);g&&a.Ta.set(p,g.withResumeToken(f.resumeToken,l))}}),h.targetMismatches.forEach((f,p)=>{const g=a.Ta.get(f);if(!g)return;a.Ta.set(f,g.withResumeToken(Wt.EMPTY_BYTE_STRING,g.snapshotVersion)),EI(a,f);const w=new Qs(g.target,f,p,g.sequenceNumber);xy(a,w)}),a.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(r){de(so,"Failed to raise snapshot:",r),await sd(t,r)}}async function sd(t,e,n){if(!qa(e))throw e;t.Ia.add(1),await zu(t),t.Aa.set("Offline"),n||(n=()=>_I(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{de(so,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await Vd(t)})}function II(t,e){return e().catch(n=>sd(t,n,e))}async function Dd(t){const e=Ce(t),n=ci(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:sy;for(;tM(e);)try{const i=await jL(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,nM(e,i)}catch(i){await sd(e,i)}bI(e)&&AI(e)}function tM(t){return yo(t)&&t.Pa.length<10}function nM(t,e){t.Pa.push(e);const n=ci(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function bI(t){return yo(t)&&!ci(t).M_()&&t.Pa.length>0}function AI(t){ci(t).start()}async function rM(t){ci(t).na()}async function sM(t){const e=ci(t);for(const n of t.Pa)e.X_(n.mutations)}async function iM(t,e,n){const r=t.Pa.shift(),i=fy.from(r,e,n);await II(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Dd(t)}async function oM(t,e){e&&ci(t).Z_&&await async function(r,i){if(function(l){return $j(l)&&l!==Z.ABORTED}(i.code)){const a=r.Pa.shift();ci(r).N_(),await II(r,()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i)),await Dd(r)}}(t,e),bI(t)&&AI(t)}async function Xx(t,e){const n=Ce(t);n.asyncQueue.verifyOperationInProgress(),de(so,"RemoteStore received new credentials");const r=yo(n);n.Ia.add(3),await zu(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await Vd(n)}async function aM(t,e){const n=Ce(t);e?(n.Ia.delete(2),await Vd(n)):e||(n.Ia.add(2),await zu(n),n.Aa.set("Unknown"))}function Ga(t){return t.Va||(t.Va=function(n,r,i){const a=Ce(n);return a.ia(),new WL(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Zo:YL.bind(null,t),e_:JL.bind(null,t),n_:ZL.bind(null,t),J_:eM.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),Ey(t)?Ty(t):t.Aa.set("Unknown")):(await t.Va.stop(),SI(t))})),t.Va}function ci(t){return t.ma||(t.ma=function(n,r,i){const a=Ce(n);return a.ia(),new qL(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:rM.bind(null,t),n_:oM.bind(null,t),ea:sM.bind(null,t),ta:iM.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Dd(t)):(await t.ma.stop(),t.Pa.length>0&&(de(so,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,n,r,i,a){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new ei,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,a){const l=Date.now()+r,h=new Sy(e,n,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Iy(t,e){if(fs("AsyncQueue",`${e}: ${t}`),qa(t))return new ce(Z.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{static emptySet(e){return new Pa(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ve.comparator(n.key,r.key):(n,r)=>ve.comparator(n.key,r.key),this.keyedMap=Xl(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Pa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Pa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(){this.fa=new at(ve.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):xe(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class Fa{constructor(e,n,r,i,a,l,h,f,p){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=f,this.hasCachedResults=p}static fromInitialDocuments(e,n,r,i,a){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new Fa(e,n,Pa.emptySet(n),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ad(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class uM{constructor(){this.queries=Jx(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=Ce(n),a=i.queries;i.queries=Jx(),a.forEach((l,h)=>{for(const f of h.wa)f.onError(r)})})(this,new ce(Z.ABORTED,"Firestore shutting down"))}}function Jx(){return new go(t=>GS(t),Ad)}async function CI(t,e){const n=Ce(t);let r=3;const i=e.query;let a=n.queries.get(i);a?!a.Sa()&&e.ba()&&(r=2):(a=new lM,r=e.ba()?0:1);try{switch(r){case 0:a.ya=await n.onListen(i,!0);break;case 1:a.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(l){const h=Iy(l,`Initialization of query '${ga(e.query)}' failed`);return void e.onError(h)}n.queries.set(i,a),a.wa.push(e),e.va(n.onlineState),a.ya&&e.Ca(a.ya)&&by(n)}async function RI(t,e){const n=Ce(t),r=e.query;let i=3;const a=n.queries.get(r);if(a){const l=a.wa.indexOf(e);l>=0&&(a.wa.splice(l,1),a.wa.length===0?i=e.ba()?0:1:!a.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function cM(t,e){const n=Ce(t);let r=!1;for(const i of e){const a=i.query,l=n.queries.get(a);if(l){for(const h of l.wa)h.Ca(i)&&(r=!0);l.ya=i}}r&&by(n)}function hM(t,e,n){const r=Ce(t),i=r.queries.get(e);if(i)for(const a of i.wa)a.onError(n);r.queries.delete(e)}function by(t){t.Da.forEach(e=>{e.next()})}var Xm,Zx;(Zx=Xm||(Xm={})).Fa="default",Zx.Cache="cache";class PI{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Fa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=Fa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Xm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e){this.key=e}}class NI{constructor(e){this.key=e}}class dM{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Oe(),this.mutatedKeys=Oe(),this.Xa=QS(e),this.eu=new Pa(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new Yx,i=n?n.eu:this.eu;let a=n?n.mutatedKeys:this.mutatedKeys,l=i,h=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,w)=>{const T=i.get(g),C=Cd(this.query,w)?w:null,V=!!T&&this.mutatedKeys.has(T.key),O=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let R=!1;T&&C?T.data.isEqual(C.data)?V!==O&&(r.track({type:3,doc:C}),R=!0):this.iu(T,C)||(r.track({type:2,doc:C}),R=!0,(f&&this.Xa(C,f)>0||p&&this.Xa(C,p)<0)&&(h=!0)):!T&&C?(r.track({type:0,doc:C}),R=!0):T&&!C&&(r.track({type:1,doc:T}),R=!0,(f||p)&&(h=!0)),R&&(C?(l=l.add(C),a=O?a.add(g):a.delete(g)):(l=l.delete(g),a=a.delete(g)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const g=this.query.limitType==="F"?l.last():l.first();l=l.delete(g.key),a=a.delete(g.key),r.track({type:1,doc:g})}return{eu:l,ru:r,Ds:h,mutatedKeys:a}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const a=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const l=e.ru.pa();l.sort((g,w)=>function(C,V){const O=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{At:R})}};return O(C)-O(V)}(g.type,w.type)||this.Xa(g.doc,w.doc)),this.su(r),i=i!=null&&i;const h=n&&!i?this.ou():[],f=this.Za.size===0&&this.current&&!i?1:0,p=f!==this.Ya;return this.Ya=f,l.length!==0||p?{snapshot:new Fa(this.query,e.eu,a,l,e.mutatedKeys,f===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:h}:{_u:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new Yx,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Oe(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new NI(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new kI(r))}),n}uu(e){this.Ha=e.qs,this.Za=Oe();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return Fa.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Ay="SyncEngine";class fM{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class pM{constructor(e){this.key=e,this.lu=!1}}class mM{constructor(e,n,r,i,a,l){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.hu={},this.Pu=new go(h=>GS(h),Ad),this.Tu=new Map,this.Iu=new Set,this.du=new at(ve.comparator),this.Eu=new Map,this.Au=new gy,this.Ru={},this.Vu=new Map,this.mu=Ma.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function gM(t,e,n=!0){const r=MI(t);let i;const a=r.Pu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.cu()):i=await VI(r,e,n,!0),i}async function yM(t,e){const n=MI(t);await VI(n,e,!0,!1)}async function VI(t,e,n,r){const i=await LL(t.localStore,Vr(e)),a=i.targetId,l=t.sharedClientState.addLocalQueryTarget(a,n);let h;return r&&(h=await vM(t,e,a,l==="current",i.resumeToken)),t.isPrimaryClient&&n&&TI(t.remoteStore,i),h}async function vM(t,e,n,r,i){t.gu=(w,T,C)=>async function(O,R,L,U){let z=R.view.nu(L);z.Ds&&(z=await Wx(O.localStore,R.query,!1).then(({documents:N})=>R.view.nu(N,z)));const K=U&&U.targetChanges.get(R.targetId),Q=U&&U.targetMismatches.get(R.targetId)!=null,Y=R.view.applyChanges(z,O.isPrimaryClient,K,Q);return t1(O,R.targetId,Y._u),Y.snapshot}(t,w,T,C);const a=await Wx(t.localStore,e,!0),l=new dM(e,a.qs),h=l.nu(a.documents),f=$u.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),p=l.applyChanges(h,t.isPrimaryClient,f);t1(t,n,p._u);const g=new fM(e,n,l);return t.Pu.set(e,g),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),p.snapshot}async function _M(t,e,n){const r=Ce(t),i=r.Pu.get(e),a=r.Tu.get(i.targetId);if(a.length>1)return r.Tu.set(i.targetId,a.filter(l=>!Ad(l,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Gm(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&wy(r.remoteStore,i.targetId),Ym(r,i.targetId)}).catch(Wa)):(Ym(r,i.targetId),await Gm(r.localStore,i.targetId,!0))}async function wM(t,e){const n=Ce(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),wy(n.remoteStore,r.targetId))}async function xM(t,e,n){const r=CM(t);try{const i=await function(l,h){const f=Ce(l),p=et.now(),g=h.reduce((C,V)=>C.add(V.key),Oe());let w,T;return f.persistence.runTransaction("Locally write mutations","readwrite",C=>{let V=ps(),O=Oe();return f.Os.getEntries(C,g).next(R=>{V=R,V.forEach((L,U)=>{U.isValidDocument()||(O=O.add(L))})}).next(()=>f.localDocuments.getOverlayedDocuments(C,V)).next(R=>{w=R;const L=[];for(const U of h){const z=Lj(U,w.get(U.key).overlayedDocument);z!=null&&L.push(new mi(U.key,z,US(z.value.mapValue),cr.exists(!0)))}return f.mutationQueue.addMutationBatch(C,p,L,h)}).next(R=>{T=R;const L=R.applyToLocalDocumentSet(w,O);return f.documentOverlayCache.saveOverlays(C,R.batchId,L)})}).then(()=>({batchId:T.batchId,changes:YS(w)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(l,h,f){let p=l.Ru[l.currentUser.toKey()];p||(p=new at(ke)),p=p.insert(h,f),l.Ru[l.currentUser.toKey()]=p}(r,i.batchId,n),await Hu(r,i.changes),await Dd(r.remoteStore)}catch(i){const a=Iy(i,"Failed to persist write");n.reject(a)}}async function DI(t,e){const n=Ce(t);try{const r=await DL(n.localStore,e);e.targetChanges.forEach((i,a)=>{const l=n.Eu.get(a);l&&(We(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.lu=!0:i.modifiedDocuments.size>0?We(l.lu,14607):i.removedDocuments.size>0&&(We(l.lu,42227),l.lu=!1))}),await Hu(n,r,e)}catch(r){await Wa(r)}}function e1(t,e,n){const r=Ce(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((a,l)=>{const h=l.view.va(e);h.snapshot&&i.push(h.snapshot)}),function(l,h){const f=Ce(l);f.onlineState=h;let p=!1;f.queries.forEach((g,w)=>{for(const T of w.wa)T.va(h)&&(p=!0)}),p&&by(f)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function TM(t,e,n){const r=Ce(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),a=i&&i.key;if(a){let l=new at(ve.comparator);l=l.insert(a,Jt.newNoDocument(a,be.min()));const h=Oe().add(a),f=new kd(be.min(),new Map,new at(ke),l,h);await DI(r,f),r.du=r.du.remove(a),r.Eu.delete(e),Cy(r)}else await Gm(r.localStore,e,!1).then(()=>Ym(r,e,n)).catch(Wa)}async function EM(t,e){const n=Ce(t),r=e.batch.batchId;try{const i=await VL(n.localStore,e);jI(n,r,null),OI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Hu(n,i)}catch(i){await Wa(i)}}async function SM(t,e,n){const r=Ce(t);try{const i=await function(l,h){const f=Ce(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let g;return f.mutationQueue.lookupMutationBatch(p,h).next(w=>(We(w!==null,37113),g=w.keys(),f.mutationQueue.removeMutationBatch(p,w))).next(()=>f.mutationQueue.performConsistencyCheck(p)).next(()=>f.documentOverlayCache.removeOverlaysForBatchId(p,g,h)).next(()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,g)).next(()=>f.localDocuments.getDocuments(p,g))})}(r.localStore,e);jI(r,e,n),OI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Hu(r,i)}catch(i){await Wa(i)}}function OI(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function jI(t,e,n){const r=Ce(t);let i=r.Ru[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(n?a.reject(n):a.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function Ym(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||LI(t,r)})}function LI(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(wy(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Cy(t))}function t1(t,e,n){for(const r of n)r instanceof kI?(t.Au.addReference(r.key,e),IM(t,r)):r instanceof NI?(de(Ay,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||LI(t,r.key)):xe(19791,{yu:r})}function IM(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(de(Ay,"New document in limbo: "+n),t.Iu.add(r),Cy(t))}function Cy(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new ve(Ye.fromString(e)),r=t.mu.next();t.Eu.set(r,new pM(n)),t.du=t.du.insert(n,r),TI(t.remoteStore,new Qs(Vr(uy(n.path)),r,"TargetPurposeLimboResolution",Sd.ue))}}async function Hu(t,e,n){const r=Ce(t),i=[],a=[],l=[];r.Pu.isEmpty()||(r.Pu.forEach((h,f)=>{l.push(r.gu(f,e,n).then(p=>{var g;if((p||n)&&r.isPrimaryClient){const w=p?!p.fromCache:(g=n?.targetChanges.get(f.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(f.targetId,w?"current":"not-current")}if(p){i.push(p);const w=vy.Es(f.targetId,p);a.push(w)}}))}),await Promise.all(l),r.hu.J_(i),await async function(f,p){const g=Ce(f);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>te.forEach(p,T=>te.forEach(T.Is,C=>g.persistence.referenceDelegate.addReference(w,T.targetId,C)).next(()=>te.forEach(T.ds,C=>g.persistence.referenceDelegate.removeReference(w,T.targetId,C)))))}catch(w){if(!qa(w))throw w;de(_y,"Failed to update sequence numbers: "+w)}for(const w of p){const T=w.targetId;if(!w.fromCache){const C=g.Fs.get(T),V=C.snapshotVersion,O=C.withLastLimboFreeSnapshotVersion(V);g.Fs=g.Fs.insert(T,O)}}}(r.localStore,a))}async function bM(t,e){const n=Ce(t);if(!n.currentUser.isEqual(e)){de(Ay,"User change. New user:",e.toKey());const r=await vI(n.localStore,e);n.currentUser=e,function(a,l){a.Vu.forEach(h=>{h.forEach(f=>{f.reject(new ce(Z.CANCELLED,l))})}),a.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Hu(n,r.Bs)}}function AM(t,e){const n=Ce(t),r=n.Eu.get(e);if(r&&r.lu)return Oe().add(r.key);{let i=Oe();const a=n.Tu.get(e);if(!a)return i;for(const l of a){const h=n.Pu.get(l);i=i.unionWith(h.view.tu)}return i}}function MI(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=DI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TM.bind(null,e),e.hu.J_=cM.bind(null,e.eventManager),e.hu.pu=hM.bind(null,e.eventManager),e}function CM(t){const e=Ce(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=EM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=SM.bind(null,e),e}class id{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nd(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return NL(this.persistence,new RL,e.initialUser,this.serializer)}Du(e){return new yI(yy.Vi,this.serializer)}bu(e){return new FL}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}id.provider={build:()=>new id};class RM extends id{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){We(this.persistence.referenceDelegate instanceof rd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new pL(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?yn.withCacheSize(this.cacheSizeBytes):yn.DEFAULT;return new yI(r=>rd.Vi(r,n),this.serializer)}}class Jm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>e1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=bM.bind(null,this.syncEngine),await aM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new uM}()}createDatastore(e){const n=Nd(e.databaseInfo.databaseId),r=function(a){return new HL(a)}(e.databaseInfo);return function(a,l,h,f){return new GL(a,l,h,f)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,a,l,h){return new XL(r,i,a,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>e1(this.syncEngine,n,0),function(){return Gx.C()?new Gx:new UL}())}createSyncEngine(e,n){return function(i,a,l,h,f,p,g){const w=new mM(i,a,l,h,f,p);return g&&(w.fu=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const a=Ce(i);de(so,"RemoteStore shutting down."),a.Ia.add(5),await zu(a),a.Ea.shutdown(),a.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Jm.provider={build:()=>new Jm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):fs("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi="FirestoreClient";class PM{constructor(e,n,r,i,a){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Yt.UNAUTHENTICATED,this.clientId=ry.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,async l=>{de(hi,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(r,l=>(de(hi,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ei;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Iy(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Gp(t,e){t.asyncQueue.verifyOperationInProgress(),de(hi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await vI(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{ii("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{de("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{ii("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function n1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await kM(t);de(hi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Xx(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Xx(e.remoteStore,i)),t._onlineComponents=e}async function kM(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){de(hi,"Using user provided OfflineComponentProvider");try{await Gp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Z.FAILED_PRECONDITION||i.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ii("Error using user provided cache. Falling back to memory cache: "+n),await Gp(t,new id)}}else de(hi,"Using default OfflineComponentProvider"),await Gp(t,new RM(void 0));return t._offlineComponents}async function UI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(de(hi,"Using user provided OnlineComponentProvider"),await n1(t,t._uninitializedComponentsProvider._online)):(de(hi,"Using default OnlineComponentProvider"),await n1(t,new Jm))),t._onlineComponents}function NM(t){return UI(t).then(e=>e.syncEngine)}async function Zm(t){const e=await UI(t),n=e.eventManager;return n.onListen=gM.bind(null,e.syncEngine),n.onUnlisten=_M.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=yM.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=wM.bind(null,e.syncEngine),n}function VM(t,e,n={}){const r=new ei;return t.asyncQueue.enqueueAndForget(async()=>function(a,l,h,f,p){const g=new FI({next:T=>{g.Ou(),l.enqueueAndForget(()=>RI(a,w)),T.fromCache&&f.source==="server"?p.reject(new ce(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),w=new PI(h,g,{includeMetadataChanges:!0,ka:!0});return CI(a,w)}(await Zm(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I="firestore.googleapis.com",s1=!0;class i1{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ce(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$I,this.ssl=s1}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:s1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=gI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<dL)throw new ce(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}YO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ce(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ce(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ce(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Od{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new i1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new i1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $O;switch(r.type){case"firstParty":return new qO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ce(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=r1.get(n);r&&(de("ComponentProvider","Removing Datastore"),r1.delete(n),r.terminate())}(this),Promise.resolve()}}function DM(t,e,n,r={}){var i;t=Nr(t,Od);const a=fi(e),l=t._getSettings(),h=Object.assign(Object.assign({},l),{emulatorOptions:t._getEmulatorOptions()}),f=`${e}:${n}`;a&&(Hg(`https://${f}`),Wg("Firestore",!0)),l.host!==$I&&l.host!==f&&ii("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},l),{host:f,ssl:a,emulatorOptions:r});if(!us(p,h)&&(t._setSettings(p),r.mockUserToken)){let g,w;if(typeof r.mockUserToken=="string")g=r.mockUserToken,w=Yt.MOCK_USER;else{g=NE(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new ce(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Yt(T)}t._authCredentials=new zO(new AS(g,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ms(this.firestore,e,this._query)}}class Et{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ti(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Et(this.firestore,e,this._key)}toJSON(){return{type:Et._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Uu(n,Et._jsonSchema))return new Et(e,r||null,new ve(Ye.fromString(n.referencePath)))}}Et._jsonSchemaVersion="firestore/documentReference/1.0",Et._jsonSchema={type:Tt("string",Et._jsonSchemaVersion),referencePath:Tt("string")};class ti extends ms{constructor(e,n,r){super(e,n,uy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Et(this.firestore,null,new ve(e))}withConverter(e){return new ti(this.firestore,e,this._path)}}function fa(t,e,...n){if(t=ct(t),RS("collection","path",e),t instanceof Od){const r=Ye.fromString(e,...n);return vx(r),new ti(t,null,r)}{if(!(t instanceof Et||t instanceof ti))throw new ce(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ye.fromString(e,...n));return vx(r),new ti(t.firestore,null,r)}}function _a(t,e,...n){if(t=ct(t),arguments.length===1&&(e=ry.newId()),RS("doc","path",e),t instanceof Od){const r=Ye.fromString(e,...n);return yx(r),new Et(t,null,new ve(r))}{if(!(t instanceof Et||t instanceof ti))throw new ce(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ye.fromString(e,...n));return yx(r),new Et(t.firestore,t instanceof ti?t.converter:null,new ve(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1="AsyncQueue";class a1{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new wI(this,"async_queue_retry"),this.oc=()=>{const r=Kp();r&&de(o1,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Kp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Kp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new ei;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!qa(e))throw e;de(o1,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,fs("INTERNAL UNHANDLED ERROR: ",l1(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=Sy.createAndSchedule(this,e,n,r,a=>this.lc(a));return this.ec.push(i),i}ac(){this.tc&&xe(47125,{hc:l1(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function l1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1}(t,["next","error","complete"])}class io extends Od{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new a1,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new a1(e),this._firestoreClient=void 0,await e}}}function OM(t,e){const n=typeof t=="object"?t:vd(),r=typeof t=="string"?t:Yh,i=po(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=RE("firestore");a&&DM(i,...a)}return i}function Ry(t){if(t._terminated)throw new ce(Z.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||jM(t),t._firestoreClient}function jM(t){var e,n,r;const i=t._freezeSettings(),a=function(h,f,p,g){return new lj(h,f,p,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,BI(g.experimentalLongPollingOptions),g.useFetchStreams,g.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new PM(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(h){const f=h?._online.build();return{_offline:h?._offline.build(f),_online:f}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zn(Wt.fromBase64String(e))}catch(n){throw new ce(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zn(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Uu(e,zn._jsonSchema))return zn.fromBase64String(e.bytes)}}zn._jsonSchemaVersion="firestore/bytes/1.0",zn._jsonSchema={type:Tt("string",zn._jsonSchemaVersion),bytes:Tt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ce(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ht(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ce(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ce(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ke(this._lat,e._lat)||ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Or._jsonSchemaVersion}}static fromJSON(e){if(Uu(e,Or._jsonSchema))return new Or(e.latitude,e.longitude)}}Or._jsonSchemaVersion="firestore/geoPoint/1.0",Or._jsonSchema={type:Tt("string",Or._jsonSchemaVersion),latitude:Tt("number"),longitude:Tt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0}(this._values,e._values)}toJSON(){return{type:jr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Uu(e,jr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new jr(e.vectorValues);throw new ce(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}jr._jsonSchemaVersion="firestore/vectorValue/1.0",jr._jsonSchema={type:Tt("string",jr._jsonSchemaVersion),vectorValues:Tt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM=/^__.*__$/;class MM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new mi(e,this.data,this.fieldMask,n,this.fieldTransforms):new Bu(e,this.data,n,this.fieldTransforms)}}class zI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new mi(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function HI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{Ec:t})}}class Ld{constructor(e,n,r,i,a,l){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Ac(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Ld(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return od(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(HI(this.Ec)&&LM.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class FM{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Nd(e)}Dc(e,n,r,i=!1){return new Ld({Ec:e,methodName:n,bc:r,path:Ht.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Py(t){const e=t._freezeSettings(),n=Nd(t._databaseId);return new FM(t._databaseId,!!e.ignoreUndefinedProperties,n)}function UM(t,e,n,r,i,a={}){const l=t.Dc(a.merge||a.mergeFields?2:0,e,n,i);Dy("Data must be an object, but it was:",l,r);const h=qI(r,l);let f,p;if(a.merge)f=new Cn(l.fieldMask),p=l.fieldTransforms;else if(a.mergeFields){const g=[];for(const w of a.mergeFields){const T=eg(e,w,n);if(!l.contains(T))throw new ce(Z.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);GI(g,T)||g.push(T)}f=new Cn(g),p=l.fieldTransforms.filter(w=>f.covers(w.field))}else f=null,p=l.fieldTransforms;return new MM(new vn(h),f,p)}class Md extends Qa{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Md}}function WI(t,e,n){return new Ld({Ec:3,bc:e.settings.bc,methodName:t._methodName,mc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ky extends Qa{_toFieldTransform(e){return new hy(e.path,new Cu)}isEqual(e){return e instanceof ky}}class Ny extends Qa{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=WI(this,e,!0),r=this.vc.map(a=>vo(a,n)),i=new ja(r);return new hy(e.path,i)}isEqual(e){return e instanceof Ny&&us(this.vc,e.vc)}}class Vy extends Qa{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=WI(this,e,!0),r=this.vc.map(a=>vo(a,n)),i=new La(r);return new hy(e.path,i)}isEqual(e){return e instanceof Vy&&us(this.vc,e.vc)}}function BM(t,e,n,r){const i=t.Dc(1,e,n);Dy("Data must be an object, but it was:",i,r);const a=[],l=vn.empty();pi(r,(f,p)=>{const g=Oy(e,f,n);p=ct(p);const w=i.gc(g);if(p instanceof Md)a.push(g);else{const T=vo(p,w);T!=null&&(a.push(g),l.set(g,T))}});const h=new Cn(a);return new zI(l,h,i.fieldTransforms)}function $M(t,e,n,r,i,a){const l=t.Dc(1,e,n),h=[eg(e,r,n)],f=[i];if(a.length%2!=0)throw new ce(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)h.push(eg(e,a[T])),f.push(a[T+1]);const p=[],g=vn.empty();for(let T=h.length-1;T>=0;--T)if(!GI(p,h[T])){const C=h[T];let V=f[T];V=ct(V);const O=l.gc(C);if(V instanceof Md)p.push(C);else{const R=vo(V,O);R!=null&&(p.push(C),g.set(C,R))}}const w=new Cn(p);return new zI(g,w,l.fieldTransforms)}function zM(t,e,n,r=!1){return vo(n,t.Dc(r?4:3,e))}function vo(t,e){if(KI(t=ct(t)))return Dy("Unsupported field value:",e,t),qI(t,e);if(t instanceof Qa)return function(r,i){if(!HI(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const a=[];let l=0;for(const h of r){let f=vo(h,i.yc(l));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),l++}return{arrayValue:{values:a}}}(t,e)}return function(r,i){if((r=ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return kj(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=et.fromDate(r);return{timestampValue:nd(i.serializer,a)}}if(r instanceof et){const a=new et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nd(i.serializer,a)}}if(r instanceof Or)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zn)return{bytesValue:uI(i.serializer,r._byteString)};if(r instanceof Et){const a=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw i.wc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:my(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof jr)return function(l,h){return{mapValue:{fields:{[MS]:{stringValue:FS},[Jh]:{arrayValue:{values:l.toArray().map(p=>{if(typeof p!="number")throw h.wc("VectorValues must only contain numeric values.");return cy(h.serializer,p)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${Ed(r)}`)}(t,e)}function qI(t,e){const n={};return NS(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pi(t,(r,i)=>{const a=vo(i,e.Vc(r));a!=null&&(n[r]=a)}),{mapValue:{fields:n}}}function KI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof et||t instanceof Or||t instanceof zn||t instanceof Et||t instanceof Qa||t instanceof jr)}function Dy(t,e,n){if(!KI(n)||!PS(n)){const r=Ed(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function eg(t,e,n){if((e=ct(e))instanceof jd)return e._internalPath;if(typeof e=="string")return Oy(t,e);throw od("Field path arguments must be of type string or ",t,!1,void 0,n)}const HM=new RegExp("[~\\*/\\[\\]]");function Oy(t,e,n){if(e.search(HM)>=0)throw od(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new jd(...e.split("."))._internalPath}catch{throw od(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function od(t,e,n,r,i){const a=r&&!r.isEmpty(),l=i!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let f="";return(a||l)&&(f+=" (found",a&&(f+=` in field ${r}`),l&&(f+=` in document ${i}`),f+=")"),new ce(Z.INVALID_ARGUMENT,h+t+f)}function GI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(e,n,r,i,a){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new WM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Fd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class WM extends QI{data(){return super.data()}}function Fd(t,e){return typeof e=="string"?Oy(t,e):e instanceof jd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ce(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jy{}class Ly extends jy{}function Qp(t,e,...n){let r=[];e instanceof jy&&r.push(e),r=r.concat(n),function(a){const l=a.filter(f=>f instanceof My).length,h=a.filter(f=>f instanceof Ud).length;if(l>1||l>0&&h>0)throw new ce(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Ud extends Ly{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ud(e,n,r)}_apply(e){const n=this._parse(e);return YI(e._query,n),new ms(e.firestore,e.converter,zm(e._query,n))}_parse(e){const n=Py(e.firestore);return function(a,l,h,f,p,g,w){let T;if(p.isKeyField()){if(g==="array-contains"||g==="array-contains-any")throw new ce(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${g}' queries on documentId().`);if(g==="in"||g==="not-in"){d1(w,g);const V=[];for(const O of w)V.push(h1(f,a,O));T={arrayValue:{values:V}}}else T=h1(f,a,w)}else g!=="in"&&g!=="not-in"&&g!=="array-contains-any"||d1(w,g),T=zM(h,l,w,g==="in"||g==="not-in");return xt.create(p,g,T)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Xp(t,e,n){const r=e,i=Fd("where",t);return Ud._create(i,r,n)}class My extends jy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new My(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:dr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,a){let l=i;const h=a.getFlattenedFilters();for(const f of h)YI(l,f),l=zm(l,f)}(e._query,n),new ms(e.firestore,e.converter,zm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Fy extends Ly{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Fy(e,n)}_apply(e){const n=function(i,a,l){if(i.startAt!==null)throw new ce(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ce(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Au(a,l)}(e._query,this._field,this._direction);return new ms(e.firestore,e.converter,function(i,a){const l=i.explicitOrderBy.concat([a]);return new Ka(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function c1(t,e="asc"){const n=e,r=Fd("orderBy",t);return Fy._create(r,n)}class Uy extends Ly{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Uy(e,n,r)}_apply(e){return new ms(e.firestore,e.converter,ed(e._query,this._limit,this._limitType))}}function qM(t){return Uy._create("limit",t,"F")}function h1(t,e,n){if(typeof(n=ct(n))=="string"){if(n==="")throw new ce(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!KS(e)&&n.indexOf("/")!==-1)throw new ce(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ye.fromString(n));if(!ve.isDocumentKey(r))throw new ce(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return bx(t,new ve(r))}if(n instanceof Et)return bx(t,n._key);throw new ce(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ed(n)}.`)}function d1(t,e){if(!Array.isArray(t)||t.length===0)throw new ce(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function YI(t,e){const n=function(i,a){for(const l of i)for(const h of l.getFlattenedFilters())if(a.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ce(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class KM{convertValue(e,n="none"){switch(ui(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(li(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return pi(e,(i,a)=>{r[i]=this.convertValue(a,n)}),r}convertVectorValue(e){var n,r,i;const a=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[Jh].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(l=>gt(l.doubleValue));return new jr(a)}convertGeoPoint(e){return new Or(gt(e.latitude),gt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=bd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Su(e));default:return null}}convertTimestamp(e){const n=ai(e);return new et(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ye.fromString(e);We(mI(r),9688,{name:e});const i=new Iu(r.get(1),r.get(3)),a=new ve(r.popFirst(5));return i.isEqual(n)||fs(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GM(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Jl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zi extends QI{constructor(e,n,r,i,a,l){super(e,n,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Oh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Fd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Zi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Zi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zi._jsonSchema={type:Tt("string",Zi._jsonSchemaVersion),bundleSource:Tt("string","DocumentSnapshot"),bundleName:Tt("string"),bundle:Tt("string")};class Oh extends Zi{data(e={}){return super.data(e)}}class eo{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Jl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Oh(this._firestore,this._userDataWriter,r.key,r,new Jl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map(h=>{const f=new Oh(i._firestore,i._userDataWriter,h.doc.key,h.doc,new Jl(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);return h.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}})}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(h=>a||h.type!==3).map(h=>{const f=new Oh(i._firestore,i._userDataWriter,h.doc.key,h.doc,new Jl(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,g=-1;return h.type!==0&&(p=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),g=l.indexOf(h.doc.key)),{type:QM(h.type),doc:f,oldIndex:p,newIndex:g}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=eo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ry.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(a=>{a._document!==null&&(n.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function QM(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:t})}}eo._jsonSchemaVersion="firestore/querySnapshot/1.0",eo._jsonSchema={type:Tt("string",eo._jsonSchemaVersion),bundleSource:Tt("string","QuerySnapshot"),bundleName:Tt("string"),bundle:Tt("string")};class By extends KM{constructor(e){super(),this.firestore=e}convertBytes(e){return new zn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Et(this.firestore,null,n)}}function XM(t){t=Nr(t,ms);const e=Nr(t.firestore,io),n=Ry(e),r=new By(e);return XI(t._query),VM(n,t._query).then(i=>new eo(e,r,t,i))}function vh(t,e,n,...r){t=Nr(t,Et);const i=Nr(t.firestore,io),a=Py(i);let l;return l=typeof(e=ct(e))=="string"||e instanceof jd?$M(a,"updateDoc",t._key,e,n,r):BM(a,"updateDoc",t._key,e),$y(i,[l.toMutation(t._key,cr.exists(!0))])}function YM(t){return $y(Nr(t.firestore,io),[new dy(t._key,cr.none())])}function Yp(t,e){const n=Nr(t.firestore,io),r=_a(t),i=GM(t.converter,e);return $y(n,[UM(Py(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,cr.exists(!1))]).then(()=>r)}function f1(t,...e){var n,r,i;t=ct(t);let a={includeMetadataChanges:!1,source:"default"},l=0;typeof e[l]!="object"||u1(e[l])||(a=e[l++]);const h={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(u1(e[l])){const w=e[l];e[l]=(n=w.next)===null||n===void 0?void 0:n.bind(w),e[l+1]=(r=w.error)===null||r===void 0?void 0:r.bind(w),e[l+2]=(i=w.complete)===null||i===void 0?void 0:i.bind(w)}let f,p,g;if(t instanceof Et)p=Nr(t.firestore,io),g=uy(t._key.path),f={next:w=>{e[l]&&e[l](JM(p,t,w))},error:e[l+1],complete:e[l+2]};else{const w=Nr(t,ms);p=Nr(w.firestore,io),g=w._query;const T=new By(p);f={next:C=>{e[l]&&e[l](new eo(p,T,w,C))},error:e[l+1],complete:e[l+2]},XI(t._query)}return function(T,C,V,O){const R=new FI(O),L=new PI(C,R,V);return T.asyncQueue.enqueueAndForget(async()=>CI(await Zm(T),L)),()=>{R.Ou(),T.asyncQueue.enqueueAndForget(async()=>RI(await Zm(T),L))}}(Ry(p),g,h,f)}function $y(t,e){return function(r,i){const a=new ei;return r.asyncQueue.enqueueAndForget(async()=>xM(await NM(r),i,a)),a.promise}(Ry(t),e)}function JM(t,e,n){const r=n.docs.get(e._key),i=new By(t);return new Zi(t,i,e._key,r,new Jl(n.hasPendingWrites,n.fromCache),e.converter)}function pa(){return new ky("serverTimestamp")}function ZM(...t){return new Ny("arrayUnion",t)}function e3(...t){return new Vy("arrayRemove",t)}(function(e,n=!0){(function(i){Ha=i})(mo),hr(new Wn("firestore",(r,{instanceIdentifier:i,options:a})=>{const l=r.getProvider("app").getImmediate(),h=new io(new HO(r.getProvider("auth-internal")),new KO(l,r.getProvider("app-check-internal")),function(p,g){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ce(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Iu(p.options.projectId,g)}(l,i),l);return a=Object.assign({useFetchStreams:n},a),h._setSettings(a),h},"PUBLIC").setMultipleInstances(!0)),wn(dx,fx,e),wn(dx,fx,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JI="firebasestorage.googleapis.com",ZI="storageBucket",t3=2*60*1e3,n3=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt extends fr{constructor(e,n,r=0){super(Jp(e),`Firebase Storage: ${n} (${Jp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,dt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Jp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ht;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ht||(ht={}));function Jp(t){return"storage/"+t}function zy(){const t="An unknown error occurred, please check the error payload for server response.";return new dt(ht.UNKNOWN,t)}function r3(t){return new dt(ht.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function s3(t){return new dt(ht.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function i3(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new dt(ht.UNAUTHENTICATED,t)}function o3(){return new dt(ht.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function a3(t){return new dt(ht.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function l3(){return new dt(ht.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function u3(){return new dt(ht.CANCELED,"User canceled the upload/download.")}function c3(t){return new dt(ht.INVALID_URL,"Invalid URL '"+t+"'.")}function h3(t){return new dt(ht.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function d3(){return new dt(ht.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ZI+"' property when initializing the app?")}function f3(){return new dt(ht.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function p3(){return new dt(ht.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function m3(t){return new dt(ht.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function tg(t){return new dt(ht.INVALID_ARGUMENT,t)}function eb(){return new dt(ht.APP_DELETED,"The Firebase app was deleted.")}function g3(t){return new dt(ht.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function hu(t,e){return new dt(ht.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Kl(t){throw new dt(ht.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Rn.makeFromUrl(e,n)}catch{return new Rn(e,"")}if(r.path==="")return r;throw h3(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(K){K.path.charAt(K.path.length-1)==="/"&&(K.path_=K.path_.slice(0,-1))}const l="(/(.*))?$",h=new RegExp("^gs://"+i+l,"i"),f={bucket:1,path:3};function p(K){K.path_=decodeURIComponent(K.path)}const g="v[A-Za-z0-9_]+",w=n.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",C=new RegExp(`^https?://${w}/${g}/b/${i}/o${T}`,"i"),V={bucket:1,path:3},O=n===JI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,R="([^?#]*)",L=new RegExp(`^https?://${O}/${i}/${R}`,"i"),z=[{regex:h,indices:f,postModify:a},{regex:C,indices:V,postModify:p},{regex:L,indices:{bucket:1,path:2},postModify:p}];for(let K=0;K<z.length;K++){const Q=z[K],Y=Q.regex.exec(e);if(Y){const N=Y[Q.indices.bucket];let S=Y[Q.indices.path];S||(S=""),r=new Rn(N,S),Q.postModify(r);break}}if(r==null)throw c3(e);return r}}class y3{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v3(t,e,n){let r=1,i=null,a=null,l=!1,h=0;function f(){return h===2}let p=!1;function g(...R){p||(p=!0,e.apply(null,R))}function w(R){i=setTimeout(()=>{i=null,t(C,f())},R)}function T(){a&&clearTimeout(a)}function C(R,...L){if(p){T();return}if(R){T(),g.call(null,R,...L);return}if(f()||l){T(),g.call(null,R,...L);return}r<64&&(r*=2);let z;h===1?(h=2,z=0):z=(r+Math.random())*1e3,w(z)}let V=!1;function O(R){V||(V=!0,T(),!p&&(i!==null?(R||(h=2),clearTimeout(i),w(0)):R||(h=1)))}return w(0),a=setTimeout(()=>{l=!0,O(!0)},n),O}function _3(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w3(t){return t!==void 0}function x3(t){return typeof t=="object"&&!Array.isArray(t)}function Hy(t){return typeof t=="string"||t instanceof String}function p1(t){return Wy()&&t instanceof Blob}function Wy(){return typeof Blob<"u"}function m1(t,e,n,r){if(r<e)throw tg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw tg(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function tb(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var to;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(to||(to={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T3(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,a=e.indexOf(t)!==-1;return n||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e,n,r,i,a,l,h,f,p,g,w,T=!0,C=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=f,this.timeout_=p,this.progressCallback_=g,this.connectionFactory_=w,this.retry=T,this.isUsingEmulator=C,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((V,O)=>{this.resolve_=V,this.reject_=O,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new _h(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const l=h=>{const f=h.loaded,p=h.lengthComputable?h.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,p)};this.progressCallback_!==null&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const h=a.getErrorCode()===to.NO_ERROR,f=a.getStatus();if(!h||T3(f,this.additionalRetryCodes_)&&this.retry){const g=a.getErrorCode()===to.ABORT;r(!1,new _h(!1,null,g));return}const p=this.successCodes_.indexOf(f)!==-1;r(!0,new _h(p,a))})},n=(r,i)=>{const a=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(h,h.getResponse());w3(f)?a(f):a()}catch(f){l(f)}else if(h!==null){const f=zy();f.serverResponse=h.getErrorText(),this.errorCallback_?l(this.errorCallback_(h,f)):l(f)}else if(i.canceled){const f=this.appDelete_?eb():u3();l(f)}else{const f=l3();l(f)}};this.canceled_?n(!1,new _h(!1,null,!0)):this.backoffId_=v3(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&_3(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class _h{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function S3(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function I3(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function b3(t,e){e&&(t["X-Firebase-GMPID"]=e)}function A3(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function C3(t,e,n,r,i,a,l=!0,h=!1){const f=tb(t.urlParams),p=t.url+f,g=Object.assign({},t.headers);return b3(g,e),S3(g,n),I3(g,a),A3(g,r),new E3(p,t.method,g,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,l,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R3(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function P3(...t){const e=R3();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Wy())return new Blob(t);throw new dt(ht.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function k3(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N3(t){if(typeof atob>"u")throw m3("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Zp{constructor(e,n){this.data=e,this.contentType=n||null}}function V3(t,e){switch(t){case br.RAW:return new Zp(nb(e));case br.BASE64:case br.BASE64URL:return new Zp(rb(t,e));case br.DATA_URL:return new Zp(O3(e),j3(e))}throw zy()}function nb(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const a=r,l=t.charCodeAt(++n);r=65536|(a&1023)<<10|l&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function D3(t){let e;try{e=decodeURIComponent(t)}catch{throw hu(br.DATA_URL,"Malformed data URL.")}return nb(e)}function rb(t,e){switch(t){case br.BASE64:{const i=e.indexOf("-")!==-1,a=e.indexOf("_")!==-1;if(i||a)throw hu(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case br.BASE64URL:{const i=e.indexOf("+")!==-1,a=e.indexOf("/")!==-1;if(i||a)throw hu(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=N3(e)}catch(i){throw i.message.includes("polyfill")?i:hu(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class sb{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw hu(br.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=L3(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function O3(t){const e=new sb(t);return e.base64?rb(br.BASE64,e.rest):D3(e.rest)}function j3(t){return new sb(t).contentType}function L3(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,n){let r=0,i="";p1(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(p1(this.data_)){const r=this.data_,i=k3(r,e,n);return i===null?null:new Ks(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Ks(r,!0)}}static getBlob(...e){if(Wy()){const n=e.map(r=>r instanceof Ks?r.data_:r);return new Ks(P3.apply(null,n))}else{const n=e.map(l=>Hy(l)?V3(br.RAW,l).data:l.data_);let r=0;n.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return n.forEach(l=>{for(let h=0;h<l.length;h++)i[a++]=l[h]}),new Ks(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(t){let e;try{e=JSON.parse(t)}catch{return null}return x3(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M3(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function F3(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function ob(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U3(t,e){return e}class on{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||U3}}let wh=null;function B3(t){return!Hy(t)||t.length<2?t:ob(t)}function ab(){if(wh)return wh;const t=[];t.push(new on("bucket")),t.push(new on("generation")),t.push(new on("metageneration")),t.push(new on("name","fullPath",!0));function e(a,l){return B3(l)}const n=new on("name");n.xform=e,t.push(n);function r(a,l){return l!==void 0?Number(l):l}const i=new on("size");return i.xform=r,t.push(i),t.push(new on("timeCreated")),t.push(new on("updated")),t.push(new on("md5Hash",null,!0)),t.push(new on("cacheControl",null,!0)),t.push(new on("contentDisposition",null,!0)),t.push(new on("contentEncoding",null,!0)),t.push(new on("contentLanguage",null,!0)),t.push(new on("contentType",null,!0)),t.push(new on("metadata","customMetadata",!0)),wh=t,wh}function $3(t,e){function n(){const r=t.bucket,i=t.fullPath,a=new Rn(r,i);return e._makeStorageReference(a)}Object.defineProperty(t,"ref",{get:n})}function z3(t,e,n){const r={};r.type="file";const i=n.length;for(let a=0;a<i;a++){const l=n[a];r[l.local]=l.xform(r,e[l.server])}return $3(r,t),r}function lb(t,e,n){const r=ib(e);return r===null?null:z3(t,r,n)}function H3(t,e,n,r){const i=ib(e);if(i===null||!Hy(i.downloadTokens))return null;const a=i.downloadTokens;if(a.length===0)return null;const l=encodeURIComponent;return a.split(",").map(p=>{const g=t.bucket,w=t.fullPath,T="/b/"+l(g)+"/o/"+l(w),C=qy(T,n,r),V=tb({alt:"media",token:p});return C+V})[0]}function W3(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(n[a.server]=t[a.local])}return JSON.stringify(n)}class ub{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cb(t){if(!t)throw zy()}function q3(t,e){function n(r,i){const a=lb(t,i,e);return cb(a!==null),a}return n}function K3(t,e){function n(r,i){const a=lb(t,i,e);return cb(a!==null),H3(a,i,t.host,t._protocol)}return n}function hb(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=o3():i=i3():n.getStatus()===402?i=s3(t.bucket):n.getStatus()===403?i=a3(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function G3(t){const e=hb(t);function n(r,i){let a=e(r,i);return r.getStatus()===404&&(a=r3(t.path)),a.serverResponse=i.serverResponse,a}return n}function Q3(t,e,n){const r=e.fullServerUrl(),i=qy(r,t.host,t._protocol),a="GET",l=t.maxOperationRetryTime,h=new ub(i,a,K3(t,n),l);return h.errorHandler=G3(e),h}function X3(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Y3(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=X3(null,e)),r}function J3(t,e,n,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"};function h(){let z="";for(let K=0;K<2;K++)z=z+Math.random().toString().slice(2);return z}const f=h();l["Content-Type"]="multipart/related; boundary="+f;const p=Y3(e,r,i),g=W3(p,n),w="--"+f+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+f+`\r
Content-Type: `+p.contentType+`\r
\r
`,T=`\r
--`+f+"--",C=Ks.getBlob(w,r,T);if(C===null)throw f3();const V={name:p.fullPath},O=qy(a,t.host,t._protocol),R="POST",L=t.maxUploadRetryTime,U=new ub(O,R,q3(t,n),L);return U.urlParams=V,U.headers=l,U.body=C.uploadData(),U.errorHandler=hb(e),U}class Z3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=to.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=to.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=to.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,a){if(this.sent_)throw Kl("cannot .send() more than once");if(fi(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const l in a)a.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,a[l].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Kl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Kl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Kl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Kl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class e6 extends Z3{initXhr(){this.xhr_.responseType="text"}}function db(){return new e6}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,n){this._service=e,n instanceof Rn?this._location=n:this._location=Rn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new oo(e,n)}get root(){const e=new Rn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ob(this._location.path)}get storage(){return this._service}get parent(){const e=M3(this._location.path);if(e===null)return null;const n=new Rn(this._location.bucket,e);return new oo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw g3(e)}}function t6(t,e,n){t._throwIfRoot("uploadBytes");const r=J3(t.storage,t._location,ab(),new Ks(e,!0),n);return t.storage.makeRequestWithTokens(r,db).then(i=>({metadata:i,ref:t}))}function n6(t){t._throwIfRoot("getDownloadURL");const e=Q3(t.storage,t._location,ab());return t.storage.makeRequestWithTokens(e,db).then(n=>{if(n===null)throw p3();return n})}function r6(t,e){const n=F3(t._location.path,e),r=new Rn(t._location.bucket,n);return new oo(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s6(t){return/^[A-Za-z]+:\/\//.test(t)}function i6(t,e){return new oo(t,e)}function fb(t,e){if(t instanceof Ky){const n=t;if(n._bucket==null)throw d3();const r=new oo(n,n._bucket);return e!=null?fb(r,e):r}else return e!==void 0?r6(t,e):t}function o6(t,e){if(e&&s6(e)){if(t instanceof Ky)return i6(t,e);throw tg("To use ref(service, url), the first argument must be a Storage instance.")}else return fb(t,e)}function g1(t,e){const n=e?.[ZI];return n==null?null:Rn.makeFromBucketSpec(n,t)}function a6(t,e,n,r={}){t.host=`${e}:${n}`;const i=fi(e);i&&(Hg(`https://${t.host}/b`),Wg("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(t._overrideAuthToken=typeof a=="string"?a:NE(a,t.app.options.projectId))}class Ky{constructor(e,n,r,i,a,l=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=l,this._bucket=null,this._host=JI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=t3,this._maxUploadRetryTime=n3,this._requests=new Set,i!=null?this._bucket=Rn.makeFromBucketSpec(i,this._host):this._bucket=g1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Rn.makeFromBucketSpec(this._url,e):this._bucket=g1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){m1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){m1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if($n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new oo(this,e)}_makeRequest(e,n,r,i,a=!0){if(this._deleted)return new y3(eb());{const l=C3(e,this._appId,r,i,n,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const y1="@firebase/storage",v1="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb="storage";function _1(t,e,n){return t=ct(t),t6(t,e,n)}function w1(t){return t=ct(t),n6(t)}function x1(t,e){return t=ct(t),o6(t,e)}function l6(t=vd(),e){t=ct(t);const r=po(t,pb).getImmediate({identifier:e}),i=RE("storage");return i&&u6(r,...i),r}function u6(t,e,n,r={}){a6(t,e,n,r)}function c6(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Ky(n,r,i,e,mo)}function h6(){hr(new Wn(pb,c6,"PUBLIC").setMultipleInstances(!0)),wn(y1,v1,""),wn(y1,v1,"esm2017")}h6();const mb="@firebase/installations",Gy="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb=1e4,yb=`w:${Gy}`,vb="FIS_v2",d6="https://firebaseinstallations.googleapis.com/v1",f6=60*60*1e3,p6="installations",m6="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ao=new fo(p6,m6,g6);function _b(t){return t instanceof fr&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb({projectId:t}){return`${d6}/projects/${t}/installations`}function xb(t){return{token:t.token,requestStatus:2,expiresIn:v6(t.expiresIn),creationTime:Date.now()}}async function Tb(t,e){const r=(await e.json()).error;return ao.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Eb({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function y6(t,{refreshToken:e}){const n=Eb(t);return n.append("Authorization",_6(e)),n}async function Sb(t){const e=await t();return e.status>=500&&e.status<600?t():e}function v6(t){return Number(t.replace("s","000"))}function _6(t){return`${vb} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w6({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=wb(t),i=Eb(t),a=e.getImmediate({optional:!0});if(a){const p=await a.getHeartbeatsHeader();p&&i.append("x-firebase-client",p)}const l={fid:n,authVersion:vb,appId:t.appId,sdkVersion:yb},h={method:"POST",headers:i,body:JSON.stringify(l)},f=await Sb(()=>fetch(r,h));if(f.ok){const p=await f.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:xb(p.authToken)}}else throw await Tb("Create Installation",f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ib(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x6(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T6=/^[cdef][\w-]{21}$/,ng="";function E6(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=S6(t);return T6.test(n)?n:ng}catch{return ng}}function S6(t){return x6(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bd(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb=new Map;function Ab(t,e){const n=Bd(t);Cb(n,e),I6(n,e)}function Cb(t,e){const n=bb.get(t);if(n)for(const r of n)r(e)}function I6(t,e){const n=b6();n&&n.postMessage({key:t,fid:e}),A6()}let Xi=null;function b6(){return!Xi&&"BroadcastChannel"in self&&(Xi=new BroadcastChannel("[Firebase] FID Change"),Xi.onmessage=t=>{Cb(t.data.key,t.data.fid)}),Xi}function A6(){bb.size===0&&Xi&&(Xi.close(),Xi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6="firebase-installations-database",R6=1,lo="firebase-installations-store";let em=null;function Qy(){return em||(em=yd(C6,R6,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(lo)}}})),em}async function ad(t,e){const n=Bd(t),i=(await Qy()).transaction(lo,"readwrite"),a=i.objectStore(lo),l=await a.get(n);return await a.put(e,n),await i.done,(!l||l.fid!==e.fid)&&Ab(t,e.fid),e}async function Rb(t){const e=Bd(t),r=(await Qy()).transaction(lo,"readwrite");await r.objectStore(lo).delete(e),await r.done}async function $d(t,e){const n=Bd(t),i=(await Qy()).transaction(lo,"readwrite"),a=i.objectStore(lo),l=await a.get(n),h=e(l);return h===void 0?await a.delete(n):await a.put(h,n),await i.done,h&&(!l||l.fid!==h.fid)&&Ab(t,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xy(t){let e;const n=await $d(t.appConfig,r=>{const i=P6(r),a=k6(t,i);return e=a.registrationPromise,a.installationEntry});return n.fid===ng?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function P6(t){const e=t||{fid:E6(),registrationStatus:0};return Pb(e)}function k6(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(ao.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=N6(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:V6(t)}:{installationEntry:e}}async function N6(t,e){try{const n=await w6(t,e);return ad(t.appConfig,n)}catch(n){throw _b(n)&&n.customData.serverCode===409?await Rb(t.appConfig):await ad(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function V6(t){let e=await T1(t.appConfig);for(;e.registrationStatus===1;)await Ib(100),e=await T1(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Xy(t);return r||n}return e}function T1(t){return $d(t,e=>{if(!e)throw ao.create("installation-not-found");return Pb(e)})}function Pb(t){return D6(t)?{fid:t.fid,registrationStatus:0}:t}function D6(t){return t.registrationStatus===1&&t.registrationTime+gb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O6({appConfig:t,heartbeatServiceProvider:e},n){const r=j6(t,n),i=y6(t,n),a=e.getImmediate({optional:!0});if(a){const p=await a.getHeartbeatsHeader();p&&i.append("x-firebase-client",p)}const l={installation:{sdkVersion:yb,appId:t.appId}},h={method:"POST",headers:i,body:JSON.stringify(l)},f=await Sb(()=>fetch(r,h));if(f.ok){const p=await f.json();return xb(p)}else throw await Tb("Generate Auth Token",f)}function j6(t,{fid:e}){return`${wb(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yy(t,e=!1){let n;const r=await $d(t.appConfig,a=>{if(!kb(a))throw ao.create("not-registered");const l=a.authToken;if(!e&&F6(l))return a;if(l.requestStatus===1)return n=L6(t,e),a;{if(!navigator.onLine)throw ao.create("app-offline");const h=B6(a);return n=M6(t,h),h}});return n?await n:r.authToken}async function L6(t,e){let n=await E1(t.appConfig);for(;n.authToken.requestStatus===1;)await Ib(100),n=await E1(t.appConfig);const r=n.authToken;return r.requestStatus===0?Yy(t,e):r}function E1(t){return $d(t,e=>{if(!kb(e))throw ao.create("not-registered");const n=e.authToken;return $6(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function M6(t,e){try{const n=await O6(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await ad(t.appConfig,r),n}catch(n){if(_b(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Rb(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await ad(t.appConfig,r)}throw n}}function kb(t){return t!==void 0&&t.registrationStatus===2}function F6(t){return t.requestStatus===2&&!U6(t)}function U6(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+f6}function B6(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function $6(t){return t.requestStatus===1&&t.requestTime+gb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z6(t){const e=t,{installationEntry:n,registrationPromise:r}=await Xy(e);return r?r.catch(console.error):Yy(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H6(t,e=!1){const n=t;return await W6(n),(await Yy(n,e)).token}async function W6(t){const{registrationPromise:e}=await Xy(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q6(t){if(!t||!t.options)throw tm("App Configuration");if(!t.name)throw tm("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw tm(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function tm(t){return ao.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb="installations",K6="installations-internal",G6=t=>{const e=t.getProvider("app").getImmediate(),n=q6(e),r=po(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Q6=t=>{const e=t.getProvider("app").getImmediate(),n=po(e,Nb).getImmediate();return{getId:()=>z6(n),getToken:i=>H6(n,i)}};function X6(){hr(new Wn(Nb,G6,"PUBLIC")),hr(new Wn(K6,Q6,"PRIVATE"))}X6();wn(mb,Gy);wn(mb,Gy,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y6="/firebase-messaging-sw.js",J6="/firebase-cloud-messaging-push-scope",Vb="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Z6="https://fcmregistrations.googleapis.com/v1",Db="google.c.a.c_id",e5="google.c.a.c_l",t5="google.c.a.ts",n5="google.c.a.e",S1=1e4;var I1;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(I1||(I1={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Ru;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Ru||(Ru={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function r5(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let a=0;a<r.length;++a)i[a]=r.charCodeAt(a);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="fcm_token_details_db",s5=5,b1="fcm_token_object_Store";async function i5(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(a=>a.name).includes(nm))return null;let e=null;return(await yd(nm,s5,{upgrade:async(r,i,a,l)=>{var h;if(i<2||!r.objectStoreNames.contains(b1))return;const f=l.objectStore(b1),p=await f.index("fcmSenderId").get(t);if(await f.clear(),!!p){if(i===2){const g=p;if(!g.auth||!g.p256dh||!g.endpoint)return;e={token:g.fcmToken,createTime:(h=g.createTime)!==null&&h!==void 0?h:Date.now(),subscriptionOptions:{auth:g.auth,p256dh:g.p256dh,endpoint:g.endpoint,swScope:g.swScope,vapidKey:typeof g.vapidKey=="string"?g.vapidKey:ns(g.vapidKey)}}}else if(i===3){const g=p;e={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:ns(g.auth),p256dh:ns(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:ns(g.vapidKey)}}}else if(i===4){const g=p;e={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:ns(g.auth),p256dh:ns(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:ns(g.vapidKey)}}}}}})).close(),await Up(nm),await Up("fcm_vapid_details_db"),await Up("undefined"),o5(e)?e:null}function o5(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5="firebase-messaging-database",l5=1,Pu="firebase-messaging-store";let rm=null;function Ob(){return rm||(rm=yd(a5,l5,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Pu)}}})),rm}async function u5(t){const e=jb(t),r=await(await Ob()).transaction(Pu).objectStore(Pu).get(e);if(r)return r;{const i=await i5(t.appConfig.senderId);if(i)return await Jy(t,i),i}}async function Jy(t,e){const n=jb(t),i=(await Ob()).transaction(Pu,"readwrite");return await i.objectStore(Pu).put(e,n),await i.done,e}function jb({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},ln=new fo("messaging","Messaging",c5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h5(t,e){const n=await e0(t),r=Lb(e),i={method:"POST",headers:n,body:JSON.stringify(r)};let a;try{a=await(await fetch(Zy(t.appConfig),i)).json()}catch(l){throw ln.create("token-subscribe-failed",{errorInfo:l?.toString()})}if(a.error){const l=a.error.message;throw ln.create("token-subscribe-failed",{errorInfo:l})}if(!a.token)throw ln.create("token-subscribe-no-token");return a.token}async function d5(t,e){const n=await e0(t),r=Lb(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let a;try{a=await(await fetch(`${Zy(t.appConfig)}/${e.token}`,i)).json()}catch(l){throw ln.create("token-update-failed",{errorInfo:l?.toString()})}if(a.error){const l=a.error.message;throw ln.create("token-update-failed",{errorInfo:l})}if(!a.token)throw ln.create("token-update-no-token");return a.token}async function f5(t,e){const r={method:"DELETE",headers:await e0(t)};try{const a=await(await fetch(`${Zy(t.appConfig)}/${e}`,r)).json();if(a.error){const l=a.error.message;throw ln.create("token-unsubscribe-failed",{errorInfo:l})}}catch(i){throw ln.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}}function Zy({projectId:t}){return`${Z6}/projects/${t}/registrations`}async function e0({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function Lb({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:e,p256dh:t}};return r!==Vb&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5=7*24*60*60*1e3;async function m5(t){const e=await y5(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:ns(e.getKey("auth")),p256dh:ns(e.getKey("p256dh"))},r=await u5(t.firebaseDependencies);if(r){if(v5(r.subscriptionOptions,n))return Date.now()>=r.createTime+p5?g5(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await f5(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return A1(t.firebaseDependencies,n)}else return A1(t.firebaseDependencies,n)}async function g5(t,e){try{const n=await d5(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await Jy(t.firebaseDependencies,r),n}catch(n){throw n}}async function A1(t,e){const r={token:await h5(t,e),createTime:Date.now(),subscriptionOptions:e};return await Jy(t,r),r.token}async function y5(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:r5(e)})}function v5(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,a=e.p256dh===t.p256dh;return n&&r&&i&&a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C1(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return _5(e,t),w5(e,t),x5(e,t),e}function _5(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const i=e.notification.image;i&&(t.notification.image=i);const a=e.notification.icon;a&&(t.notification.icon=a)}function w5(t,e){e.data&&(t.data=e.data)}function x5(t,e){var n,r,i,a,l;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const h=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(a=e.notification)===null||a===void 0?void 0:a.click_action;h&&(t.fcmOptions.link=h);const f=(l=e.fcmOptions)===null||l===void 0?void 0:l.analytics_label;f&&(t.fcmOptions.analyticsLabel=f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T5(t){return typeof t=="object"&&!!t&&Db in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E5(t){if(!t||!t.options)throw sm("App Configuration Object");if(!t.name)throw sm("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw sm(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function sm(t){return ln.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S5{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=E5(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I5(t){try{t.swRegistration=await navigator.serviceWorker.register(Y6,{scope:J6}),t.swRegistration.update().catch(()=>{}),await b5(t.swRegistration)}catch(e){throw ln.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}}async function b5(t){return new Promise((e,n)=>{const r=setTimeout(()=>n(new Error(`Service worker not registered after ${S1} ms`)),S1),i=t.installing||t.waiting;t.active?(clearTimeout(r),e()):i?i.onstatechange=a=>{var l;((l=a.target)===null||l===void 0?void 0:l.state)==="activated"&&(i.onstatechange=null,clearTimeout(r),e())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A5(t,e){if(!e&&!t.swRegistration&&await I5(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw ln.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C5(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=Vb)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R5(t,e){if(!navigator)throw ln.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw ln.create("permission-blocked");return await C5(t,e?.vapidKey),await A5(t,e?.serviceWorkerRegistration),m5(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P5(t,e,n){const r=k5(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[Db],message_name:n[e5],message_time:n[t5],message_device_time:Math.floor(Date.now()/1e3)})}function k5(t){switch(t){case Ru.NOTIFICATION_CLICKED:return"notification_open";case Ru.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N5(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Ru.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(C1(n)):t.onMessageHandler.next(C1(n)));const r=n.data;T5(r)&&r[n5]==="1"&&await P5(t,n.messageType,r)}const R1="@firebase/messaging",P1="0.12.22";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5=t=>{const e=new S5(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>N5(e,n)),e},D5=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>R5(e,r)}};function O5(){hr(new Wn("messaging",V5,"PUBLIC")),hr(new Wn("messaging-internal",D5,"PRIVATE")),wn(R1,P1),wn(R1,P1,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j5(){try{await DE()}catch{return!1}return typeof window<"u"&&VE()&&xV()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L5(t=vd()){return j5().then(e=>{if(!e)throw ln.create("unsupported-browser")},e=>{throw ln.create("indexed-db-unsupported")}),po(ct(t),"messaging").getImmediate()}O5();const M5={apiKey:void 0,authDomain:void 0,projectId:void 0,storageBucket:void 0,messagingSenderId:void 0,appId:void 0,measurementId:void 0},zd=LE(M5),ar=OM(zd),rg=DO(zd),k1=l6(zd);let F5=null;try{F5=L5(zd)}catch(t){console.log("Firebase messaging not supported in this environment:",t)}/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),B5=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),N1=t=>{const e=B5(t);return e.charAt(0).toUpperCase()+e.slice(1)},Mb=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),$5=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var z5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=M.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:l,...h},f)=>M.createElement("svg",{ref:f,...z5,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:Mb("lucide",i),...!a&&!$5(h)&&{"aria-hidden":"true"},...h},[...l.map(([p,g])=>M.createElement(p,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=(t,e)=>{const n=M.forwardRef(({className:r,...i},a)=>M.createElement(H5,{ref:a,iconNode:e,className:Mb(`lucide-${U5(N1(t))}`,`lucide-${t}`,r),...i}));return n.displayName=N1(t),n};/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],q5=Re("archive",W5);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]],G5=Re("at-sign",K5);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],X5=Re("bell",Q5);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],J5=Re("camera",Y5);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],eF=Re("check-check",Z5);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tF=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],nF=Re("check",tF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],sF=Re("clock",rF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iF=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],oF=Re("cloud-rain",iF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],lF=Re("cloud",aF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],cF=Re("download",uF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],dF=Re("ellipsis-vertical",hF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],Fb=Re("ellipsis",fF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],V1=Re("file",pF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mF=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],gF=Re("hash",mF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],vF=Re("image",yF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],wF=Re("info",_F);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],TF=Re("loader",xF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ld=Re("map-pin",EF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],sg=Re("message-circle",SF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],bF=Re("message-square",IF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],CF=Re("mic",AF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RF=[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]],PF=Re("moon",RF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],NF=Re("navigation",kF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],Ub=Re("paperclip",VF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],OF=Re("pause",DF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Bb=Re("phone",jF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],im=Re("pin",LF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],FF=Re("play",MF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],BF=Re("refresh-cw",UF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=[["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}],["path",{d:"m9 17-5-5 5-5",key:"nvlc11"}]],Zl=Re("reply",$F);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],t0=Re("search",zF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HF=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],$b=Re("send",HF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],ud=Re("smile",WF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],KF=Re("square",qF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GF=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],D1=Re("sun",GF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QF=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],XF=Re("trash-2",QF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],zb=Re("user-plus",YF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JF=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Hb=Re("users",JF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],Wb=Re("video",ZF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e9=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],t9=Re("volume-2",e9);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n9=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],r9=Re("volume-x",n9);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s9=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],i9=Re("x",s9);function o9({chats:t,selectedChat:e,onSelectChat:n,isDarkMode:r}){const i=l=>{switch(l){case"farmer":return"text-green-500";case"buyer":return"text-blue-500";case"business":return"text-purple-500";default:return"text-gray-500"}},a=l=>{switch(l){case"farmer":return"";case"buyer":return"";case"business":return"";default:return""}};return _.jsxs(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"h-full flex flex-col",children:[_.jsx("div",{className:"p-4",children:_.jsxs("div",{className:`relative ${r?"bg-slate-700/50":"bg-white/50"} backdrop-blur-sm rounded-lg`,children:[_.jsx("input",{type:"text",placeholder:"Search conversations...",className:`w-full px-4 py-2 bg-transparent ${r?"text-white placeholder-slate-400":"text-slate-800 placeholder-slate-500"} focus:outline-none`}),_.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:_.jsx("svg",{className:`h-4 w-4 ${r?"text-slate-400":"text-slate-500"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:_.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]})}),_.jsx("div",{className:"flex-1 overflow-y-auto",children:_.jsx("div",{className:"space-y-1 px-2",children:t.map(l=>_.jsxs(ue.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n(l),className:`relative p-3 rounded-xl cursor-pointer transition-all duration-200 ${e?.id===l.id?`${r?"bg-blue-600/30 border-blue-500/50":"bg-green-600/20 border-green-500/50"} border backdrop-blur-lg`:`${r?"hover:bg-slate-700/30":"hover:bg-white/30"} backdrop-blur-sm`}`,children:[l.unread>0&&_.jsx(ue.div,{initial:{scale:0},animate:{scale:1},className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium z-10",children:l.unread}),_.jsxs("div",{className:"flex items-center space-x-3",children:[_.jsxs("div",{className:"relative",children:[_.jsx("div",{className:`w-12 h-12 rounded-full ${r?"bg-slate-600":"bg-gray-300"} flex items-center justify-center text-2xl overflow-hidden`,children:l.avatar?_.jsx("img",{src:l.avatar,alt:l.name,className:"w-full h-full object-cover"}):_.jsx("span",{children:a(l.type)})}),_.jsx(ue.div,{initial:{scale:0},animate:{scale:1},className:`absolute -bottom-0.5 -right-0.5 w-4 h-4 rounded-full border-2 ${r?"border-slate-800":"border-white"} ${l.online?"bg-green-500":"bg-gray-400"}`})]}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center space-x-2",children:[_.jsx("h3",{className:`font-semibold truncate ${r?"text-white":"text-slate-800"}`,children:l.name}),_.jsx("span",{className:`text-xs ${i(l.type)}`,children:a(l.type)})]}),_.jsx("span",{className:`text-xs ${r?"text-slate-400":"text-slate-500"}`,children:l.time})]}),_.jsx("div",{className:"flex items-center justify-between mt-1",children:_.jsx("p",{className:`text-sm truncate ${r?"text-slate-300":"text-slate-600"}`,children:l.lastMessage})}),_.jsxs("div",{className:"flex items-center mt-1 space-x-4",children:[_.jsxs("span",{className:`text-xs ${r?"text-slate-400":"text-slate-500"}`,children:[" ",l.location]}),_.jsxs("span",{className:`text-xs ${r?"text-slate-400":"text-slate-500"}`,children:[" ",l.distance]})]})]})]}),_.jsxs(ue.div,{initial:{opacity:0,x:20},whileHover:{opacity:1,x:0},className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex space-x-1",children:[_.jsx(ue.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:`p-1.5 rounded-lg ${r?"bg-slate-700/50 text-slate-300":"bg-white/50 text-slate-600"} backdrop-blur-sm opacity-0 group-hover:opacity-100 transition-opacity`,children:_.jsx(Bb,{size:12})}),_.jsx(ue.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:`p-1.5 rounded-lg ${r?"bg-slate-700/50 text-slate-300":"bg-white/50 text-slate-600"} backdrop-blur-sm opacity-0 group-hover:opacity-100 transition-opacity`,children:_.jsx(Wb,{size:12})})]})]},l.id))})}),_.jsx("div",{className:"p-4",children:_.jsx(ue.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:`w-full p-3 rounded-xl ${r?"bg-blue-600/30 border border-blue-500/50 text-blue-300":"bg-green-600/20 border border-green-500/50 text-green-700"} backdrop-blur-lg font-medium transition-all duration-200 hover:shadow-lg`,children:"+ Start New Conversation"})})]})}function a9({chat:t,isDarkMode:e,weatherMood:n,WeatherIcon:r}){const[i,a]=M.useState(!1),[l,h]=M.useState(!1),f=()=>t.online?"text-green-500":"text-gray-400",p=()=>{switch(n){case"sunny":return"text-yellow-500";case"cloudy":return"text-gray-400";case"rainy":return"text-blue-500";default:return"text-gray-400"}};return _.jsxs(ue.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.3},className:`px-6 py-4 ${e?"bg-slate-800/30":"bg-white/30"} backdrop-blur-lg border-b ${e?"border-slate-700/50":"border-white/30"} flex items-center justify-between`,children:[_.jsxs("div",{className:"flex items-center space-x-4",children:[_.jsxs("div",{className:"relative",children:[_.jsx("div",{className:`w-12 h-12 rounded-full ${e?"bg-slate-600":"bg-gray-300"} flex items-center justify-center text-2xl overflow-hidden border-2 ${e?"border-slate-700":"border-white/50"}`,children:t.avatar?_.jsx("img",{src:t.avatar,alt:t.name,className:"w-full h-full object-cover"}):_.jsx("span",{children:""})}),_.jsx(ue.div,{initial:{scale:0},animate:{scale:1},className:`absolute -bottom-0.5 -right-0.5 w-4 h-4 rounded-full border-2 ${e?"border-slate-800":"border-white"} ${t.online?"bg-green-500":"bg-gray-400"}`})]}),_.jsxs("div",{className:"flex-1",children:[_.jsxs("div",{className:"flex items-center space-x-2",children:[_.jsx("h2",{className:`text-lg font-semibold ${e?"text-white":"text-slate-800"}`,children:t.name}),_.jsx(ue.div,{animate:{scale:[1,1.1,1],rotate:n==="sunny"?[0,5,-5,0]:0},transition:{duration:2,repeat:1/0},className:p(),children:_.jsx(r,{size:16})})]}),_.jsxs("div",{className:"flex items-center space-x-4",children:[_.jsx("p",{className:`text-sm ${f()}`,children:t.online?"Online":"Last seen 2 hours ago"}),t.location&&_.jsxs("p",{className:`text-sm ${e?"text-slate-400":"text-slate-500"}`,children:[" ",t.location]}),t.type&&_.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${t.type==="farmer"?"bg-green-100 text-green-700":t.type==="buyer"?"bg-blue-100 text-blue-700":"bg-purple-100 text-purple-700"}`,children:t.type})]})]})]}),_.jsxs("div",{className:"flex items-center space-x-2",children:[_.jsx(ue.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:`p-2 rounded-lg ${e?"hover:bg-slate-700/50":"hover:bg-white/50"} transition-colors duration-200`,children:_.jsx(t0,{size:18,className:e?"text-slate-300":"text-slate-600"})}),_.jsx(ue.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:`p-2 rounded-lg ${e?"hover:bg-slate-700/50":"hover:bg-white/50"} transition-colors duration-200`,children:_.jsx(Bb,{size:18,className:e?"text-slate-300":"text-slate-600"})}),_.jsx(ue.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:`p-2 rounded-lg ${e?"hover:bg-slate-700/50":"hover:bg-white/50"} transition-colors duration-200`,children:_.jsx(Wb,{size:18,className:e?"text-slate-300":"text-slate-600"})}),_.jsxs("div",{className:"relative",children:[_.jsx(ue.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>a(!i),className:`p-2 rounded-lg ${e?"hover:bg-slate-700/50":"hover:bg-white/50"} transition-colors duration-200`,children:_.jsx(Fb,{size:18,className:e?"text-slate-300":"text-slate-600"})}),i&&_.jsx(ue.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},className:`absolute right-0 top-full mt-2 w-48 ${e?"bg-slate-800/90":"bg-white/90"} backdrop-blur-lg rounded-xl border ${e?"border-slate-700/50":"border-white/30"} shadow-xl z-50`,children:_.jsx("div",{className:"py-2",children:[{icon:wF,label:"View Profile",color:"text-blue-500"},{icon:zb,label:"Add to Contacts",color:"text-green-500"},{icon:l?t9:r9,label:l?"Unmute":"Mute",color:"text-yellow-500"},{icon:q5,label:"Archive Chat",color:"text-gray-500"},{icon:XF,label:"Delete Chat",color:"text-red-500"}].map((g,w)=>_.jsxs(ue.button,{whileHover:{x:4},onClick:()=>{g.label.includes("Mute")&&h(!l),a(!1)},className:`w-full flex items-center space-x-3 px-4 py-2 text-left ${e?"hover:bg-slate-700/50 text-slate-300":"hover:bg-gray-100/50 text-slate-700"} transition-colors duration-200`,children:[_.jsx(g.icon,{size:16,className:g.color}),_.jsx("span",{className:"text-sm",children:g.label})]},w))})})]})]}),i&&_.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>a(!1)})]})}function l9({messages:t,isDarkMode:e,isGroup:n=!1}){const r=M.useRef(null),[i,a]=M.useState(null),[l,h]=M.useState(null),[f,p]=M.useState(null),g=()=>{r.current?.scrollIntoView({behavior:"smooth"})};M.useEffect(()=>{g()},[t]);const w=U=>new Date(U).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}),T=U=>{const z=new Date,K=new Date(U),Q=z-K,Y=Math.ceil(Q/(1e3*60*60*24));return Y===1?"Today":Y===2?"Yesterday":Y<=7?K.toLocaleDateString("en-US",{weekday:"long"}):K.toLocaleDateString("en-US",{month:"short",day:"numeric"})},C=U=>{switch(U){case"sent":return _.jsx(sF,{size:12,className:"text-gray-400"});case"delivered":return _.jsx(nF,{size:12,className:"text-gray-400"});case"seen":return _.jsx(eF,{size:12,className:"text-blue-500"});default:return null}},V=()=>["","","","","","","",""],O=(U,z)=>{h(null)},R=({message:U,isOwn:z})=>{const K=z?`${e?"bg-gradient-to-r from-blue-600 to-blue-700 text-white":"bg-gradient-to-r from-green-500 to-green-600 text-white"} rounded-t-2xl rounded-bl-2xl rounded-br-md`:`${e?"bg-slate-700/70 text-slate-100":"bg-white/70 text-slate-800"} rounded-t-2xl rounded-br-2xl rounded-bl-md border ${e?"border-slate-600/50":"border-white/50"}`;return _.jsxs(ue.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{duration:.3},className:`max-w-xs lg:max-w-md px-4 py-3 ${K} backdrop-blur-md shadow-lg relative group`,onContextMenu:Q=>{Q.preventDefault(),a(U.id)},children:[n&&!z&&_.jsx("p",{className:`text-xs font-medium mb-1 ${e?"text-slate-300":"text-slate-600"}`,children:U.senderName}),_.jsxs("div",{className:"space-y-2",children:[U.type==="text"&&_.jsx("p",{className:"text-sm leading-relaxed break-words",children:U.text}),U.type==="image"&&_.jsxs("div",{className:"space-y-2",children:[_.jsx("img",{src:U.content,alt:"Shared image",className:"max-w-full rounded-lg cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{}}),U.text&&_.jsx("p",{className:"text-sm",children:U.text})]}),U.type==="audio"&&_.jsxs("div",{className:"flex items-center space-x-3 bg-black/10 rounded-lg p-2",children:[_.jsx(ue.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>p(f===U.id?null:U.id),className:"p-2 bg-white/20 rounded-full",children:f===U.id?_.jsx(OF,{size:16}):_.jsx(FF,{size:16})}),_.jsx("div",{className:"flex-1 h-8 bg-white/20 rounded-full flex items-center px-2",children:_.jsx("div",{className:"w-full h-1 bg-white/30 rounded-full",children:_.jsx("div",{className:"w-1/3 h-full bg-white rounded-full"})})}),_.jsx("span",{className:"text-xs opacity-70",children:"0:32"})]}),U.type==="file"&&_.jsxs("div",{className:"flex items-center space-x-3 bg-black/10 rounded-lg p-3",children:[_.jsx("div",{className:"p-2 bg-white/20 rounded-lg",children:_.jsx(cF,{size:16})}),_.jsxs("div",{className:"flex-1",children:[_.jsx("p",{className:"text-sm font-medium",children:U.fileName}),_.jsx("p",{className:"text-xs opacity-70",children:U.fileSize})]})]})]}),U.reactions&&Object.keys(U.reactions).length>0&&_.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:Object.entries(U.reactions).map(([Q,Y])=>_.jsxs(ue.span,{whileHover:{scale:1.1},className:"inline-flex items-center space-x-1 bg-black/10 rounded-full px-2 py-1 text-xs cursor-pointer",onClick:()=>O(U.id),children:[_.jsx("span",{children:Q}),_.jsx("span",{children:Y})]},Q))}),_.jsxs("div",{className:`flex items-center justify-end space-x-1 mt-2 ${z?"text-white/70":e?"text-slate-400":"text-slate-500"}`,children:[_.jsx("span",{className:"text-xs",children:w(U.timestamp)}),z&&!n&&C(U.status)]}),_.jsxs(ue.div,{initial:{opacity:0,x:z?20:-20},whileInView:{opacity:1,x:0},className:`absolute top-1/2 transform -translate-y-1/2 ${z?"-left-12":"-right-12"} opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex space-x-1`,children:[_.jsx(ue.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:`p-1.5 rounded-lg ${e?"bg-slate-700/80 text-slate-300":"bg-white/80 text-slate-600"} backdrop-blur-sm shadow-lg`,children:_.jsx(Zl,{size:12})}),_.jsx(ue.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>h(l===U.id?null:U.id),className:`p-1.5 rounded-lg ${e?"bg-slate-700/80 text-slate-300":"bg-white/80 text-slate-600"} backdrop-blur-sm shadow-lg`,children:_.jsx(ud,{size:12})}),_.jsx(ue.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:`p-1.5 rounded-lg ${e?"bg-slate-700/80 text-slate-300":"bg-white/80 text-slate-600"} backdrop-blur-sm shadow-lg`,children:_.jsx(Fb,{size:12})}),l===U.id&&_.jsx(ue.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:`absolute ${z?"right-0":"left-0"} top-full mt-2 p-2 ${e?"bg-slate-800/90":"bg-white/90"} backdrop-blur-lg rounded-xl border ${e?"border-slate-700/50":"border-white/50"} shadow-xl flex space-x-1 z-50`,children:V().map(Q=>_.jsx(ue.button,{whileHover:{scale:1.2},whileTap:{scale:.9},onClick:()=>O(U.id),className:"p-2 hover:bg-black/10 rounded-lg transition-colors",children:Q},Q))})]})]})},L=t.reduce((U,z)=>{const K=T(z.timestamp);return U[K]||(U[K]=[]),U[K].push(z),U},{});return _.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[_.jsx(rs,{children:Object.entries(L).map(([U,z])=>_.jsxs("div",{className:"space-y-4",children:[_.jsx(ue.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex items-center justify-center",children:_.jsx("div",{className:`px-3 py-1 rounded-full text-xs ${e?"bg-slate-700/50 text-slate-300":"bg-white/50 text-slate-600"} backdrop-blur-sm border ${e?"border-slate-600/50":"border-white/30"}`,children:U})}),_.jsx("div",{className:"space-y-3",children:z.map(K=>{const Q=K.senderId==="me";return _.jsx("div",{className:`flex ${Q?"justify-end":"justify-start"}`,children:_.jsx(R,{message:K,isOwn:Q})},K.id)})})]},U))}),_.jsx(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex justify-start",children:_.jsx("div",{className:`px-4 py-3 rounded-t-2xl rounded-br-2xl rounded-bl-md ${e?"bg-slate-700/70":"bg-white/70"} backdrop-blur-md border ${e?"border-slate-600/50":"border-white/50"} shadow-lg`,children:_.jsx("div",{className:"flex space-x-1",children:[0,1,2].map(U=>_.jsx(ue.div,{animate:{scale:[1,1.5,1],opacity:[.5,1,.5]},transition:{duration:1.5,repeat:1/0,delay:U*.2},className:`w-2 h-2 rounded-full ${e?"bg-slate-400":"bg-slate-500"}`},U))})})}),_.jsx("div",{ref:r}),l&&_.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>h(null)})]})}function u9({onSendMessage:t,isDarkMode:e}){const[n,r]=M.useState(""),[i,a]=M.useState(!1),[l,h]=M.useState(!1),[f,p]=M.useState(!1),[g,w]=M.useState([]),[T,C]=M.useState(0),V=M.useRef(null),O=M.useRef(null),R=M.useRef(null),L=async()=>{if(n.trim()||g.length>0){const A={text:n.trim(),type:g.length>0?"file":"text"};g.length>0&&(A.files=g.map(b=>({name:b.name,size:b.size,type:b.type,url:b.preview||"#",id:b.id})));try{await t(A),r(""),w([])}catch(b){console.error("Failed to send message:",b)}}},U=A=>{A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),L())},z=(A,b)=>{const F=Array.from(A.target.files).map(P=>({id:Date.now()+Math.random(),file:P,type:b,name:P.name,size:(P.size/1024/1024).toFixed(2)+" MB",preview:b==="image"?URL.createObjectURL(P):null}));w(P=>[...P,...F]),h(!1)},K=A=>{w(b=>b.filter(D=>D.id!==A))},Q=()=>{a(!0),C(0),R.current=setInterval(()=>{C(A=>A+1)},1e3)},Y=()=>{a(!1),clearInterval(R.current),t({text:"",type:"audio",duration:T}),C(0)},N=A=>{const b=Math.floor(A/60),D=A%60;return`${b}:${D.toString().padStart(2,"0")}`},S=["","","","","","","","","","","","","","","",""];return _.jsxs("div",{className:`p-4 ${e?"bg-slate-800/30":"bg-white/30"} backdrop-blur-lg border-t ${e?"border-slate-700/50":"border-white/30"}`,children:[_.jsx(rs,{children:g.length>0&&_.jsx(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},className:"mb-4",children:_.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(A=>_.jsxs(ue.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:`relative p-2 rounded-lg ${e?"bg-slate-700/50":"bg-white/50"} backdrop-blur-sm border ${e?"border-slate-600/50":"border-white/50"}`,children:[A.type==="image"&&A.preview?_.jsx("img",{src:A.preview,alt:A.name,className:"w-16 h-16 object-cover rounded"}):_.jsx("div",{className:"w-16 h-16 flex items-center justify-center",children:_.jsx(V1,{size:24,className:e?"text-slate-300":"text-slate-600"})}),_.jsx("p",{className:`text-xs mt-1 ${e?"text-slate-300":"text-slate-600"} truncate max-w-16`,children:A.name}),_.jsx("p",{className:`text-xs ${e?"text-slate-400":"text-slate-500"}`,children:A.size}),_.jsx(ue.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>K(A.id),className:"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs",children:_.jsx(i9,{size:12})})]},A.id))})})}),_.jsx(rs,{children:i&&_.jsxs(ue.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:`mb-4 p-4 rounded-lg ${e?"bg-red-900/30":"bg-red-100/30"} backdrop-blur-sm border border-red-500/50 flex items-center justify-between`,children:[_.jsxs("div",{className:"flex items-center space-x-3",children:[_.jsx(ue.div,{animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0},className:"w-3 h-3 bg-red-500 rounded-full"}),_.jsxs("span",{className:`text-sm font-medium ${e?"text-red-300":"text-red-700"}`,children:["Recording... ",N(T)]})]}),_.jsx(ue.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:Y,className:"p-2 bg-red-500 text-white rounded-lg",children:_.jsx(KF,{size:16})})]})}),_.jsxs("div",{className:"flex items-end space-x-2",children:[_.jsxs("div",{className:"relative",children:[_.jsx(ue.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>h(!l),className:`p-3 rounded-xl ${l?e?"bg-blue-600 text-white":"bg-green-600 text-white":e?"bg-slate-700/50 text-slate-300":"bg-white/50 text-slate-600"} backdrop-blur-sm transition-colors duration-200`,children:_.jsx(Ub,{size:20})}),_.jsx(rs,{children:l&&_.jsx(ue.div,{initial:{opacity:0,scale:.8,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:10},className:`absolute bottom-full left-0 mb-2 p-2 ${e?"bg-slate-800/90":"bg-white/90"} backdrop-blur-lg rounded-xl border ${e?"border-slate-700/50":"border-white/50"} shadow-xl`,children:_.jsx("div",{className:"grid grid-cols-2 gap-2 w-32",children:[{icon:vF,label:"Photo",action:()=>O.current?.click(),color:"text-purple-500"},{icon:J5,label:"Camera",action:()=>{},color:"text-blue-500"},{icon:V1,label:"File",action:()=>V.current?.click(),color:"text-gray-500"},{icon:ld,label:"Location",action:()=>{},color:"text-red-500"}].map((A,b)=>_.jsxs(ue.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:A.action,className:`p-3 rounded-lg ${e?"hover:bg-slate-700/50":"hover:bg-gray-100/50"} transition-colors duration-200 flex flex-col items-center space-y-1`,children:[_.jsx(A.icon,{size:20,className:A.color}),_.jsx("span",{className:`text-xs ${e?"text-slate-300":"text-slate-600"}`,children:A.label})]},b))})})})]}),_.jsx("div",{className:`flex-1 rounded-xl ${e?"bg-slate-700/50":"bg-white/50"} backdrop-blur-sm border ${e?"border-slate-600/50":"border-white/50"} p-2 min-h-[3rem] max-h-32 overflow-hidden`,children:_.jsxs("div",{className:"flex items-end space-x-2",children:[_.jsxs("div",{className:"relative",children:[_.jsx(ue.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>p(!f),className:`p-1 rounded ${e?"text-slate-300 hover:text-white":"text-slate-600 hover:text-slate-800"} transition-colors duration-200`,children:_.jsx(ud,{size:18})}),_.jsx(rs,{children:f&&_.jsx(ue.div,{initial:{opacity:0,scale:.8,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:10},className:`absolute bottom-full left-0 mb-2 p-3 ${e?"bg-slate-800/90":"bg-white/90"} backdrop-blur-lg rounded-xl border ${e?"border-slate-700/50":"border-white/50"} shadow-xl w-64 z-50`,children:_.jsx("div",{className:"grid grid-cols-8 gap-1",children:S.map((A,b)=>_.jsx(ue.button,{whileHover:{scale:1.2},whileTap:{scale:.9},onClick:()=>{r(D=>D+A),p(!1)},className:"p-2 hover:bg-black/10 rounded text-lg",children:A},b))})})})]}),_.jsx("textarea",{value:n,onChange:A=>r(A.target.value),onKeyPress:U,placeholder:"Type a message...",className:`flex-1 bg-transparent ${e?"text-white placeholder-slate-400":"text-slate-800 placeholder-slate-500"} focus:outline-none resize-none max-h-20 min-h-[1.5rem]`,rows:1,style:{height:"auto",minHeight:"1.5rem",maxHeight:"5rem"},onInput:A=>{A.target.style.height="auto",A.target.style.height=Math.min(A.target.scrollHeight,80)+"px"}})]})}),n.trim()||g.length>0?_.jsx(ue.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:L,className:`p-3 rounded-xl ${e?"bg-blue-600 hover:bg-blue-700 text-white":"bg-green-600 hover:bg-green-700 text-white"} transition-colors duration-200 shadow-lg`,children:_.jsx($b,{size:20})}):_.jsx(ue.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onMouseDown:Q,onMouseUp:Y,onMouseLeave:Y,className:`p-3 rounded-xl ${i?"bg-red-600 text-white":e?"bg-slate-700/50 text-slate-300 hover:bg-slate-600/50":"bg-white/50 text-slate-600 hover:bg-white/70"} backdrop-blur-sm transition-colors duration-200`,children:_.jsx(CF,{size:20})})]}),_.jsx("input",{ref:V,type:"file",multiple:!0,className:"hidden",onChange:A=>z(A,"file"),accept:".pdf,.doc,.docx,.txt,.xlsx,.ppt,.pptx"}),_.jsx("input",{ref:O,type:"file",multiple:!0,className:"hidden",onChange:A=>z(A,"image"),accept:"image/*"}),(l||f)&&_.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>{h(!1),p(!1)}})]})}function c9({userLocation:t,isDarkMode:e}){const[n,r]=M.useState([]),[i,a]=M.useState(!0),[l,h]=M.useState(5),[f,p]=M.useState("all"),[g,w]=M.useState(""),T=[{id:1,name:"Hassan Mwanga",type:"farmer",avatar:"/api/placeholder/40/40",distance:"1.2 km",location:"Dodoma Central",crops:["Maize","Sunflower"],rating:4.8,online:!0,lastSeen:"Active now",bio:"Experienced maize farmer with 15 years of expertise"},{id:2,name:"Grace Agro Ltd",type:"buyer",avatar:"/api/placeholder/40/40",distance:"2.8 km",location:"Dodoma Industrial",interests:["Maize","Rice","Vegetables"],rating:4.6,online:!1,lastSeen:"30 min ago",bio:"Agricultural produce buyer, fair prices guaranteed"},{id:3,name:"John Kimaro",type:"farmer",avatar:"/api/placeholder/40/40",distance:"3.5 km",location:"Dodoma Rural",crops:["Vegetables","Fruits"],rating:4.9,online:!0,lastSeen:"Active now",bio:"Organic farming specialist, premium quality produce"},{id:4,name:"Agri-Tech Solutions",type:"business",avatar:"/api/placeholder/40/40",distance:"4.1 km",location:"Dodoma Tech Hub",services:["Equipment","Consulting","Training"],rating:4.7,online:!0,lastSeen:"Active now",bio:"Modern farming solutions and equipment rental"},{id:5,name:"Amina Said",type:"farmer",avatar:"/api/placeholder/40/40",distance:"4.8 km",location:"Dodoma East",crops:["Rice","Beans"],rating:4.5,online:!1,lastSeen:"2 hours ago",bio:"Rice cultivation expert, sustainable farming practices"}];M.useEffect(()=>{a(!0),setTimeout(()=>{r(T),a(!1)},2e3)},[t,l]);const C=()=>{a(!0),setTimeout(()=>{r([...T].sort(()=>Math.random()-.5)),a(!1)},1500)},V=L=>{r(U=>U.map(z=>z.id===L?{...z,friendRequestSent:!0}:z))},O=L=>{switch(L){case"farmer":return{emoji:"",bg:"bg-green-100 text-green-700"};case"buyer":return{emoji:"",bg:"bg-blue-100 text-blue-700"};case"business":return{emoji:"",bg:"bg-purple-100 text-purple-700"};default:return{emoji:"",bg:"bg-gray-100 text-gray-700"}}},R=n.filter(L=>f==="all"||L.type===f).filter(L=>L.name.toLowerCase().includes(g.toLowerCase())||L.location.toLowerCase().includes(g.toLowerCase())||L.crops&&L.crops.some(U=>U.toLowerCase().includes(g.toLowerCase()))||L.interests&&L.interests.some(U=>U.toLowerCase().includes(g.toLowerCase()))||L.services&&L.services.some(U=>U.toLowerCase().includes(g.toLowerCase())));return _.jsxs(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"h-full flex flex-col",children:[_.jsxs("div",{className:"p-4 space-y-4",children:[_.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg ${e?"bg-slate-700/50":"bg-white/50"} backdrop-blur-sm border ${e?"border-slate-600/50":"border-white/50"}`,children:[_.jsxs("div",{className:"flex items-center space-x-2",children:[_.jsx(NF,{size:16,className:e?"text-blue-400":"text-green-600"}),_.jsx("span",{className:`text-sm ${e?"text-slate-300":"text-slate-700"}`,children:t?"Location detected":"Enable location"})]}),_.jsx(ue.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:C,disabled:i,className:`p-1 rounded ${e?"text-slate-400 hover:text-white":"text-slate-600 hover:text-slate-800"} transition-colors duration-200`,children:_.jsx(BF,{size:16,className:i?"animate-spin":""})})]}),_.jsxs("div",{className:`relative ${e?"bg-slate-700/50":"bg-white/50"} backdrop-blur-sm rounded-lg border ${e?"border-slate-600/50":"border-white/50"}`,children:[_.jsx("input",{type:"text",placeholder:"Search nearby users...",value:g,onChange:L=>w(L.target.value),className:`w-full px-4 py-2 bg-transparent ${e?"text-white placeholder-slate-400":"text-slate-800 placeholder-slate-500"} focus:outline-none`}),_.jsx(t0,{size:16,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${e?"text-slate-400":"text-slate-500"}`})]}),_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsx("div",{className:`flex rounded-lg p-1 ${e?"bg-slate-700/50":"bg-white/50"} backdrop-blur-sm`,children:[{id:"all",label:"All"},{id:"farmer",label:"Farmers"},{id:"buyer",label:"Buyers"},{id:"business",label:"Business"}].map(L=>_.jsx(ue.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>p(L.id),className:`px-3 py-1 rounded text-xs font-medium transition-all duration-200 ${f===L.id?`${e?"bg-blue-600 text-white":"bg-green-600 text-white"} shadow-lg`:`${e?"text-slate-300 hover:text-white":"text-slate-600 hover:text-slate-800"}`}`,children:L.label},L.id))}),_.jsxs("select",{value:l,onChange:L=>h(Number(L.target.value)),className:`px-3 py-1 rounded text-xs ${e?"bg-slate-700/50 text-slate-300":"bg-white/50 text-slate-700"} backdrop-blur-sm border ${e?"border-slate-600/50":"border-white/50"} focus:outline-none`,children:[_.jsx("option",{value:1,children:"1 km"}),_.jsx("option",{value:5,children:"5 km"}),_.jsx("option",{value:10,children:"10 km"}),_.jsx("option",{value:25,children:"25 km"}),_.jsx("option",{value:50,children:"50 km"})]})]})]}),_.jsx("div",{className:"flex-1 overflow-y-auto px-2",children:i?_.jsx("div",{className:"flex items-center justify-center py-12",children:_.jsxs("div",{className:"text-center",children:[_.jsx(ue.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"mb-4",children:_.jsx(TF,{size:32,className:e?"text-blue-400":"text-green-600"})}),_.jsx("p",{className:`text-sm ${e?"text-slate-300":"text-slate-600"}`,children:"Discovering nearby users..."})]})}):R.length===0?_.jsx("div",{className:"flex items-center justify-center py-12",children:_.jsxs("div",{className:"text-center",children:[_.jsx(ld,{size:48,className:`mb-4 mx-auto ${e?"text-slate-400":"text-slate-500"}`}),_.jsx("p",{className:`text-sm ${e?"text-slate-300":"text-slate-600"}`,children:"No users found in your area"}),_.jsx("p",{className:`text-xs mt-1 ${e?"text-slate-400":"text-slate-500"}`,children:"Try increasing the search radius"})]})}):_.jsx("div",{className:"space-y-2 pb-4",children:_.jsx(rs,{children:R.map(L=>{const U=O(L.type);return _.jsx(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:`p-4 rounded-xl ${e?"bg-slate-700/30 hover:bg-slate-700/50":"bg-white/30 hover:bg-white/50"} backdrop-blur-sm border ${e?"border-slate-600/50":"border-white/50"} transition-all duration-200`,children:_.jsxs("div",{className:"flex items-start space-x-3",children:[_.jsxs("div",{className:"relative",children:[_.jsx("div",{className:`w-12 h-12 rounded-full ${e?"bg-slate-600":"bg-gray-300"} flex items-center justify-center text-2xl overflow-hidden`,children:L.avatar?_.jsx("img",{src:L.avatar,alt:L.name,className:"w-full h-full object-cover"}):_.jsx("span",{children:U.emoji})}),_.jsx(ue.div,{initial:{scale:0},animate:{scale:1},className:`absolute -bottom-0.5 -right-0.5 w-4 h-4 rounded-full border-2 ${e?"border-slate-800":"border-white"} ${L.online?"bg-green-500":"bg-gray-400"}`})]}),_.jsx("div",{className:"flex-1 min-w-0",children:_.jsxs("div",{className:"flex items-start justify-between",children:[_.jsxs("div",{className:"flex-1",children:[_.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[_.jsx("h3",{className:`font-semibold truncate ${e?"text-white":"text-slate-800"}`,children:L.name}),_.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${U.bg}`,children:L.type})]}),_.jsxs("div",{className:"flex items-center space-x-4 mb-2",children:[_.jsxs("span",{className:`text-xs flex items-center ${e?"text-slate-400":"text-slate-500"}`,children:[_.jsx(ld,{size:12,className:"mr-1"}),L.distance,"  ",L.location]}),_.jsx("span",{className:`text-xs ${L.online?"text-green-500":e?"text-slate-400":"text-slate-500"}`,children:L.lastSeen})]}),_.jsx("p",{className:`text-xs ${e?"text-slate-300":"text-slate-600"} mb-2`,children:L.bio}),_.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:(L.crops||L.interests||L.services||[]).slice(0,3).map((z,K)=>_.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${e?"bg-slate-600/50 text-slate-300":"bg-gray-100 text-gray-700"}`,children:z},K))}),_.jsxs("div",{className:"flex items-center space-x-1",children:[_.jsx("span",{className:"text-yellow-500",children:""}),_.jsx("span",{className:`text-xs ${e?"text-slate-300":"text-slate-600"}`,children:L.rating})]})]}),_.jsxs("div",{className:"flex flex-col space-y-2",children:[L.friendRequestSent?_.jsx(ue.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:`px-3 py-1 rounded-lg text-xs ${e?"bg-green-600/20 text-green-400":"bg-green-100 text-green-700"} text-center`,children:"Request Sent"}):_.jsxs(ue.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>V(L.id),className:`px-3 py-1 rounded-lg text-xs ${e?"bg-blue-600/20 text-blue-400 hover:bg-blue-600/30":"bg-green-100 text-green-700 hover:bg-green-200"} transition-colors duration-200 flex items-center space-x-1`,children:[_.jsx(zb,{size:12}),_.jsx("span",{children:"Connect"})]}),_.jsxs(ue.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:`px-3 py-1 rounded-lg text-xs ${e?"bg-slate-600/50 text-slate-300 hover:bg-slate-600/70":"bg-white/50 text-slate-600 hover:bg-white/70"} transition-colors duration-200 flex items-center space-x-1`,children:[_.jsx(sg,{size:12}),_.jsx("span",{children:"Message"})]})]})]})})]})},L.id)})})})})]})}function h9({isDarkMode:t}){const[e,n]=M.useState(""),[r,i]=M.useState(""),[a,l]=M.useState(!1),[h,f]=M.useState("all"),[p,g]=M.useState(null),[w,T]=M.useState(null),C=M.useRef(null),[V,O]=M.useState([{id:1,user:{id:1,name:"Hassan Mwanga",avatar:"/api/placeholder/32/32",type:"farmer",online:!0},message:"Salamu zote! Hali ya mvua imekuwa nzuri sana msimu huu. Je, mmepata changamoto zoyote za wadudu kwenye mazao?",timestamp:new Date(Date.now()-1e3*60*5),reactions:[{emoji:"",count:3,users:["Grace","John","Amina"]},{emoji:"",count:1,users:["Grace"]}],replies:2,pinned:!1,edited:!1,mentions:[],type:"text"},{id:2,user:{id:2,name:"Grace Agro Ltd",avatar:"/api/placeholder/32/32",type:"buyer",online:!0},message:"@Hassan Mwanga Ndiyo, tunasikia changamoto za wadudu, hasa kwenye mahindi. Tunahitaji mbinu za kibiolojia.",timestamp:new Date(Date.now()-1e3*60*3),reactions:[{emoji:"",count:2,users:["Hassan","John"]}],replies:0,pinned:!1,edited:!1,mentions:["Hassan Mwanga"],type:"text",replyTo:1},{id:3,user:{id:3,name:"John Kimaro",avatar:"/api/placeholder/32/32",type:"farmer",online:!0},message:"Nimejaribu kutumia dawa za asili kama neem na pyrethrum. Zimekuwa na matokeo mazuri!",timestamp:new Date(Date.now()-1e3*60*2),reactions:[{emoji:"",count:4,users:["Hassan","Grace","Amina","Tech"]},{emoji:"",count:2,users:["Hassan","Amina"]}],replies:1,pinned:!0,edited:!1,mentions:[],type:"text"},{id:4,user:{id:4,name:"Agri-Tech Solutions",avatar:"/api/placeholder/32/32",type:"business",online:!0},message:"Tunauza sprayers za kielektroniki zenye teknolojia ya GPS. Zinawezesha matumizi sahihi ya dawa.",timestamp:new Date(Date.now()-1e3*60*1),reactions:[{emoji:"",count:1,users:["John"]}],replies:0,pinned:!1,edited:!1,mentions:[],type:"text",attachments:[{type:"image",url:"/api/placeholder/200/150",name:"smart-sprayer.jpg"}]}]),R=()=>{C.current?.scrollIntoView({behavior:"smooth"})};M.useEffect(()=>{R()},[V]);const L=()=>{if(!e.trim())return;const b={id:Date.now(),user:{id:999,name:"You",avatar:"/api/placeholder/32/32",type:"farmer",online:!0},message:e,timestamp:new Date,reactions:[],replies:0,pinned:!1,edited:!1,mentions:U(e),type:"text",replyTo:p?.id};O(D=>[...D,b]),n(""),g(null)},U=b=>{const D=/@(\w+(?:\s+\w+)*)/g,F=[];let P;for(;(P=D.exec(b))!==null;)F.push(P[1]);return F},z=(b,D)=>{O(F=>F.map(P=>P.id===b?P.reactions.find($e=>$e.emoji===D)?{...P,reactions:P.reactions.filter($e=>$e.emoji!==D)}:{...P,reactions:[...P.reactions,{emoji:D,count:1,users:["You"]}]}:P))},K=b=>{g(b),T(null)},Q=b=>{O(D=>D.map(F=>F.id===b?{...F,pinned:!F.pinned}:F))},Y=b=>{switch(b){case"farmer":return{emoji:"",color:"text-green-500"};case"buyer":return{emoji:"",color:"text-blue-500"};case"business":return{emoji:"",color:"text-purple-500"};default:return{emoji:"",color:"text-gray-500"}}},N=b=>{const F=new Date-b,P=Math.floor(F/(1e3*60)),Ae=Math.floor(F/(1e3*60*60)),$e=Math.floor(F/(1e3*60*60*24));return P<1?"Now":P<60?`${P}m`:Ae<24?`${Ae}h`:`${$e}d`},S=["","","","","","","","","",""],A=V.filter(b=>{const D=!r||b.message.toLowerCase().includes(r.toLowerCase())||b.user.name.toLowerCase().includes(r.toLowerCase()),F=h==="all"||h==="pinned"&&b.pinned||h==="mentions"&&b.mentions.includes("You")||h==="threads"&&b.replies>0;return D&&F});return _.jsxs(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"h-full flex flex-col",children:[_.jsxs("div",{className:`p-4 border-b ${t?"border-slate-600/50 bg-slate-800/30":"border-white/50 bg-white/30"} backdrop-blur-sm`,children:[_.jsxs("div",{className:"flex items-center justify-between mb-3",children:[_.jsxs("div",{className:"flex items-center space-x-2",children:[_.jsx(gF,{size:20,className:t?"text-blue-400":"text-green-600"}),_.jsx("h2",{className:`font-semibold ${t?"text-white":"text-slate-800"}`,children:"SmartFarm Community"}),_.jsxs("div",{className:"flex items-center space-x-1",children:[_.jsx(Hb,{size:14,className:t?"text-slate-400":"text-slate-500"}),_.jsx("span",{className:`text-xs ${t?"text-slate-400":"text-slate-500"}`,children:"1,247 members"})]})]}),_.jsx(ue.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:`p-2 rounded-lg ${t?"text-slate-400 hover:text-white hover:bg-slate-700/50":"text-slate-600 hover:text-slate-800 hover:bg-white/50"} transition-all duration-200`,children:_.jsx(dF,{size:16})})]}),_.jsx("div",{className:"flex items-center space-x-2 mb-2",children:_.jsxs("div",{className:`flex-1 relative ${t?"bg-slate-700/50":"bg-white/50"} backdrop-blur-sm rounded-lg border ${t?"border-slate-600/50":"border-white/50"}`,children:[_.jsx("input",{type:"text",placeholder:"Search messages...",value:r,onChange:b=>i(b.target.value),className:`w-full px-3 py-2 bg-transparent text-sm ${t?"text-white placeholder-slate-400":"text-slate-800 placeholder-slate-500"} focus:outline-none`}),_.jsx(t0,{size:14,className:`absolute right-3 top-1/2 transform -translate-y-1/2 ${t?"text-slate-400":"text-slate-500"}`})]})}),_.jsx("div",{className:`flex rounded-lg p-1 ${t?"bg-slate-700/50":"bg-white/50"} backdrop-blur-sm`,children:[{id:"all",label:"All",icon:bF},{id:"pinned",label:"Pinned",icon:im},{id:"mentions",label:"Mentions",icon:G5},{id:"threads",label:"Threads",icon:Zl}].map(b=>_.jsxs(ue.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>f(b.id),className:`flex items-center space-x-1 px-3 py-1 rounded text-xs font-medium transition-all duration-200 ${h===b.id?`${t?"bg-blue-600 text-white":"bg-green-600 text-white"} shadow-lg`:`${t?"text-slate-300 hover:text-white":"text-slate-600 hover:text-slate-800"}`}`,children:[_.jsx(b.icon,{size:12}),_.jsx("span",{children:b.label})]},b.id))})]}),_.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[_.jsx(rs,{children:A.map(b=>{const D=Y(b.user.type),F=b.replyTo,P=F?V.find(Ae=>Ae.id===b.replyTo):null;return _.jsxs(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:`${t?"bg-slate-700/20 hover:bg-slate-700/30":"bg-white/20 hover:bg-white/30"} backdrop-blur-sm rounded-xl p-4 border ${t?"border-slate-600/30":"border-white/30"} transition-all duration-200 group ${b.pinned?"ring-2 ring-yellow-500/30":""}`,children:[F&&P&&_.jsxs("div",{className:`mb-2 p-2 rounded-lg ${t?"bg-slate-600/30":"bg-gray-100/50"} border-l-2 ${t?"border-blue-400":"border-green-500"}`,children:[_.jsxs("div",{className:"flex items-center space-x-1 mb-1",children:[_.jsx(Zl,{size:12,className:t?"text-slate-400":"text-slate-500"}),_.jsxs("span",{className:`text-xs ${t?"text-slate-400":"text-slate-500"}`,children:["Replying to ",P.user.name]})]}),_.jsx("p",{className:`text-xs ${t?"text-slate-300":"text-slate-600"} truncate`,children:P.message})]}),_.jsxs("div",{className:"flex items-start space-x-3",children:[_.jsxs("div",{className:"relative",children:[_.jsx("div",{className:`w-10 h-10 rounded-full ${t?"bg-slate-600":"bg-gray-300"} flex items-center justify-center overflow-hidden`,children:b.user.avatar?_.jsx("img",{src:b.user.avatar,alt:b.user.name,className:"w-full h-full object-cover"}):_.jsx("span",{className:"text-lg",children:D.emoji})}),_.jsx(ue.div,{initial:{scale:0},animate:{scale:1},className:`absolute -bottom-0.5 -right-0.5 w-3 h-3 rounded-full border ${t?"border-slate-800":"border-white"} ${b.user.online?"bg-green-500":"bg-gray-400"}`})]}),_.jsxs("div",{className:"flex-1 min-w-0",children:[_.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[_.jsx("h4",{className:`font-semibold text-sm ${t?"text-white":"text-slate-800"}`,children:b.user.name}),_.jsx("span",{className:`text-xs px-1.5 py-0.5 rounded ${D.color} bg-current/10`,children:b.user.type}),_.jsx("span",{className:`text-xs ${t?"text-slate-400":"text-slate-500"}`,children:N(b.timestamp)}),b.edited&&_.jsx("span",{className:`text-xs ${t?"text-slate-400":"text-slate-500"}`,children:"(edited)"}),b.pinned&&_.jsx(im,{size:12,className:"text-yellow-500"})]}),_.jsx("div",{className:`text-sm mb-2 ${t?"text-slate-300":"text-slate-700"}`,children:b.message.split(/(@\w+(?:\s+\w+)*)/).map((Ae,$e)=>Ae.startsWith("@")?_.jsx("span",{className:`${t?"text-blue-400 bg-blue-400/10":"text-green-600 bg-green-100"} px-1 rounded`,children:Ae},$e):Ae)}),b.attachments&&_.jsx("div",{className:"mb-2",children:b.attachments.map((Ae,$e)=>_.jsx("div",{className:"max-w-xs",children:Ae.type==="image"&&_.jsx("img",{src:Ae.url,alt:Ae.name,className:"rounded-lg border border-gray-200"})},$e))}),b.reactions.length>0&&_.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:b.reactions.map((Ae,$e)=>_.jsxs(ue.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>z(b.id,Ae.emoji),className:`flex items-center space-x-1 px-2 py-1 rounded-full text-xs ${t?"bg-slate-600/50 hover:bg-slate-600/70":"bg-white/50 hover:bg-white/70"} transition-colors duration-200`,children:[_.jsx("span",{children:Ae.emoji}),_.jsx("span",{children:Ae.count})]},$e))}),_.jsxs("div",{className:"flex items-center space-x-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[_.jsx(ue.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>K(b),className:`p-1 rounded ${t?"text-slate-400 hover:text-white hover:bg-slate-600/50":"text-slate-500 hover:text-slate-700 hover:bg-white/50"} transition-all duration-200`,children:_.jsx(Zl,{size:14})}),_.jsx("div",{className:"relative",children:_.jsx(ue.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:`p-1 rounded ${t?"text-slate-400 hover:text-white hover:bg-slate-600/50":"text-slate-500 hover:text-slate-700 hover:bg-white/50"} transition-all duration-200`,children:_.jsx(ud,{size:14})})}),_.jsx(ue.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>Q(b.id),className:`p-1 rounded ${b.pinned?"text-yellow-500":t?"text-slate-400 hover:text-white hover:bg-slate-600/50":"text-slate-500 hover:text-slate-700 hover:bg-white/50"} transition-all duration-200`,children:_.jsx(im,{size:14})}),b.replies>0&&_.jsxs("button",{className:`text-xs ${t?"text-slate-400 hover:text-white":"text-slate-500 hover:text-slate-700"} transition-colors duration-200`,children:[b.replies," ",b.replies===1?"reply":"replies"]})]})]})]})]},b.id)})}),_.jsx("div",{ref:C})]}),p&&_.jsx(ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`px-4 py-2 ${t?"bg-slate-700/50 border-slate-600/50":"bg-white/50 border-white/50"} backdrop-blur-sm border-t`,children:_.jsxs("div",{className:"flex items-center justify-between",children:[_.jsxs("div",{className:"flex items-center space-x-2",children:[_.jsx(Zl,{size:14,className:t?"text-blue-400":"text-green-600"}),_.jsxs("span",{className:`text-sm ${t?"text-slate-300":"text-slate-700"}`,children:["Replying to ",p.user.name]})]}),_.jsx(ue.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>g(null),className:`text-xs ${t?"text-slate-400 hover:text-white":"text-slate-500 hover:text-slate-700"} transition-colors duration-200`,children:"Cancel"})]})}),_.jsxs("div",{className:`p-4 border-t ${t?"border-slate-600/50 bg-slate-800/30":"border-white/50 bg-white/30"} backdrop-blur-sm`,children:[_.jsxs("div",{className:`flex items-end space-x-2 p-3 rounded-xl ${t?"bg-slate-700/50 border-slate-600/50":"bg-white/50 border-white/50"} backdrop-blur-sm border`,children:[_.jsx(ue.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:`p-2 rounded-lg ${t?"text-slate-400 hover:text-white hover:bg-slate-600/50":"text-slate-600 hover:text-slate-800 hover:bg-white/50"} transition-all duration-200`,children:_.jsx(Ub,{size:18})}),_.jsx("div",{className:"flex-1",children:_.jsx("textarea",{value:e,onChange:b=>n(b.target.value),onKeyPress:b=>{b.key==="Enter"&&!b.shiftKey&&(b.preventDefault(),L())},placeholder:"Share your thoughts with the community...",className:`w-full bg-transparent ${t?"text-white placeholder-slate-400":"text-slate-800 placeholder-slate-500"} resize-none focus:outline-none text-sm`,rows:"1",style:{minHeight:"20px",maxHeight:"100px"}})}),_.jsx(ue.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>l(!a),className:`p-2 rounded-lg ${t?"text-slate-400 hover:text-white hover:bg-slate-600/50":"text-slate-600 hover:text-slate-800 hover:bg-white/50"} transition-all duration-200`,children:_.jsx(ud,{size:18})}),_.jsx(ue.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:L,disabled:!e.trim(),className:`p-2 rounded-lg ${e.trim()?`${t?"bg-blue-600 hover:bg-blue-700":"bg-green-600 hover:bg-green-700"} text-white`:`${t?"bg-slate-600 text-slate-400":"bg-gray-300 text-gray-500"} cursor-not-allowed`} transition-all duration-200`,children:_.jsx($b,{size:18})})]}),_.jsx(rs,{children:a&&_.jsx(ue.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:`mt-2 p-2 rounded-xl ${t?"bg-slate-700/90":"bg-white/90"} backdrop-blur-sm border ${t?"border-slate-600/50":"border-white/50"} shadow-lg`,children:_.jsx("div",{className:"grid grid-cols-10 gap-1",children:S.map((b,D)=>_.jsx(ue.button,{whileHover:{scale:1.2},whileTap:{scale:.9},onClick:()=>{n(F=>F+b),l(!1)},className:"p-2 rounded-lg hover:bg-gray-100/20 transition-colors duration-200",children:b},D))})})})]})]})}const d9=()=>{const[t]=_S(rg),[e,n]=M.useState([]),[r,i]=M.useState(null),[a,l]=M.useState([]),[h,f]=M.useState(!0),[p,g]=M.useState(null),w=M.useRef(null),T=M.useRef(null);return M.useEffect(()=>{if(!t){n([]),f(!1);return}const K=Qp(fa(ar,"chats"),Xp("participants","array-contains",t.uid),c1("lastMessageTime","desc"));return w.current=f1(K,Q=>{const Y=[];Q.forEach(N=>{Y.push({id:N.id,...N.data()})}),n(Y),f(!1)},Q=>{console.error("Error loading chats:",Q),g("Failed to load chats"),f(!1)}),()=>{w.current&&w.current()}},[t]),M.useEffect(()=>{if(!r){l([]);return}const K=Qp(fa(ar,"chats",r.id,"messages"),c1("timestamp","asc"),qM(100));return T.current=f1(K,Q=>{const Y=[];Q.forEach(N=>{Y.push({id:N.id,...N.data()})}),l(Y)},Q=>{console.error("Error loading messages:",Q),g("Failed to load messages")}),()=>{T.current&&T.current()}},[r]),{chats:e,activeChat:r,messages:a,loading:h,error:p,setActiveChat:i,createPrivateChat:async(K,Q)=>{if(!t)return null;try{const Y=Qp(fa(ar,"chats"),Xp("participants","array-contains",t.uid),Xp("type","==","private")),N=await XM(Y);let S=null;if(N.forEach(F=>{const P=F.data();P.participants.includes(K)&&(S={id:F.id,...P})}),S)return i(S),S;const A={type:"private",participants:[t.uid,K],participantData:{[t.uid]:{displayName:t.displayName||"Anonymous",photoURL:t.photoURL||null,email:t.email},[K]:Q},createdAt:pa(),lastMessage:null,lastMessageTime:pa(),unreadCount:{[t.uid]:0,[K]:0}},D={id:(await Yp(fa(ar,"chats"),A)).id,...A};return i(D),D}catch(Y){return console.error("Error creating private chat:",Y),g("Failed to create chat"),null}},createGroupChat:async(K,Q,Y=null)=>{if(!t)return null;try{let N=null;if(Y){const D=x1(k1,`group-images/${Date.now()}_${Y.name}`),F=await _1(D,Y);N=await w1(F.ref)}const S={type:"group",name:K,participants:[t.uid,...Q],admin:t.uid,groupImage:N,createdAt:pa(),lastMessage:null,lastMessageTime:pa(),unreadCount:Q.reduce((D,F)=>({...D,[F]:0}),{[t.uid]:0})},b={id:(await Yp(fa(ar,"chats"),S)).id,...S};return i(b),b}catch(N){return console.error("Error creating group chat:",N),g("Failed to create group chat"),null}},sendMessage:async(K,Q="text",Y=null)=>{if(!(!t||!r||!K.trim()&&!Y))try{let N=null,S=null;if(Y){const b=x1(k1,`chat-files/${r.id}/${Date.now()}_${Y.name}`),D=await _1(b,Y);N=await w1(D.ref),S=Y.name}const A={senderId:t.uid,senderName:t.displayName||"Anonymous",senderPhoto:t.photoURL||null,content:K.trim(),type:Q,timestamp:pa(),fileURL:N,fileName:S,reactions:{},edited:!1,replyTo:null};await Yp(fa(ar,"chats",r.id,"messages"),A),await vh(_a(ar,"chats",r.id),{lastMessage:Q==="text"?K:`${Q==="image"?"":""} ${Q}`,lastMessageTime:pa(),[`unreadCount.${t.uid}`]:0})}catch(N){console.error("Error sending message:",N),g("Failed to send message")}},markAsRead:async K=>{if(!(!t||!K))try{await vh(_a(ar,"chats",K),{[`unreadCount.${t.uid}`]:0})}catch(Q){console.error("Error marking as read:",Q)}},deleteMessage:async K=>{if(!(!t||!r))try{await YM(_a(ar,"chats",r.id,"messages",K))}catch(Q){console.error("Error deleting message:",Q),g("Failed to delete message")}},addReaction:async(K,Q)=>{if(!(!t||!r))try{const Y=_a(ar,"chats",r.id,"messages",K);await vh(Y,{[`reactions.${Q}`]:ZM(t.uid)})}catch(Y){console.error("Error adding reaction:",Y)}},removeReaction:async(K,Q)=>{if(!(!t||!r))try{const Y=_a(ar,"chats",r.id,"messages",K);await vh(Y,{[`reactions.${Q}`]:e3(t.uid)})}catch(Y){console.error("Error removing reaction:",Y)}}}};function f9(){const[t,e]=M.useState("private"),[n,r]=M.useState(null),[i,a]=M.useState(!1),[l,h]=M.useState(null),[f,p]=M.useState("sunny"),[g,w]=M.useState(!0),T=M.useRef(null),[C,V,O]=_S(rg),{chats:R,messages:L,sendMessage:U}=d9(C?.uid,n?.id),z=async()=>{try{await y4(rg)}catch(S){console.error("Authentication failed:",S)}};M.useEffect(()=>{!V&&!C&&z()},[V,C]);const[K,Q]=M.useState([{id:1,senderId:"farmer1",senderName:"Mwalimu John",text:"Weather update: Light rains expected in Dodoma region today ",timestamp:new Date(Date.now()-18e5),type:"text",reactions:{"":5,"":2,"":8},replies:[]},{id:2,senderId:"buyer2",senderName:"Grace Market",text:"Current maize prices: 1,200 TSH per kg in Dar market",timestamp:new Date(Date.now()-9e5),type:"text",reactions:{"":12,"":6},replies:[{id:"r1",senderId:"farmer3",senderName:"Peter",text:"That's good pricing! Better than last month",timestamp:new Date(Date.now()-6e5)}]}]);M.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(S=>{h({lat:S.coords.latitude,lng:S.coords.longitude})},S=>{console.log("Location access denied")})},[]),M.useEffect(()=>{const S=["sunny","cloudy","rainy"],A=setInterval(()=>{p(S[Math.floor(Math.random()*S.length)])},1e4);return()=>clearInterval(A)},[]);const Y=i?"bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900":"bg-gradient-to-br from-blue-50 via-green-50 to-blue-100",N=f==="sunny"?D1:f==="cloudy"?lF:oF;return _.jsxs("div",{className:`min-h-screen ${Y} transition-all duration-700 relative overflow-hidden`,children:[_.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(6)].map((S,A)=>_.jsx(ue.div,{className:`absolute w-64 h-64 rounded-full opacity-10 ${i?"bg-blue-400":"bg-green-400"}`,animate:{x:[0,100,0],y:[0,-50,0],scale:[1,1.2,1]},transition:{duration:8+A*2,repeat:1/0,ease:"easeInOut"},style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`}},A))}),_.jsxs("div",{className:"relative z-10 h-screen flex",children:[_.jsxs(ue.div,{className:`w-80 ${i?"bg-slate-800/30":"bg-white/30"} backdrop-blur-lg border-r ${i?"border-slate-700/50":"border-white/30"} flex flex-col`,initial:{x:-300},animate:{x:0},transition:{duration:.5},children:[_.jsxs("div",{className:`p-4 border-b ${i?"border-slate-700/50":"border-white/30"}`,children:[_.jsxs("div",{className:"flex items-center justify-between mb-4",children:[_.jsx("h1",{className:`text-xl font-bold ${i?"text-white":"text-slate-800"}`,children:"Chat Platform"}),_.jsxs("div",{className:"flex items-center space-x-2",children:[_.jsx(ue.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>w(!g),className:`p-2 rounded-lg ${g?"bg-green-500/20 text-green-600":"bg-gray-500/20 text-gray-600"} backdrop-blur-sm`,children:_.jsx(X5,{size:16})}),_.jsx(ue.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>a(!i),className:`p-2 rounded-lg ${i?"bg-yellow-500/20 text-yellow-400":"bg-slate-500/20 text-slate-600"} backdrop-blur-sm`,children:i?_.jsx(D1,{size:16}):_.jsx(PF,{size:16})})]})]}),_.jsx("div",{className:`flex rounded-lg p-1 ${i?"bg-slate-700/50":"bg-white/50"} backdrop-blur-sm`,children:[{id:"private",icon:sg,label:"Private"},{id:"group",icon:Hb,label:"Groups"},{id:"nearby",icon:ld,label:"Nearby"}].map(S=>_.jsxs(ue.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>e(S.id),className:`flex-1 flex items-center justify-center py-2 px-3 rounded-md text-sm font-medium transition-all duration-200 ${t===S.id?`${i?"bg-blue-600 text-white":"bg-green-600 text-white"} shadow-lg`:`${i?"text-slate-300 hover:text-white":"text-slate-600 hover:text-slate-800"}`}`,children:[_.jsx(S.icon,{size:16,className:"mr-1"}),S.label]},S.id))})]}),_.jsx("div",{className:"flex-1 overflow-hidden",children:_.jsxs(rs,{mode:"wait",children:[t==="private"&&_.jsx(o9,{chats:R,selectedChat:n,onSelectChat:r,isDarkMode:i}),t==="group"&&_.jsx(h9,{isDarkMode:i,messages:K,setMessages:Q}),t==="nearby"&&_.jsx(c9,{userLocation:l,isDarkMode:i})]})})]}),_.jsx("div",{className:"flex-1 flex flex-col",children:n||t==="group"?_.jsxs(_.Fragment,{children:[_.jsx(a9,{chat:n||{name:"Farmers Community",online:!0},isDarkMode:i,weatherMood:f,WeatherIcon:N}),_.jsx("div",{ref:T,className:"flex-1 overflow-hidden",children:_.jsx(l9,{messages:t==="group"?K:L,isDarkMode:i,isGroup:t==="group"})}),_.jsx(u9,{onSendMessage:S=>{t==="group"?Q(A=>[...A,{id:Date.now(),senderId:C?.uid||"anonymous",senderName:C?.displayName||"You",text:S.text,timestamp:new Date,type:S.type,reactions:{},replies:[]}]):n&&U&&U(S.text,S.type,S.file)},isDarkMode:i})]}):_.jsx(ue.div,{className:"flex-1 flex items-center justify-center",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:_.jsxs("div",{className:"text-center",children:[_.jsx(ue.div,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},className:`w-32 h-32 mx-auto mb-6 rounded-full ${i?"bg-slate-700/50":"bg-white/50"} backdrop-blur-lg flex items-center justify-center border ${i?"border-slate-600/50":"border-white/30"}`,children:_.jsx(sg,{size:48,className:i?"text-blue-400":"text-green-600"})}),_.jsx("h3",{className:`text-2xl font-bold ${i?"text-white":"text-slate-800"} mb-2`,children:"Welcome to SmartFarm Chat"}),_.jsx("p",{className:`${i?"text-slate-300":"text-slate-600"} max-w-md`,children:"Connect with farmers and buyers in your area. Share experiences, negotiate deals, and grow together."})]})})})]})]})}function p9(){return _.jsx(sR,{children:_.jsxs(YC,{children:[_.jsx(xh,{path:"/",element:_.jsx(fR,{})}),_.jsx(xh,{path:"/weather",element:_.jsx(nV,{})}),_.jsx(xh,{path:"/chat",element:_.jsx(f9,{})})]})})}iC.createRoot(document.getElementById("root")).render(_.jsx(j1.StrictMode,{children:_.jsx(p9,{})}));
